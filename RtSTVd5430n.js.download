if (self.CavalryLogger) { CavalryLogger.start_js(["MPtmF"]); }

__d("AdBreakExperimentalTextUtils",["fbt","React","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";var i={getHoldoutToolTipContentForVideo:function j(){return c("React").createElement("div",null,i.getToolTipTitle(),c("React").createElement("br",null),c("React").createElement(c("XUIText.react"),{display:"block"},h._("For this video, a small percentage of your viewers will be split into a group for the test. Some viewers will see ads and some won't. The remaining viewers are not affected.")),c("React").createElement("br",null),c("React").createElement(c("XUIText.react"),{display:"block"},h._("When you turn on holdout testing for a video, the test will run for 14 days or until the test group with ad breaks earns $100. Test results are available in your Page's Insights.")))},getToolTipTitle:function j(){return c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("How Holdouts Work For Ad Breaks"))}};f.exports=i}),null);
__d("FundraiserForStoryCharityPickerRelaySearchSourceQuery.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i=[{kind:"LocalArgument",name:"query",type:"String!",defaultValue:null},{kind:"LocalArgument",name:"limit",type:"Int!",defaultValue:null},{kind:"LocalArgument",name:"scale",type:"Float!",defaultValue:null}],j=[{kind:"Variable",name:"query",variableName:"query",type:"String"}],k=[{kind:"Variable",name:"first",variableName:"limit",type:"Int"},{kind:"Literal",name:"is_fundraiser_for_story_eligible",value:true,type:"Boolean"},{kind:"Literal",name:"is_fundraiser_person_to_charity_eligible",value:false,type:"Boolean"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},n={kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:[{kind:"Literal",name:"height",value:32,type:"Int"},{kind:"Variable",name:"scale",variableName:"scale",type:"Float"},{kind:"Literal",name:"width",value:32,type:"Int"}],concreteType:"Image",plural:false,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},o={kind:"LinkedField",alias:null,name:"charity_picker_subtitle",storageKey:null,args:null,concreteType:"TextWithEntities",plural:false,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}]},p={kind:"ScalarField",alias:null,name:"is_verified",args:null,storageKey:null};return{kind:"Request",operationKind:"query",name:"FundraiserForStoryCharityPickerRelaySearchSourceQuery",id:"1443517632408644",text:null,metadata:{},fragment:{kind:"Fragment",name:"FundraiserForStoryCharityPickerRelaySearchSourceQuery",type:"Query",metadata:null,argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"fundraiser_charity_search",storageKey:null,args:j,concreteType:"FundraiserCharitySearchQuery",plural:false,selections:[{kind:"LinkedField",alias:null,name:"search_results",storageKey:null,args:k,concreteType:"FundraiserCharitySearchResultsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"FundraiserCharitySearchResultsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[l,m,n,o,{kind:"InlineFragment",type:"FundraiserCharity",selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:null,concreteType:"Page",plural:false,selections:[p]}]}]}]}]}]}]},operation:{kind:"Operation",name:"FundraiserForStoryCharityPickerRelaySearchSourceQuery",argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"fundraiser_charity_search",storageKey:null,args:j,concreteType:"FundraiserCharitySearchQuery",plural:false,selections:[{kind:"LinkedField",alias:null,name:"search_results",storageKey:null,args:k,concreteType:"FundraiserCharitySearchResultsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"FundraiserCharitySearchResultsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l,m,n,o,{kind:"InlineFragment",type:"FundraiserCharity",selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:null,concreteType:"Page",plural:false,selections:[p,l]}]}]}]}]}]}]}}}();f.exports=h}),null);
__d("FundraiserForStoryCharityPickerRelaySearchSource",["AbstractRelaySearchSource","RelayFBEnvironment","SearchableEntry","RelayModern","idx","FundraiserForStoryCharityPickerRelaySearchSourceQuery.graphql"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("RelayModern").graphql,k=10,l=function l(){return c("FundraiserForStoryCharityPickerRelaySearchSourceQuery.graphql")};function m(q){return{query:l,variables:{query:q,limit:k}}}function n(q){var r,s=(r=q)!=null?(r=r.fundraiser_charity_search)!=null?(r=r.search_results)!=null?r.edges:r:r:r;if(!s)return[];return s.map(function(t,u){var v,w,x,y=t.node;return new(c("SearchableEntry"))({uniqueID:y.id,title:y.name,subtitle:(v=y)!=null?(v=v.charity_picker_subtitle)!=null?v.text:v:v,photo:(w=y)!=null?(w=w.profile_picture)!=null?w.uri:w:w,order:u,auxiliaryData:{verified:(x=y)!=null?(x=x.page)!=null?x.is_verified:x:x}})})}var o=function o(q,r){return r(q)};h=babelHelpers.inherits(p,c("AbstractRelaySearchSource"));i=h&&h.prototype;function p(){var q={bootstrapRequests:[{gen:function r(s){return m(s)}}],queryRequests:[{gen:function r(s){return m(s)}}],packageFn:n,getAllForEmptyQuery:true};i.constructor.call(this,c("RelayFBEnvironment"),q,o)}f.exports=p}),null);
__d("XLiveBroadcastCaptionEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/live/caption/editor/",{video_id:{type:"FBID"}})}),null);
__d("LiveVideoCaptionsSection.react",["fbt","AsyncRequest","AdsVideoCaptionLoadingView.react","JSResource","React","RelayDeferredContainer","RelayVideoCaptionRoute","VideoCaptionConstants","VideoCaptionRenderUtil","VideoCaptionPlacements","XUIButton.react","XLiveBroadcastCaptionEditorController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$LiveVideoCaptionsSection2=function(event){this.setState({showCaptionEditor:true})}.bind(this);this.$LiveVideoCaptionsSection4=function(m){this.setState({liveCaptions:m.getPayload()})}.bind(this);this.$LiveVideoCaptionsSection5=function(m){this.setState({showCaptionEditor:false})}.bind(this);this.state={liveCaptions:{},showCaptionEditor:false}}k.prototype.componentDidMount=function(){this.props.videoID&&this.$LiveVideoCaptionsSection1()};k.prototype.render=function(){var l=c("React").createElement(c("XUIButton.react"),{label:h._("Edit Live Captions"),use:"default",onClick:this.$LiveVideoCaptionsSection2});return c("React").createElement("div",null,l,this.$LiveVideoCaptionsSection3())};k.prototype.$LiveVideoCaptionsSection1=function(){var l=c("XLiveBroadcastCaptionEditorController").getURIBuilder().setFBID("video_id",this.props.videoID).getURI();new(c("AsyncRequest"))().setURI(l).setMethod("POST").setHandler(this.$LiveVideoCaptionsSection4).send()};k.prototype.$LiveVideoCaptionsSection3=function(){var l=this.state.liveCaptions;if(!this.state.showCaptionEditor||!l.id)return null;var m=new(c("RelayVideoCaptionRoute"))({caption_id:l.id,hide_apply_button:false,hide_save_button:true,placement:c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT,onExit:this.$LiveVideoCaptionsSection5}),n=h._("Edit Live Captions"),o=c("React").createElement(c("RelayDeferredContainer"),{loader:c("JSResource")("VideoCaptionEditorContainer.react").__setRef("LiveVideoCaptionsSection.react"),render:function p(q,r){return c("React").createElement(q,r)},renderLoading:function(){return c("React").createElement(c("AdsVideoCaptionLoadingView.react"),{onCancel:function(){this.setState({showCaptionEditor:false})}.bind(this)})}.bind(this),route:m});return c("VideoCaptionRenderUtil").renderDialog(c("VideoCaptionConstants").EDITOR_DIALOG_WIDTH,n,o,this.$LiveVideoCaptionsSection5)};f.exports=k}),null);
__d("VideoUploadAutoCaptionsSection.react",["ix","fbt","AdsVideoCaptionLoadingView.react","Image.react","InsightsLocaleNamesSwitch","JSResource","React","RelayDeferredContainer","RelayVideoCaptionRoute","Tooltip","VideoCaptionConstants","VideoCaptionEditEvents","VideoCaptionEditorLogger","VideoCaptionFile","VideoCaptionRenderUtil","VideoCaptionPlacements","VideoCaptionUtil","XUIButton.react","fbglyph","VideoCaptionEditorStateEnums"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("VideoCaptionEditorStateEnums").EditorStateEnum,m=c("InsightsLocaleNamesSwitch").module;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){__p&&__p();k.constructor.call(this,o);this.$VideoUploadAutoCaptionsSection3=function(event){var p=this.state.autoCaptions[0];this.setState({showCaptionEditor:true});this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").CLICK_EDIT_AUTO_CAPTION,p&&p.id,this.props.videoID,null,this.props.hasAutoCaption.toString(),c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)}.bind(this);this.$VideoUploadAutoCaptionsSection6=function(){c("VideoCaptionRenderUtil").renderAbortGenAutoCaption(this.$VideoUploadAutoCaptionsSection7)}.bind(this);this.$VideoUploadAutoCaptionsSection7=function(){var p=this.state.autoCaptions[0];this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").ABORT_WAIT_GEN,p&&p.id,this.props.videoID,null,null,c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT);this.$VideoUploadAutoCaptionsSection8()}.bind(this);this.$VideoUploadAutoCaptionsSection5=function(p,q){__p&&__p();var r,s=this;this.$VideoUploadAutoCaptionsSection8();if(p===l.SAVING)(function(){var u=s.state.autoCaptions[0].locale||"en_US",v=s.props.addedCaptions.filter(function(x){return x.getLocale()!==u});if(q){var w=new(c("VideoCaptionFile"))(q,u,m[u]);w.setIsAutoGenerated(true);w.setIsDefault(true);s.props.onSaveCaptions(v.concat([w]))}else s.props.onSaveCaptions(v)})();else{var t=this.state.autoCaptions[0];this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").CANCEL_EDIT,t&&t.id,this.props.videoID,null,null,c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)}}.bind(this);this.$VideoUploadAutoCaptionsSection1=new(c("VideoCaptionEditorLogger"))();this.state={autoCaptions:[],showCaptionEditor:false}}n.prototype.componentDidMount=function(){this.props.videoID&&this.$VideoUploadAutoCaptionsSection2()};n.prototype.componentDidUpdate=function(o){this.props.videoID&&!o.videoID&&this.$VideoUploadAutoCaptionsSection2()};n.prototype.$VideoUploadAutoCaptionsSection2=function(){c("VideoCaptionUtil").fetchAutoCaption(this.props.videoID,this.props.accessToken).then(function(o){o.data&&this.setState({autoCaptions:o.data});var p=o.data;if(p&&p[0]&&p[0].id)this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").FETCHED_SUCCESS,p.id,this.props.videoID,null,true.toString(),c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)}.bind(this)).done();this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").RENDER_CAPTION_ENTRY,null,this.props.videoID,null,null,c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)};n.prototype.render=function(){var o=void 0;if(this.props.hasAutoCaption)o=c("React").createElement(c("XUIButton.react"),{label:i._("Edit Captions"),use:"default",onClick:this.$VideoUploadAutoCaptionsSection3});else{var p=this.props.disabled?i._("We only support edit auto caption now and will support to edit all captions in the near future."):i._("Automatically generate captions");o=this.state.autoCaptions[0]?c("React").createElement(c("XUIButton.react"),babelHelpers["extends"]({disabled:this.props.disabled,image:c("React").createElement(c("Image.react"),{src:h("142451")}),label:i._("Generate"),href:"#",use:"default",onClick:this.$VideoUploadAutoCaptionsSection3},c("Tooltip").propsFor(p))):null}return c("React").createElement("div",null,o,this.$VideoUploadAutoCaptionsSection4())};n.prototype.$VideoUploadAutoCaptionsSection4=function(){var o=this.state.autoCaptions[0];if(!this.state.showCaptionEditor||!o.id)return null;var p=new(c("RelayVideoCaptionRoute"))({caption_id:o.id,hide_apply_button:true,hide_save_button:false,placement:c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT,onExit:this.$VideoUploadAutoCaptionsSection5}),q=i._("Review Captions"),r=c("React").createElement(c("RelayDeferredContainer"),{loader:c("JSResource")("VideoCaptionEditorContainer.react").__setRef("VideoUploadAutoCaptionsSection.react"),render:function s(t,u){return c("React").createElement(t,u)},renderLoading:function(){return c("React").createElement(c("AdsVideoCaptionLoadingView.react"),{onCancel:this.$VideoUploadAutoCaptionsSection6})}.bind(this),route:p});return c("VideoCaptionRenderUtil").renderDialog(c("VideoCaptionConstants").EDITOR_DIALOG_WIDTH,q,r,this.$VideoUploadAutoCaptionsSection5)};n.prototype.$VideoUploadAutoCaptionsSection8=function(){this.setState({showCaptionEditor:false})};f.exports=n}),null);
__d("VideoCopyrightMatchDetectionSwitch.react",["cx","fbt","BUISwitch.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={isDetectingMatches:this.props.isDetectingMatches},n}l.prototype.$VideoCopyrightMatchDetectionSwitch1=function(){if(!this.props.showCustomLabel)return null;return c("React").createElement("span",{className:"_1-69 _3-8x"},this.state.isDetectingMatches?i._("ENABLED"):i._("DISABLED"))};l.prototype.$VideoCopyrightMatchDetectionSwitch2=function(m){return c("React").createElement(c("BUISwitch.react"),{value:this.state.isDetectingMatches,showLabel:m,onToggle:function(n){this.setState({isDetectingMatches:n});this.props.onChange(n)}.bind(this)})};l.prototype.render=function(){return c("React").createElement("span",null,this.$VideoCopyrightMatchDetectionSwitch1(),c("React").createElement("div",{className:this.props.showCustomLabel?"_1-6a":""},this.$VideoCopyrightMatchDetectionSwitch2(!this.props.showCustomLabel)))};l.defaultProps={isDetectingMatches:true};f.exports=l}),null);
__d("VideoCopyrightReferenceFileExcludeSegmentRow.react",["cx","fbt","ClockFormatConverter","LeftRight.react","Keys","React","XUICloseButton.react","XUITextInput.react","Grid.react","VideoCopyrightMonitoringSelector.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("Grid.react").GridItem;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={startTime:this.props.startTimeInSec!=null?c("ClockFormatConverter").secondsToTimestamp(this.props.startTimeInSec):"",endTime:this.props.durationInSec!=null?c("ClockFormatConverter").secondsToTimestamp((this.props.startTimeInSec||0)+this.props.durationInSec):"",editingStartTime:false,editingEndTime:false},o}m.prototype.componentWillReceiveProps=function(n){"use strict";if(this.getErrorMessageOnStartTimeField()!=null||this.getErrorMessageOnEndTimeField()!=null)return;if(this.props.startTimeInSec===n.startTimeInSec&&this.props.durationInSec===n.durationInSec&&this.props.mediaType===this.props.mediaType)return;this.setState({startTime:n.startTimeInSec!=null?c("ClockFormatConverter").secondsToTimestamp(n.startTimeInSec):"",endTime:n.durationInSec!=null?c("ClockFormatConverter").secondsToTimestamp((n.startTimeInSec||0)+n.durationInSec):""})};m.prototype.getErrorMessageOnStartTimeField=function(){"use strict";if(c("ClockFormatConverter").validate(this.state.startTime)){var n=c("ClockFormatConverter").timestampToSeconds(this.state.startTime);if(n>this.props.totalVideoDurationInSec)return i._("Your video ends before this time code")}return null};m.prototype.getErrorMessageOnEndTimeField=function(){"use strict";__p&&__p();if(this.state.endTime=="")return null;if(c("ClockFormatConverter").validate(this.state.endTime)){var n=c("ClockFormatConverter").timestampToSeconds(this.state.endTime);if(n>this.props.totalVideoDurationInSec)return i._("Your video ends before this time code");if(this.state.startTime!=""&&c("ClockFormatConverter").validate(this.state.startTime)){var o=c("ClockFormatConverter").timestampToSeconds(this.state.startTime);if(n<o)return i._("This is before the start time of the segment you're trying to exclude");if(n==o)return i._("The start time and end time of your segment can't be the same")}}return null};m.prototype.getIncrementedOrDecrementedTime=function(n,o){"use strict";var p=c("ClockFormatConverter").timestampToSeconds(o);if(n===c("Keys").UP&&p<this.props.totalVideoDurationInSec)return c("ClockFormatConverter").secondsToTimestamp(p+1);else if(n===c("Keys").DOWN&&p>0)return c("ClockFormatConverter").secondsToTimestamp(p-1);return null};m.prototype.render=function(){"use strict";__p&&__p();return c("React").createElement(c("LeftRight.react"),{key:this.props.index,className:"_2xss"},c("React").createElement(c("VideoCopyrightMonitoringSelector.react"),{onChange:function(n){return this.props.onExcludedSegmentMonitoringTypeChange(this.props.index,n.value)}.bind(this),value:this.props.mediaType,disabled:false}),c("React").createElement(c("Grid.react"),{className:"_2xsu",cols:3},c("React").createElement(l,null,c("React").createElement(c("XUITextInput.react"),{className:"_2xst"+(this.state.editingStartTime?" _fgf":""),value:this.state.startTime,xuiError:this.getErrorMessageOnStartTimeField(),onBlur:function(){if(!c("ClockFormatConverter").validate(this.state.startTime))this.setState({startTime:this.props.startTimeInSec!=null?c("ClockFormatConverter").secondsToTimestamp(this.props.startTimeInSec):""});this.setState({editingStartTime:false})}.bind(this),onChange:function(n){__p&&__p();var o=n.target.value;if(o===this.state.startTime)return;this.setState({startTime:o},function(){if(c("ClockFormatConverter").validate(this.state.startTime)){var p=c("ClockFormatConverter").normalizeMinutesTimestamp(this.state.startTime);this.props.onExcludedSegmentStartTimeChange(this.props.index,p);if(!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.startTime)}}.bind(this))}.bind(this),onFocus:function(n){var o=n.target.value;if(c("ClockFormatConverter").validate(o)&&!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(o);this.setState({editingStartTime:true})}.bind(this),onKeyDown:function(n){var o=this.getIncrementedOrDecrementedTime(n.keyCode,this.state.startTime);if(o===null)return;this.setState({startTime:o},function(){this.props.onExcludedSegmentStartTimeChange(this.props.index,o);if(!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.startTime)}.bind(this))}.bind(this),placeholder:i._("hh{Time separator}mm{Time separator}ss",[i.param("Time separator",c("ClockFormatConverter").TIME_SEPARATOR)])})),c("React").createElement(l,null,c("React").createElement(c("XUITextInput.react"),{className:"_2xst"+(this.state.editingEndTime?" _fgf":""),value:this.state.endTime,xuiError:this.getErrorMessageOnEndTimeField(),onBlur:function(){if(!c("ClockFormatConverter").validate(this.state.endTime))this.setState({endTime:this.props.durationInSec!=null?c("ClockFormatConverter").secondsToTimestamp((this.props.startTimeInSec||0)+this.props.durationInSec):""});this.setState({editingEndTime:false})}.bind(this),onChange:function(n){__p&&__p();var o=n.target.value;if(o===this.state.endTime)return;this.setState({endTime:o},function(){if(c("ClockFormatConverter").validate(this.state.endTime)){var p=c("ClockFormatConverter").normalizeMinutesTimestamp(this.state.endTime);this.props.onExcludedSegmentEndTimeChange(this.props.index,p);if(!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.endTime)}}.bind(this))}.bind(this),onFocus:function(n){var o=n.target.value;if(c("ClockFormatConverter").validate(o)&&!this.getErrorMessageOnEndTimeField())this.props.onUpdateSeekPlayerPositionInMS(o);this.setState({editingEndTime:true})}.bind(this),onKeyDown:function(n){var o=this.getIncrementedOrDecrementedTime(n.keyCode,this.state.endTime);if(o===null)return;this.setState({endTime:o},function(){this.props.onExcludedSegmentEndTimeChange(this.props.index,o);if(!this.getErrorMessageOnEndTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.endTime)}.bind(this))}.bind(this),placeholder:i._("hh{Time separator}mm{Time separator}ss",[i.param("Time separator",c("ClockFormatConverter").TIME_SEPARATOR)])})),c("React").createElement(l,null,c("React").createElement(c("XUICloseButton.react"),{className:"_2xsi",onClick:function(n){n.preventDefault();n.stopPropagation();this.props.onDeleteSegment(this.props.index)}.bind(this),size:"small"}))))};f.exports=m}),null);
__d("VideoReferenceMatchSegmentBar.react",["ix","cssVar","cx","FBMultiSegmentBar.react","Grid.react","Image.react","React","VideoUtils","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(n){"use strict";l.constructor.call(this,n);this.state=this.$VideoReferenceMatchSegmentBar1(n)}m.prototype.componentWillReceiveProps=function(n){"use strict";this.setState(this.$VideoReferenceMatchSegmentBar1(n))};m.prototype.$VideoReferenceMatchSegmentBar1=function(n){"use strict";var o=[],p=0;n.segments.forEach(function(q,r){var s=q.durationInSec,t=q.matchedStartTimeInSec,u=t+s,v=c("VideoUtils").formatTime(t)+" - "+c("VideoUtils").formatTime(u);p+=s;var w={startPercentage:t/this.props.totalTime*100,endPercentage:(t+s)/this.props.totalTime*100,tooltip:v};o.push(w)}.bind(this));return{segments:o,segmentsTotalTime:Math.min(this.props.totalTime,p)}};m.prototype.$VideoReferenceMatchSegmentBar2=function(n){"use strict";if(this.props.totalTime<=0)return"--%";n=Math.min(n,this.props.totalTime);var o=Math.round(n*100/this.props.totalTime);return o+"%"};m.prototype.$VideoReferenceMatchSegmentBar3=function(n){"use strict";return c("VideoUtils").formatTime(n)};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_35lq"},c("React").createElement(c("Grid.react"),{cols:4},c("React").createElement(c("Image.react"),{className:"_35lr",src:this.props.isAudio?h("142978"):h("141747")}),c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_35ls"},this.$VideoReferenceMatchSegmentBar3(this.state.segmentsTotalTime)),c("React").createElement(c("FBMultiSegmentBar.react"),{className:"_35lt _2xsl",segments:this.state.segments,segmentsColor:"#ffffff",highlightedSegmentsColor:"#ffffff"}),c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_35ls _35lu"},this.$VideoReferenceMatchSegmentBar2(this.state.segmentsTotalTime))))};f.exports=m}),null);
__d("VideoUploadUILogger",["BanzaiLogger"],(function a(b,c,d,e,f,g){__p&&__p();var h="VideoUploadUILoggerConfig";function i(j){"use strict";this.$VideoUploadUILogger1=j.waterfall_id;this.$VideoUploadUILogger5=j.actor_id;this.$VideoUploadUILogger2=j.target_id;this.$VideoUploadUILogger3=j.target_type;this.$VideoUploadUILogger4=j.composer_entry_point_ref}i.prototype.logEvent=function(event,j,k){"use strict";c("BanzaiLogger").log(h,{event:event,tab:j,error:k,waterfall_id:this.$VideoUploadUILogger1,actor_id:this.$VideoUploadUILogger5,target_id:this.$VideoUploadUILogger2,target_type:this.$VideoUploadUILogger3,composer_entry_point_ref:this.$VideoUploadUILogger4})};f.exports=i}),null);
__d("ComposerVideoShowsPreviewState",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({VIDEO_PLAYER:"VIDEO_PLAYER",SIXTEEN_NINE:"SIXTEEN_NINE",SQUARE_CROPPER:"SQUARE_CROPPER"});f.exports=h}),null);
__d("ShowsUploadDialogNuxTour.react",["fbt","AdsBlueTipTour.react","AsyncRequest","React","XBasicFBNuxViewController","XUIText.react","ge"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=4918,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.$ShowsUploadDialogNuxTour1=function(){var n=c("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",k).getURI();new(c("AsyncRequest"))().setURI(n).send()};m.prototype.$ShowsUploadDialogNuxTour2=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Write a Video Title")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Titles will be displayed prominently on Facebook. They're an important way for viewers to discover your video.")))};m.prototype.$ShowsUploadDialogNuxTour3=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Select a Video Type")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Episode are the signature, recurring content of your show. Videos can be extras such as interviews, behind-the-scenes tours or bonus footage.")))};m.prototype.$ShowsUploadDialogNuxTour4=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Add Video Tags")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Listing topics related to your video is an important way for viewers to find your content. Tags also help make ads more relevant for your audience if you place ad breaks in your video.")))};m.prototype.$ShowsUploadDialogNuxTour5=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Create Seasons and Playlists")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("You can organize your videos into seasons or playlists around a theme. Seasons can only include episodes. Playlists can include episodes and any of your other videos.")))};m.prototype.$ShowsUploadDialogNuxTour6=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Add a Thumbnail")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Your video's thumbnail will represent your video across Facebook. Thumbnails must also be able to fit into a square format. Tip: Avoid text on your thumbnail.")))};m.prototype.render=function(){var n=m.componentsLoaded();if(!n)return null;return c("React").createElement(c("AdsBlueTipTour.react"),{steps:this.renderSteps(),onComplete:this.$ShowsUploadDialogNuxTour1,onXOut:this.$ShowsUploadDialogNuxTour1})};m.prototype.renderSteps=function(){var n=[{content:this.$ShowsUploadDialogNuxTour3(),context:c("ge")("selectVideoTypeStep"),position:"right",offsetX:-120,offsetY:-14},{content:this.$ShowsUploadDialogNuxTour2(),context:c("ge")("writeVideoTitle"),position:"right",offsetX:-170,offsetY:-12},{content:this.$ShowsUploadDialogNuxTour4(),context:c("ge")("addVideoTags"),position:"right",offsetX:-210,offsetY:-15},{content:this.$ShowsUploadDialogNuxTour5(),context:c("ge")("addToSeasonAndPlaylist"),position:"right",offsetX:-120,offsetY:2},{content:this.$ShowsUploadDialogNuxTour6(),context:c("ge")("customizeThumbnail"),position:"above",offsetX:280,offsetY:325}];return n};m.componentsLoaded=function(){return c("ge")("selectVideoTypeStep")!==null&&c("ge")("writeVideoTitle")!==null&&c("ge")("addVideoTags")!==null&&c("ge")("addToSeasonAndPlaylist")!==null&&c("ge")("customizeThumbnail")!==null};function m(){i.apply(this,arguments)}f.exports=m}),null);
__d("ComposerLiveVideoCaptionsField.react",["cx","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes","LiveVideoCaptionsSection.react"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("React").PropTypes,j=c("React").createClass({displayName:"ComposerLiveVideoCaptionsField",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{disabled:i.bool,videoID:i.string},statics:{calculateState:function k(l,m){}},render:function k(){return c("React").createElement("div",null,c("React").createElement(c("LiveVideoCaptionsSection.react"),{disabled:false,videoID:this.props.videoID,onSaveCaptions:this._onSaveCaptions}))},_onSaveCaptions:function k(l){l=l||[];c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,l)}});f.exports=j}),null);
__d("ComposerVideoUploadAutoCaptionsField.react",["cx","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes","VideoCaption","VideoUploadAutoCaptionsSection.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"ComposerVideoUploadAutoCaptionsField",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{accessToken:i.string,addedCaptions:i.arrayOf(i.instanceOf(c("VideoCaption"))).isRequired,className:i.string,disabled:i.bool,videoID:i.string},statics:{calculateState:function k(l,m){var n=c("ComposerVideoUploadStore").getLastCaptionUploadErrorMessage(l),o=false,p=false,q=m.addedCaptions;if(q&&q.length>0){o=q.some(function(r){return r.is_auto_generated});if(!o)p=q.some(function(r){return r.getLocale()==="en_US"})}return{autoCaptionDisabled:p,lastCaptionUploadErrorMessage:n,hasAutoCaption:o}}},render:function k(){return c("React").createElement("div",{className:"_4_90"},c("React").createElement(c("VideoUploadAutoCaptionsSection.react"),{accessToken:this.props.accessToken,addedCaptions:this.props.addedCaptions,disabled:this.state.autoCaptionDisabled,hasAutoCaption:this.state.hasAutoCaption,uploadErrorMessage:this.state.lastCaptionUploadErrorMessage,videoID:this.props.videoID,onSaveCaptions:this._onSaveCaptions}))},_onSaveCaptions:function k(l){l=l||[];c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,l)}});f.exports=j}),null);
__d("VideoCaptionList.react",["cx","fbt","ComposerLiveVideoCaptionsField.react","ComposerVideoUploadAutoCaptionsField.react","ComposerVideoUploadTooltip.react","FileInput.react","InfoTable.react","InfoTableRow.react","InfoTableSection.react","InfoTableSimpleRow.react","React","ReactDOM","Token.react","VideoCaption","XUIButton.react","XUINotice.react","XUISelector.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=c("XUISelector.react").Option;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$VideoCaptionList2=function(t){var u=this.$VideoCaptionList8.bind(this,t.getLocale());return c("React").createElement(c("Token.react"),{key:t.getLocale(),label:t.getLocaleName()+": "+t.getLocale(),removable:this.props.captionsEditable,onRemove:u})}.bind(this),this.$VideoCaptionList3=function(){return this.props.uploadErrorMessage?c("React").createElement(c("InfoTableSection.react"),null,c("React").createElement(c("InfoTableSimpleRow.react"),null,c("React").createElement(c("XUINotice.react"),{className:"_3-95",use:"warn"},this.props.uploadErrorMessage))):null}.bind(this),this.$VideoCaptionList5=function(){this.props.onUploadClick&&this.props.onUploadClick()}.bind(this),this.$VideoCaptionList8=function(t){this.props.onRemoveCaption(t)}.bind(this),this.$VideoCaptionList4=function(event){var t=event.target;if(t.value){this.props.onUploadCaption(t);this.refs.captionFileInput.getFileInput().clear()}}.bind(this),this.$VideoCaptionList7=function(t){this.props.onSetDefaultCaption(t.value)}.bind(this),p}n.prototype.componentDidUpdate=function(){if(this.refs.captionsList){var o=c("ReactDOM").findDOMNode(this.refs.captionsList),p=o.scrollHeight-o.clientHeight;o.scrollTop=p}};n.prototype.render=function(){var o=null,p=null;if(this.props.captions.length>0||this.props.liveCaptions.length>0)p=this.$VideoCaptionList1();if(this.props.captions.length>0)o=c("React").createElement("div",{ref:"captionsList",className:"_3di-"+(this.props.uploadErrorMessage&&this.props.uploadErrorMessage.length>0?" _5w5d":"")},this.props.captions.map(this.$VideoCaptionList2),c("React").createElement("div",{className:"clearfix"}));var q=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("You can include captions in multiple languages with your video by uploading a SubRip (.srt) file with it. Each SubRip file must be saved using the format: filename.[two-letter language code]_[two-letter country code].srt"),alignv:"bottom"}),r=this.props.showAutoCaptionsSection?c("React").createElement(c("ComposerVideoUploadAutoCaptionsField.react"),{accessToken:this.props.accessToken,addedCaptions:this.props.captions,disabled:false,videoID:this.props.videoID}):null;return c("React").createElement(c("InfoTable.react"),{className:this.props.className},this.$VideoCaptionList3(),c("React").createElement(c("InfoTableSection.react"),null,c("React").createElement(c("InfoTableRow.react"),{label:i._("Video Captions"),helpLink:q},c("React").createElement("div",{className:"_3-98"},o,c("React").createElement(c("FileInput.react"),{accept:".srt",ref:"captionFileInput",multiple:this.props.allowBulkUpload,onChange:this.$VideoCaptionList4,onClick:this.$VideoCaptionList5,disabled:!this.props.captionsEditable},c("React").createElement(c("XUIButton.react"),{size:"medium",use:"default",label:i._("Upload SRT File"),disabled:!this.props.captionsEditable,href:{url:"#"}})),r)),this.$VideoCaptionList6(),p))};n.prototype.$VideoCaptionList6=function(){if(this.props.liveCaptions.length<=0||!this.props.showLiveCaptionSection)return null;var o=c("React").createElement("div",{ref:"captionsList",className:"_3di-"+(this.props.uploadErrorMessage&&this.props.uploadErrorMessage.length>0?" _5w5d":"")},this.props.liveCaptions.map(this.$VideoCaptionList2),c("React").createElement("div",{className:"clearfix"})),p=c("React").createElement(c("ComposerLiveVideoCaptionsField.react"),{disabled:false,videoID:this.props.videoID}),q=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("These captions appear while your video is live. You can edit live captions after your broadcast is finished."),alignv:"bottom"});return c("React").createElement(c("InfoTableRow.react"),{label:i._("Live Video Captions"),helpLink:q},c("React").createElement("div",{className:"_3-98"},o,p))};n.prototype.$VideoCaptionList1=function(){if(!this.props.showDefaultLocaleRow)return null;var o=this.props.captions.concat(this.props.liveCaptions),p="none",q=o.map(function(s){if(s.getIsDefault())p=s.getLocale();return c("React").createElement(m,{value:s.getLocale(),key:s.getLocale()},s.getLocaleName()+": "+s.getLocale())});q.unshift(c("React").createElement(m,{value:"none",key:"none"},i._("None")));var r=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("You can choose a default language for captions to appear on videos when the preferred language isn't available."),alignv:"bottom"});return c("React").createElement(c("InfoTableRow.react"),{label:i._("Default Language"),helpLink:r},c("React").createElement(c("XUISelector.react"),{className:"_3-98",disabled:!this.props.captionsEditable,value:p,onChange:this.$VideoCaptionList7},q))};n.propTypes={accessToken:l.string,allowBulkUpload:l.bool,captions:l.arrayOf(l.instanceOf(c("VideoCaption"))).isRequired,liveCaptions:l.arrayOf(l.instanceOf(c("VideoCaption"))).isRequired,captionsEditable:l.bool.isRequired,showAutoCaptionsSection:l.bool,showDefaultLocaleRow:l.bool,showLiveCaptionSection:l.bool,uploadErrorMessage:l.string,videoID:l.string,onRemoveCaption:l.func.isRequired,onSetDefaultCaption:l.func.isRequired,onUploadCaption:l.func.isRequired,onUploadClick:l.func};n.defaultProps={captions:[],liveCaptions:[],uploadErrorMessage:"",allowBulkUpload:false,showDefaultLocaleRow:true};f.exports=n}),null);
__d("ComposerCharityTypeahead.react",["cx","fbt","React","XUITypeahead.react","FundraiserForStoryCharityPickerRelaySearchSource","SearchableEntry"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(m){__p&&__p();k.constructor.call(this,m);this.$ComposerCharityTypeahead2=function(n){var o=n.target.value;this.setState({query:o});if(!o&&this.props.onClear)this.props.onClear()}.bind(this);this.$ComposerCharityTypeahead3=function(n){this.setState({query:n.getTitle()});this.props.onSelect(n)}.bind(this);this.$ComposerCharityTypeahead1=new(c("FundraiserForStoryCharityPickerRelaySearchSource"))();this.state={query:""}}l.prototype.componentDidMount=function(){this.props.focusOnMount&&this.refs.typeahead&&this.refs.typeahead.focusInput()};l.prototype.render=function(){return c("React").createElement(c("XUITypeahead.react"),{className:"_5esx",onChange:this.$ComposerCharityTypeahead2,onSelectAttempt:this.$ComposerCharityTypeahead3,placeholder:this.props.placeholder||i._("Search for a nonprofit to support"),queryString:this.state.query,ref:"typeahead",searchSource:this.$ComposerCharityTypeahead1,showEntriesOnFocus:true})};f.exports=l}),null);
__d("ComposerReferenceFileExcludeSegmentsView.react",["ix","cx","fbt","ComposerVideoUploadSection.react","emptyFunction","Image.react","InputLabel.react","LeftRight.react","Link.react","React","VideoCopyrightMonitoringType","VideoReferenceMatchSegmentBar.react","XUIButton.react","XUIGrayText.react","Grid.react","VideoCopyrightReferenceFileExcludeSegmentRow.react","fbglyph","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("Grid.react").GridItem,n=c("React").PropTypes;k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;function o(){var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={isEditing:false},this.$ComposerReferenceFileExcludeSegmentsView1=function(){this.setState({isEditing:!this.state.isEditing})}.bind(this),q}o.prototype.$ComposerReferenceFileExcludeSegmentsView2=function(){"use strict";return c("React").createElement("div",{className:"_2xsf"},c("React").createElement(c("Grid.react"),{cols:3,spacing:"_2ph-"},c("React").createElement(m,{className:"_2xsh"},j._("Content type")),c("React").createElement(m,null,c("React").createElement("div",{className:"_2xsh"},j._("Start"))),c("React").createElement(m,null,c("React").createElement("div",{className:"_2xsh"},j._("End")))))};o.prototype.$ComposerReferenceFileExcludeSegmentsView3=function(){"use strict";if(!this.state.isEditing)return null;return c("React").createElement("div",{className:"_2xse"},this.$ComposerReferenceFileExcludeSegmentsView2(),this.props.excludedSegments.map(function(p,q){return p.included?null:this.$ComposerReferenceFileExcludeSegmentsView4(p,q)}.bind(this)),c("React").createElement(c("XUIButton.react"),{className:"_2xsr",label:c("React").createElement("fbtc",null,"Add"),labelIsHidden:false,onClick:function(p){p.preventDefault();p.stopPropagation();this.props.onAddNewExcludedSegmentEntry()}.bind(this),image:c("React").createElement(c("Image.react"),{src:h("123418")})}))};o.prototype.$ComposerReferenceFileExcludeSegmentsView4=function(p,q){"use strict";return c("React").createElement(c("VideoCopyrightReferenceFileExcludeSegmentRow.react"),{key:q,index:q,startTimeInSec:p.matchedStartTimeInSec,durationInSec:p.durationInSec,mediaType:p.mediaType,onExcludedSegmentMonitoringTypeChange:this.props.onExcludedSegmentMonitoringTypeChange,onExcludedSegmentStartTimeChange:this.props.onExcludedSegmentStartTimeChange,onExcludedSegmentEndTimeChange:this.props.onExcludedSegmentEndTimeChange,onDeleteSegment:this.props.onDeleteSegment,onUpdateSeekPlayerPositionInMS:this.props.onUpdateSeekPlayerPositionInMS,totalVideoDurationInSec:this.props.totalDurationInSec})};o.prototype.$ComposerReferenceFileExcludeSegmentsView5=function(){"use strict";__p&&__p();var p=[],q=[];this.props.excludedSegments.forEach(function(r){if(r.included||!r.durationInSec)return;if(r.mediaType!==c("VideoCopyrightMonitoringType").AUDIO_ONLY.value&&!!r.durationInSec&&r.referenceStartTimeInSec!=null)p.push({matchedStartTimeInSec:r.referenceStartTimeInSec,durationInSec:r.durationInSec,referenceStartTimeInSec:r.referenceStartTimeInSec,segmentSource:r.segmentSource,mediaType:r.mediaType});if(r.mediaType!==c("VideoCopyrightMonitoringType").VIDEO_ONLY.value&&!!r.durationInSec&&r.referenceStartTimeInSec!=null)q.push({matchedStartTimeInSec:r.referenceStartTimeInSec,durationInSec:r.durationInSec,referenceStartTimeInSec:r.referenceStartTimeInSec,segmentSource:r.segmentSource,mediaType:r.mediaType})});return c("React").createElement("div",null,c("React").createElement(c("Grid.react"),{cols:3,spacing:"_5r4u"},c("React").createElement(m,null,c("React").createElement(c("XUIGrayText.react"),{className:"_3-95 _2xsj",display:"block",size:"meta1"},j._("Stop detecting matching content for music or clips you don't exclusively own.")," ",c("React").createElement(c("Link.react"),{href:"https://facebook.exceedlms.com/student/catalog/show/182065",target:"_blank"},j._("Learn more.")))),c("React").createElement(m,{className:"_2xsk"},c("React").createElement("div",null,c("React").createElement(c("VideoReferenceMatchSegmentBar.react"),{totalTime:this.props.totalDurationInSec,segments:p,isAudio:false}),c("React").createElement(c("VideoReferenceMatchSegmentBar.react"),{totalTime:this.props.totalDurationInSec,segments:q,isAudio:true}))),c("React").createElement(m,null,c("React").createElement(c("XUIButton.react"),{className:"_2xsm",label:c("React").createElement("fbtc",null,"Edit"),labelIsHidden:true,onClick:function(r){r.preventDefault();r.stopPropagation();this.$ComposerReferenceFileExcludeSegmentsView1()}.bind(this),depressed:this.state.isEditing,image:this.props.isUpload?c("React").createElement(c("Image.react"),{src:h("123418")}):c("React").createElement(c("Image.react"),{src:h("123350")})}))),this.$ComposerReferenceFileExcludeSegmentsView3())};o.prototype.render=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:c("joinClasses")(this.props.className,"_4oto"),title:j._("Exclude segments you don't own")},c("React").createElement("div",{className:"_2xsn"},this.$ComposerReferenceFileExcludeSegmentsView5()))};o.defaultProps={totalDurationInSec:0,excludedSegments:[],isUpload:false,onAddNewExcludedSegmentEntry:c("emptyFunction"),onExcludedSegmentMonitoringTypeChange:c("emptyFunction"),onExcludedSegmentStartTimeChange:c("emptyFunction"),onExcludedSegmentEndTimeChange:c("emptyFunction"),onDeleteSegment:c("emptyFunction"),onUpdateSeekPlayerPositionInMS:c("emptyFunction")};o.propTypes={className:n.string,excludedSegments:n.array,isUpload:n.bool,onAddNewExcludedSegmentEntry:n.func,onExcludedSegmentMonitoringTypeChange:n.func,onExcludedSegmentStartTimeChange:n.func,onExcludedSegmentEndTimeChange:n.func,onDeleteSegment:n.func,onUpdateSeekPlayerPositionInMS:n.func,totalDurationInSec:n.number.isRequired};f.exports=o}),null);
__d("ComposerReferenceFileExcludeSegmentsContainer.react",["ClockFormatConverter","ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileExcludeSegmentsView.react","VideoCopyrightMonitoringType","VideoCopyrightSegmentSource","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes","VideoCopyrightUtils"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileExcludeSegmentsContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{className:h.string,isUpload:h.bool,totalDurationInSec:h.number,logExcludeSegmentsUpdateEvent:h.func},statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightExcludedSegments(k),n=c("VideoCopyrightUtils").convertExcludedSegmentsToCopyrightSegments(m.slice(0)),o=Math.round(c("ComposerVideoUploadStore").getVideoDurationInSec(k)||0);return{excludedOwnershipSegments:n,videoDurationInSecFromStore:o}}},onDeleteSegment:function j(k){var l=this.state.excludedOwnershipSegments;l[k].included=true;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onExcludedSegmentMonitoringTypeChange:function j(k,l){var m=this.state.excludedOwnershipSegments;if(m[k].mediaType!=l){m[k].mediaType=l;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments())}this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onExcludedSegmentStartTimeChange:function j(k,l){__p&&__p();var m=this.state.excludedOwnershipSegments,n=c("ClockFormatConverter").timestampToSeconds(l),o=this.calculateNewDurationOnStartTimeChange(k,l);m[k].referenceStartTimeInSec=n;m[k].durationInSec=o;var p=this.props.totalDurationInSec?this.props.totalDurationInSec:this.state.videoDurationInSecFromStore;if(p&&p>0)if(n>=p){m[k].referenceStartTimeInSec=null;m[k].durationInSec=null}else if(n+o>p)m[k].durationInSec=null;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},calculateNewDurationOnStartTimeChange:function j(k,l){var m=this.state.excludedOwnershipSegments,n=c("ClockFormatConverter").timestampToSeconds(l);if(m[k].referenceStartTimeInSec==null||m[k].durationInSec==null)return null;var o=m[k].referenceStartTimeInSec||0,p=o-n,q=m[k].durationInSec||0,r=q+p;return r>0?r:null},calculateNewDurationOnEndTimeChange:function j(k,l){var m=this.state.excludedOwnershipSegments;if(m[k].referenceStartTimeInSec==null)return null;var n=m[k].referenceStartTimeInSec,o=c("ClockFormatConverter").timestampToSeconds(l),p=this.props.totalDurationInSec?this.props.totalDurationInSec:this.state.videoDurationInSecFromStore;if(!o||o<=n)return null;else if(o>p)o=p;return o-n},onExcludedSegmentEndTimeChange:function j(k,l){var m=this.state.excludedOwnershipSegments,n=this.calculateNewDurationOnEndTimeChange(k,l);m[k].durationInSec=n;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onAddNewExcludedSegmentEntry:function j(){var k=this.state.excludedOwnershipSegments,l={mediaType:c("VideoCopyrightMonitoringType").VIDEO_AND_AUDIO.value,included:false,segmentSource:c("VideoCopyrightSegmentSource").PUBLISHER_DEFINED};k.push(l);c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onUpdateSeekPlayerPositionInMS:function j(k){c("ComposerVideoUploadActions").updatePlayerSeekPosition(this.context.composerID,c("ClockFormatConverter").timestampToMillis(k))},_getExcludedOwnershipSegments:function j(){return c("VideoCopyrightUtils").convertCopyrightSegmentsToExcludedSegments(this.state.excludedOwnershipSegments.slice(0))},render:function j(){return c("React").createElement(c("ComposerReferenceFileExcludeSegmentsView.react"),{className:this.props.className,excludedSegments:this.state.excludedOwnershipSegments,isUpload:this.props.isUpload,onExcludedSegmentMonitoringTypeChange:this.onExcludedSegmentMonitoringTypeChange,onExcludedSegmentStartTimeChange:this.onExcludedSegmentStartTimeChange,onExcludedSegmentEndTimeChange:this.onExcludedSegmentEndTimeChange,onAddNewExcludedSegmentEntry:this.onAddNewExcludedSegmentEntry,onDeleteSegment:this.onDeleteSegment,onUpdateSeekPlayerPositionInMS:this.onUpdateSeekPlayerPositionInMS,totalDurationInSec:this.props.totalDurationInSec?this.props.totalDurationInSec:this.state.videoDurationInSecFromStore})}});i.defaultProps={excludedSegments:[]};f.exports=i}),null);
__d("ComposerReferenceFileUploadAttributionsTab.react",["cx","fbt","ix","ComposerVideoUploadSection.react","Image.react","MediaCopyrightAttributionType","PageContentTabRightsManagerStore","React","RightsManagerFbt","VideoCopyrightAttributionInfoIcon.react","VideoCopyrightAttributionSelector.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.state={attributionType:c("MediaCopyrightAttributionType").VIDEO},this.$ComposerReferenceFileUploadAttributionsTab4=function(s,t){this.props.onAttributionChange(s);if(t&&t.attribution_type)this.setState({attributionType:t.attribution_type})}.bind(this),o}m.prototype.$ComposerReferenceFileUploadAttributionsTab1=function(){"use strict";return c("React").createElement("div",{className:"_2cc2"},c("React").createElement("div",{className:"_5sf4"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-95",display:"block",size:"meta1"},this.$ComposerReferenceFileUploadAttributionsTab2()),c("React").createElement(c("ComposerVideoUploadSection.react"),{title:c("PageContentTabRightsManagerStore").getIsRMLite()?c("RightsManagerFbt").ATTRIBUTION_SECTION_TITLE_LITE:c("RightsManagerFbt").ATTRIBUTION_SECTION_TITLE,tooltip:this.$ComposerReferenceFileUploadAttributionsTab3()},c("React").createElement(c("VideoCopyrightAttributionSelector.react"),{accessToken:this.props.accessToken,hasError:this.props.hasError,onChange:this.$ComposerReferenceFileUploadAttributionsTab4,pageID:this.props.targetID,selectedAttribution:this.props.attributionID}))))};m.prototype.$ComposerReferenceFileUploadAttributionsTab3=function(){"use strict";if(c("PageContentTabRightsManagerStore").getIsRMLite())return i._("Where viewers will be directed when they click on the attribution");return i._("Your attribution will appear below videos that match your reference files. You can direct viewers to a page, the original video or a related video.")};m.prototype.$ComposerReferenceFileUploadAttributionsTab2=function(){"use strict";if(c("PageContentTabRightsManagerStore").getIsRMLite())return i._("Get credit for your content on Facebook. If you assign an attribution to this reference file, a link to your Page will appear on every matching video.");return i._("Set up attributions to get credit for your work whenever videos that contain your content are posted. Once you assign an attribution to a reference file, a link to your video or Page will appear on every monitored video that includes your content.")};m.prototype.$ComposerReferenceFileUploadAttributionsTab5=function(){"use strict";return c("React").createElement(c("Image.react"),{className:"_44x5",src:this.state.attributionType===c("MediaCopyrightAttributionType").VIDEO?j("395928"):j("395927")})};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:(!this.props.shown?"_2oq6":"")+" _63ex"},this.$ComposerReferenceFileUploadAttributionsTab1(),c("React").createElement("div",{className:"_44x6"},this.$ComposerReferenceFileUploadAttributionsTab5(),c("React").createElement(c("VideoCopyrightAttributionInfoIcon.react"),{className:"_1mu1"})))};f.exports=m}),null);
__d("ComposerReferenceFileUploadAttributionsTabContainer.react",["ComposerReferenceFileUploadAttributionsTab.react","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin"],(function a(b,c,d,e,f,g){var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileUploadAttributionsTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{accessToken:h.string.isRequired,onLogEvent:h.func.isRequired,shown:h.bool,targetID:h.string.isRequired},statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightAttributionID(k);return{attributionID:m}}},render:function j(){return c("React").createElement(c("ComposerReferenceFileUploadAttributionsTab.react"),{accessToken:this.props.accessToken,attributionID:this.state.attributionID,hasError:false,onAttributionChange:this.onAttributionChange,shown:!!this.props.shown,targetID:this.props.targetID})},onAttributionChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightAttributionID(this.context.composerID,k);this.props.onLogEvent("attribution_updated")}});f.exports=i}),null);
__d("ComposerReferenceFileUploadRightsTab.react",["cx","fbt","ComposerVideoUploadSection.react","CopyrightCountrySelector.react","CopyrightReferenceCategorySelector.react","PageContentTabRightsManagerStore","React","ReactDOM","VideoCopyrightMatchDetectionSwitch.react","VideoCopyrightMatchRuleSelector.react","VideoCopyrightMonitoringSelector.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.scrollToMatchDetectionSwitchIfNeeded=function(){if(this.props.shouldShowDetectMatchSection){var s=c("ReactDOM").findDOMNode(this.refs.scrollableMetadataArea);if(s instanceof Element)s.scrollTop=40}}.bind(this),o}m.prototype.$ComposerReferenceFileUploadRightsTab1=function(){"use strict";var n=null;if(this.props.shouldShowDetectMatchSection&&this.props.onReferenceFileStatusChange)n=this.$ComposerReferenceFileUploadRightsTab2();return c("React").createElement("div",{className:"_2cc2"},c("React").createElement("div",{className:"_5sf4",ref:"scrollableMetadataArea"},this.$ComposerReferenceFileUploadRightsTab3(),this.$ComposerReferenceFileUploadRightsTab4(),this.$ComposerReferenceFileUploadRightsTab5(),this.$ComposerReferenceFileUploadRightsTab6(),n))};m.prototype.$ComposerReferenceFileUploadRightsTab7=function(n){"use strict";if(this.props.logger)this.props.logger.logEvent(n)};m.prototype.$ComposerReferenceFileUploadRightsTab3=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Monitored Content"),tooltip:i._("The type of content in your reference file that will be monitored for matching videos")},c("React").createElement(c("VideoCopyrightMonitoringSelector.react"),{onChange:this.props.onMonitoringTypeChange,value:this.props.monitoringType}))};m.prototype.$ComposerReferenceFileUploadRightsTab4=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Geography"),tooltip:i._("The countries where you own this reference file")},c("React").createElement(c("CopyrightCountrySelector.react"),{areCountriesIncluded:this.props.areCountriesIncluded,enableExcludedCountries:true,listClassName:"_65w6",onChange:this.props.onGeoChange,previewCharLimit:78,selectedCountries:this.props.ownershipCountries}))};m.prototype.$ComposerReferenceFileUploadRightsTab5=function(){"use strict";return c("React").createElement(c("CopyrightReferenceCategorySelector.react"),{disabled:this.props.disableEditReferenceCategory,onReferenceCategoryChange:this.props.onReferenceCategoryChange,selectedCategory:this.props.selectedCategory,showCategoryRequiredError:this.props.showCategoryRequiredError})};m.prototype.$ComposerReferenceFileUploadRightsTab6=function(){"use strict";if(c("PageContentTabRightsManagerStore").getIsRMLite())return null;return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Match Rule"),tooltip:i._("Select which rule to apply to matching content")},c("React").createElement(c("VideoCopyrightMatchRuleSelector.react"),{onChange:this.props.onMatchRuleChange,onCreateNewRule:this.props.onCreateNewMatchRule,pageID:this.props.targetID,selectedRule:this.props.ruleID,onMatchRuleLoaded:this.scrollToMatchDetectionSwitchIfNeeded}))};m.prototype.$ComposerReferenceFileUploadRightsTab2=function(){"use strict";if(c("PageContentTabRightsManagerStore").getIsRMLite())return null;return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Detect Matching Content"),tooltip:i._("Turn Detect Matching Content on if you own the exclusive rights to all of the content in your reference file.")},c("React").createElement(c("VideoCopyrightMatchDetectionSwitch.react"),{onChange:this.props.onReferenceFileStatusChange,isDetectingMatches:!this.props.isReferenceFileDisabled,showCustomLabel:false}))};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_63ex"+(!this.props.shown?" _2oq6":"")},this.$ComposerReferenceFileUploadRightsTab1(),this.props.children)};m.propTypes={accessToken:l.string,generateThumbnails:l.bool,onCreateNewMatchRule:l.func,onGeoChange:l.func.isRequired,onMatchRuleChange:l.func.isRequired,onMonitoringTypeChange:l.func.isRequired,onReferenceCategoryChange:l.func.isRequired,onReferenceFileStatusChange:l.func,shown:l.bool,targetID:l.string.isRequired,monitoringType:l.string,ownershipCountries:l.array,areCountriesIncluded:l.bool,isReferenceFileDisabled:l.bool,isVideoUpload:l.bool,ruleID:l.string,isLiveBroadcast:l.bool,shouldShowDetectMatchSection:l.bool,showCategoryRequiredError:l.bool,selectedCategory:l.string,disableEditReferenceCategory:l.bool};f.exports=m}),null);
__d("ComposerVideoPlayer.react",["cx","fbt","BackgroundImage.react","CenteredContainer.react","FileInput.react","FileVideoThumbnail","Link.react","React","VideoAssetPlayer.react","VideoThumbnail","XUIText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes,m=465,n=285;j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){__p&&__p();var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.getSelectedThumbnail=function(){return this.props.selectedThumbnail||this.props.thumbnails[0]}.bind(this),this.selectThumbnailByIndex=function(u){this.props.onThumbnailChange(this.props.thumbnails[u],u,this.props.thumbnails)}.bind(this),this.onPickerLeftClick=function(){var u=this.getSelectedThumbnailIndex()-1;if(u==-1)u=this.props.thumbnails.length-1;this.selectThumbnailByIndex(u);this.refs.videoPlayer.closePlayer()}.bind(this),this.onPickerRightClick=function(){var u=this.getSelectedThumbnailIndex()+1;if(u==this.props.thumbnails.length)u=0;this.selectThumbnailByIndex(u);this.refs.videoPlayer.closePlayer()}.bind(this),this.onFileInputChange=function(event){if(typeof URL.createObjectURL!=="function")return;if(event.target.files.length!==0){this.refs.videoPlayer.closePlayer();var u=new(c("FileVideoThumbnail"))(event.target.files[0]);this.props.onCustomThumbnailSelected(u);this.refs.customThumbnailFileInput.getFileInput().clear()}}.bind(this),this.getSelectedThumbnailIndex=function(){return this.props.selectedThumbnail===undefined?0:this.props.thumbnails.indexOf(this.props.selectedThumbnail)}.bind(this),this.renderThumbSection=function(){var u=this.getSelectedThumbnailIndex()+1,v=c("React").createElement(c("XUIText.react"),{className:"_58mb",key:"index",weight:"bold"},u+"/"+this.props.thumbnails.length),w=void 0;if(this.props.allowCustomThumbnail)w=c("React").createElement("div",{className:"_3ymm"},c("React").createElement(c("FileInput.react"),{accept:"image/*",ref:"customThumbnailFileInput",name:"custom_thumbnail",onChange:this.onFileInputChange},c("React").createElement(c("Link.react"),{className:"_uhl"},c("React").createElement("span",{className:"_44rr"}),i._("Custom"))));var x=c("React").createElement(c("Link.react"),{className:"_58mc",key:"left-arrow",onClick:this.onPickerLeftClick},c("React").createElement(c("CenteredContainer.react"),{className:"_58mp",vertical:true},c("React").createElement("div",{className:"_58m_"}))),y=c("React").createElement(c("Link.react"),{className:"_58n0",key:"right-arrow",onClick:this.onPickerRightClick},c("React").createElement(c("CenteredContainer.react"),{className:"_58n1",vertical:true},c("React").createElement("div",{className:"_58n2"})));return c("React").createElement("div",{className:"_4n8x"},c("React").createElement("div",{className:"_58n3"},w,y,x,v))}.bind(this),q}o.prototype.componentWillReceiveProps=function(p){"use strict";if(!!p.seekPositionInMs&&this.props.seekPositionInMs!==p.seekPositionInMs){this.refs.videoPlayer.seek(p.seekPositionInMs);this.refs.videoPlayer.playVideo();this.refs.videoPlayer.pause()}};o.prototype.render=function(){"use strict";var p=this.props.renderThumbnailControls?this.renderThumbSection():null;return c("React").createElement("div",{className:"_wde"},c("React").createElement(c("VideoAssetPlayer.react"),{ref:"videoPlayer",pageID:this.props.targetID,videoAssetID:this.props.videoID,playerWidth:m,playerHeight:n,rotation:this.props.rotation,hideCloseButton:true,className:"_54xx"},c("React").createElement(c("BackgroundImage.react"),{backgroundSize:"contain",width:m,height:n,src:this.getSelectedThumbnail().getURL()})),p)};o.propTypes={onCustomThumbnailSelected:l.func.isRequired,onThumbnailChange:l.func.isRequired,selectedThumbnail:l.instanceOf(c("VideoThumbnail")),targetID:l.string,thumbnails:l.arrayOf(l.instanceOf(c("VideoThumbnail"))).isRequired,videoID:l.string.isRequired,renderThumbnailControls:l.bool,allowCustomThumbnail:l.bool,rotation:l.number,seekPositionInMs:l.number};o.defaultProps={isVideoAsset:false,renderThumbnailControls:true};f.exports=o}),null);
__d("ComposerVideoSquareThumbnailZoomCrop.react",["cx","BasicVector","PhotoZoomCropDimensions","PhotoZoomCropMixin","React","PhotoZoomCropImage.react","PhotoZoomCropSlider.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("React").PropTypes,j=i.shape({x:i.number.isRequired,y:i.number.isRequired}),k=c("React").createClass({displayName:"ComposerVideoSquareThumbnailZoomCrop",mixins:[c("PhotoZoomCropMixin")],propTypes:{center:j,cropAspectRatio:j,cropSizeRatio:j,cropSize:j,imageSize:i.instanceOf(c("BasicVector")).isRequired,messageText:i.string,onInitialZoomOrMove:i.func,overlay:i.element,src:i.oneOfType([i.string,i.object]),warningText:i.string},getInitialState:function l(){__p&&__p();var m=this.props,n=m.center,o=m.cropAspectRatio,p=m.cropSizeRatio,q=m.cropSize,r=m.imageSize;this._dims=new(c("PhotoZoomCropDimensions"))(r);if(n)this._dims.setCenter(n.x,n.y);if(q){this._dims.setSize(q.x,q.y);this._dims.setZoom(this._dims.getSize().x/r.x)}if(p){var s=p.x*r.x;this._dims.setZoom(this._dims.getSize().x/s)}if(o)this._dims.setRatio(o.x,o.y);var t=this._getDimensionsState();t.position=this._dims.getZoom();return t},render:function l(){return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_4liw")},c("React").createElement(c("PhotoZoomCropImage.react"),{className:"_1szc",dimensions:this._dims,enableDrag:this._dims.isCurrentlyDragable(),onMove:this._onMove,overlay:this.props.overlay,src:this.props.src}),c("React").createElement(c("PhotoZoomCropSlider.react"),{className:"_4lix",onZoom:this._onZoom,position:this.state.position,zoom:this.state.zoom,zoomRange:this._dims.getZoomRange()}),this._getMessage())},_onZoom:function l(m,n){if(this.props.onInitialZoomOrMove)this.props.onInitialZoomOrMove();this._handleZoom(m,n)},_onMove:function l(m,n){if(this.props.onInitialZoomOrMove)this.props.onInitialZoomOrMove();this._handleMove(m,n)},__getZoom:function l(){return this.state.zoom}});f.exports=k}),null);
__d("ComposerVideoSquareThumbnailCropper.react",["cx","BasicVector","ComposerVideoSquareThumbnailZoomCrop.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=256;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(n,o){j.constructor.call(this,n,o);this.$ComposerVideoSquareThumbnailCropper1=function(){if(!this.state.initialMove){this.setState({initialMove:true});this.props.onInitialZoomOrMove()}}.bind(this);this.state={initialMove:false}}m.prototype.getCropDimensions=function(){this.setState({initialMove:false});return this.refs.thumbCropper.getDimensions().clone()};m.prototype.render=function(){var n=this.props.selectedThumbnail?this.props.selectedThumbnail.getURL():null,o=this.props.width+"."+this.props.height,p=this.props.dimensions,q=p?p.getSize().x/(p.getZoom()*this.props.width):null;return c("React").createElement("div",null,c("React").createElement(c("ComposerVideoSquareThumbnailZoomCrop.react"),{className:"_1h95",ref:"thumbCropper",key:o,imageSize:new(c("BasicVector"))(this.props.width,this.props.height),center:p?{x:p.getCenter().x,y:p.getCenter().y}:null,cropSizeRatio:q?{x:q,y:q}:null,cropSize:{x:l,y:l},onInitialZoomOrMove:this.$ComposerVideoSquareThumbnailCropper1,src:n}))};f.exports=m}),null);
__d("ComposerVideoThumbnailSection.react",["ix","cx","fbt","invariant","BackgroundImage.react","BasicVector","ComposerVideoShowsPreviewState","ComposerVideoSquareThumbnailCropper.react","ComposerVideoThumbnailPicker.react","ComposerVideoUploadActions","Image.react","LeftRight.react","PhotoZoomCropDimensions","React","Tooltip.react","VideoAssetPlayer.react","XUISpinner.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("ComposerVideoShowsPreviewState"),o=c("React").PropTypes,p=100,q=56,r=56,s=465,t=285;l=babelHelpers.inherits(u,c("React").Component);m=l&&l.prototype;function u(v,w){__p&&__p();m.constructor.call(this,v,w);this.$ComposerVideoThumbnailSection4=function(){this.props.onSelectThumbnailPreview(n.SIXTEEN_NINE)}.bind(this);this.$ComposerVideoThumbnailSection5=function(){this.props.onSelectThumbnailPreview(n.SQUARE_CROPPER)}.bind(this);this.$ComposerVideoThumbnailSection6=function(x,y,z){this.setState({showSquareSpinner:true});this.$ComposerVideoThumbnailSection3(x,true);this.props.onThumbnailChange(x,y,z)}.bind(this);this.$ComposerVideoThumbnailSection7=function(x){this.setState({showSquareSpinner:true});this.$ComposerVideoThumbnailSection3(x,true);this.props.onCustomThumbnailSelected(x)}.bind(this);this.$ComposerVideoThumbnailSection8=function(){this.props.onSelectThumbnailPreview(n.VIDEO_PLAYER)}.bind(this);this.state=this.$ComposerVideoThumbnailSection1(v)}u.prototype.$ComposerVideoThumbnailSection1=function(v){var w=this.$ComposerVideoThumbnailSection2(v.squareThumbnailDimensions?v.squareThumbnailDimensions:new(c("PhotoZoomCropDimensions"))(new(c("BasicVector"))(p,q)));return{showSquareSpinner:false,squareThumbnailPosition:w,thumbnailWidth:0,thumbnailHeight:0,hideShowmark:false}};u.prototype.componentDidMount=function(){if(this.props.selectedThumbnail)this.$ComposerVideoThumbnailSection3(this.props.selectedThumbnail,false)};u.prototype.componentWillReceiveProps=function(v){var w=v.squareThumbnailDimensions;if(w&&w!==this.props.squareThumbnailDimensions)this.setState({squareThumbnailPosition:this.$ComposerVideoThumbnailSection2(w)});if(v.selectedThumbnail&&!this.props.selectedThumbnail&&this.props.isVideoUpload)this.$ComposerVideoThumbnailSection3(v.selectedThumbnail,true)};u.prototype.$ComposerVideoThumbnailSection3=function(v,w){var x=new Image();x.src=v.getURL();x.onload=function(){var y=new(c("PhotoZoomCropDimensions"))(new(c("BasicVector"))(x.width,x.height)),z=Math.min(x.width,x.height);y.setSize(z,z).setZoom(1);if(w)c("ComposerVideoUploadActions").updateSquareThumbnailDimensions(this.props.composerID,y);this.setState({showSquareSpinner:false,thumbnailWidth:x.width,thumbnailHeight:x.height})}.bind(this)};u.prototype.$ComposerVideoThumbnailSection2=function(v){var w=v.getSize().x/r;v=v.clone().setSize(r,r).setZoom(v.getZoom()/w);return v.getPosition()};u.prototype.getCropDimensions=function(){return this.refs.thumbCropper.getCropDimensions()};u.prototype.$ComposerVideoThumbnailSection9=function(v){switch(this.props.previewState){case n.VIDEO_PLAYER:this.props.videoID||k(0);return c("React").createElement(c("VideoAssetPlayer.react"),{ref:"videoPlayer",pageID:this.props.targetID,videoAssetID:this.props.videoID,playerWidth:s,playerHeight:t,hideCloseButton:true,onBeginPlayback:function(){this.setState({hideShowmark:true})}.bind(this),className:"_54xx"},c("React").createElement(c("BackgroundImage.react"),{backgroundSize:"contain",width:s,height:t,src:v}));case n.SIXTEEN_NINE:return c("React").createElement(c("ComposerVideoThumbnailPicker.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,hasGeneratedThumbnails:this.props.hasGeneratedThumbnails,onSelectedThumbnailsFromScrubber:this.props.onSelectedThumbnailsFromScrubber,onCustomThumbnailSelected:this.$ComposerVideoThumbnailSection7,onScrubbedThumbnailSave:this.props.onScrubbedThumbnailSave,onThumbnailChange:this.$ComposerVideoThumbnailSection6,pageID:this.props.targetID,scrubbedThumbnailTime:this.props.scrubbedThumbnailTime,selectedThumbnail:this.props.selectedThumbnail,showThumbnailScrubber:this.props.showThumbnailScrubber,thumbnails:this.props.thumbnails,textOnRight:true,videoFile:this.props.videoFile});case n.SQUARE_CROPPER:return c("React").createElement(c("ComposerVideoSquareThumbnailCropper.react"),{ref:"thumbCropper",selectedThumbnail:this.props.selectedThumbnail,dimensions:this.props.squareThumbnailDimensions,onInitialZoomOrMove:this.props.onInitialZoomOrMove,width:this.state.thumbnailWidth,height:this.state.thumbnailHeight});default:return c("React").createElement("div",null)}};u.prototype.$ComposerVideoThumbnailSection10=function(v){return c("React").createElement("div",{className:"_1d7i"},c("React").createElement(c("Image.react"),{className:"_1moc",src:h("115342")}))};u.prototype.$ComposerVideoThumbnailSection11=function(){if(!this.props.showMarkURI||this.state.hideShowmark)return c("React").createElement("div",null);return c("React").createElement("div",{className:"_3e3b"},c("React").createElement(c("Image.react"),{className:"_3e3c"+(this.props.previewState===n.SQUARE_CROPPER?" _3e3d":""),src:this.props.showMarkURI}))};u.prototype.$ComposerVideoThumbnailSection12=function(){if(this.props.previewState===n.VIDEO_PLAYER)return null;var v=this.props.videoID?c("React").createElement(c("XUIText.react"),{className:"_1d7j",onClick:this.$ComposerVideoThumbnailSection8,size:"header4",display:"block"},j._("Exit")):null;return c("React").createElement(c("LeftRight.react"),{className:"_1d7n"},this.props.previewState===n.SIXTEEN_NINE?c("React").createElement(c("XUIText.react"),{size:"header4",display:"block"},j._("Editing")):c("React").createElement(c("Image.react"),{src:h("115340")}),v)};u.prototype.render=function(){var v=this.props.selectedThumbnail?this.props.selectedThumbnail.getURL():null,w=this.$ComposerVideoThumbnailSection12();return c("React").createElement("div",null,c("React").createElement("div",{className:"_x9k"},this.$ComposerVideoThumbnailSection9(v)),c("React").createElement(c("XUIText.react"),{size:"header4",weight:"bold"},c("React").createElement(c("Tooltip.react"),{position:"right",offset:12,tooltip:j._("Thumbnails represent your video when it's not autoplaying. Tip: Avoid text on your thumbnail.")},j._("Thumbnails"))),c("React").createElement("div",{className:"_3-8x"},c("React").createElement("div",{className:"_x9o"+(this.props.previewState===n.SIXTEEN_NINE?" _1d7r":"")},c("React").createElement("div",{className:"_1d7s"},c("React").createElement("div",{className:"_1d7t"},c("React").createElement(c("Image.react"),{onClick:this.$ComposerVideoThumbnailSection4,src:v,height:q,width:p,backgroundSize:"contain"}),this.props.previewState!==n.SIXTEEN_NINE?this.$ComposerVideoThumbnailSection10(false):null)),this.props.previewState===n.SIXTEEN_NINE?w:null),c("React").createElement("div",{className:"_x9p"+(this.props.previewState===n.SQUARE_CROPPER?" _1d7r":"")},c("React").createElement("div",{className:"_1d7s"},this.state.showSquareSpinner?c("React").createElement(c("XUISpinner.react"),{className:"_3-9b _3-8y",size:"large"}):c("React").createElement("div",{className:"_1d7t",style:{height:r,width:r}},c("React").createElement(c("Image.react"),{className:"_1h93",onClick:this.$ComposerVideoThumbnailSection5,src:this.props.squareThumbnailDimensions!==null||!this.props.squareThumbnailURI?v:this.props.squareThumbnailURI,style:this.props.squareThumbnailDimensions!==null?this.state.squareThumbnailPosition:{height:r,width:r}}),this.props.previewState!==n.SQUARE_CROPPER?this.$ComposerVideoThumbnailSection10(true):null)),this.props.previewState===n.SQUARE_CROPPER?w:null),this.$ComposerVideoThumbnailSection11()))};u.propTypes={className:o.string,canSeeUploadVideoDialogShowsNux:o.bool,allowCustomThumbnail:o.bool.isRequired,hasGeneratedThumbnails:o.bool,composerID:o.string.isRequired,selectedThumbnail:o.object,isVideoUpload:o.bool,previewState:o.string.isRequired,onSelectThumbnailPreview:o.func.isRequired,onThumbnailChange:o.func.isRequired,onCustomThumbnailSelected:o.func.isRequired,onScrubbedThumbnailSave:o.func.isRequired,onSelectedThumbnailsFromScrubber:o.func.isRequired,thumbnails:o.array.isRequired,showThumbnailScrubber:o.bool.isRequired,squareThumbnailURI:o.string,squareThumbnailDimensions:o.instanceOf(c("PhotoZoomCropDimensions")),videoFile:o.object};f.exports=u}),null);
__d("ComposerVideoUploadPreviewSection.react",["ix","cx","fbt","Promise","BUISwitch.react","CenteredContainer.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoPlayer.react","ComposerVideoShowsPreviewState","ComposerVideoThumbnailPicker.react","ComposerVideoThumbnailSection.react","ComposerVideoUploadActions","ComposerVideoUploadStore","EventListener","Image.react","Layout.react","LeftRight.react","React","ReactComposerContextTypes","ReactDOM","ScheduledLiveStoryVideoPreview.react","VideoUploadLogger","XUIGrayText.react","XUIText.react","fbglyph","generateVideoThumbnails","joinClasses","requiredIfPropIsFalsy"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=c("Layout.react").Column,l=c("ComposerVideoShowsPreviewState"),m=c("React").PropTypes;b.URL=b.URL||b.webkitURL;var n=10,o=5,p=100,q=56,r=80,s=50,t=c("React").createClass({displayName:"ComposerVideoUploadPreviewSection",_loadedmetadataListener:null,_cancelableThumbnailsPromise:null,contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function u(v,w){var x=c("ComposerVideoUploadStore").getThumbnail(v)||w.selectedThumbnail,y=c("ComposerVideoUploadStore").getCustomThumbnail(v),z=c("ComposerVideoUploadStore").getScrubbedThumbnail(v),A=c("ComposerVideoUploadStore").getGeneratedThumbnails(v),B=y?A.concat(y):A;B=z?B.concat(z):B;var C=c("ComposerVideoUploadStore").getSquareThumbnailDimensions(v),D=c("ComposerVideoUploadStore").getPlayerSeekPositionInMs(v),E=c("ComposerVideoUploadStore").getEnableThumbnailExperiment(v);if(w.thumbnails)B=y?w.thumbnails.concat(y):w.thumbnails;return{generatedThumbnails:A,selectedThumbnail:x,squareThumbnailDimensions:C,thumbnails:B,seekPositionInMs:D,enableThumbnailExperiment:E,thumbnailsPromise:null}},getAttachmentInitialState:function u(v,w){return{canGenerateThumbnails:true,showsPreviewState:w.isVideoUpload?l.SIXTEEN_NINE:l.VIDEO_PLAYER,squareApplyState:"NONE",videoUrl:this.generateVideoUrl(w.videoFile)}},getAttachmentWillReceivePropsState:function u(v,w,x){var y={};if(x.videoFile!==w.videoFile){c("ComposerVideoUploadActions").updateThumbnail(v,null);y.videoUrl=this.generateVideoUrl(w.videoFile)}return y},generateVideoUrl:function u(v){if(v&&b.URL&&b.URL.createObjectURL)return b.URL.createObjectURL(v);else return null}},propTypes:{currentAdBreak:m.number,canSeeUploadVideoDialogShowsNux:m.bool,allowCustomThumbnail:m.bool,generateThumbnails:m.bool,isShowPage:m.bool,showMarkURI:m.string,isSquareVideo:m.bool,isVideoUpload:m.bool,logger:m.object,renderThumbnailControls:m.bool,showThumbnailExperimentSection:m.bool,showThumbnailScrubber:m.bool,selectedThumbnail:m.object,squareThumbnailURI:m.string,targetID:m.string,thumbnails:m.array,videoFile:m.object,videoID:c("requiredIfPropIsFalsy")("isVideoUpload",m.string),scheduledLivePreviewPayload:m.object},componentWillUnmount:function u(){if(this._loadedmetadataListener){this._loadedmetadataListener.remove();this._loadedmetadataListener=null}if(this._cancelableThumbnailsPromise)this._cancelableThumbnailsPromise.cancel()},componentDidMount:function u(){if(this.props.generateThumbnails){var v=c("ReactDOM").findDOMNode(this.refs.videoPlayer);if(v&&!this._loadedmetadataListener)this._loadedmetadataListener=c("EventListener").listen(v,"loadedmetadata",this.generateVideoThumbnails)}},_makeCancelable:function u(v){var w=false,x=new(c("Promise"))(function(y,z){v.then(function(A){return w?z({isCanceled:true}):y(A)})["catch"](function(A){return w?z({isCanceled:true}):z(A)})});return{promise:x,cancel:function y(){w=true}}},generateVideoThumbnails:function u(){__p&&__p();if(this.state.generatedThumbnails.length>0)return null;var v=this.context.composerID,w=c("ReactDOM").findDOMNode(this.refs.videoPlayer),x=c("ReactDOM").findDOMNode(this.refs.previewContainer),y=this.props.isSquareVideo?"cover":"contain",z=this.props.isSquareVideo?x.offsetWidth:x.offsetHeight,A=this._makeCancelable(c("generateVideoThumbnails")(w,x.offsetWidth,z,n,y));this._cancelableThumbnailsPromise=A;this._logEvent(c("VideoUploadLogger").EVENT_STARTED_GENERATE_THUMBNAILS);return A.promise.then(function(B){var C=B.thumbnails,D=B.selectedThumbnail;c("ComposerVideoUploadActions").updateThumbnail(v,D);c("ComposerVideoUploadActions").updateGeneratedThumbnails(v,C);this.setState({thumbnails:C,canGenerateThumbnails:true});this._logEvent(c("VideoUploadLogger").EVENT_FINISHED_GENERATE_THUMBNAILS)}.bind(this),function(){this.setState({canGenerateThumbnails:false});this._logEvent(c("VideoUploadLogger").EVENT_VIDEO_DIMENSIONS_UNREADABLE)}.bind(this))},_logEvent:function u(v){if(this.props.logger)this.props.logger.logEvent(v)},renderVideoPlayer:function u(){if(this.props.scheduledLivePreviewPayload){var v=this.props.scheduledLivePreviewPayload;return c("React").createElement(c("ScheduledLiveStoryVideoPreview.react"),{backgroundImage:v.backgroundImage,customProfileImage:null,customProfileImagePosition:null,plannedStartTime:v.plannedStartTime,previousCustomImage:v.previousCustomImage,profileImageURL:v.profileImageURL,profileName:v.profileName})}var w=this.props.videoID;if(!w)return c("React").createElement("div",null);return c("React").createElement(c("ComposerVideoPlayer.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,onCustomThumbnailSelected:this.onCustomThumbnailSelected,onThumbnailChange:this.onThumbnailChange,renderThumbnailControls:this.props.renderThumbnailControls,selectedThumbnail:this.getSelectedThumbnail(),targetID:this.props.targetID,thumbnails:this.state.thumbnails,videoID:w,seekPositionInMs:this.state.seekPositionInMs})},getSelectedThumbnail:function u(){return this.state.selectedThumbnail||this.state.thumbnails[0]},_renderThumbnailExperimentSection:function u(){if(!this.props.showThumbnailExperimentSection)return c("React").createElement("div",null);var v=this.state.enableThumbnailExperiment?j._("Experiment will be running for 3 days."):j._("Choose up to 5 thumbnails for this experiment to find out the best one."),w=[];for(var x=0;x<o;x++)w.push(c("React").createElement(c("Image.react"),{className:"_3aq0",width:r,height:s,src:null}));var y=this.state.enableThumbnailExperiment?c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},j._("Chosen Thumbnails for Experiment")),c("React").createElement(c("Layout.react"),null,c("React").createElement(k,null,w))):c("React").createElement("div",null);return c("React").createElement("div",{className:"_17vj"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},j._("Run Thumbnail Experiment")),c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{size:"meta1",shade:"light"},v)),c("React").createElement(c("BUISwitch.react"),{value:this.state.enableThumbnailExperiment,showLabel:true,onToggle:this.onEnableThumbnailExperimentChange}),y)},renderThumbnailPicker:function u(){var v=this.props.generateThumbnails&&this.state.canGenerateThumbnails,w=this.props.isShowPage?c("React").createElement(c("ComposerVideoThumbnailSection.react"),{composerID:this.context.composerID,allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,hasGeneratedThumbnails:v,key:this.context.composerID,ref:"thumbnailSection",isVideoUpload:this.props.isVideoUpload,onCustomThumbnailSelected:this.onCustomThumbnailSelected,onInitialZoomOrMove:this._onInitialZoomOrMove,onScrubbedThumbnailSave:this._onScrubbedThumbnailSave,onSelectedThumbnailsFromScrubber:this.onSelectedThumbnailsFromScrubber,onSelectThumbnailPreview:this._onSelectThumbnailPreview,previewState:this.state.showsPreviewState,squareThumbnailDimensions:this.state.squareThumbnailDimensions,squareThumbnailURI:this.props.squareThumbnailURI,onThumbnailChange:this.onThumbnailChange,scrubbedThumbnailTime:this._getScrubbedThumbnailTime(),selectedThumbnail:this.getSelectedThumbnail(),showThumbnailScrubber:this.props.showThumbnailScrubber&&this.state.generatedThumbnails.length>0,thumbnails:this.state.thumbnails,targetID:this.props.targetID,videoFile:this.props.videoFile,videoID:this.props.videoID,showMarkURI:this.props.showMarkURI}):c("React").createElement(c("ComposerVideoThumbnailPicker.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,hasGeneratedThumbnails:v,key:"thumbnailPicker",onCustomThumbnailSelected:this.onCustomThumbnailSelected,onScrubbedThumbnailSave:this._onScrubbedThumbnailSave,onSelectedThumbnailsFromScrubber:this.onSelectedThumbnailsFromScrubber,onThumbnailChange:this.onThumbnailChange,pageID:this.props.targetID,scrubbedThumbnailTime:this._getScrubbedThumbnailTime(),selectedThumbnail:this.getSelectedThumbnail(),showThumbnailScrubber:this.props.showThumbnailScrubber&&this.state.generatedThumbnails.length>0,thumbnails:this.state.thumbnails,videoFile:this.props.videoFile,enableThumbnailExperiment:this.state.enableThumbnailExperiment});return[w,c("React").createElement("video",{ref:"videoPlayer",className:"_2mpk",key:"videoPlayer",src:this.state.videoUrl})]},updateThumbnails:function u(v,w,x){this.setState({thumbnails:v,selectedThumbnail:w});c("ComposerVideoUploadActions").updateThumbnail(this.context.composerID,w,x)},_updateSquareThumbnail:function u(){c("ComposerVideoUploadActions").updateSquareThumbnailDimensions(this.context.composerID,this.refs.thumbnailSection.getCropDimensions());this.setState({squareApplyState:"APPLIED"})},_onSelectThumbnailPreview:function u(v){this.setState({showsPreviewState:v,squareApplyState:"NONE"})},_onInitialZoomOrMove:function u(){this.setState({squareApplyState:"EDITING"})},onCustomThumbnailSelected:function u(v){this._logEvent(c("VideoUploadLogger").EVENT_SELECTED_CUSTOM_THUMBNAIL);c("ComposerVideoUploadActions").updateCustomThumbnail(this.context.composerID,v);var w=this.state.generatedThumbnails.concat(v);this.updateThumbnails(w,v,false)},onSelectedThumbnailsFromScrubber:function u(v){__p&&__p();var w=[];if(v)v.then(function(x){__p&&__p();w=x.thumbnails;var y=this.state.generatedThumbnails.concat(w);if(w.length>1){var z=this.state.generatedThumbnails.length;c("ComposerVideoUploadActions").updateGeneratedThumbnails(this.context.composerID,y);this.updateThumbnails(y,y[z],false)}else if(w.length===1){var A=w[0];c("ComposerVideoUploadActions").updateScrubbedThumbnail(this.context.composerID,A);this.updateThumbnails(y,A,false)}}.bind(this)).done()},_onScrubbedThumbnailSave:function u(v){c("ComposerVideoUploadActions").updateScrubbedThumbnailTimestamp(this.context.composerID,v)},_getScrubbedThumbnailTime:function u(){return c("ComposerVideoUploadStore").getScrubbedThumbnailTimestamp(this.context.composerID)},onThumbnailChange:function u(v,w,x){if(!v)return;this.updateThumbnails(x,v,true)},onEnableThumbnailExperimentChange:function u(v){c("ComposerVideoUploadActions").updateEnableThumbnailExperiment(this.context.composerID,v);this.setState({enableThumbnailExperiment:!v})},_renderShowPagePreview:function u(){__p&&__p();var v=null;if(this.state.showsPreviewState===l.SQUARE_CROPPER&&this.state.squareApplyState!=="NONE")if(this.state.squareApplyState==="EDITING")v=c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_u6e",onClick:this._updateSquareThumbnail},j._("Apply"));else if(this.state.squareApplyState==="APPLIED")v=c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_43si"},c("React").createElement(c("Image.react"),{className:"_43sj",src:h("119374")}),j._("Applied"));var w="";switch(this.state.showsPreviewState){case l.VIDEO_PLAYER:w=j._("Video");break;case l.SIXTEEN_NINE:w=j._("Choose Thumbnail");break;case l.SQUARE_CROPPER:w=j._("Square Crop Thumbnail");break}return c("React").createElement("div",{className:"_3-8x"},this._renderThumbnailExperimentSection(),c("React").createElement(c("LeftRight.react"),{className:"_1elc"},c("React").createElement(c("XUIText.react"),{weight:"bold"},w),c("React").createElement("div",null,v)),c("React").createElement(c("CenteredContainer.react"),{ref:"previewContainer",className:c("joinClasses")("_1t9p","_3-8x"),vertical:true},this.renderThumbnailPicker()))},render:function u(){var v;if(this.props.isShowPage)return this._renderShowPagePreview();if(!this.props.isVideoUpload)v=this.renderVideoPlayer();else if(this.state.videoUrl)v=this.renderThumbnailPicker();return c("React").createElement("div",null,this._renderThumbnailExperimentSection(),c("React").createElement(c("CenteredContainer.react"),{ref:"previewContainer",className:"_1t9p",vertical:true},v))}});f.exports=t}),null);
__d("ComposerReferenceFileUploadRightsTabContainer.react",["ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileUploadRightsTab.react","ComposerVideoUploadActions","ComposerVideoUploadPreviewSection.react","ComposerVideoUploadStore","React","ReactComposerContextTypes","ReferenceFingerprintPreviewSection.react","VideoCopyrightUtils"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileUploadRightsTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightMonitoringType(k)||c("VideoCopyrightUtils").DEFAULT_MONITORING_TYPE,n=c("ComposerVideoUploadStore").getCopyrightRuleID(k),o=c("ComposerVideoUploadStore").getCopyrightOwnershipCountries(k),p=c("ComposerVideoUploadStore").getAreCopyrightCountriesIncluded(k),q=c("ComposerVideoUploadStore").getIsCopyrightReferenceDisabled(k),r=c("ComposerVideoUploadStore").getCopyrightReferenceCategory(k);return{monitoringType:m,ownershipCountries:o.slice(),ruleID:n,areCountriesIncluded:p,isReferenceFileDisabled:q,selectedCategory:r}}},propTypes:{accessToken:h.string,generateThumbnails:h.bool,shouldShowDetectMatchSection:h.bool,isVideoUpload:h.bool,logger:h.object,onCreateNewMatchRule:h.func,onLogEvent:h.func.isRequired,selectedThumbnail:h.object,shown:h.bool,targetID:h.string,thumbnails:h.array,uiLogger:h.object,videoFile:h.object,videoID:h.string,showCategoryRequiredError:h.bool,disableEditReferenceCategory:h.bool},onMonitoringTypeChange:function j(event){c("ComposerVideoUploadActions").updateCopyrightMonitoringType(this.context.composerID,event.value);this.props.onLogEvent("monitoring_type_updated")},onGeoChange:function j(k,l){c("ComposerVideoUploadActions").updateCopyrightOwnershipCountries(this.context.composerID,k,l);this.props.onLogEvent("ownership_countries_updated")},onMatchRuleChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightRuleID(this.context.composerID,k)},onReferenceFileStatusChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightReferenceFileDisabled(this.context.composerID,!k);this.props.onLogEvent("is_reference_file_disabled_toggled")},onReferenceCategoryChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightReferenceCategory(this.context.composerID,k);this.props.onLogEvent("reference_category_updated")},renderPreviewSection:function j(){if(this.props.videoID||this.props.isVideoUpload)return c("React").createElement(c("ComposerVideoUploadPreviewSection.react"),{allowCustomThumbnail:false,generateThumbnails:this.props.generateThumbnails,isVideoUpload:this.props.isVideoUpload,logger:this.props.logger,renderThumbnailControls:false,selectedThumbnail:this.props.selectedThumbnail,showThumbnailScrubber:false,thumbnails:this.props.thumbnails,videoID:this.props.videoID,videoFile:this.props.videoFile});else return c("React").createElement(c("ReferenceFingerprintPreviewSection.react"),null)},render:function j(){return c("React").createElement(c("ComposerReferenceFileUploadRightsTab.react"),{accessToken:this.props.accessToken,shown:this.props.shown,targetID:this.props.targetID||"",onCreateNewMatchRule:this.props.onCreateNewMatchRule,onGeoChange:this.onGeoChange,onMatchRuleChange:this.onMatchRuleChange,onMonitoringTypeChange:this.onMonitoringTypeChange,onReferenceCategoryChange:this.onReferenceCategoryChange,onReferenceFileStatusChange:this.onReferenceFileStatusChange,monitoringType:this.state.monitoringType,ownershipCountries:this.state.ownershipCountries,areCountriesIncluded:this.state.areCountriesIncluded,isReferenceFileDisabled:this.state.isReferenceFileDisabled,isVideoUpload:this.props.isVideoUpload,ruleID:this.state.ruleID,shouldShowDetectMatchSection:this.props.shouldShowDetectMatchSection,selectedCategory:this.state.selectedCategory,showCategoryRequiredError:this.props.showCategoryRequiredError,disableEditReferenceCategory:this.props.disableEditReferenceCategory},this.renderPreviewSection())}});f.exports=i}),null);
__d("ComposerReferenceFileUploadWhitelistTab.react",["cx","fbt","ComposerVideoUploadSection.react","React","VideoCopyrightWhitelistSection.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.$ComposerReferenceFileUploadWhitelistTab1=function(){"use strict";var n=c("React").createElement(c("VideoCopyrightWhitelistSection.react"),{whitelistedFBUsers:this.props.whitelistedFBUsers||[],onFBWhitelistUpdated:this.props.onFBWhitelistUpdated,whitelistedIGUserNames:this.props.whitelistedIGUserNames,onIGWhitelistUpdated:this.props.onIGWhitelistUpdated,canSeeIGMatches:this.props.canSeeIGMatches});return this.props.canSeeIGMatches?n:c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Grant Permissions"),tooltip:i._("Grant permission to any Page or person on {what platform the publisher can see} to upload videos that contain this one.",[i.param("what platform the publisher can see",this.props.canSeeIGMatches?i._("Facebook or Instagram"):i._("Facebook"))])},n)};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_63ex"+(!this.props.shown?" _2oq6":"")},c("React").createElement("div",{className:"_1es5"},c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},i._("Allow Pages and people to upload videos that contain your copyrighted media.")),this.$ComposerReferenceFileUploadWhitelistTab1()))};function m(){"use strict";j.apply(this,arguments)}m.propTypes={shown:l.bool,whitelistedFBUsers:l.array,onFBWhitelistUpdated:l.func.isRequired,whitelistedIGUserNames:l.array,onIGWhitelistUpdated:l.func.isRequired,canSeeIGMatches:l.bool};f.exports=m}),null);
__d("ComposerReferenceFileUploadWhitelistTabContainer.react",["ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileUploadWhitelistTab.react","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes"],(function a(b,c,d,e,f,g){var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileUploadWhitelistTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightWhitelistedFBUsers(k),n=c("ComposerVideoUploadStore").getCopyrightWhitelistedIGUserNames(k);return{whitelistedFBUsers:m,whitelistedIGUserNames:n}}},propTypes:{onLogEvent:h.func.isRequired,shown:h.bool,canSeeIGMatches:h.bool},onFBWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedFBUsers(this.context.composerID,k);this.props.onLogEvent("whitelist_updated")},onIGWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedIGUserNames(this.context.composerID,k);this.props.onLogEvent("whitelist_ig_user_names_updated")},render:function j(){return c("React").createElement(c("ComposerReferenceFileUploadWhitelistTab.react"),{shown:this.props.shown,whitelistedFBUsers:this.state.whitelistedFBUsers,whitelistedIGUserNames:this.state.whitelistedIGUserNames,onIGWhitelistUpdated:this.onIGWhitelistUpdated,onFBWhitelistUpdated:this.onFBWhitelistUpdated,canSeeIGMatches:this.props.canSeeIGMatches})}});f.exports=i}),null);
__d("ComposerVideoAdBreakAdminPreviewMenuButton.react",["ix","fbt","AdBreakStatus","ComposerVideoAdBreakAdminPreviewMenu.react","React","SUIBusinessTheme","SUIButton.react","SUIGlyphIcon.react","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement(c("ComposerVideoAdBreakAdminPreviewMenu.react"),{adBreaksDisabled:this.props.adBreaksDisabled,insertedAdBreaks:this.props.insertedAdBreaks.map(function(m){return{status:this.props.adBreaksDisabled?c("AdBreakStatus").DISABLED:c("AdBreakStatus").ENABLED,timeOffset:m.timeOffset,thumbnailURL:m.thumbnailURL}}.bind(this)),videoID:this.props.videoID},c("React").createElement(c("SUIButton.react"),{disabled:!this.props.videoID,icon:c("React").createElement(c("SUIGlyphIcon.react"),{disabled:!this.props.videoID,srcDefault:h("404182"),srcDisabled:h("404184")}),label:i._("Preview"),theme:c("SUIBusinessTheme")}))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("ComposerVideoAdBreaksTabAdvancedSettings.react",["ix","cx","fbt","Image.react","React","XUICardSection.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(n){l.constructor.call(this,n);this.state={expanded:true}}m.prototype.render=function(){var n=this.state.expanded?h("127423"):h("127393");return c("React").createElement("div",null,c("React").createElement(c("XUICardSection.react"),{className:"_489l",onClick:this.onClickHeader.bind(this)},c("React").createElement(c("XUIText.react"),{className:"_3-9a"},j._("ADVANCED SETTINGS")),c("React").createElement(c("Image.react"),{className:"_3-9a",src:n}),c("React").createElement("div",{className:"_636m"},this.props.secondary)),c("React").createElement("div",{className:"_438h"+(!this.state.expanded?" _489q":"")},this.props.children))};m.prototype.onClickHeader=function(){this.setState({expanded:!this.state.expanded})};f.exports=m}),null);
__d("ComposerVideoAdBreakInsertionDisabledView.react",["ix","cx","Image.react","React","XUIGrayText.react","XUIText.react","asset"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_1_hd"},c("React").createElement("div",{className:"_29_0"},c("React").createElement(c("Image.react"),{src:h("401154")}),c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold",className:"_3-9a"},this.props.errorMessageHeader)),c("React").createElement(c("XUIGrayText.react"),{size:"meta1"},this.props.errorMessageContent))};function l(){"use strict";j.apply(this,arguments)}f.exports=l}),null);
__d("AdBreakOffsetEditorNuxAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LOG_VIEW:"log_view",DISMISS:"dismiss"})}),null);
__d("AdBreakOffsetSpinner.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=10;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$AdBreakOffsetSpinner1=function(){if(!this.props.disabled)this.props.onChange(this.props.value+k)}.bind(this),this.$AdBreakOffsetSpinner4=function(){if(!this.props.disabled)this.props.onChange(this.props.value-k)}.bind(this),this.$AdBreakOffsetSpinner2=function(){!this.props.disabled&&this.props.onFocus&&this.props.onFocus()}.bind(this),this.$AdBreakOffsetSpinner3=function(){!this.props.disabled&&this.props.onBlur&&this.props.onBlur()}.bind(this),n}l.prototype.render=function(){var m=this.props.disabled;return c("React").createElement("div",{className:"_3etf"},c("React").createElement("div",{className:(!m?"_2yv_":"")+(m?" _62dv":""),onMouseDown:this.$AdBreakOffsetSpinner1,onFocus:this.$AdBreakOffsetSpinner2,onBlur:this.$AdBreakOffsetSpinner3}),c("React").createElement("div",{className:(!m?"_2yw0":"")+(m?" _62dw":""),onMouseDown:this.$AdBreakOffsetSpinner4,onFocus:this.$AdBreakOffsetSpinner2,onBlur:this.$AdBreakOffsetSpinner3}))};f.exports=l}),null);
__d("XAdBreakOffsetEditorNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/instream_ads/ads_insertion/editor_nux/",{action:{type:"Enum",required:true,enumType:1}})}),null);
__d("ComposerVideoAdBreakInsertionSection.react",["cx","fbt","AdBreakOffsetEditorNuxAction","AdBreakOffsetSpinner.react","AsyncRequest","ComposerVideoUploadSection.react","DateConsts","React","Tooltip.react","VideoComposerDialogAdBreakStrings","VideoInstreamAdsConstants","VideoInstreamUtils","XAdBreakOffsetEditorNuxController","XUIAmbientNUX.react","XUIButton.react","XUIGrayText.react","XUITextInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=1e5;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(n){__p&&__p();k.constructor.call(this,n);this.$ComposerVideoAdBreakInsertionSection7=function(event){this.setState({isInputtingCurrentAdBreak:true});this.props.onSetCurrentAdBreak(this.props.currentOffset,true,true)}.bind(this);this.$ComposerVideoAdBreakInsertionSection4=function(event){this.setState({isInputtingCurrentAdBreak:false});this.props.onSetCurrentAdBreak(this.props.currentOffset,false,false)}.bind(this);this.$ComposerVideoAdBreakInsertionSection5=function(event){var o=c("VideoInstreamUtils").convertFormattedTimeToSeconds(event.target.value);this.setState({value:event.target.value});if(o!==null){this.setState({currentTime:o});if(this.state.isInputtingCurrentAdBreak)this.props.onSetCurrentAdBreak(o,true,true)}}.bind(this);this.$ComposerVideoAdBreakInsertionSection8=function(o){var p=o/c("DateConsts").MS_PER_SEC;this.props.onSetCurrentAdBreak(p,true,true)}.bind(this);this.$ComposerVideoAdBreakInsertionSection12=function(){this.props.onInsertAdBreak&&this.props.onInsertAdBreak()}.bind(this);this.$ComposerVideoAdBreakInsertionSection13=function(){var o=c("XAdBreakOffsetEditorNuxController").getURIBuilder().setEnum("action",c("AdBreakOffsetEditorNuxAction").DISMISS).getURI();new(c("AsyncRequest"))().setMethod("POST").setURI(o).send();this.setState({showAdBreakOffsetEditorNux:false})}.bind(this);this.state={currentTime:0,value:"00:00.000",showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,isInputtingCurrentAdBreak:false}}m.prototype.componentWillReceiveProps=function(n){if(n.currentOffset!==null&&!this.state.isInputtingCurrentAdBreak)this.setState({currentTime:n.currentOffset,value:c("VideoInstreamUtils").convertTimestampToFormattedString(n.currentOffset)})};m.prototype.componentDidMount=function(){if(this.state.showAdBreakOffsetEditorNux)this.$ComposerVideoAdBreakInsertionSection1()};m.prototype.$ComposerVideoAdBreakInsertionSection2=function(){var n=c("VideoInstreamUtils").getMaxPossibleAdBreaks(this.props.videoDuration,this.props.hasGapRule);return c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},this.props.hasGapRule?i._({"*":"This video can have {number} ad breaks placed within the highlighted area of the video preview. Enter the time for each break.","_1":"This video can have 1 ad break placed within the highlighted area of the video preview. Enter the time for each break."},[i.plural(n,"number")]):this.props.isAdBreakInsertionRedesignV2?c("VideoComposerDialogAdBreakStrings").getManualInsertionDescription(this.props.videoDuration,this.props.hasGapRule):i._({"*":"Select up to {number} places where an ad break may be played. Ad break placements will be filled for each individual viewer based on ad availability.","_1":"Select up to 1 place where an ad break may be played. Ad break placements will be filled for each individual viewer based on ad availability."},[i.plural(c("VideoInstreamUtils").getMaxPossibleAdBreaks(this.props.videoDuration),"number")]))};m.prototype.$ComposerVideoAdBreakInsertionSection3=function(){if(!this.props.isTimeOffsetEditorVisible)return null;return c("React").createElement("div",{className:"_3-8x"},c("React").createElement("div",{className:"_4yj6"},c("React").createElement(c("XUITextInput.react"),{className:"_19jl",disabled:this.props.isPreviewingAdBreak,height:"short",placeholder:i._("00:00.000"),value:this.state.value,onBlur:this.$ComposerVideoAdBreakInsertionSection4,onChange:this.$ComposerVideoAdBreakInsertionSection5,onDownArrow:this.$ComposerVideoAdBreakInsertionSection6.bind(this,-10/c("DateConsts").MS_PER_SEC),onFocus:this.$ComposerVideoAdBreakInsertionSection7,onUpArrow:this.$ComposerVideoAdBreakInsertionSection6.bind(this,10/c("DateConsts").MS_PER_SEC)}),c("React").createElement("div",{className:"_4yj7",ref:"ad_break_offset_editor_nux"},c("React").createElement(c("AdBreakOffsetSpinner.react"),{disabled:this.props.isPreviewingAdBreak,value:this.state.currentTime*c("DateConsts").MS_PER_SEC,onChange:this.$ComposerVideoAdBreakInsertionSection8}))),this.$ComposerVideoAdBreakInsertionSection9(),c("React").createElement(c("Tooltip.react"),{alignH:"right",position:"right",tooltip:this.$ComposerVideoAdBreakInsertionSection10()},c("React").createElement(c("XUIButton.react"),{className:"_gq_",disabled:this.$ComposerVideoAdBreakInsertionSection11(),label:this.props.hasGapRule?i._("Add"):i._("Insert"),labelIsHidden:false,type:"button",onClick:this.$ComposerVideoAdBreakInsertionSection12})))};m.prototype.$ComposerVideoAdBreakInsertionSection9=function(){return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.ad_break_offset_editor_nux}.bind(this),customwidth:300,position:"above",shown:this.state.showAdBreakOffsetEditorNux,width:"custom",onCloseButtonClick:this.$ComposerVideoAdBreakInsertionSection13},i._("Adjust the timing of your ad breaks more accurately. You can also use your keyboard's up and down arrow keys."))};m.prototype.render=function(){if(this.props.hidden)return null;return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:this.props.isAdBreakInsertionRedesignV2?i._("Choose Placements"):this.props.hasGapRule?i._("Place Ad Breaks"):i._("Choose Ad Break Placements"),tooltip:this.props.isAdBreakInsertionRedesignV2?null:this.props.hasGapRule?i._({"*":{"*":"Ad breaks can be placed after the first {start time offset} seconds and must be at least {insertion interval} minutes apart. When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys."}},[i.param("start time offset",c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC,[0]),i.param("insertion interval",c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,[0])]):i._({"*":{"*":"Videos need to be at least {min video length} minutes long, and ad breaks may only be placed after {min start time} seconds . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys.","_1":"Videos need to be at least {min video length} minutes long, and ad breaks may only be placed after 1 second . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys."},"_1":{"*":"Videos need to be at least 1 minute long, and ad breaks may only be placed after {min start time} seconds . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys.","_1":"Videos need to be at least 1 minute long, and ad breaks may only be placed after 1 second . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys."}},[i.plural(c("VideoInstreamAdsConstants").AD_INSERTION_MINIMUM_VIDEO_LENGTH_MS/c("DateConsts").MS_PER_MIN,"min video length"),i.plural(c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC,"min start time")])},c("React").createElement("div",{className:"_19jk"},this.$ComposerVideoAdBreakInsertionSection2(),this.$ComposerVideoAdBreakInsertionSection3()))};m.prototype.$ComposerVideoAdBreakInsertionSection6=function(n){if(this.props.isPreviewingAdBreak)return;var o=this.props.currentOffset+n;o=Math.max(o,0);o=Math.min(o,this.props.videoDuration);o=Math.round(o*l)/l;this.setState({currentTime:o,value:c("VideoInstreamUtils").convertTimestampToFormattedString(o)});this.props.onSetCurrentAdBreak(o,true,true)};m.prototype.$ComposerVideoAdBreakInsertionSection11=function(){return this.props.isPreviewingAdBreak||!c("VideoInstreamUtils").isInEligibleTimeSegments(this.state.currentTime,this.props.videoDuration,this.props.insertedAdBreaks,this.props.hasGapRule)};m.prototype.$ComposerVideoAdBreakInsertionSection10=function(){__p&&__p();if(this.props.isPreviewingAdBreak)return null;var n=c("VideoInstreamUtils").getEligibleTimeSegments(this.props.insertedAdBreaks,this.props.videoDuration,this.props.hasGapRule);if(n.length===0){var o=c("VideoInstreamUtils").getMaxPossibleAdBreaks(this.props.videoDuration,this.props.hasGapRule);if(o>this.props.insertedAdBreaks.length)return i._({"*":"Ad breaks need to be at least {interval} minutes apart. Based on where you've placed your current ad breaks, there isn't space for another one."},[i.param("interval",c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,[0])]);return i._("You've reached your ad break limit for this video.")}var p=c("VideoInstreamUtils").isInEligibleTimeSegments(this.state.currentTime,this.props.videoDuration,this.props.insertedAdBreaks,this.props.hasGapRule);if(p)return null;var q=c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC;if(this.state.currentTime<q)return i._({"*":"Ad breaks cannot be placed in the first {start time offset} seconds."},[i.param("start time offset",q,[0])]);var r=c("VideoInstreamAdsConstants").AD_INSERTION_END_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC;if(this.state.currentTime>this.props.videoDuration-r)return i._({"*":"Ad breaks cannot be placed in the last {end time offset} seconds."},[i.param("end time offset",r,[0])]);return i._({"*":"Ad breaks cannot be placed less than {insertion interval} minutes apart."},[i.param("insertion interval",c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,[0])])};m.prototype.$ComposerVideoAdBreakInsertionSection1=function(){var n=c("XAdBreakOffsetEditorNuxController").getURIBuilder().setEnum("action",c("AdBreakOffsetEditorNuxAction").LOG_VIEW).getURI();new(c("AsyncRequest"))().setMethod("POST").setURI(n).send()};m.defaultProps={isAdBreakInsertionRedesignV2:false,isTimeOffsetEditorVisible:true,showAdBreakOffsetEditorNux:false};f.exports=m}),null);
__d("ComposerVideoAdBreakInsertionSectionV2.react",["cx","fbt","AdBreakStatus","BUISwitch.react","ComposerVideoAdBreakInsertionSection.react","ComposerVideoUploadSection.react","React","VideoComposerDialogAdBreakAutoAdjustmentSettings.react","VideoComposerDialogAdBreakInsertedAdBreaks.react","VideoComposerDialogAdBreakStrings","XUIGrayText.react","XUIRadioInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$ComposerVideoAdBreakInsertionSectionV21=function(){this.props.onEnableAdBreakAutoInsertion(true)}.bind(this),this.$ComposerVideoAdBreakInsertionSectionV22=function(){this.props.onEnableAdBreakAutoInsertion(false)}.bind(this),this.$ComposerVideoAdBreakInsertionSectionV23=function(r){this.props.onUpdateAdBreaksStatus(!r)}.bind(this),this.$ComposerVideoAdBreakInsertionSectionV24=function(){if(!this.props.isPreviewingAdBreak)return;this.props.onSetIsPreviewingAdBreak(false)}.bind(this),this.$ComposerVideoAdBreakInsertionSectionV25=function(r){if(this.props.isPreviewingAdBreak)return;this.props.onSetCurrentAdBreak(this.props.insertedAdBreaks[r].timeOffset-7,true,false);this.props.onSetIsPreviewingAdBreak(true)}.bind(this),n}l.prototype.render=function(){return c("React").createElement("div",{className:"_4wzu"},c("React").createElement("div",{className:"_4wxq"},c("React").createElement("div",{className:"_4wvp"},c("React").createElement("div",{className:"_4wvq"},c("React").createElement(c("ComposerVideoUploadSection.react"),{title:c("VideoComposerDialogAdBreakStrings").AD_BREAK_TOGGLE_TITLE,tooltip:c("VideoComposerDialogAdBreakStrings").AD_BREAK_TOGGLE_TOOLTIP}))),c("React").createElement("div",{className:"_2j7l"},c("React").createElement(c("BUISwitch.react"),{disabled:this.props.isPreviewingAdBreak,value:!this.props.adBreaksDisabled,onToggle:this.$ComposerVideoAdBreakInsertionSectionV23}),c("React").createElement(c("XUIGrayText.react"),{className:"_3-9a",size:"meta1",weight:"bold"},this.props.adBreaksDisabled?i._("DISABLED"):i._("ENABLED")))),c("React").createElement("div",{className:"_4wxq"+(this.props.adBreaksDisabled?" hidden_elem":"")},c("React").createElement("div",{className:"_4wvp"},c("React").createElement("div",{className:"_4wvq"},c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Placements"),tooltip:i._("Choose when ads may show in your video. Including placements for ad breaks does not guarantee ads will be played in your video.")}))),c("React").createElement("div",{className:"_3-8m"},c("React").createElement("div",{className:"_4wzp"},c("React").createElement(c("XUIRadioInput.react"),{checked:this.props.isAdBreakAutoInsertionEnabled,className:"_3-91",onChange:this.$ComposerVideoAdBreakInsertionSectionV21}),c("React").createElement("div",null,c("React").createElement(c("ComposerVideoUploadSection.react"),{title:c("VideoComposerDialogAdBreakStrings").AUTO_INSERTION_TITLE},c("React").createElement("div",{className:"_19jk"},c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},c("VideoComposerDialogAdBreakStrings").AUTO_INSERTION_DESCRIPTION))))),c("React").createElement("div",{className:"_4wzp"},c("React").createElement(c("XUIRadioInput.react"),{checked:!this.props.isAdBreakAutoInsertionEnabled,className:"_3-91",onChange:this.$ComposerVideoAdBreakInsertionSectionV22}),c("React").createElement("div",null,c("React").createElement(c("ComposerVideoAdBreakInsertionSection.react"),{currentOffset:this.props.currentOffset,hasGapRule:this.props.hasGapRule,hidden:false,insertedAdBreaks:this.props.insertedAdBreaks,isAdBreakInsertionRedesignV2:true,isPreviewingAdBreak:this.props.isPreviewingAdBreak,isTimeOffsetEditorVisible:!this.props.isAdBreakAutoInsertionEnabled,videoDuration:this.props.videoDuration,onInsertAdBreak:this.props.onInsertAdBreak,onSetCurrentAdBreak:this.props.onSetCurrentAdBreak}),this.props.isAdBreakAutoInsertionEnabled||this.props.insertedAdBreaks.length===0?null:c("React").createElement("div",null,c("React").createElement(c("VideoComposerDialogAdBreakInsertedAdBreaks.react"),{adBreaksDisabled:this.props.adBreaksDisabled,insertedAdBreaks:this.props.insertedAdBreaks.map(function(m){return{status:this.props.adBreaksDisabled?c("AdBreakStatus").DISABLED:c("AdBreakStatus").ENABLED,timeOffset:m.timeOffset,thumbnailURL:m.thumbnailURL}}.bind(this)),isPreviewingAdBreak:this.props.isPreviewingAdBreak,videoID:this.props.videoID,onCancelPreview:this.$ComposerVideoAdBreakInsertionSectionV24,onDeleteAdBreak:this.props.onDeleteAdBreak,onPreviewAdBreak:this.$ComposerVideoAdBreakInsertionSectionV25}),c("React").createElement(c("VideoComposerDialogAdBreakAutoAdjustmentSettings.react"),{isAdBreakAutoAdjustmentEnabled:this.props.isAdBreakAutoAdjustmentEnabled,onEnableAdBreakAutoAdjustment:this.props.onEnableAdBreakAutoAdjustment})))))))};f.exports=l}),null);
__d("ComposerVideoAdBreakPageOnboardingSection.react",["cx","fbt","AdBreakPageOnboardingConstants","AdBreakPageOnboardingType","AdBreakPageOnboardingTypedLogger","ComposerVideoUploadSection.react","React","XAdBreakPageOnboardingController","XUIButton.react","XUIGrayText.react","goURI"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$ComposerVideoAdBreakPageOnboardingSection1=function(){new(c("AdBreakPageOnboardingTypedLogger"))().setPageID(this.props.creatorID).setAdBreakPageOnboardingEventType(c("AdBreakPageOnboardingType").COMPOSER_ENTRY_POINT).log();var r=c("XAdBreakPageOnboardingController").getURIBuilder().setFBID("creator_id",this.props.creatorID).setEnum("entrypoint",c("AdBreakPageOnboardingConstants").FROM_COMPOSER).getURI();c("goURI")(r,true)}.bind(this),n}l.prototype.render=function(){return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Earn Money With Ads")},c("React").createElement(c("XUIGrayText.react"),{size:"meta1",display:"block"},i._("Set up ad breaks to start earning money from your videos. You can choose when to start each break, which pauses your video so that a short ad can play.")),c("React").createElement(c("XUIButton.react"),{className:"_3oop _3-8x _3-95",onClick:this.$ComposerVideoAdBreakPageOnboardingSection1,label:i._("Get Started"),type:"button"}))};f.exports=l}),null);
__d("ComposerVideoGeneralPlayer.react",["cx","AsyncRequest","EventListener","React","ReactDOM","VideoData","XVideoDataController","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){__p&&__p();j.constructor.call(this,l);this.$ComposerVideoGeneralPlayer4=function(m){var n=new(c("VideoData"))(JSON.parse(m.payload.responseText)),o=n.hasHD()?n.getPlayableSrcHD():n.getPlayableSrcSD();if(!o){this.$ComposerVideoGeneralPlayer5();return}this.setState({videoUrl:o})}.bind(this);this.$ComposerVideoGeneralPlayer5=function(){this.setState({hasError:true,videoLoaded:false})}.bind(this);this.$ComposerVideoGeneralPlayer3=function(){this.setState({videoLoaded:true})}.bind(this);this.state=this.$ComposerVideoGeneralPlayer1()}k.prototype.$ComposerVideoGeneralPlayer1=function(){var l=null;if(this.props.videoFile)l=this.$ComposerVideoGeneralPlayer2(this.props.videoFile);return{hasError:false,videoLoaded:false,videoUrl:l}};k.prototype.componentDidMount=function(){c("EventListener").listen(c("ReactDOM").findDOMNode(this.refs.preview),"loadeddata",this.$ComposerVideoGeneralPlayer3);if(!this.state.videoUrl&&this.props.videoID){var l=c("XVideoDataController").getURIBuilder().setString("video_id",this.props.videoID).getURI();new(c("AsyncRequest"))().setMethod("GET").setURI(l).setReadOnly(true).setOption("suppressEvaluation",true).setAllowCrossPageTransition(true).setHandler(this.$ComposerVideoGeneralPlayer4).setErrorHandler(this.$ComposerVideoGeneralPlayer5).send()}};k.prototype.render=function(){var l=this.props.defaultMuted!==null?this.props.defaultMuted:true;return c("React").createElement("div",null,c("React").createElement("video",{ref:"preview",crossOrigin:"anonymous",className:c("joinClasses")(this.props.className,"_5rm1"),src:this.state.videoUrl,muted:l}))};k.prototype.$ComposerVideoGeneralPlayer2=function(l){if(l&&b.URL&&b.URL.createObjectURL)return b.URL.createObjectURL(l);else return null};f.exports=k}),null);
__d("ComposerVideoAdBreakPreviewContainer.react",["cx","fbt","CenteredContainer.react","ComposerVideoGeneralPlayer.react","DateConsts","EmbeddedVideoControls.react","EventListener","InstreamPlacement","InstreamVideoAdBreak","React","ReactDOM","SubscriptionsHandler","VideoComponentClickPlayPause.react","VideoComponentCommercialBreakStartingIndicator.react","VideoComponentCommercialBreakVideoAdOverlay.react","VideoComponentCommercialBreakVodTransitionOverlay.react","VideoComponentContextMenu.react","VideoComponentEmbeddedControls.react","VideoComponentScrubberPreview.react","VideoComponentVodWithCommercialBreak.react","VideoComponentWithCommercialBreak.react","VideoComponentWithInstreamVideo.react","VideoComponentWithSpacePlayPause.react","VideoData","VideoFrameBuffer","VideoPlayer.react","VideoPlayerMetaData","VideoPlayerOrigins","VideoPlayerReactExperiments","VideoPlayerReason","XUISpinner.react","emptyFunction"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=3e3,m=.5,n=false,o=60,p=44,q=60,r=78,s=1e6,t=.001;j=babelHelpers.inherits(u,c("React").Component);k=j&&j.prototype;function u(v){__p&&__p();k.constructor.call(this,v);this.$ComposerVideoAdBreakPreviewContainer16=function(){if(this.$ComposerVideoAdBreakPreviewContainer12){var w=this.$ComposerVideoAdBreakPreviewContainer12.videoHeight,x=this.$ComposerVideoAdBreakPreviewContainer12.videoWidth,y={video_id:"",original_height:w,original_width:x,aspect_ratio:x/w,sd_src:this.$ComposerVideoAdBreakPreviewContainer14,stream_type:"progressive",player_version_overwrite:"pleasantville"};this.setState({videoData:new(c("VideoData"))(y)})}}.bind(this);this.$ComposerVideoAdBreakPreviewContainer18=function(){__p&&__p();if(this.$ComposerVideoAdBreakPreviewContainer4>=this.$ComposerVideoAdBreakPreviewContainer3.length){this.$ComposerVideoAdBreakPreviewContainer4=0;return}var w=document.createElement("canvas");w.width=this.props.isAdBreakInsertionRedesignV2?r:q;w.height=this.props.isAdBreakInsertionRedesignV2?p:o;var x=new(c("VideoFrameBuffer"))(w,this.$ComposerVideoAdBreakPreviewContainer10,"cover");x.updateFrameBuffer();this.$ComposerVideoAdBreakPreviewContainer3[this.$ComposerVideoAdBreakPreviewContainer4].thumbnailURL=w.toDataURL("image/jpeg");this.$ComposerVideoAdBreakPreviewContainer4+=1;this.$ComposerVideoAdBreakPreviewContainer20()}.bind(this);this.$ComposerVideoAdBreakPreviewContainer17=function(){__p&&__p();if(!this.$ComposerVideoAdBreakPreviewContainer11)throw new Error("_setup must be called after video is mounted.");this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"timeupdate",function(){if(this.$ComposerVideoAdBreakPreviewContainer11.currentTime!==this.state.position)this.props.onSetCurrentAdBreak(this.$ComposerVideoAdBreakPreviewContainer11.currentTime,false,false);this.setState({position:this.$ComposerVideoAdBreakPreviewContainer11.currentTime});this.$ComposerVideoAdBreakPreviewContainer29(this.$ComposerVideoAdBreakPreviewContainer11.currentTime)}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"progress",function(){this.setState({buffered:this.$ComposerVideoAdBreakPreviewContainer11.buffered.end(0)})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"ended",function(){this.setState({playing:false})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"pause",function(){this.setState({playing:false})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"play",function(){this.setState({playing:true})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"volumechange",function(){this.setState({muted:this.$ComposerVideoAdBreakPreviewContainer11.muted})}.bind(this)));this.setState({duration:this.$ComposerVideoAdBreakPreviewContainer11.duration});this.props.onSetVideoDuration(this.$ComposerVideoAdBreakPreviewContainer11.duration)}.bind(this);this.$ComposerVideoAdBreakPreviewContainer25=function(){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.play()}.bind(this);this.$ComposerVideoAdBreakPreviewContainer24=function(){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.pause()}.bind(this);this.$ComposerVideoAdBreakPreviewContainer26=function(w){if(this.$ComposerVideoAdBreakPreviewContainer11){this.$ComposerVideoAdBreakPreviewContainer11.currentTime=w;this.setState({position:this.$ComposerVideoAdBreakPreviewContainer11.currentTime});var x=Math.round(w*s)/s;this.props.onSetCurrentAdBreak(x,false,!this.state.playing)}}.bind(this);this.$ComposerVideoAdBreakPreviewContainer27=function(){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.muted=!this.state.muted}.bind(this);this.$ComposerVideoAdBreakPreviewContainer28=function(w){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.volume=w}.bind(this);this.$ComposerVideoAdBreakPreviewContainer3=[];this.$ComposerVideoAdBreakPreviewContainer4=0;this.$ComposerVideoAdBreakPreviewContainer5=[];this.$ComposerVideoAdBreakPreviewContainer7=false;this.$ComposerVideoAdBreakPreviewContainer9=c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer;if(this.$ComposerVideoAdBreakPreviewContainer9){this.$ComposerVideoAdBreakPreviewContainer1=this.$ComposerVideoAdBreakPreviewContainer15(this.props.insertedAdBreaks,this.props.isAdBreakDisabled);if(this.props.videoFile)this.$ComposerVideoAdBreakPreviewContainer14=b.URL.createObjectURL(this.props.videoFile)}this.state={buffered:0,duration:0,hasScheduledToShowAdPreview:false,muted:n,playAdPreview:false,playing:false,position:0,videoData:null}}u.prototype.componentDidMount=function(){__p&&__p();if(this.$ComposerVideoAdBreakPreviewContainer9)if(this.props.videoID)c("VideoPlayerMetaData").genVideoData(this.props.videoID).then(function(v){return this.setState({videoData:v})}.bind(this)).done();else this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer12,"loadeddata",this.$ComposerVideoAdBreakPreviewContainer16));else{this.$ComposerVideoAdBreakPreviewContainer11=c("ReactDOM").findDOMNode(this.$ComposerVideoAdBreakPreviewContainer13.refs.preview);this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"loadeddata",this.$ComposerVideoAdBreakPreviewContainer17))}this.$ComposerVideoAdBreakPreviewContainer10=c("ReactDOM").findDOMNode(this.$ComposerVideoAdBreakPreviewContainer6.refs.preview);if(this.$ComposerVideoAdBreakPreviewContainer10)this.$ComposerVideoAdBreakPreviewContainer8=c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer10,"seeked",this.$ComposerVideoAdBreakPreviewContainer18)};u.prototype.componentDidUpdate=function(v,w){__p&&__p();if(this.$ComposerVideoAdBreakPreviewContainer13&&!this.$ComposerVideoAdBreakPreviewContainer11){this.$ComposerVideoAdBreakPreviewContainer11=c("ReactDOM").findDOMNode(this.$ComposerVideoAdBreakPreviewContainer13.refs.video);this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"loadeddata",this.$ComposerVideoAdBreakPreviewContainer17));if(this.$ComposerVideoAdBreakPreviewContainer9&&!this.$ComposerVideoAdBreakPreviewContainer2){this.$ComposerVideoAdBreakPreviewContainer2=new(c("SubscriptionsHandler"))();this.$ComposerVideoAdBreakPreviewContainer2.addSubscriptions(this.$ComposerVideoAdBreakPreviewContainer13.vpc.addListener("commercialBreak/vodBreakStarting",function(){if(!this.props.isPreviewingAdBreak)this.props.onSetIsPreviewingAdBreak(true)}.bind(this)),this.$ComposerVideoAdBreakPreviewContainer13.vpc.addListener("playRequested",function(x){if(this.props.isPreviewingAdBreak&&x===c("VideoPlayerReason").COMMERCIAL_BREAK)this.props.onSetIsPreviewingAdBreak(false)}.bind(this)))}}};u.prototype.componentWillReceiveProps=function(v){__p&&__p();if(v.shouldUpdateVideoPosition){var w=v.currentAdBreak;if(this.$ComposerVideoAdBreakPreviewContainer11&&w!==null&&w!==undefined){this.$ComposerVideoAdBreakPreviewContainer11.pause();if(!v.shouldPauseVideo)this.$ComposerVideoAdBreakPreviewContainer11.play();this.$ComposerVideoAdBreakPreviewContainer11.currentTime=w}}var x=v.insertedAdBreaks;this.$ComposerVideoAdBreakPreviewContainer1=this.$ComposerVideoAdBreakPreviewContainer15(x,v.isAdBreakDisabled);if(this.$ComposerVideoAdBreakPreviewContainer10&&x!==null&&x!==undefined){this.$ComposerVideoAdBreakPreviewContainer19(x);if(!this.$ComposerVideoAdBreakPreviewContainer7)this.$ComposerVideoAdBreakPreviewContainer20()}};u.prototype.componentWillUnmount=function(){this.$ComposerVideoAdBreakPreviewContainer5.forEach(function(event){return event.remove()});if(this.$ComposerVideoAdBreakPreviewContainer8)this.$ComposerVideoAdBreakPreviewContainer8.remove();if(this.$ComposerVideoAdBreakPreviewContainer2)this.$ComposerVideoAdBreakPreviewContainer2.release()};u.prototype.render=function(){return c("React").createElement(c("CenteredContainer.react"),{className:!this.props.isAdBreakInsertionRedesign?"_1t9p":"",vertical:true},this.$ComposerVideoAdBreakPreviewContainer9?this.$ComposerVideoAdBreakPreviewContainer21():this.$ComposerVideoAdBreakPreviewContainer22())};u.prototype.$ComposerVideoAdBreakPreviewContainer22=function(){return c("React").createElement("div",null,c("React").createElement("div",{className:"_3d4u"+(!this.state.playAdPreview?" _bfe":"")},c("React").createElement("text",{className:"_bfg"},i._("Your 15 sec ad break will occur here"))),c("React").createElement(c("ComposerVideoGeneralPlayer.react"),{ref:function(v){this.$ComposerVideoAdBreakPreviewContainer13=v}.bind(this),videoFile:this.props.videoFile,videoID:this.props.videoID,defaultMuted:n}),this.$ComposerVideoAdBreakPreviewContainer23(),c("React").createElement(c("EmbeddedVideoControls.react"),{allowFullscreen:false,allowEnqueuing:false,areHLSActive:false,areSubtitlesActive:false,bufferedPosition:this.state.buffered,doesFullscreenEnterTahoe:false,displayElapsedTime:true,displayMilliseconds:true,finishedPlaying:false,hasHD:false,hasScrubberPreview:false,hasSubtitles:false,hasWatchAndScroll:false,hidden:this.state.playAdPreview,hidePlaybackControl:false,hidePlaybackScrubber:false,hideRemainingTime:false,hideSettings:true,insertedAdBreaks:this.props.insertedAdBreaks,isAdBreakDisabled:this.props.isAdBreakDisabled,isAdBreakInsertionWithoutGapRule:!this.props.hasGapRule,isCommercialBreak:false,isEmbedded:false,isFullscreen:false,isHD:false,isInWatchAndScroll:false,isInline:true,isLive:false,isLiveRewindEnabled:false,isSphericalVideo:false,isMuted:this.state.muted,isPlaying:this.state.playing,isSidePaneOpen:false,isSlidingWNSEligible:false,onClipVideo:c("emptyFunction"),onEnterTahoe:c("emptyFunction"),onEnterWatchAndScroll:c("emptyFunction"),onPause:this.$ComposerVideoAdBreakPreviewContainer24,onPlay:this.$ComposerVideoAdBreakPreviewContainer25,onScrubBegin:c("emptyFunction"),onScrubEnd:this.$ComposerVideoAdBreakPreviewContainer26,onSeek:c("emptyFunction"),onSettingsNUXClose:c("emptyFunction"),onToggleFullscreen:c("emptyFunction"),onToggleHD:c("emptyFunction"),onToggleHLS:c("emptyFunction"),onToggleMuted:this.$ComposerVideoAdBreakPreviewContainer27,onToggleSubtitles:c("emptyFunction"),onVolumeChange:this.$ComposerVideoAdBreakPreviewContainer28,onEnqueueVideo:c("emptyFunction"),permalinkURL:"",playbackDuration:this.state.duration,playbackPosition:this.state.position,previewThumbnailInformation:{},scrubberPreviewSprites:{},volume:this.$ComposerVideoAdBreakPreviewContainer11?this.$ComposerVideoAdBreakPreviewContainer11.volume:0,videoID:this.props.videoID}))};u.prototype.$ComposerVideoAdBreakPreviewContainer21=function(){var v=this.state.videoData;return c("React").createElement("div",null,!v&&!this.props.videoID&&c("React").createElement("video",{className:"_3iej",ref:function(w){this.$ComposerVideoAdBreakPreviewContainer12=w}.bind(this),src:this.$ComposerVideoAdBreakPreviewContainer14}),!v?c("React").createElement(c("XUISpinner.react"),{background:"light",size:"large"}):c("React").createElement(c("VideoPlayer.react"),{ref:function(w){this.$ComposerVideoAdBreakPreviewContainer13=w}.bind(this),className:"_5rm1",videoData:v,playerOrigin:c("VideoPlayerOrigins").COMPOSER,height:284,width:this.props.isAdBreakInsertionRedesign?744:465,autoplay:false},c("React").createElement(c("VideoComponentEmbeddedControls.react"),{adBreaks:{insertedAdBreaks:this.props.isAdBreakAutoInsertionEnabled?null:this.props.insertedAdBreaks,isAdBreakDisabled:this.props.isAdBreakDisabled,isAdBreakInsertionWithoutGapRule:!this.props.hasGapRule,isPreviewingAdBreak:this.props.isPreviewingAdBreak},displayElapsedTime:true,displayMilliseconds:true,showFullscreenButton:false,showSettingsButton:false}),c("React").createElement(c("VideoComponentContextMenu.react"),null),c("React").createElement(c("VideoComponentClickPlayPause.react"),null),c("React").createElement(c("VideoComponentWithSpacePlayPause.react"),null),c("React").createElement(c("VideoComponentScrubberPreview.react"),null),c("React").createElement(c("VideoComponentWithInstreamVideo.react"),{shouldUsePreviewConfig:true,thumbnailURLForPreview:this.props.thumbnailURLForPreview}),c("React").createElement(c("VideoComponentWithCommercialBreak.react"),null),c("React").createElement(c("VideoComponentVodWithCommercialBreak.react"),{adBreaks:this.$ComposerVideoAdBreakPreviewContainer1}),c("React").createElement(c("VideoComponentCommercialBreakVideoAdOverlay.react"),{adsStopped:!this.props.isPreviewingAdBreak}),c("React").createElement(c("VideoComponentCommercialBreakVodTransitionOverlay.react"),null),c("React").createElement(c("VideoComponentCommercialBreakStartingIndicator.react"),{adsStopped:!this.props.isPreviewingAdBreak})),this.$ComposerVideoAdBreakPreviewContainer23())};u.prototype.$ComposerVideoAdBreakPreviewContainer23=function(){return c("React").createElement(c("ComposerVideoGeneralPlayer.react"),{className:"_3lqa",ref:function(v){this.$ComposerVideoAdBreakPreviewContainer6=v}.bind(this),videoFile:this.props.videoFile,videoID:this.props.videoID,defaultMuted:true})};u.prototype.$ComposerVideoAdBreakPreviewContainer15=function(v,w){if(!v||w)return[];return v.map(function(x,y){return new(c("InstreamVideoAdBreak"))({instreamPlacement:c("InstreamPlacement").MID_ROLL,index:0,timeOffsetInMs:x.timeOffset*c("DateConsts").MS_PER_SEC,adBreakDurationInMs:null,adBreakAutoInsertionVersion:null,isAdBreakAutoInserted:false})})};u.prototype.$ComposerVideoAdBreakPreviewContainer19=function(v){this.$ComposerVideoAdBreakPreviewContainer3=this.$ComposerVideoAdBreakPreviewContainer3.concat(v.filter(function(w){if(w.thumbnailURL!==null)return false;this.$ComposerVideoAdBreakPreviewContainer3.forEach(function(x){if(w.timeOffset===x.timeOffset)return false;return true});return true}.bind(this)))};u.prototype.$ComposerVideoAdBreakPreviewContainer20=function(){__p&&__p();this.$ComposerVideoAdBreakPreviewContainer7=true;if(this.$ComposerVideoAdBreakPreviewContainer4>=this.$ComposerVideoAdBreakPreviewContainer3.length){if(this.$ComposerVideoAdBreakPreviewContainer3.length!==0)this.props.onSetThumbnailURLForAdBreak(this.$ComposerVideoAdBreakPreviewContainer3);this.$ComposerVideoAdBreakPreviewContainer3=[];this.$ComposerVideoAdBreakPreviewContainer7=false;this.$ComposerVideoAdBreakPreviewContainer4=0;return}this.$ComposerVideoAdBreakPreviewContainer10.currentTime=this.$ComposerVideoAdBreakPreviewContainer3[this.$ComposerVideoAdBreakPreviewContainer4].timeOffset};u.prototype.$ComposerVideoAdBreakPreviewContainer29=function(v){__p&&__p();if(!this.$ComposerVideoAdBreakPreviewContainer11||!this.props.insertedAdBreaks||this.props.isAdBreakDisabled||this.$ComposerVideoAdBreakPreviewContainer9)return;this.props.insertedAdBreaks.forEach(function(w){__p&&__p();if(w.timeOffset<=v||w.timeOffset-v>=m||this.state.hasScheduledToShowAdPreview)return;this.setState({hasScheduledToShowAdPreview:true});setTimeout(function(){this.$ComposerVideoAdBreakPreviewContainer11.pause();this.setState({playAdPreview:true});setTimeout(function(){this.setState({playAdPreview:false,hasScheduledToShowAdPreview:false});this.$ComposerVideoAdBreakPreviewContainer11.currentTime=w.timeOffset+t;this.$ComposerVideoAdBreakPreviewContainer11.play()}.bind(this),l)}.bind(this),(w.timeOffset-v)*c("DateConsts").MS_PER_SEC)}.bind(this))};f.exports=u}),null);
__d("ComposerVideoAdBreak.react",["ix","cx","fbt","Image.react","React","Tooltip.react","VideoInstreamAdsConstants","VideoInstreamUtils","VideoPlayerReactExperiments","XUIButton.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;function m(o){if(c("VideoInstreamAdsConstants").IS_INSERTION_RULE_V2_LAUNCHED&&o.isAdBreakViolatingInsertionRules)return c("React").createElement("div",{className:"_4gs3"},c("React").createElement(c("Tooltip.react"),{tooltip:c("React").createElement("div",{style:{maxWidth:"200px"}},j._("The placement of this ad break is not eligible for monetization."))},c("React").createElement(c("Image.react"),{src:h("117758")})));return null}k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;n.prototype.render=function(){"use strict";var o=c("VideoInstreamUtils").convertTimestampToFormattedString(this.props.adBreak.timeOffset),p=c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer,q=this.props.currentPreviewIndex!==null,r=this.props.currentPreviewIndex===this.props.index;return c("React").createElement("div",{className:"_5r95"+(q&&!r?" _3bbq":"")},c("React").createElement("div",{className:"_4gs4"},c("React").createElement(c("XUIButton.react"),{className:"_9gb"+(q?" _3bbq":""),label:this.props.index+1,type:"button",onClick:this.props.onDeleteClick.bind(this,this.props.index)}),c("React").createElement(c("XUIText.react"),{size:"header4",className:"_5r97"},o)),c("React").createElement("div",{className:"_4gs4"},c("React").createElement(m,{isAdBreakViolatingInsertionRules:this.props.isAdBreakViolatingInsertionRules}),c("React").createElement("div",{className:"_2f48",onClick:this.props.onPreviewClick.bind(this,this.props.index),role:"presentation"},c("React").createElement("div",{className:p?"_41gm":""},c("React").createElement("div",{className:p&&!r?"_41gn":""}),c("React").createElement("div",{className:p&&r?"_41go":""})),c("React").createElement(c("Image.react"),{className:"_5r96",src:this.props.adBreak.thumbnailURL}))))};function n(){"use strict";k.apply(this,arguments)}f.exports=n}),null);
__d("ComposerVideoAdBreakThumbnailsPreviewSection.react",["cx","fbt","BUISwitch.react","ComposerVideoAdBreak.react","LayerFadeOnHide","React","ReactDOM","VideoInstreamUtils","VideoPlayerReactExperiments","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogConfirmButton.react","XUIDialogTitle.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer?7:3,m=1;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){"use strict";__p&&__p();k.constructor.call(this,o);this.$ComposerVideoAdBreakThumbnailsPreviewSection4=function(p,event){event.stopPropagation();this.props.onDeleteAdBreak(p)}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection5=function(p){if(this.props.isPreviewingAdBreak&&p===this.state.currentPreviewIndex){this.props.onSetIsPreviewingAdBreak(false);this.setState({currentPreviewIndex:null});return}var q=this.props.insertedAdBreaks[p];this.props.onSetCurrentAdBreak(q.timeOffset-l,true,false);this.setState({currentPreviewIndex:p});this.props.onSetIsPreviewingAdBreak(c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer)}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection9=function(p){if(!p)this.setState({showDisableAdBreaksDialog:true});else this.props.onUpdateAdBreaksStatus(!p)}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection8=function(p){this.setState({showDisableAdBreaksDialog:p})}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection7=function(){this.props.onUpdateAdBreaksStatus(!this.props.adBreaksDisabled);this.setState({showDisableAdBreaksDialog:false})}.bind(this);this.state={currentPreviewIndex:null,showDisableAdBreaksDialog:false}}n.prototype.$ComposerVideoAdBreakThumbnailsPreviewSection3=function(){"use strict";this.$ComposerVideoAdBreakThumbnailsPreviewSection2=null;var o=this.props.isPreviewingAdBreak?this.state.currentPreviewIndex:null,p=this.props.insertedAdBreaks.map(function(q,r){var s=this.props.lastInsertedAdBreak!==null&&this.props.lastInsertedAdBreak!==undefined&&this.props.lastInsertedAdBreak.timeOffset===q.timeOffset;return c("React").createElement(c("ComposerVideoAdBreak.react"),{key:r,adBreak:q,currentPreviewIndex:o,index:r,isAdBreakViolatingInsertionRules:c("VideoInstreamUtils").isAdBreakViolatingInsertionRules(this.props.insertedAdBreaks,r,this.props.videoDuration,this.props.hasGapRule),onDeleteClick:this.$ComposerVideoAdBreakThumbnailsPreviewSection4,onPreviewClick:this.$ComposerVideoAdBreakThumbnailsPreviewSection5,ref:function(t){if(s)this.$ComposerVideoAdBreakThumbnailsPreviewSection2=c("ReactDOM").findDOMNode(t)}.bind(this)})}.bind(this));return p};n.prototype.$ComposerVideoAdBreakThumbnailsPreviewSection6=function(){"use strict";if(!this.state.showDisableAdBreaksDialog)return null;if(!this.props.adBreaksExperimentMetadata||!this.props.adBreaksExperimentMetadata.isEligibleCreator||this.props.adBreaksExperimentMetadata.isExpired||!this.props.adBreaksExperimentEnabled){this.$ComposerVideoAdBreakThumbnailsPreviewSection7();return null}return c("React").createElement(c("XUIDialog.react"),{causalElementRef:function(){return this.refs.toggle}.bind(this),shown:this.state.showDisableAdBreaksDialog,behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},width:645,onToggle:this.$ComposerVideoAdBreakThumbnailsPreviewSection8},c("React").createElement(c("XUIDialogTitle.react"),null,c("React").createElement("span",null,"Turn Off Ad Breaks?")),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement("div",null,"If holdout testing is currently running for this video, turning off ad breaks will immediately end the holdout test and disable holdout testing permanently for this video.")),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogCancelButton.react"),null),c("React").createElement(c("XUIDialogConfirmButton.react"),{action:"confirm",use:"confirm",onClick:this.$ComposerVideoAdBreakThumbnailsPreviewSection7})))};n.prototype.componentDidUpdate=function(){"use strict";var o=this.$ComposerVideoAdBreakThumbnailsPreviewSection1,p=this.$ComposerVideoAdBreakThumbnailsPreviewSection2;if(o!==null&&o!==undefined&&p!==null&&p!==undefined)o.scrollTop=p.offsetTop};n.prototype.$ComposerVideoAdBreakThumbnailsPreviewSection10=function(){"use strict";__p&&__p();var o=this.props,p=o.currentOffset,q=o.insertedAdBreaks;if(!p||!q)return null;for(var r=0;r<q.length;r++){var s=q[r].timeOffset;if(p>=s-l&&p<=s+m)return r}return null};n.prototype.componentWillUpdate=function(o,p){"use strict";if(!o.isPreviewingAdBreak){if(this.state.currentPreviewIndex!==null&&p.currentPreviewIndex!==null)this.setState({currentPreviewIndex:null})}else if(this.state.currentPreviewIndex===null&&p.currentPreviewIndex===null)this.setState({currentPreviewIndex:this.$ComposerVideoAdBreakThumbnailsPreviewSection10()})};n.prototype.render=function(){"use strict";if(this.props.hidden||this.props.insertedAdBreaks.length===0)return null;return c("React").createElement("div",{className:"_5r94 _1_hd"+(this.props.isAdBreakInsertionRedesignV1?" _65nj":""),ref:function(o){return this.$ComposerVideoAdBreakThumbnailsPreviewSection1=o}.bind(this)},c("React").createElement("div",{className:"_3-95"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Ad Breaks")),c("React").createElement("div",{className:"_3bbp _3-8_"},c("React").createElement(c("BUISwitch.react"),{value:!this.props.adBreaksDisabled,onToggle:this.$ComposerVideoAdBreakThumbnailsPreviewSection9,disabled:this.props.isPreviewingAdBreak,ref:"toggle"})),this.$ComposerVideoAdBreakThumbnailsPreviewSection6()),c("React").createElement("div",{className:this.props.adBreaksDisabled?"_3bbq":""},this.$ComposerVideoAdBreakThumbnailsPreviewSection3()))};f.exports=n}),null);
__d("ComposerVideoAdBreakVideoRightsSection.react",["cx","fbt","ComposerVideoUploadSection.react","React","XUIButton.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Content Ownership Rights")},c("React").createElement(c("XUIGrayText.react"),{size:"meta1",display:"block"},i._("To include ad breaks, you agree that you have the rights to use all of the content in your video.")),c("React").createElement(c("XUIButton.react"),{className:"_3oop _3-8x _3-95",label:i._("I Agree"),labelIsHidden:false,onClick:this.props.onAgree,type:"button"}))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("ComposerVideoInstreamAdsBlockListSettings.react",["cx","fbt","ComposerVideoUploadTooltip.react","PagesSettingsInstreamAdsBlockListContainer","React","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=c("React").createElement("div",{className:"_4wvp"},c("React").createElement("div",{className:"_4wvq"},c("React").createElement(c("XUIText.react"),null,i._("Block Lists For Ad Breaks")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Use block lists to prevent certain types of ads from appearing in your videos. Block lists can be applied to specific videos or to all videos on your Page.")}))),n=this.props.targetIsVideoAssetId?[this.props.targetIsVideoAssetId]:[],o=c("React").createElement("div",{className:"_4wvw"},c("React").createElement(c("PagesSettingsInstreamAdsBlockListContainer"),{appliable:true,currentPageId:this.props.currentPageId,targetIsVideoAssetIds:n}));return c("React").createElement("div",{className:"_4wxq"},m,o)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("ComposerVideoInstreamAdsExperimentalSection.react",["cx","fbt","AdBreakExperimentalTextUtils","AdsCurrencyFormatter","AsyncRequest","ComposerVideoUploadTooltip.react","HubbleConstants","Link.react","React","XBasicFBNuxDismissController","XPagesManagerInsightsController","XUIAmbientNUX.react","XUICheckboxInput.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=1e4,m=5505;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.state={experimentState:this.props.enabled,initialExperimentState:this.props.enabled,isNuxVisible:this.props.metadata.isNuxVisible};this.$ComposerVideoInstreamAdsExperimentalSection6=function(){var p=c("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",m).getURI();new(c("AsyncRequest"))().setURI(p).send();this.setState({isNuxVisible:!this.state.isNuxVisible})}.bind(this);this.props.onAdBreaksEnableExperimentChange(this.props.enabled);this.props.onSetAdBreaksRevenueLoss(l)}n.prototype.render=function(){if(!this.props.metadata||!this.props.metadata.isEligibleCreator)return null;var o=c("React").createElement("div",{className:"_4wvp"},c("React").createElement("div",{className:"_4wvq"},c("React").createElement(c("XUIText.react"),null,i._("Viewer Holdout Testing")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:c("AdBreakExperimentalTextUtils").getHoldoutToolTipContentForVideo()}))),p=c("React").createElement("div",{className:"_4wvw"},this.$ComposerVideoInstreamAdsExperimentalSection1());return c("React").createElement("div",{className:"_4wxq"},o,p)};n.prototype.$ComposerVideoInstreamAdsExperimentalSection1=function(){if(this.props.metadata.isExpired)return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Test results are available in your")),c("React").createElement(c("Link.react"),{className:"_1er8",href:this.$ComposerVideoInstreamAdsExperimentalSection2()},"Page's Insights."));else if(this.state.initialExperimentState&&this.props.metadata.isStarted)return c("React").createElement("div",null,c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("A holdout test is in progress for this video."))),c("React").createElement("div",{className:"_1er9"},c("React").createElement(c("XUICheckboxInput.react"),{checked:!this.state.experimentState,onClick:this.$ComposerVideoInstreamAdsExperimentalSection3.bind(this)}),c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Turn off test and disable holdout testing permanently for this video."))));else{var o=c("XPagesManagerInsightsController").getURIBuilder().setString("page_token",this.props.pageId).setString("section",c("HubbleConstants").NAV_SECTIONS.AD_BREAKS).getURI();return c("React").createElement("div",null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.experimentState,onClick:this.$ComposerVideoInstreamAdsExperimentalSection4.bind(this),ref:"checkbox"}),c("React").createElement(c("XUIText.react"),{className:"_64zm"},i._("Enable holdout testing. You can see test results in your {redirect}.",[i.param("redirect",c("React").createElement(c("Link.react"),{href:o}," Ad Breaks Insights"))])),this.$ComposerVideoInstreamAdsExperimentalSection5())}};n.prototype.$ComposerVideoInstreamAdsExperimentalSection5=function(){return c("React").createElement(c("XUIAmbientNUX.react"),{alignment:"left",contextRef:function(){return this.refs.checkbox}.bind(this),onCloseButtonClick:this.$ComposerVideoInstreamAdsExperimentalSection6,position:"above",shown:this.state.isNuxVisible,width:"auto"},i._("New! Enable holdout testing to learn how your videos perform when there are ad breaks."))};n.prototype.$ComposerVideoInstreamAdsExperimentalSection4=function(event){this.setState({experimentState:!this.state.experimentState});this.props.onAdBreaksEnableExperimentChange(event.target.checked)};n.prototype.$ComposerVideoInstreamAdsExperimentalSection3=function(event){this.setState({experimentState:!this.state.experimentState});this.props.onAdBreaksEnableExperimentChange(!event.target.checked)};n.prototype.$ComposerVideoInstreamAdsExperimentalSection2=function(){return c("XPagesManagerInsightsController").getURIBuilder().setString("page_token",this.props.pageId).setString("section",c("HubbleConstants").NAV_SECTIONS.AD_BREAKS).getURI()};n.prototype.$ComposerVideoInstreamAdsExperimentalSection7=function(o){return c("AdsCurrencyFormatter").formatCurrencyWithOptionalDecimals("USD",o,true)};f.exports=n}),null);
__d("ComposerVideoAdBreaksTabContainer.react",["cx","ComposerVideoAdBreakActions","ComposerVideoAdBreakAdminPreviewMenuButton.react","ComposerVideoAdBreakInsertionDisabledView.react","ComposerVideoAdBreakInsertionSection.react","ComposerVideoAdBreakInsertionSectionV2.react","ComposerVideoAdBreakPageOnboardingSection.react","ComposerVideoAdBreakPreviewContainer.react","ComposerVideoAdBreaksTabAdvancedSettings.react","ComposerVideoAdBreakStore","ComposerVideoAdBreakThumbnailsPreviewSection.react","ComposerVideoAdBreakVideoRightsSection.react","ComposerVideoInstreamAdsBlockListSettings.react","ComposerVideoInstreamAdsExperimentalSection.react","ComposerVideoUploadStore","React","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","VideoComposerDialogAdBreakAutoAdjustmentSettings.react","VideoComposerDialogAdBreakDemonetizationNotice.react","VideoComposerDialogAdBreakProgramRulesChangesNotice.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"ComposerVideoAdBreaksTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoAdBreakStore"))],statics:{calculateState:function k(l,m){var n=c("ComposerVideoAdBreakStore").getAdBreaksStatus(l),o=c("ComposerVideoAdBreakStore").getAdBreaksExperimentEnabled(l),p=c("ComposerVideoAdBreakStore").getAdBreaksExperimentRevenueLossThreshold(l),q=c("ComposerVideoAdBreakStore").getAdBreakTabState(l,m.serverSideDisabledReasons,m.hasGapRule),r=c("ComposerVideoAdBreakStore").getCurrentAdBreak(l),s=c("ComposerVideoAdBreakStore").getInsertedAdBreaks(l),t=c("ComposerVideoAdBreakStore").getIsAdBreakAutoAdjustmentEnabled(l),u=c("ComposerVideoAdBreakStore").getIsAdBreakAutoInsertionEnabled(l),v=c("ComposerVideoAdBreakStore").getLastInsertedAdBreak(l),w=c("ComposerVideoAdBreakStore").getShouldDisableAdBreakInsertion(l,m.serverSideDisabledReasons,m.hasGapRule),x=c("ComposerVideoAdBreakStore").getVideoDuration(l),y=c("ComposerVideoAdBreakStore").getVideoRightsAgreed(l);return{adBreaksDisabled:n,adBreaksExperimentEnabled:o,adBreaksExperimentRevenueLossThreshold:p,adBreakTabState:q,currentAdBreak:r,insertedAdBreaks:s,isAdBreakAutoAdjustmentEnabled:t,isAdBreakAutoInsertionEnabled:u,lastInsertedAdBreak:v,shouldDisableAdInsertionTab:w,videoDuration:x,videoRightsAgreed:y}}},propTypes:{adBreaksExperimentPublicMetadata:i.object,hasGapRule:i.bool.isRequired,isAdBreakInsertionRedesignV1:i.bool,isAdBreakInsertionRedesignV2:i.bool,isDemonetized:i.bool,isEditing:i.bool.isRequired,pageId:i.string.isRequired,serverSideDisabledReasons:i.array,shouldShowPageOnboardingForAdBreak:i.bool,shown:i.bool.isRequired,showAdBreakAdminPreviewSettings:i.bool,showAdBreakOffsetEditorNux:i.bool,uploadVideoID:i.string,videoAssetID:i.string,videoFile:i.object,videoID:i.string},componentDidMount:function k(){if(!this.props.isEditing&&(this.props.isAdBreakInsertionRedesignV1||this.props.isAdBreakInsertionRedesignV2))this._onEnableAdBreakAutoAdjustment(true);if(!this.props.isEditing&&this.props.isAdBreakInsertionRedesignV2){this._onEnableAdBreakAutoInsertion(true);if(!this.props.isAutoInsertionEnabledOnProfile)this._onUpdateAdBreaksStatus(true)}},componentWillUpdate:function k(l,m){if(!this.state.shouldDisableAdInsertionTab&&m.shouldDisableAdInsertionTab&&this.state.isPreviewingAdBreak&&m.isPreviewingAdBreak){this._onSetIsPreviewingAdBreak(false);this.setState({shouldUpdateVideoPosition:true,shouldPauseVideo:true})}},render:function k(){return c("React").createElement("div",{className:!this.props.shown?"_2oq6":""},this._renderTabContent(),c("React").createElement(c("VideoComposerDialogAdBreakDemonetizationNotice.react"),{isDemonetized:!!this.props.isDemonetized}),c("React").createElement(c("VideoComposerDialogAdBreakProgramRulesChangesNotice.react"),null))},_renderTabContent:function k(){if(this.props.isAdBreakInsertionRedesignV1||this.props.isAdBreakInsertionRedesignV2)return c("React").createElement("div",{className:"_19jn"},this._renderPreviewSection(),this._renderMetadataSection(),this._renderAdvancedSection());return c("React").createElement("div",{className:"_19jn"},this._renderMetadataSection(),this._renderPreviewSection(),this._renderAdvancedSection())},_renderMetadataSection:function k(){var l=null;if(this.props.shouldShowPageOnboardingForAdBreak)l=c("React").createElement(c("ComposerVideoAdBreakPageOnboardingSection.react"),{creatorID:this.props.pageId});else if(this.state.shouldDisableAdInsertionTab)l=c("React").createElement(c("ComposerVideoAdBreakInsertionDisabledView.react"),{errorMessageContent:this.state.adBreakTabState.errorMessageContent,errorMessageHeader:this.state.adBreakTabState.errorMessageHeader});else if(!this.state.videoRightsAgreed)l=c("React").createElement(c("ComposerVideoAdBreakVideoRightsSection.react"),{onAgree:this._onAgree});var m=!this.state.videoRightsAgreed||this.state.shouldDisableAdInsertionTab||this.props.shouldShowPageOnboardingForAdBreak,n=this.props.isAdBreakInsertionRedesignV1||this.props.isAdBreakInsertionRedesignV2;return c("React").createElement("div",null,this.props.isAdBreakInsertionRedesignV2?c("React").createElement("div",{className:"_5r7-"+(!this.state.adBreaksDisabled?" _q8z":"")+(m?" _q9c":"")},l,!m?c("React").createElement(c("ComposerVideoAdBreakInsertionSectionV2.react"),{adBreaksDisabled:this.state.adBreaksDisabled,currentOffset:this.state.currentAdBreak,hasGapRule:this.props.hasGapRule,insertedAdBreaks:this.state.insertedAdBreaks,isPreviewingAdBreak:this.state.isPreviewingAdBreak,videoDuration:this.state.videoDuration,isAdBreakAutoAdjustmentEnabled:this.state.isAdBreakAutoAdjustmentEnabled,isAdBreakAutoInsertionEnabled:this.state.isAdBreakAutoInsertionEnabled,videoID:this._getVideoID(),onDeleteAdBreak:this._onDeleteAdBreak,onEnableAdBreakAutoAdjustment:this._onEnableAdBreakAutoAdjustment,onEnableAdBreakAutoInsertion:this._onEnableAdBreakAutoInsertion,onInsertAdBreak:this._onInsertAdBreak,onSetCurrentAdBreak:this._onSetCurrentAdBreak,onSetIsPreviewingAdBreak:this._onSetIsPreviewingAdBreak,onUpdateAdBreaksStatus:this._onUpdateAdBreaksStatus}):null):c("React").createElement("div",{className:(!n?"_1_hc":"")+(n?" _q8z":"")},c("React").createElement("div",{className:"_5r7-"+(this.props.isAdBreakInsertionRedesignV1?" _q9c":"")},l,c("React").createElement(c("ComposerVideoAdBreakInsertionSection.react"),{hasGapRule:this.props.hasGapRule,hidden:m,insertedAdBreaks:this.state.insertedAdBreaks,isPreviewingAdBreak:this.state.isPreviewingAdBreak,videoDuration:this.state.videoDuration,currentOffset:this.state.currentAdBreak,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,onInsertAdBreak:this._onInsertAdBreak,onSetCurrentAdBreak:this._onSetCurrentAdBreak}),this.props.isAdBreakInsertionRedesignV1&&!m?c("React").createElement("div",{className:"_3-8y _2fb1"}):null,this.props.isAdBreakInsertionRedesignV1&&!m?c("React").createElement(c("VideoComposerDialogAdBreakAutoAdjustmentSettings.react"),{isAdBreakAutoAdjustmentEnabled:Boolean(this.state.isAdBreakAutoAdjustmentEnabled),onEnableAdBreakAutoAdjustment:this._onEnableAdBreakAutoAdjustment}):null),c("React").createElement(c("ComposerVideoAdBreakThumbnailsPreviewSection.react"),{adBreaksDisabled:this.state.adBreaksDisabled,adBreaksExperimentEnabled:this.state.adBreaksExperimentEnabled,adBreaksExperimentMetadata:this.props.adBreaksExperimentPublicMetadata,currentOffset:this.state.currentAdBreak,hasGapRule:this.props.hasGapRule,hidden:m,insertedAdBreaks:this.state.insertedAdBreaks,isPreviewingAdBreak:this.state.isPreviewingAdBreak,lastInsertedAdBreak:this.state.lastInsertedAdBreak,isAdBreakInsertionRedesignV1:this.props.isAdBreakInsertionRedesignV1,videoDuration:this.state.videoDuration,onDeleteAdBreak:this._onDeleteAdBreak,onSetCurrentAdBreak:this._onSetCurrentAdBreak,onSetIsPreviewingAdBreak:this._onSetIsPreviewingAdBreak,onUpdateAdBreaksStatus:this._onUpdateAdBreaksStatus})))},_renderPreviewSection:function k(){var l=this.state.shouldDisableAdInsertionTab||this.props.shouldShowPageOnboardingForAdBreak||!this.state.videoRightsAgreed?null:this.state.insertedAdBreaks,m=c("ComposerVideoUploadStore").getThumbnail(this.context.composerID);return c("React").createElement(c("ComposerVideoAdBreakPreviewContainer.react"),{currentAdBreak:this.state.currentAdBreak,hasGapRule:this.props.hasGapRule,insertedAdBreaks:l,isAdBreakAutoInsertionEnabled:this.state.isAdBreakAutoInsertionEnabled,isAdBreakDisabled:this.state.adBreaksDisabled,isAdBreakInsertionRedesign:this.props.isAdBreakInsertionRedesignV1||this.props.isAdBreakInsertionRedesignV2,isAdBreakInsertionRedesignV2:this.props.isAdBreakInsertionRedesignV2,isPreviewingAdBreak:this.state.isPreviewingAdBreak,shouldPauseVideo:this.state.shouldPauseVideo,shouldUpdateVideoPosition:this.state.shouldUpdateVideoPosition,thumbnailURLForPreview:m&&m.getURL(),videoFile:this.props.videoFile,videoID:this.props.videoID,onSetCurrentAdBreak:this._onSetCurrentAdBreak,onSetIsPreviewingAdBreak:this._onSetIsPreviewingAdBreak,onSetThumbnailURLForAdBreak:this._onSetThumbnailURLForAdBreak,onSetVideoDuration:this._onSetVideoDuration})},_renderAdvancedSection:function k(){if(!this._shouldShowAdvancedSettings())return null;var l=this.props.showAdBreakAdminPreviewSettings&&!this.props.isAdBreakInsertionRedesignV2?c("React").createElement(c("ComposerVideoAdBreakAdminPreviewMenuButton.react"),{adBreaksDisabled:this.state.adBreaksDisabled,insertedAdBreaks:this.state.insertedAdBreaks,videoID:this._getVideoID()}):null;return c("React").createElement(c("ComposerVideoAdBreaksTabAdvancedSettings.react"),{secondary:l},this._renderAdBreaksExperimentSection(),this._renderAdBreaksBlockListSection())},_renderAdBreaksExperimentSection:function k(){if(this.state.adBreaksDisabled||this.state.insertedAdBreaks.length===0)return null;return c("React").createElement(c("ComposerVideoInstreamAdsExperimentalSection.react"),{enabled:this.state.adBreaksExperimentEnabled,metadata:this.props.adBreaksExperimentPublicMetadata,onAdBreaksEnableExperimentChange:this._onAdBreaksEnableExperimentChange,onSetAdBreaksRevenueLoss:this._onSetAdBreaksRevenueLoss,pageId:this.props.pageId,revenueThreshold:this.state.adBreaksExperimentRevenueLossThreshold})},_renderAdBreaksBlockListSection:function k(){return c("React").createElement(c("ComposerVideoInstreamAdsBlockListSettings.react"),{currentPageId:this.props.pageId,targetIsVideoAssetId:this.props.videoAssetID?this.props.videoAssetID:this.props.videoID})},_getVideoID:function k(){return this.props.videoID?this.props.videoID:this.props.uploadVideoID?this.props.uploadVideoID:null},_onAgree:function k(){c("ComposerVideoAdBreakActions").setVideoRightsAgreed(this.context.composerID,true)},_onEnableAdBreakAutoAdjustment:function k(l){c("ComposerVideoAdBreakActions").setIsAdBreakAutoAdjustmentEnabled(this.context.composerID,l)},_onEnableAdBreakAutoInsertion:function k(l){c("ComposerVideoAdBreakActions").setIsAdBreakAutoInsertionEnabled(this.context.composerID,l)},_onInsertAdBreak:function k(){c("ComposerVideoAdBreakActions").insertCurrentAdBreak(this.context.composerID)},_onSetCurrentAdBreak:function k(l,m,n){c("ComposerVideoAdBreakActions").setCurrentAdBreak(this.context.composerID,l);this.setState({shouldUpdateVideoPosition:m,shouldPauseVideo:n})},_onSetIsPreviewingAdBreak:function k(l){this.setState({isPreviewingAdBreak:l})},_onSetThumbnailURLForAdBreak:function k(l){c("ComposerVideoAdBreakActions").setThumbnailURLForAdBreak(this.context.composerID,l)},_onSetVideoDuration:function k(l){c("ComposerVideoAdBreakActions").setVideoDuration(this.context.composerID,l)},_onDeleteAdBreak:function k(l){c("ComposerVideoAdBreakActions").deleteAdBreak(this.context.composerID,l)},_onUpdateAdBreaksStatus:function k(l){c("ComposerVideoAdBreakActions").updateAdBreaksStatus(this.context.composerID,l)},_onAdBreaksEnableExperimentChange:function k(l){c("ComposerVideoAdBreakActions").setAdBreaksExperimentEnabled(this.context.composerID,l)},_onSetAdBreaksRevenueLoss:function k(l){c("ComposerVideoAdBreakActions").setAdBreaksExperimentRevenueLossThreshold(this.context.composerID,l)},_shouldShowAdvancedSettings:function k(){return!this.state.shouldDisableAdInsertionTab}});f.exports=j}),null);
__d("ComposerVideoUploadCustomLabels.react",["cx","fbt","ComposerVideoUploadTooltip.react","React","SearchableEntry","WebAsyncSearchSource","XUIText.react","XUITokenizer.react","XVideoCustomLabelsTypeaheadController"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.state={entries:this.props.customLabels.map(function(n){return new(c("SearchableEntry"))({uniqueID:n,title:n})}),queryString:"",searchSource:this.$ComposerVideoUploadCustomLabels1.bind(this)()}}l.prototype.render=function(){var m=[],n={},o=this.state.queryString.trim();if(o){m=[new(c("SearchableEntry"))({uniqueID:o,title:o})];n[o]=o}return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Custom Labels")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Describe your videos with custom labels. Unlike content tags, custom labels are not published and only appear in insights data."),alignV:"above",alignH:"right"})),c("React").createElement(c("XUITokenizer.react"),{additionalEntries:m,disabled:!this.props.editable,entries:this.state.entries,excludedEntries:n,onQueryStringChange:this.$ComposerVideoUploadCustomLabels2.bind(this),onAddEntryAttempt:this.$ComposerVideoUploadCustomLabels3.bind(this),onRemoveEntryAttempt:this.$ComposerVideoUploadCustomLabels4.bind(this),queryString:this.state.queryString,placeholder:i._("Add a custom label (Optional)"),searchSource:this.state.searchSource,showEntriesOnFocus:true}))};l.prototype.$ComposerVideoUploadCustomLabels3=function(m){var n=this.state.entries,o=n.some(function(p){return p.getUniqueID()===m.getUniqueID()});if(!o)n.push(m);this.setState({entries:n,queryString:""});this.props.onCustomLabelsChange(n.map(function(p){return p.getUniqueID()}))};l.prototype.$ComposerVideoUploadCustomLabels4=function(m){var n=this.state.entries,o=n.some(function(p){return p.getUniqueID()===m.getUniqueID()});if(o)n.splice(n.indexOf(m),1);this.setState({entries:n,queryString:""});this.props.onCustomLabelsChange(n.map(function(p){return p.getUniqueID()}))};l.prototype.$ComposerVideoUploadCustomLabels2=function(event){this.setState({queryString:event.target.value})};l.prototype.$ComposerVideoUploadCustomLabels1=function(){var m=c("XVideoCustomLabelsTypeaheadController").getURIBuilder().setFBID("profile_id",this.props.targetID).getURI();return new(c("WebAsyncSearchSource"))({bootstrapRequests:[{uri:m}],getAllForEmptyQuery:true})};f.exports=l}),null);
__d("ComposerVideoUploadUtils",["fbt"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={getDistributionSummaryItems:function j(k,l,m,n,o){__p&&__p();var p=[];if(k&&!n)p.push(h._("Will appear on your Page's Videos tab, but not News Feed or Timeline"));if(l)p.push(h._("Video will not be available to users under 18."));if(!m)p.push(h._("Embedding on third-party websites is not allowed"));if(n){p.push(h._("Add as a secret video that is unpublished and non-searchable"));if(o)p.push(h._("Likes, comments and sharing are turned off"))}if(p.length===0)p.push(h._("Standard distribution with no restrictions"));return p}};f.exports=i}),null);
__d("ComposerVideoUploadAdvancedTab.react",["cx","fbt","BUITextInput_DEPRECATED.react","ComposerCharityTypeahead.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadCustomLabels.react","ComposerVideoUploadStore","ComposerVideoUploadTooltip.react","ComposerVideoUploadUtils","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","Link.react","React","ReactComposerContextTypes","SearchableEntry","Tooltip.react","VideoPermalinkText.react","XUICheckboxInput.react","XUISelector.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("XUISelector.react").Option,k=c("React").PropTypes,l=c("React").createClass({displayName:"ComposerVideoUploadAdvancedTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function m(n,o){var p=c("ComposerVideoUploadStore").getCopyrighted(n),q=c("ComposerVideoUploadStore").getSpherical(n),r=c("ComposerVideoUploadStore").getEmbeddable(n),s=c("ComposerVideoUploadStore").getInternalSetting(n),t=c("ComposerVideoUploadStore").getFteOnly(n),u=c("ComposerVideoUploadStore").getExternalVideoID(n),v=c("ComposerVideoUploadStore").getCustomLabels(n),w=c("ComposerVideoUploadStore").getExcludeNewsfeed(n),x=c("ComposerVideoUploadStore").getFundraiserForStoryCharityID(n);return{copyrighted:p,spherical:q,isFTEOnly:t,isInternalVideo:s,embeddableForEdit:r,externalVideoID:u,customLabels:v,excludeFromNewsfeed:w,fundraiserForStoryCharityID:x}},getAttachmentInitialState:function m(n,o){return{blockSocialActions:false,distribution:"everywhere",disturbing:false,embeddable:true,excludeFromNewsfeed:false,isSecretVideo:false,baseProgress:0,isInternalVideo:false,isFTEOnly:false,embeddableForEdit:true,externalVideoID:"",customLabels:[],wasCopyrighted:c("ComposerVideoUploadStore").getCopyrighted(n),fundraiserForStoryCharityID:c("ComposerVideoUploadStore").getFundraiserForStoryCharityID(n)}}},propTypes:{canEditCustomLabels:k.bool,canEditExternalVideoID:k.bool,canEditFundraiserForStoryCharityID:k.bool,isEditing:k.bool,isPageTrailer:k.bool,isVideoUpload:k.bool,isShowPage:k.bool,showCopyrightSection:k.bool,showCustomLabels:k.bool,showExternalVideoIDSection:k.bool,showDisturbingSection:k.bool,showAdvancedTabSphericalCheckbox:k.bool,showSecretVideoOption:k.bool,showInternalVideoSettings:k.bool,targetID:k.string,toggleRightsTab:k.func.isRequired,toggleSphericalTab:k.func.isRequired,shown:k.bool,wasCopyrighted:k.bool},updateStoreDistributionValuesWithCustomOptions:function m(){this.updateStoreDistributionValues(this.state.blockSocialActions,this.state.disturbing,this.state.embeddable,this.state.excludeFromNewsfeed,this.state.isSecretVideo,this.state.isInternalVideo,this.state.isFTEOnly)},onExcludeFromNewsfeedOptionChange:function m(event){this.setState({excludeFromNewsfeed:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onDisturbingOptionChange:function m(event){this.setState({disturbing:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onEmbeddableOptionChange:function m(event){this.setState({embeddable:!event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onSecretVideoOptionChange:function m(event){this.setState({isSecretVideo:event.target.checked,blockSocialActions:event.target.checked,excludeFromNewsfeed:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onInternalVideoOptionChange:function m(event){this.setState({isInternalVideo:event.target.checked,isFTEOnly:event.target.checked?this.state.isFTEOnly:false},this.updateStoreDistributionValuesWithCustomOptions)},onFTEVideoOptionChange:function m(event){this.setState({isFTEOnly:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onSocialActionsOptionChange:function m(event){this.setState({blockSocialActions:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onExternalVideoIDChange:function m(event){var n=event.target.value,o=this.context.composerID;c("ComposerVideoUploadActions").updateExternalVideoID(o,n);this.setState({externalVideoID:n})},onCustomLabelsChange:function m(n){this.setState({customLabels:n});c("ComposerVideoUploadActions").updateCustomLabels(this.context.composerID,n)},updateStoreDistributionValues:function m(n,o,p,q,r,s,t){var u=this.context.composerID;c("ComposerVideoUploadActions").updateBlockSocialActions(u,n);c("ComposerVideoUploadActions").updateDisturbing(u,o);c("ComposerVideoUploadActions").updateEmbeddable(u,p);c("ComposerVideoUploadActions").updateExcludeNewsfeed(u,q);c("ComposerVideoUploadActions").updateIsSecretVideo(u,r);c("ComposerVideoUploadActions").updateInternalVideoSettings(u,s);c("ComposerVideoUploadActions").updateFTEOnly(u,t)},renderDistributionSelector:function m(){if(this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement(c("XUISelector.react"),{onChange:this.onDistributionChange,value:this.state.distribution},c("React").createElement(j,{value:"everywhere"},i._("Everywhere")),c("React").createElement(j,{value:"exclude_newsfeed"},i._("Exclude from News Feed")),c("React").createElement(j,{value:"custom"},i._("Custom")))},renderDistributionEditComponent:function m(){return c("React").createElement("div",{className:"_1_hg"},this.renderDistributionHeader(),this.renderDistributionHelperText(),this.renderEditEmbeddableOption(),this.renderInternalSettingsOption(),this.renderVideoPermalinkSection())},renderEditEmbeddableOption:function m(){return c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:!this.state.embeddableForEdit,onChange:this.onEditEmbeddableOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Prohibit embedding")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("By default, third-party websites can embed your video. Check to prohibit embedding."),alignv:"bottom"})))},onEditEmbeddableOptionChange:function m(event){c("ComposerVideoUploadActions").updateEmbeddable(this.context.composerID,!event.target.checked)},renderCustomDistributionOptions:function m(){return c("React").createElement("div",{className:"_2t3n"},this.renderExcludeFromNewsfeedOption(),this.renderDisturbingOption(),this.renderEmbeddableOption(),this.renderSecretVideoOption(),this.renderInternalSettingsOption())},renderInternalSettingsOption:function m(){if(!this.props.showInternalVideoSettings)return[];var n=!this.state.isInternalVideo,o=this.props.isEditing;return[c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"internal_video",className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.isInternalVideo,onChange:this.onInternalVideoOptionChange,disabled:o}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(o?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Is Internal Video")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Internal videos are only available to FB employees including contractors."),alignv:"bottom"}))),c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"fte_only",className:"_2t3o _2t3r"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.isFTEOnly,onChange:this.onFTEVideoOptionChange,disabled:n}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(n?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("FTE And Interns Only")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Restrict access to the internal video to full-time employees and interns only"),alignv:"bottom"})))]},renderExcludeFromNewsfeedOption:function m(){var n=this.state.isSecretVideo;return c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.excludeFromNewsfeed,onChange:this.onExcludeFromNewsfeedOptionChange,disabled:n}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(n?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Exclude from News Feed")),this.renderExcludeFromNewsfeedTooltip()))},renderEmbeddableOption:function m(){return c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:!this.state.embeddable,onChange:this.onEmbeddableOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Prohibit embedding")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("By default, third-party websites can embed your video. Check to prohibit embedding."),alignv:"bottom"})))},renderDisturbingOption:function m(){if(!this.props.showDisturbingSection)return null;return c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.disturbing,onChange:this.onDisturbingOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Show graphic content warning")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Displays a warning and turns off autoplay. Graphic content will be hidden from people 18 and under."),alignv:"bottom"})))},renderSecretVideoOption:function m(){if(!this.props.showSecretVideoOption)return[];var n=!this.state.isSecretVideo;return[c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"secret_video",className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.isSecretVideo,onChange:this.onSecretVideoOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Add as secret video")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Secret videos are only available on embeds and to the person that has the link to the video."),alignv:"bottom"}))),c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"social_actions",className:"_2t3o _2t3r"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.blockSocialActions,onChange:this.onSocialActionsOptionChange,disabled:n}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(n?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Block social actions")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Blocking social actions will disallow likes and comments"),alignv:"bottom"})))]},isEmptyCustomDistribution:function m(){if(this.isCustomDistribution()&&!this.state.excludeFromNewsfeed&&!this.state.disturbing&&this.state.embeddable&&!this.state.isSecretVideo)return true;else return false},onCopyrightedChange:function m(event){c("ComposerVideoUploadActions").updateCopyrighted(this.context.composerID,event.target.checked);this.props.toggleRightsTab(event.target.checked)},renderCopyrightSection:function m(){if(!this.props.showCopyrightSection||!this.props.isEditing&&!this.props.isVideoUpload)return null;return c("React").createElement("div",{className:"_3guc"},c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Rights Management"))),c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"meta1"},i._("Facebook can alert you if anyone posts a video that matches this one"))),c("React").createElement("div",null,c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.copyrighted,onChange:this.onCopyrightedChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Monitor for matching uploads")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Identifies other Facebook videos that include all or part of this video"),alignH:"right"})))))},getDistributionSummaryItems:function m(){if(this.isCustomDistribution())return c("ComposerVideoUploadUtils").getDistributionSummaryItems(this.state.excludeFromNewsfeed,this.state.disturbing,this.state.embeddable,this.state.isSecretVideo,this.state.blockSocialActions);else if(this.isExcludeFromNewsfeedDistribution())return c("ComposerVideoUploadUtils").getDistributionSummaryItems(true,false,true,false,false);else return c("ComposerVideoUploadUtils").getDistributionSummaryItems(false,false,true,false,false)},isCustomDistribution:function m(){return this.state.distribution==="custom"},isExcludeFromNewsfeedDistribution:function m(){return this.state.distribution==="exclude_newsfeed"},_shouldShowDistributionSection:function m(){if(this.props.isPageTrailer)return false;return true},onDistributionChange:function m(event){if(event.value==="exclude_newsfeed")this.updateStoreDistributionValues(false,false,true,true,false,false,false);else if(event.value==="custom")this.updateStoreDistributionValuesWithCustomOptions();else this.updateStoreDistributionValues(false,false,true,false,false,false,false);this.setState({distribution:event.value})},renderDistributionSummary:function m(){if(this.isEmptyCustomDistribution())return c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"meta1"},i._("Use of these options reduces the number of views your video will receive.")));var n=this.getDistributionSummaryItems(),o=n.map(function(p,q){return c("React").createElement("li",{key:q},c("React").createElement(c("XUIText.react"),{size:"meta1"},p))});return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Distribution Summary")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("A summary of where your video will appear, based on the distribution options you selected.")})),c("React").createElement("ul",{className:"_59uq"},o))},onSphericalChange:function m(event){c("ComposerVideoUploadActions").updateSpherical(this.context.composerID,event.target.checked);this.props.toggleSphericalTab(event.target.checked)},renderSphericalSection:function m(){if(!this.props.showAdvancedTabSphericalCheckbox)return null;return c("React").createElement("div",null,c("React").createElement("div",null,c("React").createElement(c("InputLabel_DEPRECATED.react"),{display:"inline"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.spherical,onChange:this.onSphericalChange,disabled:!this.props.isVideoUpload}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(!this.props.isVideoUpload?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("This video was recorded in 360\u00b0 format")))),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("360 Video is a special format that enables a user-controlled, spherical perspective.").toString(),alignH:"right",className:"_3iot"})),c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"meta1"},c("React").createElement(c("Link.react"),{href:"/help/828417127257368",target:"_blank"},i._("Learn more about 360 Video in the Help Center")))))},renderDistributionHeader:function m(){return c("React").createElement("div",{className:"_1_hd _5m7y"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Distribution")))},renderExcludeFromNewsfeedTooltip:function m(){if(this.props.isShowPage)return c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If checked, the episode or video will not appear in people's News Feed"),alignv:"bottom"});return c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("By default, video posts will be shown on people's News Feed."),alignv:"bottom"})},renderDistributionHelperText:function m(){return c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"meta1"},i._("Choose where you want this video to appear.")))},renderExternalId:function m(){if(!this.props.canEditExternalVideoID&&!this.state.externalVideoID)return null;var n=c("React").createElement(c("BUITextInput_DEPRECATED.react"),{height:"xtall",className:"_3xjx _26uc",placeholder:i._("Add an asset management code (Optional)"),onChange:this.onExternalVideoIDChange,value:this.state.externalVideoID,disabled:!this.props.canEditExternalVideoID});return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Universal Video Identifier")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If there is an unique code associated with this video in your own video content management system, you can add it here. This is for your own use; Facebook will not use this data."),alignV:"above",alignH:"right"})),n)},_onSelectCharity:function m(n){var o=n.getUniqueID();c("ComposerVideoUploadActions").updateFundraiserForStoryCharityID(this.context.composerID,o)},_onClearCharity:function m(){c("ComposerVideoUploadActions").updateFundraiserForStoryCharityID(this.context.composerID,null)},renderFundraiserSection:function m(){if(!this.props.canEditFundraiserForStoryCharityID)return null;var n=i._("Add a button to raise money for a nonprofit (Optional)");return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Donate Button"))),c("React").createElement("div",{className:"_2cg4 _3xjx"},c("React").createElement(c("ComposerCharityTypeahead.react"),{onSelect:this._onSelectCharity,onClear:this._onClearCharity,focusOnMount:false,placeholder:n})))},renderCustomLabels:function m(){if(!this.props.showCustomLabels)return null;return c("React").createElement(c("ComposerVideoUploadCustomLabels.react"),{customLabels:this.state.customLabels?this.state.customLabels:[],editable:this.props.canEditCustomLabels,onCustomLabelsChange:this.onCustomLabelsChange,targetID:this.props.targetID})},renderDistribution:function m(){if(this.props.isEditing)return this.renderDistributionEditComponent();else{var n;if(this.isCustomDistribution()||this.props.isShowPage)n=this.renderCustomDistributionOptions();return c("React").createElement("div",{className:"_1_hg"},this.renderDistributionHeader(),this.renderDistributionHelperText(),this.renderDistributionSelector(),n,c("React").createElement("div",{className:"_1_hd _5m7z"},this.renderDistributionSummary()))}},renderVideoPermalinkSection:function m(){if(!this.props.isEditing||!this.props.isSecret)return null;return c("React").createElement("div",{className:"_4x8f"},i._("The secret video is available at this location"),c("React").createElement(c("VideoPermalinkText.react"),{targetID:this.context.targetID,videoID:this.props.videoID}))},render:function m(){if(this.props.isCarouselPreviewEditing)return c("React").createElement("div",{className:"_1_he"+(!this.props.shown?" _2oq6":"")},c("React").createElement("div",{className:"_1_hg"},this.renderCopyrightSection()));return c("React").createElement("div",{className:"_1_he"+(!this.props.shown?" _2oq6":"")},this._shouldShowDistributionSection()?this.renderDistribution():null,c("React").createElement("div",{className:"_1_hg"+(this._shouldShowDistributionSection()?" _5m8o":"")},this.renderSphericalSection(),this.renderCopyrightSection(),this.renderExternalId(),this.renderCustomLabels(),this.renderFundraiserSection()))}});f.exports=l}),null);
__d("ComposerVideoUploadBasicTab.react",["cx","fbt","BUITextInput_DEPRECATED.react","ComposerVideoShowsActions","InputLabel.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadPreviewSection.react","ComposerVideoUploadSection.react","ComposerVideoUploadStore","ComposerVideoUploadTooltip.react","GamesTypeahead.react","Image.react","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","React","ReactComposerContextTypes","ShowsCrosspostToParentPageInput.react","ShowsUploadDialogNuxTour.react","VideoContentCategorySelector.react","VideoContentCategoryType","VideoContentTagSelectorToken.react","VideoFeedType","VideoUploadVideoListSectionContainer.react","VideoUploadVideoTypeSectionContainer.react","XUIAmbientNUX.react","XUICheckboxInput.react","XUIText.react","Link.react","XUIGrayText.react","requiredIfPropIsFalsy"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"ComposerVideoUploadBasicTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function l(m,n){var o=c("ComposerVideoUploadStore").getTitle(m),p=c("ComposerVideoUploadStore").getCategory(m)||c("VideoContentCategoryType").OTHER.value,q=c("ComposerVideoUploadStore").getContentTags(m),r=c("ComposerVideoUploadStore").getFeedType(m),s=r===c("VideoFeedType").HIGHLIGHTED.index,t=c("ComposerVideoUploadStore").getEpisodeData(m),u=t&&t.isEpisode,v=c("ComposerVideoUploadStore").getExcludeNewsfeed(m),w=c("ComposerVideoUploadStore").getVideoDurationInSec(m),x=c("ComposerVideoUploadStore").getShareToParentPageOptionSelected(m);return{category:p,contentTags:q,highlightedInFeed:s,title:o,isEpisode:u,excludeNewsfeed:v,durationInSec:w,shareToParentPageOptionSelected:x}}},propTypes:{accessToken:j.string,allowCustomThumbnail:j.bool,canSeeUploadVideoDialogShowsNux:j.bool,compactMode:j.bool,generateThumbnails:j.bool,isCarouselPreviewEditing:j.bool,isDisabled:j.bool,isPageTrailer:j.bool,isShowPage:j.bool,isSquareVideo:j.bool,isVideoUpload:j.bool,logger:j.object,makeTitleMandatory:j.bool,parentPageName:j.string,parentPageProfilePic:j.string,parentPageURI:j.string,selectedThumbnail:j.object,showAutoCaptionsSection:j.bool,showThumbnailExperimentSection:j.bool,showCategorySelector:j.bool,showFeedTypeCheckbox:j.bool,showHighlightedVideosNux:j.bool,shown:j.bool,showShareToParentPageOption:j.bool,showCrosspostToParentPageOption:j.bool,canEditShowAndParent:j.bool,showTagSelector:j.bool,showTagSelectorNux:j.bool,showTagSelectorToken:j.bool,showThumbnailScrubber:j.bool,squareThumbnailURI:j.string,showMarkURI:j.string,minEpisodeDuration:j.number,targetID:j.string,thumbnails:j.array,uiLogger:j.object,videoFile:j.object,videoID:c("requiredIfPropIsFalsy")("isVideoUpload",j.string),showGamesTypeahead:j.bool,scheduledLivePreviewPayload:j.object},getInitialState:function l(){return{shouldShowHighlightedVideosNux:this.props.showHighlightedVideosNux,shouldShowTitleErrorMessage:false,componentsLoaded:false}},componentDidMount:function l(){if(this.props.isShowPage)c("ComposerVideoShowsActions").initialize(this.context.composerID,this.context.composerType,!this.props.isVideoUpload);if(this.props.showCrosspostToParentPageOption&&this.props.canEditShowAndParent){c("ComposerVideoUploadActions").updateShareToParentPageOptionSelected(this.context.composerID,true);this.setState({shareToParentPageOptionSelected:true})}},_getTitleErrorMessage:function l(){if(!this.state.title&&this.state.shouldShowTitleErrorMessage){if(this.props.isShowPage)return i._("Title is required for videos in Show Page");if(this.props.isPageTrailer)return i._("Title is required for the Show Trailer")}return null},_renderTitleSection:function l(){if(this.props.isCarouselPreviewEditing)return c("React").createElement("div",null);var m=i._("Title"),n=i._("Write a title"),o=null;if(this.props.isPageTrailer)m=i._("Trailer Title");if(this.props.isPageTrailer||this.props.isShowPage||this.props.makeTitleMandatory)o=i._("(required)");return c("React").createElement("div",{id:"writeVideoTitle"},c("React").createElement(c("ComposerVideoUploadSection.react"),{title:m,subtitle:o},c("React").createElement(c("BUITextInput_DEPRECATED.react"),{disabled:this.props.isDisabled,height:"xtall",className:"_3xjx _3xjy",placeholder:n,onChange:this.onTitleChange,onBlur:function(){return this.setState({shouldShowTitleErrorMessage:true})}.bind(this),ref:"video_title",value:this.state.title,xuiError:this._getTitleErrorMessage()})))},_renderMetadataSection:function l(){__p&&__p();if(this.props.compactMode)return c("React").createElement("div",null);var m;if(this.props.showTagSelectorToken)m=this._renderTagSection();else m=this._renderCategorySection();var n=null;if(this.props.showFeedTypeCheckbox)n=this._renderFeedSection();return c("React").createElement("div",null,c("React").createElement("div",{className:"_3xjw _1_hc"+(this.state.isEpisode&&(this.props.showShareToParentPageOption||this.props.showCrosspostToParentPageOption)?" _3yq7":"")+(!this.props.showTabSelector?" _vev":"")},c("React").createElement("div",{className:"_5sf4"+(this.props.showShareToParentPageOption||this.props.showCrosspostToParentPageOption?" _4btb":"")},this._renderVideoTypeSection(),this._renderTitleSection(),m,this._renderVideoGameSection(),n,this._renderVideoListSection(),this._renderExcludeNewsFeedSection(),this._renderShareOnParentPageSection(),this._renderCrosspostOnParentPageSection())))},_logEvent:function l(m){if(this.props.logger)this.props.logger.logEvent(m)},_onHighlightedVideosNuxDismiss:function l(){this.setState({shouldShowHighlightedVideosNux:false});this.props.onHighlightedVideosNuxDismiss()},renderLayers:function l(){if(this.state.shouldShowHighlightedVideosNux)return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.highlighted_video_checkbox}.bind(this),shown:true,width:"custom",customwidth:384,position:"right",offsetX:168,onCloseButtonClick:this._onHighlightedVideosNuxDismiss,key:"videoLibraryNux"},i._("Highlight your best non-promotional videos so they appear more prominently in your video channel."));return null},_renderFeedSection:function l(){return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8y",title:i._("Highlight Video"),tooltip:i._("Highlight your best non-promotional videos so they appear more prominently in your video channel.")},c("React").createElement("span",null,c("React").createElement(c("XUICheckboxInput.react"),{className:"_3-8_",checked:this.state.highlightedInFeed,onChange:this.onFeedTypeChange,ref:"highlighted_video_checkbox"}),c("React").createElement(c("XUIText.react"),{size:"meta1"},i._("Highlight in your video channel"))))},_renderCategorySection:function l(){if(!this.props.showCategorySelector||this.props.isCarouselPreviewEditing)return c("React").createElement("div",null);return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Video Category"),tooltip:i._("Select a category that matches the content of your video")},c("React").createElement(c("VideoContentCategorySelector.react"),{onChange:this.onCategoryChange,value:this.state.category}))},_renderTagSection:function l(){if(this.props.isCarouselPreviewEditing)return c("React").createElement("div",null);return c("React").createElement("div",{id:"addVideoTags"},c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Tags"),tooltip:i._("Tags help make your video more discoverable. They aren't displayed to the public.")},c("React").createElement(c("VideoContentTagSelectorToken.react"),{accessToken:this.props.accessToken,logger:this.props.uiLogger,onChange:this.onContentTagChange,showTagSelectorNux:this.props.showTagSelectorNux,value:this.state.contentTags})))},_renderVideoGameSection:function l(){if(this.props.isCarouselPreviewEditing||!this.props.isVideoUpload||!this.props.showGamesTypeahead)return c("React").createElement("div",null);return c("React").createElement("div",null,c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Video Game"),tooltip:i._("Add the video game featured in the content of this video")},c("React").createElement(c("GamesTypeahead.react"),{className:"_oie",clearOnSelect:false,filterVideoTags:true,includeSeries:false,onGameSelect:this.onGameChange,placeholder:i._("Tag a game (ex: Overwatch)"),tallInput:true})))},_renderVideoTypeSection:function l(){if(!this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement("div",{id:"selectVideoTypeStep"},c("React").createElement(c("VideoUploadVideoTypeSectionContainer.react"),{pageID:this.props.targetID,composerID:this.context.composerID,duration:this.state.durationInSec,minEpisodeDuration:this.props.minEpisodeDuration}))},_renderVideoListSection:function l(){if(!this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement("div",{id:"addToSeasonAndPlaylist"},c("React").createElement(c("VideoUploadVideoListSectionContainer.react"),{pageID:this.props.targetID,composerID:this.context.composerID}))},_renderExcludeNewsFeedSection:function l(){if(!this.props.isVideoUpload||!this.props.isPageTrailer)return c("React").createElement("div",null);var m=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If checked, the episode or video will not appear in people's News Feed"),alignH:"left"});if(this.props.isPageTrailer)m=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If checked, your trailer will not appear in News Feed"),alignH:"left"});return c("React").createElement("div",{className:"_3-8-"},c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.excludeNewsfeed,onChange:this.onExcludeNewsfeedChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Exclude from News Feed")),m)))},_renderShareOnParentPageSection:function l(){if(!this.state.isEpisode||!this.props.showShareToParentPageOption||!this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement("div",{className:"_3-8y"},c("React").createElement(c("InputLabel.react"),{label:i._("Share this episode to {parent page name} when you publish",[i.param("parent page name",this.props.parentPageName)])},c("React").createElement(c("XUICheckboxInput.react"),{onChange:this.onSelectShareToParentPageOption})),this.state.shareToParentPageOptionSelected?c("React").createElement("label",{className:"_4btg"},c("React").createElement("textarea",{className:"_4bth",onChange:this.onSelectShareToParentTextChange,placeholder:i._("Say something about this episode..."),resize:"none",rows:3,shouldAutoGrow:false}),c("React").createElement(c("Image.react"),{className:"_4bti",src:this.props.parentPageProfilePic})):null)},_renderCrosspostOnParentPageSection:function l(){if(!this.state.isEpisode||!this.props.showCrosspostToParentPageOption||!this.props.isShowPage)return c("React").createElement("div",null);var m=i._("When you publish your episode, it will be crossposted to {parent page name}. The post will include your original description and a link to follow your Show.",[i.param("parent page name",this.props.parentPageName)]);return c("React").createElement("div",{className:"_3-8y"},c("React").createElement(c("ShowsCrosspostToParentPageInput.react"),{checked:this.state.shareToParentPageOptionSelected,disabled:!this.props.canEditShowAndParent,help:m,onChange:this.onSelectShareToParentPageOption,parentPageName:this.props.parentPageName||"",parentPageURI:this.props.parentPageURI||""}))},onCategoryChange:function l(event){c("ComposerVideoUploadActions").updateCategory(this.context.composerID,event.value)},onContentTagChange:function l(event){c("ComposerVideoUploadActions").updateContentTags(this.context.composerID,event)},onGameChange:function l(event){c("ComposerVideoUploadActions").updateGame(this.context.composerID,event)},onTitleChange:function l(event){c("ComposerVideoUploadActions").updateTitle(this.context.composerID,event.target.value);this.setState({title:event.target.value,shouldShowTitleErrorMessage:true})},onFeedTypeChange:function l(event){var m=event.target.checked?c("VideoFeedType").HIGHLIGHTED.index:c("VideoFeedType").NOT_HIGHLIGHTED.index;c("ComposerVideoUploadActions").updateFeedType(this.context.composerID,m);this.setState({highlightedInFeed:event.target.checked})},onExcludeNewsfeedChange:function l(event){var m=event.target.checked;c("ComposerVideoUploadActions").updateExcludeNewsfeed(this.context.composerID,m);this.setState({excludeNewsfeed:event.target.checked})},onSelectShareToParentPageOption:function l(event){var m=event.target.checked;c("ComposerVideoUploadActions").updateShareToParentPageOptionSelected(this.context.composerID,m);this.setState({shareToParentPageOptionSelected:m})},onSelectShareToParentTextChange:function l(event){c("ComposerVideoUploadActions").updateShareToParentPageText(this.context.composerID,event.target.value)},renderPreviewSection:function l(){return c("React").createElement("div",{id:"customizeThumbnail"},c("React").createElement(c("ComposerVideoUploadPreviewSection.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,generateThumbnails:this.props.generateThumbnails,isShowPage:this.props.isShowPage||this.props.isPageTrailer,showMarkURI:this.props.showMarkURI,isSquareVideo:this.props.isSquareVideo,isVideoUpload:this.props.isVideoUpload,squareThumbnailURI:this.props.squareThumbnailURI,logger:this.props.logger,selectedThumbnail:this.props.selectedThumbnail,showThumbnailScrubber:this.props.showThumbnailScrubber,targetID:this.props.targetID,thumbnails:this.props.thumbnails,videoID:this.props.videoID,videoFile:this.props.videoFile,showThumbnailExperimentSection:this.props.showThumbnailExperimentSection,scheduledLivePreviewPayload:this.props.scheduledLivePreviewPayload}))},_renderNuxTour:function l(){if(this.props.isShowPage&&this.props.canSeeUploadVideoDialogShowsNux)return c("React").createElement(c("ShowsUploadDialogNuxTour.react"),null);return null},render:function l(){return c("React").createElement("div",{className:"_4q0-"+(this.state.isEpisode&&(this.props.showShareToParentPageOption||this.props.showCrosspostToParentPageOption)?" _3yq9":"")+(this.props.compactMode?" _2d5h":"")+(!this.props.shown?" _2oq6":"")},this._renderMetadataSection(),this.renderPreviewSection(),this.renderLayers(),this._renderNuxTour())}});f.exports=k}),null);
__d("ComposerVideoUploadCaptionsTab.react",["cx","fbt","invariant","ComposerVideoTabsIdentifiers","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","VideoCaptionFile","VideoCaptionList.react","VideoComposerDialogCaptionsContainer.react","VideoComposerDialogCaptionsStore","VideoComposerDialogCaptionsTabActions","VideoComposerDialogMode","VideoUploadUIError","VideoUploadUILoggerEvents"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=c("React").PropTypes,l=c("React").createClass({displayName:"ComposerVideoUploadCaptionsTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function m(n,o){var p=c("ComposerVideoUploadStore").getCaptions(n),q=c("ComposerVideoUploadStore").getLiveCaptions(n),r=c("ComposerVideoUploadStore").getLastCaptionUploadErrorMessage(n),s=c("ComposerVideoUploadStore").getVideoDurationInSec(n);return{captions:p,liveCaptions:q,lastCaptionUploadErrorMessage:r,videoDurationInSec:s}}},propTypes:{accessToken:k.string,isDisabled:k.bool,logger:k.object,showAutoCaptionsSection:k.bool,showDefaultLocaleRow:k.bool,showLiveCaptionSection:k.bool,shown:k.bool,videoFile:k.object,videoID:k.string,pageID:k.string,shouldShowNewCaptionsFlow:k.bool,isVideoUploaded:k.bool,isEditFlow:k.bool},componentWillReceiveProps:function m(n){var o=this.props&&this.props.shouldShowNewCaptionsFlow&&!this.props.shown&&n.shown;if(o&&!c("VideoComposerDialogCaptionsStore").wasTabOpenedInOldComposer()){c("VideoComposerDialogCaptionsTabActions").emitOldComposerCaptionTabOpenEvent();c("VideoComposerDialogCaptionsTabActions").tryLogCaptionLandingScreenOpenEvent()}},_onRemoveCaption:function m(n){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_REMOVED);var o=this.state.captions.filter(function(q){return n!=q.getLocale()});c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,o);var p=this.state.liveCaptions.filter(function(q){return n!=q.getLocale()});c("ComposerVideoUploadActions").updateLiveCaptions(this.context.composerID,p)},_onUploadClick:function m(){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_UPLOAD_BUTTON_CLICKED)},_onUploadCaption:function m(n){__p&&__p();var o=n.files,p=this.state.captions.slice(0),q=this.state.liveCaptions.slice(0),r=false,s=null,t=null;Array.from(o).forEach(function(u){__p&&__p();this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_SELECTED);var v=c("VideoCaptionFile").fromFile(u),w=this._getCaptionError(v,p,q);if(w){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_ERROR,w);s=w;t=v}else{p.push(v);r=true}}.bind(this));if(r)c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,p);if(s)c("ComposerVideoUploadActions").updateLastCaptionUploadErrorMessage(this.context.composerID,this._getCaptionErrorMessage(s,t))},_getCaptionError:function m(n,o,p){var q=null;if(!n)q=c("VideoUploadUIError").CAPTION_ERROR_WRONG_FORMAT;else if(this._isDuplicateLocale(n.getLocale(),o)||this._isDuplicateLocale(n.getLocale(),p))q=c("VideoUploadUIError").CAPTION_ERROR_DUPLICATE_LOCALE;return q},_getCaptionErrorMessage:function m(n,o){switch(n){case c("VideoUploadUIError").CAPTION_ERROR_WRONG_FORMAT:return i._("You uploaded a .SRT file with an incorrect file name. Please use this format: filename{suffix}",[i.param("suffix",".en_US.srt")]);case c("VideoUploadUIError").CAPTION_ERROR_DUPLICATE_LOCALE:return i._("You have already added a caption file for {language}. Please remove the older caption file before adding a new one.",[i.param("language",o?o.getLocaleName():null)]);default:return i._("There was an error uploading your caption file.")}},_isDuplicateLocale:function m(n,o){return o.some(function(p){return p.getLocale()===n})},_onChangeDefaultLocale:function m(n){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_DEFAULT_LOCALE_CHANGED);var o=this.state.captions.slice(0);o.forEach(function(q){q.setIsDefault(n==q.getLocale())});c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,o);var p=this.state.liveCaptions.slice(0);p.forEach(function(q){q.setIsDefault(n==q.getLocale())});c("ComposerVideoUploadActions").updateLiveCaptions(this.context.composerID,p)},_renderCaptions:function m(){var n=this.state.captions,o=this.props.videoFile;if(o)o instanceof File||j(0);var p=this.props.shouldShowNewCaptionsFlow?c("React").createElement(c("VideoComposerDialogCaptionsContainer.react"),{accessToken:this.props.accessToken,videoFile:o,video_id:this.props.videoID?this.props.videoID:"",composerID:this.context.composerID,pageID:this.props.pageID?this.props.pageID:"",isVideoUploaded:this.props.isVideoUploaded===true,videoDurationInSec:this.state.videoDurationInSec,videoAssetID:null,composerDialogMode:this.props.isEditFlow===true?c("VideoComposerDialogMode").VIDEO_EDIT:c("VideoComposerDialogMode").VIDEO_UPLOAD,isOldComposer:true}):c("React").createElement(c("VideoCaptionList.react"),{accessToken:this.props.accessToken,allowBulkUpload:true,className:"_4vnn",captions:n,captionsEditable:!this.props.isDisabled,liveCaptions:this.state.liveCaptions,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showDefaultLocaleRow:this.props.showDefaultLocaleRow,showLiveCaptionSection:this.props.showLiveCaptionSection,videoID:this.props.videoID,onUploadClick:this._onUploadClick,onRemoveCaption:this._onRemoveCaption,onUploadCaption:this._onUploadCaption,onSetDefaultCaption:this._onChangeDefaultLocale,uploadErrorMessage:this.state.lastCaptionUploadErrorMessage});return c("React").createElement("div",null,p)},_logEvent:function m(n,o){if(this.props.logger)this.props.logger.logEvent(n,c("ComposerVideoTabsIdentifiers").CAPTIONS,o)},render:function m(){return c("React").createElement("div",{className:(!this.props.shouldShowNewCaptionsFlow?"_4vnp":"")+(!this.props.shown?" _2oq6":"")+(this.props.shouldShowNewCaptionsFlow?" _1vbd":"")},c("React").createElement("div",{className:"_4vnq"},this._renderCaptions()))}});f.exports=l}),null);
__d("ComposerVideoUploadPermissionsTab.react",["cx","fbt","BUISwitch.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoTabsIdentifiers","ComposerVideoUploadActions","ComposerVideoUploadStore","FixedDataTable.react","FixedDataTableColumn.react","Link.react","PageSettingsRef","React","ReactComposerContextTypes","VideoUploadUILoggerEvents","XPagesManagerSettingsController","XUIGrayText.react","XUIText.react","XUIButton.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=54,k=666,l=28,m=52,n=235,o=c("React").PropTypes,p=c("React").createClass({displayName:"ComposerVideoUploadPermissionsTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function q(r,s){var t=c("ComposerVideoUploadStore").getPermissions(r);return{permissions:t}}},propTypes:{canCrosspostOutsideBusiness:o.bool,isDisabled:o.bool,logger:o.object,shown:o.bool,showCrosspostingHelpCenter:o.bool,targetID:o.string.isRequired},onPermissionsChange:function q(r,s){this._logEvent(c("VideoUploadUILoggerEvents").PERMISSIONS_CHANGED);var t=this.state.permissions;t[s].allow=r;this.setState({permissions:t});c("ComposerVideoUploadActions").updatePermissions(this.context.composerID,t)},_getColumnsConfig:function q(){var r=[{cellRenderer:function(s,t,u,v){return c("React").createElement("div",null,c("React").createElement(c("BUISwitch.react"),{value:s,onToggle:function(){return this.onPermissionsChange(!s,v)}.bind(this)}))}.bind(this),key:"allow",label:i._("Allow"),width:j,visible:true},{cellRenderer:function s(t){return c("React").createElement("div",null,t)},width:k,key:"business",label:i._("Business"),visible:!this.props.canCrosspostOutsideBusiness},{cellRenderer:function s(t){return c("React").createElement("div",null,t)},width:k,key:"name",label:i._("Other Pages"),visible:this.props.canCrosspostOutsideBusiness}];return r.filter(function(s){return s.visible})},_renderColumns:function q(){var r=this._getColumnsConfig();return r.map(function(s){return c("React").createElement(c("FixedDataTableColumn.react"),{width:s.width,key:s.key,dataKey:s.key,label:s.label,cellRenderer:s.cellRenderer})})},_renderTitle:function q(){if(this.props.canCrosspostOutsideBusiness){var r=c("XPagesManagerSettingsController").getURIBuilder().setString("page_token",this.props.targetID).setString("tab","video_crossposting").setString("ref",c("PageSettingsRef").VIDEO_COMPOSER).getURI(),s=c("React").createElement(c("Link.react"),{href:r,target:"_blank"},i._("Settings")),t=c("React").createElement(c("Link.react"),{href:"/help/678485232304895",target:"_blank"},i._("Help Center"));return i._("Allow other Pages to use this video in their posts. Add Pages in {Link. =Settings}. Learn more about crossposting in the {Link. =Help Center}.",[i.param("Link. =Settings",s),i.param("Link. =Help Center",t)])}else{var u=null;if(this.props.showCrosspostingHelpCenter)u=c("React").createElement(c("Link.react"),{href:"/business/help/457328234477362",target:"_blank"},i._("Learn more"));return i._("Allow other Pages within your Business Manager to use this video. {Link. =Learn more}.",[i.param("Link. =Learn more",u)])}},_renderNoPermissions:function q(){if(this.state.permissions.length>0)return null;return c("React").createElement("div",{className:"_4pbx"},c("React").createElement(c("XUIText.react"),{display:"block",size:"header4",weight:"normal"},i._("Share Your Video With Other Pages")),c("React").createElement(c("XUIGrayText.react"),{className:"_3-8y",display:"block",size:"meta1",weight:"normal"},i._("You can choose to crosspost videos with any Page and have access to total performance insights.")),c("React").createElement(c("XUIGrayText.react"),{className:"_3-8w",display:"block",size:"meta1",weight:"normal"},i._("You control which of your videos are allowed to be crossposted.")),c("React").createElement(c("XUIButton.react"),{className:"_3-8y",href:"/help/678485232304895",label:i._("Learn More"),size:"medium"}))},_renderBody:function q(){var r=this._getColumnsConfig().reduce(function(u,v){return u+v.width},0),s=this.state.permissions.length>0,t=this.state.permissions.length>0?n:l+2;return c("React").createElement("div",{className:"_4vov"+(!s?" _4pby":"")},c("React").createElement(c("FixedDataTable.react"),{width:r,height:t,rowsCount:this.state.permissions.length,rowGetter:function(u){return this.state.permissions[u]}.bind(this),headerHeight:l,rowHeight:m},this._renderColumns()),this._renderNoPermissions())},_logEvent:function q(r,s){if(this.props.logger)this.props.logger.logEvent(r,c("ComposerVideoTabsIdentifiers").PERMISSIONS,s)},render:function q(){return c("React").createElement("div",{className:"_4vp0"+(!this.props.shown?" _2oq6":"")+" _4vp1"},c("React").createElement("div",{className:"_4vp2"},this._renderTitle()),this._renderBody())}});f.exports=p}),null);
__d("ComposerVideoUploadRightsTab.react",["cx","fbt","ComposerVideoUploadSection.react","CopyrightCountrySelector.react","CopyrightReferenceCategorySelector.react","PageContentTabRightsManagerStore","React","VideoCopyrightAttributionSelector.react","VideoCopyrightMatchRuleSelector.react","VideoCopyrightMonitoringSelector.react","VideoCopyrightWhitelistSection.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.$ComposerVideoUploadRightsTab1=function(){"use strict";var n=c("React").createElement(c("VideoCopyrightWhitelistSection.react"),{pageID:this.props.targetID,canSeeIGMatches:this.props.canSeeIGMatches,whitelistedFBUsers:this.props.whitelistedFBUsers||[],onFBWhitelistUpdated:this.props.onFBWhitelistUpdated,disabled:this.props.isLive,whitelistedIGUserNames:this.props.whitelistedIGUserNames,onIGWhitelistUpdated:this.props.onIGWhitelistUpdated});return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Grant Permissions"),tooltip:i._("Grant permission to any Page or person on {what platform the publisher can see} to upload videos that contain this one.",[i.param("what platform the publisher can see",this.props.canSeeIGMatches?i._("Facebook or Instagram"):i._("Facebook"))])},n)};m.prototype.$ComposerVideoUploadRightsTab2=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Monitored Content"),tooltip:i._("The type of content in your reference file that will be monitored for matching videos")},c("React").createElement(c("VideoCopyrightMonitoringSelector.react"),{onChange:this.props.onMonitoringTypeChange,value:this.props.monitoringType,disabled:this.props.isLive}))};m.prototype.$ComposerVideoUploadRightsTab3=function(){"use strict";if(!this.props.showAttributionsSection||!this.props.onAttributionChange)return null;return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Apply Attribution"),tooltip:i._("Attribution is for matching videos connected to your Monitor match rules. Attribution is added to matching content on Facebook. Reference files can only be connected to one Attribution.")},c("React").createElement(c("VideoCopyrightAttributionSelector.react"),{accessToken:this.props.accessToken,hasError:this.props.hasAttributionError,onChange:this.props.onAttributionChange,pageID:this.props.targetID,selectedAttribution:this.props.attributionID}))};m.prototype.$ComposerVideoUploadRightsTab4=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Geography"),tooltip:i._("The countries where you own this reference file")},c("React").createElement(c("CopyrightCountrySelector.react"),{areCountriesIncluded:this.props.areCountriesIncluded,className:"_65w5",enableExcludedCountries:true,listClassName:"_65w6",onChange:this.props.onGeoChange,previewCharLimit:100,selectedCountries:this.props.ownershipCountries}))};m.prototype.$ComposerVideoUploadRightsTab5=function(){"use strict";if(c("PageContentTabRightsManagerStore").getIsRMLite())return null;return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Match Rule"),tooltip:i._("Select which rule to apply to matching content")},c("React").createElement(c("VideoCopyrightMatchRuleSelector.react"),{accessToken:this.props.accessToken,onChange:this.props.onMatchRuleChange,onCreateNewRule:this.props.onCreateNewMatchRule,pageID:this.props.targetID,selectedRule:this.props.ruleID,disabled:this.props.isLive}))};m.prototype.$ComposerVideoUploadRightsTab6=function(){"use strict";return c("React").createElement(c("CopyrightReferenceCategorySelector.react"),{onReferenceCategoryChange:this.props.onReferenceCategoryChange,selectedCategory:this.props.selectedCategory,showCategoryRequiredError:this.props.showCategoryRequiredError})};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_4clk"+(!this.props.shown?" _2oq6":"")},c("React").createElement("div",{className:"_4cll"},this.$ComposerVideoUploadRightsTab2(),this.$ComposerVideoUploadRightsTab4(),this.$ComposerVideoUploadRightsTab6()),c("React").createElement("div",{className:"_4cll _4clm"},this.$ComposerVideoUploadRightsTab5(),this.$ComposerVideoUploadRightsTab3(),this.$ComposerVideoUploadRightsTab1()))};function m(){"use strict";j.apply(this,arguments)}m.propTypes={accessToken:l.string,areCountriesIncluded:l.bool,attributionID:l.string,hasAttributionError:l.bool,onAttributionChange:l.func,onCreateNewMatchRule:l.func,onGeoChange:l.func.isRequired,onMatchRuleChange:l.func.isRequired,onMonitoringTypeChange:l.func.isRequired,onReferenceCategoryChange:l.func.isRequired,onFBWhitelistUpdated:l.func.isRequired,onIGWhitelistUpdated:l.func.isRequired,shown:l.bool,targetID:l.string.isRequired,monitoringType:l.string,ownershipCountries:l.array,ruleID:l.string,whitelistedFBUsers:l.array,isLiveBroadcast:l.bool,isLive:l.bool,selectedCategory:l.string,showCategoryRequiredError:l.bool,showAttributionsSection:l.bool,canSeeIGMatches:l.bool};m.defaultProps={areCountriesIncluded:true};f.exports=m}),null);
__d("ComposerVideoUploadRightsTabContainer.react",["ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadRightsTab.react","ComposerVideoUploadStore","ReactComponentWithPureRenderMixin","React","VideoCopyrightUtils"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerVideoUploadRightsTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{accessToken:h.string,onCreateNewMatchRule:h.func.isRequired,onLogEvent:h.func.isRequired,shown:h.bool,targetID:h.string.isRequired,showAttributionsSection:h.bool,showCategoryRequiredError:h.bool,canSeeIGMatches:h.bool},statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightMonitoringType(k)||c("VideoCopyrightUtils").DEFAULT_MONITORING_TYPE,n=c("ComposerVideoUploadStore").getCopyrightRuleID(k),o=c("ComposerVideoUploadStore").getCopyrightWhitelistedFBUsers(k),p=c("ComposerVideoUploadStore").getCopyrightWhitelistedIGUserNames(k),q=c("ComposerVideoUploadStore").getCopyrightOwnershipCountries(k),r=c("ComposerVideoUploadStore").getAreCopyrightCountriesIncluded(k),s=c("ComposerVideoUploadStore").getCopyrightReferenceCategory(k),t=c("ComposerVideoUploadStore").getCopyrightAttributionID(k);return{attributionID:t,monitoringType:m,ownershipCountries:q,areCountriesIncluded:r,ruleID:n,whitelistedIGUserNames:p,whitelistedFBUsers:o,selectedCategory:s}}},render:function j(){return c("React").createElement(c("ComposerVideoUploadRightsTab.react"),{accessToken:this.props.accessToken,attributionID:this.state.attributionID,hasAttributionError:false,shown:this.props.shown,targetID:this.props.targetID,onAttributionChange:this.onAttributionChange,onCreateNewMatchRule:this.props.onCreateNewMatchRule,onGeoChange:this.onGeoChange,onMatchRuleChange:this.onMatchRuleChange,onMonitoringTypeChange:this.onMonitoringTypeChange,onReferenceCategoryChange:this.onReferenceCategoryChange,whitelistedIGUserNames:this.state.whitelistedIGUserNames,onIGWhitelistUpdated:this.onIGWhitelistUpdated,onFBWhitelistUpdated:this.onFBWhitelistUpdated,monitoringType:this.state.monitoringType,ownershipCountries:this.state.ownershipCountries,areCountriesIncluded:this.state.areCountriesIncluded,ruleID:this.state.ruleID,whitelistedFBUsers:this.state.whitelistedFBUsers,selectedCategory:this.state.selectedCategory,showCategoryRequiredError:this.props.showCategoryRequiredError,showAttributionsSection:this.props.showAttributionsSection,canSeeIGMatches:this.props.canSeeIGMatches})},onMonitoringTypeChange:function j(event){c("ComposerVideoUploadActions").updateCopyrightMonitoringType(this.context.composerID,event.value);this.props.onLogEvent("monitoring_type_updated")},onFBWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedFBUsers(this.context.composerID,k.slice());this.props.onLogEvent("whitelist_updated")},onIGWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedIGUserNames(this.context.composerID,k);this.props.onLogEvent("whitelist_ig_users_updated")},onGeoChange:function j(k,l){c("ComposerVideoUploadActions").updateCopyrightOwnershipCountries(this.context.composerID,k,l);this.props.onLogEvent("ownership_countries_updated")},onMatchRuleChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightRuleID(this.context.composerID,k);this.props.onLogEvent("rule_updated")},onAttributionChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightAttributionID(this.context.composerID,k);this.props.onLogEvent("attribution_updated")},onReferenceCategoryChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightReferenceCategory(this.context.composerID,k);this.props.onLogEvent("reference_category_updated")}});f.exports=i}),null);
__d("ComposerVideoUploadDetails.react",["ix","cx","fbt","xuiglyph","ActorURI","Arbiter","AsyncDialog","AsyncRequest","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileExcludeSegmentsContainer.react","ComposerReferenceFileUploadAttributionsTabContainer.react","ComposerReferenceFileUploadRightsTabContainer.react","ComposerReferenceFileUploadWhitelistTabContainer.react","ComposerVideoAdBreaksTabContainer.react","ComposerVideoAdBreakStore","ComposerVideoTabsIdentifiers","ComposerVideoUploadActions","ComposerVideoUploadAdvancedTab.react","ComposerVideoUploadBasicTab.react","ComposerVideoUploadCaptionsTab.react","ComposerVideoUploadPermissionsTab.react","ComposerVideoUploadRightsTabContainer.react","ComposerVideoUploadSphericalControlsTabContainer.react","ComposerVideoUploadStore","DOM","DOMScroll","FileInput.react","Image.react","MNPageComposerUtils","PopoverMenu.react","ProfileVideoWWWFrontendActionTypedLogger","ProgressBar.react","PublishingToolsWebdriverTestDataIDs","React","ReactLayeredComponentMixin_DEPRECATED","ReactXUIMenu","SphericalDirectorComponentSources","UserAgent","VideoComposerDialogUIEvent","VideoCopyrightRuleDialogSource","VideoCopyrightRuleTemplateBlankSelectDialog","VideoCopyrightUITypedLogger","VideoUploadFileValidator","VideoUploadLogger","VideoUploadUILogger","VideoUploadUILoggerEvents","XEmbeddedVideoEmbedDialogController","XUIAmbientNUX.react","XUIButton.react","XUIMenuSeparator.react","XUINotice.react","XUIPageNavigation.react","XVideoCopyrightRuleDialogController","dotAccess","intlNumUtils","nullthrows","requiredIfPropIsTruthy"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=c("ReactXUIMenu").Item,m=c("XUIPageNavigation.react").Group,n=c("XUIPageNavigation.react").Item,o=c("React").PropTypes,p=c("React").createClass({displayName:"ComposerVideoUploadDetails",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"),c("ComposerVideoAdBreakStore")),c("ReactLayeredComponentMixin_DEPRECATED")],statics:{calculateState:function q(r,s){var t=c("ComposerVideoUploadStore").getEpisodeData(r),u=c("ComposerVideoUploadStore").getTitle(r).trim(),v=s.isShowPage&&(u===""||!t||t.isEpisode===undefined||t.isEpisode===null),w=s.isPageTrailer&&u==="",x=s.makeTitleMandatory&&u==="",y=c("ComposerVideoUploadStore").getNumProducts(r);return{shown:true,showRightsTab:c("ComposerVideoUploadStore").getCopyrighted(r),showSphericalTab:c("ComposerVideoUploadStore").getSpherical(r),shouldDisableAdInsertionTab:c("ComposerVideoAdBreakStore").getShouldDisableAdBreakInsertion(r,s.adBreaksTabDisabledReasons,s.hasAdBreakInsertionGapRule),permissions:c("ComposerVideoUploadStore").getPermissions(r)||[],isFeatured:c("ComposerVideoUploadStore").getIsFeaturedVideo(r),embeddable:c("ComposerVideoUploadStore").getEmbeddable(r),isRequiredFieldsMissingForShowsVideo:v,isTitleMissingForShowTrailer:w,isTitleMandatoryAndMissing:x,isProductTaggerPostButtonDisabled:c("MNPageComposerUtils").isProductTaggerPostButtonDisabled(y||0,s.minNumProducts||0)}},getAttachmentWillReceivePropsState:function q(r,s,t){var u={baseProgress:0};if(!t.showUploadProgressBar&&s.showUploadProgressBar)u.baseProgress=t.progress;if(t.videoFile!==s.videoFile){u.baseProgress=0;c("ComposerVideoUploadActions").updateGeneratedThumbnails(r,[])}return u},getAttachmentInitialState:function q(r,s){var t=c("ComposerVideoUploadStore").getPermissions(r)||[];return{editorTab:s.isReferenceVideo?c("ComposerVideoTabsIdentifiers").RIGHTS:s.editorTab,initialPermissionsAllowState:t.map(function(u){return u.allow})}}},propTypes:{accessToken:o.string,allowCustomThumbnail:o.bool,canCrosspostOutsideBusiness:o.bool,canEditCustomLabels:o.bool,canEditExternalVideoID:o.bool,canEditFundraiserForStoryCharityID:o.bool,isDemonetized:o.bool,showAdBreaksTab:o.bool,adBreaksTabDisabledReasons:o.array,composerID:o.string,hasAdBreakInsertionGapRule:o.bool.isRequired,isAdBreakInsertionRedesignV1:o.bool,isAdBreakInsertionRedesignV2:o.bool,showAdBreakAdminPreviewSettings:o.bool,showAdBreakOffsetEditorNux:o.bool,defaultCategory:o.number,editorTab:o.string,generateThumbnails:o.bool,isCarouselPreviewEditing:o.bool,isEditing:o.bool.isRequired,canMakeFeatured:o.bool,isReferenceVideo:o.bool,isProfileVideo:o.bool,isSecret:o.bool,isUserUploadFlow:o.bool,isVideoUpload:o.bool,logger:o.instanceOf(c("VideoUploadLogger")),onVideoFileInputChange:o.func,onMakeFeaturedVideo:o.func,pageAccessToken:o.string,postPending:o.bool,progress:o.number,selectedThumbnail:o.object,canEditAdBreaksTabBlockListContent:o.bool.isRequired,adBreaksExperimentPublicMetadata:o.object,showAutoCaptionsSection:o.bool,showLiveCaptionSection:o.bool,showCaptionsTab:o.bool,showCopyrightSection:o.bool,showCrosspostingHelpCenter:o.bool,showCustomLabels:o.bool,showDisturbingSection:o.bool,showExternalVideoIDSection:o.bool,showFeedTypeCheckbox:o.bool,showHighlightedVideosNux:o.bool,showInternalVideoSettings:o.bool,showPermissionsTab:o.bool,showAdvancedTabSphericalCheckbox:o.bool,showSphericalControlsTab:o.bool,showTagSelectorNux:o.bool,showTagSelectorToken:o.bool,showThumbnailExperimentSection:o.bool,showThumbnailScrubber:o.bool,showAttributionsSection:o.bool,showUploadProgressBar:o.bool,squareThumbnailURI:o.string,stage:o.oneOf(["idle","uploading","upload-finished","upload-failed","processing","processingFinished","posting","finished","post-failed"]).isRequired,thumbnail:o.object,UILogger:o.instanceOf(c("VideoUploadUILogger")),newUIEventLogFunc:o.func,uploadVideoID:o.string,videoAssetID:o.string,videoFile:o.object,videoID:c("requiredIfPropIsTruthy")("isEditing",o.string),videoUrlHD:o.string,videoUrlSD:o.string,showOmnistabSection:o.bool,hasOmnistabEncoding:o.bool,expirableCrosspostsCount:o.number,showCrosspostedPermissionsNUX:o.bool,useEmbedOptions:o.bool,embedUrl:o.string,isShowPage:o.bool,isPageTrailer:o.bool,showMarkURI:o.string,minEpisodeDuration:o.number,canSeeUploadVideoDialogShowsNux:o.bool,shouldShowPageOnboardingForAdBreak:o.bool,showCategoryRequiredError:o.bool,isMonetizationOnboarded:o.bool,canSeeNewMatchRuleDialog:o.bool,makeTitleMandatory:o.bool,showShareToParentPageOption:o.bool,showCrosspostToParentPageOption:o.bool,canEditShowAndParent:o.bool,parentPageName:o.string,parentPageProfilePic:o.string,parentPageURI:o.string,shouldShowNewCaptionsFlow:o.bool,canSeeIGMatches:o.bool,showGamesTypeahead:o.bool,isEditFlow:o.bool,minNumProducts:o.number,scheduledLivePreviewPayload:o.object,isAutoInsertionEnabledOnProfile:o.bool},getDefaultProps:function q(){return{accessToken:null,allowCustomThumbnail:false,canCrosspostOutsideBusiness:false,canEditAdBreaksTabBlockListContent:false,canEditCustomLabels:false,canEditExternalVideoID:false,canEditFundraiserForStoryCharityID:false,showAdBreaksTab:false,adBreaksTabDisabledReasons:null,canMakeFeatured:false,editorTab:c("ComposerVideoTabsIdentifiers").BASIC,generateThumbnails:false,hasOmnistabEncoding:false,isCarouselPreviewEditing:false,isEditing:false,isPageTrailer:false,isProfileVideo:false,isReferenceVideo:false,isSecret:false,isUserUploadFlow:false,isVideoUpload:false,makeTitleMandatory:false,hasAdBreakInsertionGapRule:true,isAdBreakInsertionRedesignV1:false,isAdBreakInsertionRedesignV2:false,showAdBreakAdminPreviewSettings:false,showAdBreakOffsetEditorNux:false,showAdvancedTabSphericalCheckbox:false,showCaptionsTab:false,showCopyrightSection:false,showCrosspostingHelpCenter:false,showCrosspostedPermissionsNUX:false,showCustomLabels:false,showDisturbingSection:false,showExternalVideoIDSection:false,showFeedTypeCheckbox:false,showHighlightedVideosNux:false,showInternalVideoSettings:false,showPermissionsTab:false,showSecretVideoOption:true,showSphericalControlsTab:false,showThumbnailExperimentSection:false,showThumbnailScrubber:false,showUploadProgressBar:false,shouldShowPageOnboardingForAdBreak:false,showCategoryRequiredError:false,stage:"idle",showShareToParentPageOption:false,showCrosspostToParentPageOption:false,canEditShowAndParent:false,parentPageName:null,parentPageProfilePic:null,parentPageURI:null,showAttributionsSection:false,canSeeIGMatches:false,showGamesTypeahead:false,isEditFlow:false,minNumProducts:0,isAutoInsertionEnabledOnProfile:false}},componentWillReceiveProps:function q(r){if(r.dialogVisible&&!this.props.dialogVisible){this.forceUpdate();if(!this.props.isVideoUpload)this.refs.tabbar.resizeNavbarGroups()}},_shouldDisablePostButton:function q(){return this.state.isRequiredFieldsMissingForShowsVideo||this.state.isTitleMissingForShowTrailer||this.state.isTitleMandatoryAndMissing||this.state.isProductTaggerPostButtonDisabled},_getDisabledErrorMessage:function q(){if(this.state.isTitleMandatoryAndMissing)return j._("To publish, your video needs a title");else if(this.state.isProductTaggerPostButtonDisabled&&this.props.minNumProducts!==0)return j._("You must add at least {min_num_products} products",[j.param("min_num_products",this.props.minNumProducts)]);return null},componentDidUpdate:function q(){c("Arbiter").inform("composer/disablePostButton",{disabled:this._shouldDisablePostButton(),errorMessage:this._getDisabledErrorMessage()});window.dispatchEvent(new Event("componentDidUpdate"))},reset:function q(){this.setState({editorTab:this.props.isReferenceVideo?c("ComposerVideoTabsIdentifiers").RIGHTS:c("ComposerVideoTabsIdentifiers").BASIC,shown:true,showCategoryRequiredError:false})},_logEvent:function q(r){if(this.props.logger)this.props.logger.logEvent(r)},logCopyrightEvent:function q(r){var s=c("ComposerVideoUploadStore").getCopyrightOwnershipCountries(this.context.composerID).join(","),t=(c("ComposerVideoUploadStore").getCopyrightWhitelistedFBUsers(this.context.composerID)||[]).map(function(A){return A.id}).join(","),u=(c("ComposerVideoUploadStore").getCopyrightWhitelistedIGUserNames(this.context.composerID)||[]).join(","),v=c("ComposerVideoUploadStore").getCopyrightRuleID(this.context.composerID),w=c("ComposerVideoUploadStore").getCopyrightMonitoringType(this.context.composerID),x=c("ComposerVideoUploadStore").getCopyrighted(this.context.composerID),y=c("ComposerVideoUploadStore").getCopyrightExcludedSegments(this.context.composerID),z=y.map(function(A){return[A.start_time_in_sec,A.duration_in_sec,A.media_type].join(",")}).join(";");new(c("VideoCopyrightUITypedLogger"))().setEvent(r).setSource(this.props.isEditing?"video_edit_dialog":"video_upload_composer").setCopyrightContentID(this.props.videoID).setCopyrightChecked(x).setRightsHolderID(this._getTargetID()).setMonitoringType(w).setIsReference(this.props.isReferenceVideo).setOwnershipCountries(s).setWhitelistedIds(t).setWhitelistedIgUserIds(u).setRuleID(v).setMessage(z).log()},logExcludeSegmentsUpdateEvent:function q(){this.logCopyrightEvent("exclude_segments_updated")},isDisabled:function q(){return this.state.stage==="posting"},onTabClick:function q(r){if(this.props.UILogger)this.props.UILogger.logEvent(c("VideoUploadUILoggerEvents").TAB_SWITCH,r);if(this.props.newUIEventLogFunc&&r!==this.state.editorTab)this.props.newUIEventLogFunc(c("VideoComposerDialogUIEvent").TAB_SWITCHED,this.state.editorTab,r);var s={editorTab:r,hidePermissionsNUX:this.state.hidePermissionsNUX};if(r===c("ComposerVideoTabsIdentifiers").PERMISSIONS)s.hidePermissionsNUX=true;this.setState(s)},_toggleRightsTab:function q(r){this.logCopyrightEvent("copyright_toggled");this.setState({showRightsTab:r},function(){if(r===true)this.onTabClick(c("ComposerVideoTabsIdentifiers").RIGHTS)}.bind(this))},_toggleSphericalTab:function q(r){this.setState({showSphericalTab:r})},onVideoFileInputChange:function q(event){this._logEvent(c("VideoUploadLogger").EVENT_REPLACE_VIDEO);if(this.props.isProfileVideo)new(c("ProfileVideoWWWFrontendActionTypedLogger"))().setEvent("replace_profile_video").setSessionID(this.props.composerID).log();var r=this.props.onVideoFileInputChange;if(r){var s=this.refs.videoFileInput.getFileInput();r(s)}},_getTargetID:function q(){return c("dotAccess")(this.props,"config.targetID")||this.props.targetID},getExpirableCrosspostCount:function q(){var r=0;if(!this.props.canCrosspostOutsideBusiness)r=this.props.expirableCrosspostsCount||0;else{var s=this.state.permissions,t=this.state.initialPermissionsAllowState;for(var u=0;u<s.length;u++)if(!s[u].allow&&t[u]&&s[u].expirable_posts_count)r+=s[u].expirable_posts_count}return r},hasRemovedBusinessSharing:function q(){return this.state.permissions.some(function(r,s){return!r.allow&&this.state.initialPermissionsAllowState[s]}.bind(this))},hasAddedBusinessSharing:function q(){return this.state.permissions.some(function(r,s){return r.allow&&!this.state.initialPermissionsAllowState[s]}.bind(this))},_downloadURL:function q(r){var s=c("DOM").create("a");s.download="";s.href=r;s.click()},_getDownloadMenuItemProps:function q(r){return c("UserAgent").isBrowser("Firefox")?{href:r,target:"_blank"}:{onclick:this._downloadURL.bind(this,r)}},_renderEditMenu:function q(){__p&&__p();var r=this.props.videoUrlSD,s=this.props.videoUrlHD,t=null,u=null;if(r!=null)t=c("React").createElement(l,this._getDownloadMenuItemProps(r),j._("Download SD"));if(s!=null)u=c("React").createElement(l,this._getDownloadMenuItemProps(s),j._("Download HD"));var v=null,w=null,x=this.state.isFeatured;if(this.props.onMakeFeaturedVideo&&this.props.canMakeFeatured&&!x){w=c("React").createElement(c("XUIMenuSeparator.react"),null);v=c("React").createElement(l,{onclick:this.props.onMakeFeaturedVideo},j._("Make Featured Video"))}var y=null,z=null;if(this.props.useEmbedOptions&&this.state.embeddable){y=c("React").createElement(c("XUIMenuSeparator.react"),null);var A=c("XEmbeddedVideoEmbedDialogController").getURIBuilder().setString("url",this.props.embedUrl).getURI();z=c("React").createElement(l,{href:A,rel:"dialog"},j._("Embed"))}var B=c("React").createElement(c("ReactXUIMenu"),null,v,z,y||w,t,u);return c("React").createElement(c("PopoverMenu.react"),{className:"_1j9",alignh:"right",menu:B},c("React").createElement(c("XUIButton.react"),{className:"_2pi7",image:c("React").createElement(c("Image.react"),{src:h("89847")}),label:j._("Settings"),labelIsHidden:true}))},renderTabbedEditor:function q(){__p&&__p();var r=void 0;if(this.props.showCaptionsTab)r=c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").CAPTIONS},j._("Captions"));var s;if(this.props.showPermissionsTab)s=c("React").createElement(n,{ref:"permissionsTabItem",href:"#",key:c("ComposerVideoTabsIdentifiers").PERMISSIONS},j._("Crossposting"));var t=null;if(this.props.showAdBreaksTab)t=c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ADBREAKS},c("React").createElement("div",{className:this.state.shouldDisableAdInsertionTab?"_2kln":""}),j._("Ad Breaks"));return c("React").createElement("div",{className:"_5vx1 _1_ha"},c("React").createElement(c("XUIPageNavigation.react"),{className:"_1_hb",activeTabKey:this.state.editorTab,onTabClick:this.onTabClick,defaultActiveTabKey:c("ComposerVideoTabsIdentifiers").BASIC,ref:"tabbar"},c("React").createElement(m,null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").BASIC},j._("Basic")),r,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ADVANCED},j._("Advanced")),this.state.showSphericalTab&&this.props.showSphericalControlsTab?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").SPHERICAL},j._("360 Controls")):null,s,this.state.showRightsTab?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").RIGHTS},j._("Rights")):null,t),this.props.isEditing?this._renderEditMenu():c("React").createElement("span",null)),this.renderBasicTab(),this.renderCaptionsTab(),this.renderAdvancedTab(),this.renderSphericalControlsTab(),this.renderPermissionsTab(),this.renderRightsTab(),this.renderAdBreaksTab())},hidePermissionsNux:function q(){this.setState({hidePermissionsNUX:true})},renderExcludeSegmentSection:function q(){if(this.props.showCopyrightSection)return c("React").createElement(c("ComposerReferenceFileExcludeSegmentsContainer.react"),{isUpload:!this.props.isEditing,logExcludeSegmentsUpdateEvent:this.logExcludeSegmentsUpdateEvent});return null},renderReferenceFileEditor:function q(){return c("React").createElement("div",null,c("React").createElement("div",{className:"_5vx1 _1_ha"},c("React").createElement(c("XUIPageNavigation.react"),{className:"_1_hb",activeTabKey:this.state.editorTab,onTabClick:this.onTabClick,defaultActiveTabKey:c("ComposerVideoTabsIdentifiers").RIGHTS,ref:"tabbar"},c("React").createElement(m,null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").RIGHTS},j._("Rights")),this.props.showAttributionsSection?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ATTRIBUTIONS},j._("Attributions")):null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").WHITELIST},j._("Permissions")))),this.renderReferenceFileRightsTab(),this.renderReferenceFileWhitelistTab(),this.renderReferenceFileAttributionsTab()),this.renderExcludeSegmentSection())},renderRightsTab:function q(){if(!this.state.showRightsTab)return null;return c("React").createElement(c("ComposerVideoUploadRightsTabContainer.react"),{accessToken:this.props.pageAccessToken,onCreateNewMatchRule:this.createNewMatchRule,targetID:this._getTargetID(),onLogEvent:this.logCopyrightEvent,shown:!!this.state.showRightsTab&&this.state.editorTab===c("ComposerVideoTabsIdentifiers").RIGHTS,showAttributionsSection:this.props.showAttributionsSection,showCategoryRequiredError:this.props.showCategoryRequiredError,canSeeIGMatches:this.props.canSeeIGMatches})},renderReferenceFileRightsTab:function q(){return c("React").createElement(c("ComposerReferenceFileUploadRightsTabContainer.react"),{accessToken:this.props.pageAccessToken,targetID:this._getTargetID(),generateThumbnails:this.props.generateThumbnails,thumbnails:this.props.thumbnails,logger:this.props.logger,onCreateNewMatchRule:this.createNewMatchRule,videoFile:this.props.videoFile,selectedThumbnail:this.props.selectedThumbnail,showTabSelector:!this.props.isUserUploadFlow,videoID:this.props.videoID,isVideoUpload:this.props.isVideoUpload,onLogEvent:this.logCopyrightEvent,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").RIGHTS,showCategoryRequiredError:this.props.showCategoryRequiredError})},renderReferenceFileWhitelistTab:function q(){return c("React").createElement(c("ComposerReferenceFileUploadWhitelistTabContainer.react"),{onLogEvent:this.logCopyrightEvent,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").WHITELIST,canSeeIGMatches:this.props.canSeeIGMatches})},renderReferenceFileAttributionsTab:function q(){if(!this.props.showAttributionsSection)return null;return c("React").createElement(c("ComposerReferenceFileUploadAttributionsTabContainer.react"),{accessToken:c("nullthrows")(this.props.pageAccessToken),onLogEvent:this.logCopyrightEvent,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").ATTRIBUTIONS,targetID:this._getTargetID()})},renderLayers:function q(){if(!this.props.showCrosspostedPermissionsNUX||!this.props.showPermissionsTab||this.state.hidePermissionsNUX||!this.refs.permissionsTabItem)return null;return{tabNUX:c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.permissionsTabItem}.bind(this),onCloseButtonClick:function(){return this.hidePermissionsNux()}.bind(this),position:"below",alignment:"center",shown:!this.state.hidePermissionsNUX},j._("NEW! Now you can allow any Page to use your videos in their posts."))}},renderAdBreaksTab:function q(){if(!this.props.showAdBreaksTab)return null;return c("React").createElement(c("ComposerVideoAdBreaksTabContainer.react"),{adBreaksExperimentPublicMetadata:this.props.adBreaksExperimentPublicMetadata,isDemonetized:this.props.isDemonetized,canEditAdBreaksTabBlockListContent:this.props.canEditAdBreaksTabBlockListContent,isEditing:this.props.isEditing,pageId:this._getTargetID(),serverSideDisabledReasons:this.props.adBreaksTabDisabledReasons,shouldShowPageOnboardingForAdBreak:this.props.shouldShowPageOnboardingForAdBreak,hasGapRule:this.props.hasAdBreakInsertionGapRule,isAdBreakInsertionRedesignV1:this.props.isAdBreakInsertionRedesignV1,isAdBreakInsertionRedesignV2:this.props.isAdBreakInsertionRedesignV2,isAutoInsertionEnabledOnProfile:this.props.isAutoInsertionEnabledOnProfile,showAdBreakAdminPreviewSettings:this.props.showAdBreakAdminPreviewSettings,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,shown:this.state.editorTab==c("ComposerVideoTabsIdentifiers").ADBREAKS,uploadVideoID:this.props.uploadVideoID,videoAssetID:this.props.videoAssetID,videoFile:this.props.videoFile,videoID:this.props.videoID})},renderBasicTab:function q(){return c("React").createElement(c("ComposerVideoUploadBasicTab.react"),{accessToken:this.props.pageAccessToken?this.props.pageAccessToken:this.props.accessToken,allowCustomThumbnail:this.props.allowCustomThumbnail,compactMode:this.props.compactMode,generateThumbnails:this.props.generateThumbnails,isCarouselPreviewEditing:this.props.isCarouselPreviewEditing,isDisabled:this.isDisabled(),isPageTrailer:this.props.isPageTrailer,isShowPage:this.props.isShowPage,isSquareVideo:this.props.isProfileVideo,isVideoUpload:this.props.isVideoUpload,logger:this.props.logger,makeTitleMandatory:this.props.makeTitleMandatory,selectedThumbnail:this.props.selectedThumbnail,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showCategorySelector:!this.props.isUserUploadFlow,showFeedTypeCheckbox:this.props.showFeedTypeCheckbox,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").BASIC,showTabSelector:!this.props.isUserUploadFlow,showTagSelectorNux:this.props.showTagSelectorNux,showTagSelectorToken:this.props.showTagSelectorToken,showHighlightedVideosNux:this.props.showHighlightedVideosNux,showMarkURI:this.props.showMarkURI,minEpisodeDuration:this.props.minEpisodeDuration,showThumbnailScrubber:this.props.showThumbnailScrubber,squareThumbnailURI:this.props.squareThumbnailURI,onHighlightedVideosNuxDismiss:this.props.onHighlightedVideosNuxDismiss,targetID:this._getTargetID(),thumbnails:this.props.thumbnails,uiLogger:this.props.UILogger,videoFile:this.props.videoFile,videoID:this.props.videoID,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,showThumbnailExperimentSection:this.props.showThumbnailExperimentSection,showShareToParentPageOption:this.props.showShareToParentPageOption,showCrosspostToParentPageOption:this.props.showCrosspostToParentPageOption,canEditShowAndParent:this.props.canEditShowAndParent,parentPageName:this.props.parentPageName,parentPageProfilePic:this.props.parentPageProfilePic,parentPageURI:this.props.parentPageURI,showGamesTypeahead:this.props.showGamesTypeahead,scheduledLivePreviewPayload:this.props.scheduledLivePreviewPayload})},_getCaptionsFlowVideoID:function q(){var r=!this.props.videoID&&this.props.shouldShowNewCaptionsFlow,s=r?this.props.uploadVideoID:this.props.videoID;return s||""},renderCaptionsTab:function q(){var r=!this.props.isSharedAsset,s=this._getCaptionsFlowVideoID()!=="",t=(this.props.stage==="upload-finished"||this.props.stage==="uploading")&&s||this.props.isEditing;return c("React").createElement(c("ComposerVideoUploadCaptionsTab.react"),{accessToken:this.props.pageAccessToken?this.props.pageAccessToken:this.props.accessToken,isDisabled:this.isDisabled(),logger:this.props.UILogger,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showDefaultLocaleRow:r,showLiveCaptionSection:this.props.showLiveCaptionSection,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").CAPTIONS,videoFile:this.props.videoFile,videoID:this._getCaptionsFlowVideoID(),pageID:this._getTargetID(),shouldShowNewCaptionsFlow:this.props.shouldShowNewCaptionsFlow,isEditFlow:this.props.isEditFlow,isVideoUploaded:t})},renderAdvancedTab:function q(){return c("React").createElement(c("ComposerVideoUploadAdvancedTab.react"),{canEditCustomLabels:this.props.canEditCustomLabels,canEditExternalVideoID:this.props.canEditExternalVideoID,canEditFundraiserForStoryCharityID:this.props.canEditFundraiserForStoryCharityID,isCarouselPreviewEditing:this.props.isCarouselPreviewEditing,isEditing:this.props.isEditing,isPageTrailer:this.props.isPageTrailer,isSecret:this.props.isSecret,isVideoUpload:this.props.isVideoUpload,isShowPage:this.props.isShowPage,renderDistribution:this.renderDistribution,showCopyrightSection:this.props.showCopyrightSection,showCustomLabels:this.props.showCustomLabels,showExternalVideoIDSection:this.props.showExternalVideoIDSection,showInternalVideoSettings:this.props.showInternalVideoSettings,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").ADVANCED,showSecretVideoOption:this.props.showSecretVideoOption,showAdvancedTabSphericalCheckbox:this.props.showAdvancedTabSphericalCheckbox,showSphericalControlsTab:this.props.showSphericalControlsTab,targetID:this._getTargetID(),toggleRightsTab:this._toggleRightsTab,toggleSphericalTab:this._toggleSphericalTab,videoID:this.props.videoID,showDisturbingSection:this.props.showDisturbingSection})},renderSphericalControlsTab:function q(){__p&&__p();if(!this.props.showSphericalControlsTab)return null;var r=this.props.showOmnistabSection,s=c("SphericalDirectorComponentSources").PAGE_COMPOSER_V1;if(this.props.isEditing){s=c("SphericalDirectorComponentSources").EDIT_DIALOG_V1;r=r&&this.props.hasOmnistabEncoding}if(this.props.isSharedAsset)s=c("SphericalDirectorComponentSources").CROSSPOST_DIALOG_V1;return c("React").createElement(c("ComposerVideoUploadSphericalControlsTabContainer.react"),{showOmnistabSection:r,hasOmnistabEncoding:this.props.hasOmnistabEncoding,isEditing:this.props.isEditing,shown:!!this.state.showSphericalTab&&this.state.editorTab===c("ComposerVideoTabsIdentifiers").SPHERICAL,videoFile:this.props.videoFile,videoID:this.props.videoID,targetID:this._getTargetID(),onTabClick:this.onTabClick,componentSource:s})},renderPermissionsTab:function q(){if(!this.props.showPermissionsTab)return null;return c("React").createElement(c("ComposerVideoUploadPermissionsTab.react"),{canCrosspostOutsideBusiness:this.props.canCrosspostOutsideBusiness,isDisabled:this.isDisabled(),logger:this.props.UILogger,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").PERMISSIONS,showCrosspostingHelpCenter:this.props.showCrosspostingHelpCenter,targetID:this._getTargetID()})},renderCarouselPreviewEditor:function q(){if(!this.props.showCopyrightSection)return c("React").createElement("div",{className:"_1_ha _5j6r"},this.renderBasicTab());return c("React").createElement("div",{className:"_5vx1 _1_ha"},c("React").createElement(c("XUIPageNavigation.react"),{className:"_1_hb",activeTabKey:this.state.editorTab,onTabClick:this.onTabClick,defaultActiveTabKey:c("ComposerVideoTabsIdentifiers").BASIC,ref:"tabbar"},c("React").createElement(m,null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").BASIC},j._("Basic")),this.props.showCopyrightSection?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ADVANCED},j._("Advanced")):null,this.state.showRightsTab?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").RIGHTS},j._("Rights")):null)),this.renderBasicTab(),this.renderAdvancedTab(),this.renderRightsTab())},renderUserUploadFlowEditor:function q(){return c("React").createElement("div",{className:"_1_ha"},this.renderBasicTab())},toggleVisible:function q(r){this.setState({shown:r})},openCreateNewMatchRuleDialog:function q(){__p&&__p();var r=c("dotAccess")(this.props,"config.targetID")||this.props.targetID;if(this.props.canSeeNewMatchRuleDialog)c("VideoCopyrightRuleTemplateBlankSelectDialog").show(r,this.props.pageAccessToken,this.props.isMonetizationOnboarded);else{var s=c("XVideoCopyrightRuleDialogController").getURIBuilder().setFBID("page_id",r).setEnum("source",c("VideoCopyrightRuleDialogSource").COMPOSER).setString("access_token",this.props.pageAccessToken).getURI();s=c("ActorURI").create(s,r);c("AsyncDialog").send(new(c("AsyncRequest"))(s),function(t){this.toggleVisible(false);var u=t.subscribe("hide",function(){this.toggleVisible(true);if(u){u.unsubscribe();u=null}}.bind(this))}.bind(this))}},createNewMatchRule:function q(){this.logCopyrightEvent("create_new_match_rule_clicked");if(c("DOMScroll").getScrollState().y!==0){c("DOMScroll").scrollToTop();setTimeout(this.openCreateNewMatchRuleDialog,500)}else this.openCreateNewMatchRuleDialog()},_navigateToBasicTab:function q(){this.setState({editorTab:c("ComposerVideoTabsIdentifiers").BASIC})},calculatePerceivedProgress:function q(){if(this.state.baseProgress===100)return 100;var r=this.state.baseProgress,s=100-r,t=this.props.progress?this.props.progress:0;return(t-r)*100/s},renderProgressBar:function q(){var r;if(!this.props.showUploadProgressBar)return null;var s=this.calculatePerceivedProgress(),t=c("intlNumUtils").formatNumber(s,1);if(s)r=j._("{percent}\u0025",[j.param("percent",t)]);return c("React").createElement("div",{"data-testid":s>=100?c("PublishingToolsWebdriverTestDataIDs").VIDEO_UPLOAD_COMPLETE_BAR:null,className:"_5w5h"+(!!s?" _3ufe":"")},c("React").createElement(c("ProgressBar.react"),{value:s,label:r}))},renderErrorNotice:function q(r,s){var t;if(s)t=c("React").createElement("div",{className:"_1gip"},c("React").createElement(c("FileInput.react"),{ref:"videoFileInput",onChange:this.onVideoFileInputChange},c("React").createElement(c("XUIButton.react"),{href:"#",label:j._("Replace Video")})));return c("React").createElement(c("XUINotice.react"),{use:"warn",className:"_3edu"},t,r)},renderErrorMessage:function q(r){if(!this.props.errorMessage)return null;return this.renderErrorNotice(this.props.errorMessage,r)},renderWarningMessages:function q(){var r=[];if(this.hasAddedBusinessSharing())r.push(c("React").createElement(c("XUINotice.react"),{key:"addedBusinessSharing",className:"_3-8y",use:"notify"},j._("By allowing other Pages to use this video, their Page admins will be able to see this post and use this video, even before it is published.")));var s=this.getExpirableCrosspostCount();if(this.hasRemovedBusinessSharing()&&s>0)r.push(c("React").createElement(c("XUINotice.react"),{key:"removedBusinessSharing",className:"_3-8y",use:"notify"},j._({"post":"By removing permission to use this video, {posts} post on other Pages that use it will be unpublished automatically.","posts":"By removing permission to use this video, {posts} posts on other Pages that use it will be unpublished automatically."},[j.param("posts",s),j["enum"](s===1?"post":"posts",{post:"post",posts:"posts"})])));return r},render:function q(){__p&&__p();var r=void 0,s=void 0,t=void 0;if(this.props.isReferenceVideo)t=this.renderReferenceFileEditor();else if(this.props.isCarouselPreviewEditing)t=this.renderCarouselPreviewEditor();else if(!this.props.isUserUploadFlow)t=this.renderTabbedEditor();else t=this.renderUserUploadFlowEditor();if(this.props.stage==="idle")return c("React").createElement("div",null);else if(this.props.stage==="post-failed"||this.props.stage==="upload-failed")r=this.renderErrorMessage(c("VideoUploadFileValidator").canReplaceVideoForError(this.props.errorCode));else s=this.renderProgressBar();return c("React").createElement("div",{className:"_5w5j"+(!this.state.shown?" _u_u":"")},t,s,r,this.renderWarningMessages())}});f.exports=p}),null);
__d("VideoComposerDialogBody.react",["cx","fbt","ReactComposerFundraiserAttachmentContainerGated","ComposerVideoUploadActions","ComposerVideoUploadDetails.react","ComposerVideoUploadStore","Layout.react","MentionsInputUtility","MultilingualPostMessageActions","MultilingualPostMessageEditorContainer.react","React","ReactComposerBody.react","ReactComposerContextTypes","ReactComposerContextProviderMixin","ReactComposerMultilingualStatusContainer.react","ReactComposerProfilePhoto.react","VideoEditMentionsTextArea.react","classWithMixins","getByPath","getMentionsInputDecorator","getMentionsTextForContentState","mixin"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("ReactComposerFundraiserAttachmentContainerGated").module,m=c("Layout.react").Column,n=c("Layout.react").FillColumn,o=c("React").createClass({displayName:"Wrapper",mixins:[c("ReactComposerContextProviderMixin")],render:function r(){return c("React").createElement(c("ComposerVideoUploadDetails.react"),{selectedThumbnail:this.props.selectedThumbnail,stage:this.props.stage,thumbnails:this.props.thumbnails,canEditCustomLabels:this.props.canEditCustomLabels,canEditExternalVideoID:this.props.canEditExternalVideoID,showAdBreaksTab:this.props.showAdBreaksTab,showAttributionsSection:this.props.showAttributionsSection,adBreaksTabDisabledReasons:this.props.adBreaksTabDisabledReasons,composerID:this.props.composerID,canEditAdBreaksTabBlockListContent:this.props.canEditAdBreaksTabBlockListContent,adBreaksExperimentPublicMetadata:this.props.adBreaksExperimentPublicMetadata,isDemonetized:this.props.isDemonetized,hasAdBreakInsertionGapRule:this.props.hasAdBreakInsertionGapRule,isAdBreakInsertionRedesignV1:this.props.isAdBreakInsertionRedesignV1,isAdBreakInsertionRedesignV2:this.props.isAdBreakInsertionRedesignV2,showAdBreakAdminPreviewSettings:this.props.showAdBreakAdminPreviewSettings,makeTitleMandatory:this.props.makeTitleMandatory,newUIEventLogFunc:this.props.newUIEventLogFunc,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,showUploadProgressBar:false,showFeedTypeCheckbox:this.props.showFeedTypeCheckbox,generateThumbnails:false,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showLiveCaptionSection:this.props.showLiveCaptionSection,showCaptionsTab:this.props.showCaptionsTab,showPermissionsTab:this.props.showPermissionsTab,showSecretVideoOption:this.props.showSecretVideoOption,showCopyrightSection:this.props.showCopyrightSection,showCategoryRequiredError:this.props.showCategoryRequiredError,showCrosspostingHelpCenter:this.props.showCrosspostingHelpCenter,showCustomLabels:this.props.showCustomLabels,showExternalVideoIDSection:this.props.showExternalVideoIDSection,showMonitoringTypeSelector:this.props.showMonitoringTypeSelector,showAdvancedTabSphericalCheckbox:this.props.showAdvancedTabSphericalCheckbox,shouldShowPageOnboardingForAdBreak:this.props.shouldShowPageOnboardingForAdBreak,showSphericalControlsTab:this.props.showSphericalControlsTab,showInternalVideoSettings:this.props.showInternalVideoSettings,showOmnistabSection:this.props.showOmnistabSection,squareThumbnailURI:this.props.squareThumbnailURI,hasOmnistabEncoding:this.props.hasOmnistabEncoding,errorMessage:this.props.errorMessage,errorCode:this.props.errorCode,videoID:this.props.videoID,videoAssetID:this.props.videoAssetID,isCarouselPreviewEditing:this.props.isCarouselPreviewEditing,isEditing:this.props.isEditing,isSharedAsset:this.props.isSharedAsset,isVideoUpload:false,allowCustomThumbnail:this.props.allowCustomThumbnail,isReferenceVideo:this.props.isReferenceVideo,showTagSelectorToken:this.props.showTagSelectorToken,accessToken:this.props.accessToken,pageAccessToken:this.props.pageAccessToken,targetID:c("getByPath")(this.props,["contextConfig","actorID"]),isSecret:this.props.isSecret,canMakeFeatured:this.props.canMakeFeatured,isFeatured:this.props.isFeatured,onMakeFeaturedVideo:this.props.onMakeFeaturedVideo,videoUrlSD:this.props.videoUrlSD,videoUrlHD:this.props.videoUrlHD,expirableCrosspostsCount:this.props.expirableCrosspostsCount,showCrosspostedPermissionsNUX:this.props.showCrosspostedPermissionsNUX,dialogVisible:this.props.dialogVisible,canCrosspostOutsideBusiness:this.props.canCrosspostOutsideBusiness,useEmbedOptions:this.props.useEmbedOptions,embedUrl:this.props.embedUrl,isShowPage:this.props.isShowPage,showMarkURI:this.props.showMarkURI,minEpisodeDuration:this.props.minEpisodeDuration,isMonetizationOnboarded:this.props.isMonetizationOnboarded,canSeeNewMatchRuleDialog:this.props.canSeeNewMatchRuleDialog,shouldShowNewCaptionsFlow:this.props.shouldShowNewCaptionsFlow,canSeeIGMatches:this.props.canSeeIGMatches,isEditFlow:this.props.isEditFlow,scheduledLivePreviewPayload:this.props.scheduledLivePreviewPayload})}});j=babelHelpers.inherits(p,c("classWithMixins")(c("React").Component,c("mixin")(c("ReactComposerContextProviderMixin"))));k=j&&j.prototype;function p(r){"use strict";k.constructor.call(this,r);q.call(this);var s=r.contextConfig.composerID,t=c("ComposerVideoUploadStore").getDescription(s);this.state={errorMessage:null,stage:"uploading",editorState:c("MentionsInputUtility").createFromTextWithMentions(t,c("getMentionsInputDecorator")()),thumbnails:r.thumbnails,selectedThumbnail:r.selectedThumbnail,editorStateContent:t,showFeedTypeCheckbox:r.showFeedTypeCheckbox}}p.prototype.componentDidMount=function(){"use strict";if(this.props.isMultilingualPost)c("MultilingualPostMessageActions").startedUpdatingVideoMessage(this.props.postID)};p.prototype.render=function(){"use strict";var r=this.props.isCarouselPreviewEditing?null:c("React").createElement(c("VideoEditMentionsTextArea.react"),{className:"_3xjx _52oj",placeholder:i._("Say something about this video. This description will appear with your video across Facebook."),searchSource:this.props.mentionsSource,ref:"status",editorState:this.state.editorState,onChange:this.onDescriptionChange,textWithMentions:this.state.editorStateContent}),s=c("React").createElement(c("MultilingualPostMessageEditorContainer.react"),{contentID:this.props.postID}),t=this.props.showMultilingualOnMonolingualPost&&!this.props.isMultilingualPost;return c("React").createElement(c("ReactComposerBody.react"),{className:"_1ncl"+(this.props.isShowPage?" _3hx7":"")},c("React").createElement(c("Layout.react"),{className:this.props.pagePicture?"_3-97":""},this.props.pagePicture?c("React").createElement(m,null,c("React").createElement(c("ReactComposerProfilePhoto.react"),{src:this.props.pagePicture,onClick:function u(){}})):null,c("React").createElement(n,null,this.props.isMultilingualPost?s:r)),t?c("React").createElement(c("ReactComposerMultilingualStatusContainer.react"),{onChange:function u(){}}):null,c("React").createElement(o,{contextConfig:this.props.contextConfig,composerID:this.props.contextConfig.composerID,canEditAdBreaksTabBlockListContent:this.props.canEditAdBreaksTabBlockListContent,makeTitleMandatory:this.props.makeTitleMandatory,newUIEventLogFunc:this.props.newUIEventLogFunc,adBreaksExperimentPublicMetadata:this.props.adBreaksExperimentPublicMetadata,isDemonetized:this.props.isDemonetized,hasAdBreakInsertionGapRule:this.props.hasAdBreakInsertionGapRule,isAdBreakInsertionRedesignV1:this.props.isAdBreakInsertionRedesignV1,isAdBreakInsertionRedesignV2:this.props.isAdBreakInsertionRedesignV2,showAdBreakAdminPreviewSettings:this.props.showAdBreakAdminPreviewSettings,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,thumbnails:this.state.thumbnails,selectedThumbnail:this.state.selectedThumbnail,generateThumbnails:false,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showLiveCaptionSection:this.props.showLiveCaptionSection,showFeedTypeCheckbox:this.props.showFeedTypeCheckbox,showSecretVideoOption:this.props.showSecretVideoOption,showCopyrightSection:this.props.showCopyrightSection,showCategoryRequiredError:this.props.showCategoryRequiredError,showCrosspostingHelpCenter:this.props.showCrosspostingHelpCenter,showMonitoringTypeSelector:this.props.showMonitoringTypeSelector,showAdvancedTabSphericalCheckbox:this.props.showAdvancedTabSphericalCheckbox,showAttributionsSection:this.props.showAttributionsSection,showSphericalControlsTab:this.props.showSphericalControlsTab,showPermissionsTab:this.props.showPermissionsTab,showCaptionsTab:this.props.showCaptionsTab,showInternalVideoSettings:this.props.showInternalVideoSettings,showOmnistabSection:this.props.showOmnistabSection,showMarkURI:this.props.showMarkURI,minEpisodeDuration:this.props.minEpisodeDuration,squareThumbnailURI:this.props.squareThumbnailURI,hasOmnistabEncoding:this.props.hasOmnistabEncoding,errorMessage:this.state.errorMessage,errorCode:null,stage:this.state.stage,videoID:this.props.videoID,videoAssetID:this.props.videoAssetID,isCarouselPreviewEditing:this.props.isCarouselPreviewEditing,isEditing:this.props.isEditing,isSharedAsset:this.props.isSharedAsset,isShowPage:this.props.isShowPage,isReferenceVideo:this.props.isReferenceVideo,allowCustomThumbnail:this.props.allowCustomThumbnail,showTagSelectorToken:this.props.showTagSelectorToken,accessToken:this.props.accessToken,pageAccessToken:this.props.pageAccessToken,targetID:c("getByPath")(this.props,["contextConfig","actorID"]),isSecret:this.props.isSecret,canMakeFeatured:this.props.canMakeFeatured,isFeatured:this.props.isFeatured,onMakeFeaturedVideo:this.props.onMakeFeaturedVideo,videoUrlSD:this.props.videoUrlSD,videoUrlHD:this.props.videoUrlHD,expirableCrosspostsCount:this.props.expirableCrosspostsCount,showCrosspostedPermissionsNUX:this.props.showCrosspostedPermissionsNUX,shouldShowPageOnboardingForAdBreak:this.props.shouldShowPageOnboardingForAdBreak,dialogVisible:this.props.dialogVisible,canCrosspostOutsideBusiness:this.props.canCrosspostOutsideBusiness,canEditCustomLabels:this.props.canEditCustomLabels,canEditExternalVideoID:this.props.canEditExternalVideoID,showAdBreaksTab:this.props.showAdBreaksTab,adBreaksTabDisabledReasons:this.props.adBreaksTabDisabledReasons,showCustomLabels:this.props.showCustomLabels,showExternalVideoIDSection:this.props.showExternalVideoIDSection,useEmbedOptions:this.props.useEmbedOptions,embedUrl:this.props.embedUrl,isMonetizationOnboarded:this.props.isMonetizationOnboarded,canSeeNewMatchRuleDialog:this.props.canSeeNewMatchRuleDialog,shouldShowNewCaptionsFlow:this.props.shouldShowNewCaptionsFlow,canSeeIGMatches:this.props.canSeeIGMatches,isEditFlow:this.props.isEditFlow,scheduledLivePreviewPayload:this.props.scheduledLivePreviewPayload}),l?c("React").createElement(l,null):null)};p.defaultProps={canEditCustomLabels:false,canEditExternalVideoID:false,showAdBreaksTab:false,adBreaksTabDisabledReasons:null,canEditAdBreaksTabBlockListContent:false,hasAdBreakInsertionGapRule:true,isAdBreakInsertionRedesignV1:false,isAdBreakInsertionRedesignV2:false,showAdBreakAdminPreviewSettings:false,showAdBreakOffsetEditorNux:false,makeTitleMandatory:false,shouldUseNewAdBreakOffsetEditor:false,showCustomLabels:false,showExternalVideoIDSection:false,showSecretVideoOption:false,showCopyrightSection:false,showCategoryRequiredError:false,showAdvancedTabSphericalCheckbox:false,showAttributionsSection:false,showSphericalControlsTab:false,showOmnistabSection:false,hasOmnistabEncoding:false,isCarouselPreviewEditing:false,isEditing:true,isSharedAsset:false,showCrosspostingHelpCenter:false,showPermissionsTab:false,showFeedTypeCheckbox:false,showMultilingualOnMonolingualPost:false,isMultilingualPost:false,showCaptionsTab:true,canSeeIGMatches:false,isEditFlow:false,scheduledLivePreviewPayload:null};var q=function q(){this.onDescriptionChange=function(r){var s=c("getMentionsTextForContentState")(r.getCurrentContent()),t=c("ComposerVideoUploadStore").getDescription(this.props.contextConfig.composerID);if(s!==t){c("ComposerVideoUploadActions").updateDescription(this.props.contextConfig.composerID,s);this.setState({editorState:r,editorStateContent:s})}}.bind(this)};p.childContextTypes=c("ReactComposerContextTypes");f.exports=p}),null);
__d("VideoEditPublishingSelector.react",["cx","React","VideoEditPublishingAction","VideoEditPublishingStatus","VideoPublishingState","VideoPublishingStateIndicator.react","VideoPublishingStateIndicatorUtils","XUISingleSelector.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("XUISingleSelector.react").Option,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.getStateToolTip=function(n){"use strict";var o=this.props.publishingConfig,p=this.props.creationTime,q=o.expirationTime,r=o.scheduledPublishTime;return c("VideoPublishingStateIndicatorUtils").getStateToolTip(n,{creationTime:p,expirationTime:q&&q/1e3,isVideoAsset:false,postsCount:1,publishTime:r&&r/1e3||p})};m.prototype.render=function(){"use strict";__p&&__p();var n=this.props.options.map(function(o){__p&&__p();var p=o.type,q=o.value,r=void 0,s=void 0,t=void 0;if(p=="status"){r=c("VideoEditPublishingStatus")[q];s=r.value;t=this.getStateToolTip(s)}else{r=c("VideoEditPublishingAction")[q];switch(q.toLowerCase()){case c("VideoEditPublishingAction").MAKE_DRAFT.value:s=c("VideoPublishingState").DRAFT;break;case c("VideoEditPublishingAction").SCHEDULE_PUBLISH.value:s=c("VideoPublishingState").SCHEDULED;break;case c("VideoEditPublishingAction").PUBLISH.value:s=c("VideoPublishingState").PUBLISHED;break;case c("VideoEditPublishingAction").SCHEDULE_EXPIRATION.value:s=c("VideoPublishingState").EXPIRING;break;case c("VideoEditPublishingAction").EXPIRE.value:s=c("VideoPublishingState").EXPIRED;break;default:s="unknown";break}}return c("React").createElement(k,{key:r.value,value:r.value},c("React").createElement(c("VideoPublishingStateIndicator.react"),{className:"_3mto",state:s,toolTip:t,toolTipAlignH:"center",toolTipPosition:"above"}),r.label)}.bind(this));return c("React").createElement(c("XUISingleSelector.react"),{className:"_3-93",onChange:this.props.onChange,value:this.props.selectedOption},n)};function m(){"use strict";i.apply(this,arguments)}m.propTypes={creationTime:l.number,onChange:l.func,options:l.array.isRequired,publishingConfig:l.object.isRequired,selectedOption:l.string.isRequired};f.exports=m}),null);
__d("VideoEditDialogFooter.react",["cx","fbt","BasicTypeaheadLoggerJSConstants","CommerceSelfServeNUXType","ComposerVideoUploadActions","ComposerVideoUploadStore","DOM","DOMContainer.react","ExpirationType","InlineBlock.react","LeftRight.react","PageContentTabConfig","PlaceSearchConstants","PostExpireDialog.react","PostScheduleDialog.react","React","ReactComposerAttachmentType","ReactComposerBackdateTaggerButton.react","ReactComposerBackdateTaggerContainer.react","ReactComposerConfig","ReactComposerContextConfig","ReactComposerContextProviderMixin","ReactComposerFooterActions.react","ReactComposerFooterContainer.react","ReactComposerImplicitLocationContainer.react","ReactComposerLocationTaggerButton.react","ReactComposerLocationTaggerContainer.react","ReactComposerMessagingTaggerButton.react","ReactComposerMessagingTaggerContainer.react","ReactComposerPeopleTaggerButton.react","ReactComposerPeopleTaggerContainer.react","ReactComposerProductTaggerButton.react","ReactComposerProductTaggerContainer.react","ReactComposerSponsorTaggerButton.react","ReactComposerSponsorTaggerContainer.react","ReactComposerTaggerActions","ReactComposerTaggerButtons.react","ReactComposerTaggers.react","ReactComposerTaggerType","ReactComposerTaggerViewStyles","ReactDOM","Tooltip","VideoEditPublishingAction","VideoEditPublishingSelector.react","VideoEditPublishingStatus","XUIButton.react","getByPath"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("BasicTypeaheadLoggerJSConstants").EventNames,k=c("React").PropTypes,l=c("React").createClass({displayName:"VideoEditDialogFooter",mixins:[c("ReactComposerContextProviderMixin")],propTypes:{config:c("ReactComposerConfig").isRequired,contextConfig:c("ReactComposerContextConfig").isRequired,creationTime:k.number,isReferenceVideo:k.bool,onCancelButtonClick:k.func.isRequired,onSaveButtonClick:k.func.isRequired,onDeleteButtonClick:k.func,publishingConfig:k.object.isRequired,saveButtonDisabled:k.bool,privacy:k.object},statics:{taggerID:c("ReactComposerTaggerType").PEOPLE},getInitalState:function m(){return{selectedValue:this.props.publishingConfig.selectedValue}},componentDidMount:function m(){c("ReactComposerTaggerActions").handleSetTaggerShowNUX(this.props.contextConfig.composerID,c("ReactComposerTaggerType").PRODUCT,this.props.config.nuxConfig.showProductVideoEditorTaggerNux)},_getPeopleTaggerPlaceholder:function m(){return i._("Who were you with?")},_getLocationTaggerPlaceholder:function m(){return i._("Where was this taken?")},_getTaggers:function m(){if(this.props.isReferenceVideo)return null;var n=this.props.config.taggersConfig,o=c("React").createElement(c("ReactComposerPeopleTaggerContainer.react"),{placeholder:this._getPeopleTaggerPlaceholder(),showEntriesOnFocus:false,actorID:this.props.contextConfig.actorID,taggerConfig:n[this.constructor.taggerID]}),p=c("React").createElement(c("ReactComposerLocationTaggerContainer.react"),{implicitLocationEnabled:n[c("ReactComposerTaggerType").LOCATION].implicitLocationEnabled,mediaLocation:null,placeholder:this._getLocationTaggerPlaceholder(),taggerConfig:n[this.constructor.taggerID],taggerViewStyle:c("ReactComposerTaggerViewStyles").SCROLLABLE,typeaheadLoggerEventName:j.REACT_COMPOSER_LOCATION_TAGGER,typeaheadSearchSource:c("PlaceSearchConstants").SOURCE_W_COMPOSER}),q=c("React").createElement(c("ReactComposerBackdateTaggerContainer.react"),null),r=this.props.config.taggersConfig[c("ReactComposerTaggerType").SPONSOR].enabled?c("React").createElement(c("ReactComposerSponsorTaggerContainer.react"),{viewer:this.props.config.actorConfig.viewerAccountID,showDirectBoost:this.props.config.taggersConfig[c("ReactComposerTaggerType").SPONSOR].showSponsorTaggerDirectBoost,showSponsorRelationship:this.props.config.taggersConfig[c("ReactComposerTaggerType").SPONSOR].showSponsorTaggerSponsorRelationship,showSponsorRelationshipRadioList:this.props.config.taggersConfig[c("ReactComposerTaggerType").SPONSOR].showSponsorTaggerSponsorRelationshipRadioList}):null,s=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA],t=this.props.config.taggersConfig[c("ReactComposerTaggerType").PRODUCT],u=t.enabled?c("React").createElement(c("ReactComposerProductTaggerContainer.react"),{key:"product_container",pageID:this.props.config.targetData.targetID,productTaggerType:s.productTaggerType,reactComposerID:this.props.contextConfig.composerID,showAddProduct:t.showAddProduct,viewer:this.props.config.actorConfig.viewerAccountID}):null,v=null;if(c("getByPath")(n,[c("ReactComposerTaggerType").MESSAGING,"enabled"]))v=c("React").createElement(c("ReactComposerMessagingTaggerContainer.react"),{key:"messaging_container",reactComposerID:this.props.contextConfig.composerID});return c("React").createElement(c("ReactComposerTaggers.react"),null,o,p,q,r,u,v)},_getButtons:function m(){__p&&__p();if(this.props.isReferenceVideo||this.props.isCarouselPreviewEditing)return null;var n=c("React").createElement(c("ReactComposerPeopleTaggerButton.react"),null),o=c("React").createElement(c("ReactComposerLocationTaggerButton.react"),null,c("React").createElement(c("ReactComposerImplicitLocationContainer.react"),null)),p=c("React").createElement(c("ReactComposerBackdateTaggerButton.react"),null),q=this.props.config.taggersConfig[c("ReactComposerTaggerType").SPONSOR].enabled?c("React").createElement(c("ReactComposerSponsorTaggerButton.react"),null):null,r=null;if(this.props.config.taggersConfig[c("ReactComposerTaggerType").PRODUCT].enabled){var s=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA];r=c("React").createElement(c("ReactComposerProductTaggerButton.react"),{key:"product_button",nuxType:c("CommerceSelfServeNUXType").VIDEO_EDITOR_PRODUCT_TAGGER_BUTTON,productTaggerType:s.productTaggerType})}var t=null,u=this.props.config.taggersConfig;if(c("getByPath")(u,[c("ReactComposerTaggerType").MESSAGING,"enabled"]))t=c("React").createElement(c("ReactComposerMessagingTaggerButton.react"),{key:"messaging_button",reactComposerID:this.props.contextConfig.composerID});return c("React").createElement(c("ReactComposerTaggerButtons.react"),null,n,o,p,q,r,t)},onPublishingChange:function m(event){__p&&__p();var n=event.value;if(n===c("VideoEditPublishingAction").MAKE_DRAFT.value)this._handleUnschedulePost();else if(n===c("VideoEditPublishingAction").PUBLISH.value)this._handlePublishPost();else if(n===c("VideoEditPublishingStatus").SCHEDULED.value)this._handlePostReturningToScheduled();else if(n===c("VideoEditPublishingStatus").DRAFT.value)this._handlePostReturningToDraft();else if(n===c("VideoEditPublishingAction").EXPIRE.value)this._handleExpirePost();else if(n===c("VideoEditPublishingStatus").PUBLISHED.value)this._handlePostReturningToPublished();else if(n===c("VideoEditPublishingAction").SCHEDULE_PUBLISH.value)this._handleSchedulePost();else if(n===c("VideoEditPublishingAction").CANCEL_EXPIRATION.value)this._handleCancelExpirationPost();else if(n===c("VideoEditPublishingStatus").EXPIRING.value)this._handlePostReturningToExpiring();else if(n===c("VideoEditPublishingAction").REPUBLISH.value)this._handleRepublishPost();else if(n===c("VideoEditPublishingStatus").EXPIRED.value)this._handlePostReturningToExpired();else if(n===c("VideoEditPublishingAction").SCHEDULE_EXPIRATION.value)this._handleScheduleExpirationPost();else if(n===c("VideoEditPublishingStatus").UNPUBLISHED.value)this._handlePostReturningToUnpublished();this.setState({selectedValue:event.value})},_handleUnschedulePost:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateScheduledPublishTime(n,0)},_handlePublishPost:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updatePublish(n,true)},_handlePostReturningToScheduled:function m(){var n=this.props.contextConfig.composerID,o=this.props.publishingConfig.scheduledPublishTime;c("ComposerVideoUploadActions").updateScheduledPublishTime(n,o);c("ComposerVideoUploadActions").updatePublish(n,false)},_handlePostReturningToDraft:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateScheduledPublishTime(n,0);c("ComposerVideoUploadActions").updatePublish(n,false)},_handleExpirePost:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateExpire(n,true)},_handlePostReturningToPublished:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateExpire(n,false);c("ComposerVideoUploadActions").updateExpiration(n,0,c("ExpirationType").NONE)},_handlePostReturningToUnpublished:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updatePublish(n,false)},_handleSchedulePost:function m(){var n=i._("OK"),o=c("React").createElement(c("PostScheduleDialog.react"),{timezoneStr:c("PageContentTabConfig").timezone_str,onSubmit:this._handleScheduledData,submitLabel:n});o=c("ReactDOM").render(o,c("DOM").create("div"));o.show()},_handleScheduledData:function m(n){var o=n.getTime(),p=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateScheduledPublishTime(p,o);c("ComposerVideoUploadActions").updatePublish(p,false)},_handleCancelExpirationPost:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateExpire(n,false);c("ComposerVideoUploadActions").updateExpiration(n,0,c("ExpirationType").NONE)},_handlePostReturningToExpiring:function m(){var n=this.props.contextConfig.composerID,o=this.props.publishingConfig.expirationTime,p=this.props.publishingConfig.expirationType;c("ComposerVideoUploadActions").updateExpiration(n,o,p);c("ComposerVideoUploadActions").updateExpire(n,false)},_handleRepublishPost:function m(){var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateExpire(n,false);c("ComposerVideoUploadActions").updateExpiration(n,0,c("ExpirationType").NONE)},_handlePostReturningToExpired:function m(){var n=this.props.contextConfig.composerID,o=this.props.publishingConfig.expirationTime,p=this.props.publishingConfig.expirationType;c("ComposerVideoUploadActions").updateExpiration(n,o,p)},_handleScheduleExpirationPost:function m(){var n=i._("OK"),o=c("React").createElement(c("PostExpireDialog.react"),{timezone:c("PageContentTabConfig").timezone_str,onSubmit:function(p,q){this._handleExpirationData(p,q);o.hide()}.bind(this),submitLabel:n});c("ComposerVideoUploadActions").updateExpire(this.props.contextConfig.composerID,false);o=c("ReactDOM").render(o,c("DOM").create("div"));o.show()},_handleExpirationData:function m(n,o){var p=this.props.contextConfig.composerID;if(n)n*=1e3;else n=this.props.publishingConfig.expirationTime;c("ComposerVideoUploadActions").updateExpiration(p,n,o)},_getDeleteButton:function m(){if(!this.props.isReferenceVideo||!this.props.onDeleteButtonClick||this.props.isCarouselPreviewEditing)return null;var n=i._("Delete");return c("React").createElement(c("XUIButton.react"),{className:"_3-91",label:n,onClick:this.props.onDeleteButtonClick})},_getFooterActions:function m(){__p&&__p();var n,o=this.props.contextConfig.composerID,p=c("ComposerVideoUploadStore").getPublish(o),q=c("ComposerVideoUploadStore").getTitle(o),r=c("ComposerVideoUploadStore").getExpire(o);if(p)n=i._("Save & Publish");else if(r)n=i._("Save & Expire");else n=i._("Save");var s=i._("Cancel"),t=this.props.publishingConfig,u;if(this.state&&this.state.selectedValue)u=this.state.selectedValue;else u=t.selectedValue;var v=c("React").createElement(c("VideoEditPublishingSelector.react"),{creationTime:this.props.creationTime,onChange:this.onPublishingChange,options:t.options,publishingConfig:this.props.publishingConfig,selectedOption:u}),w=c("React").createElement(c("InlineBlock.react"),{className:"_36b5"},c("React").createElement(c("DOMContainer.react"),null,this.props.privacy)),x=this._getDeleteButton(),y=this.props.makeTitleMandatory&&q.length===0?i._("To save your video, give it a title"):null;return c("React").createElement(c("ReactComposerFooterActions.react"),{className:"_3c2y"+(this.props.isReferenceVideo?" _1x5l":"")},this.props.isReferenceVideo||this.props.isCarouselPreviewEditing||!this.props.privacy?null:w,this.props.isReferenceVideo||this.props.isCarouselPreviewEditing?null:v,x,c("React").createElement(c("XUIButton.react"),{className:"_av_ _3-8_",label:s,onClick:this.props.onCancelButtonClick}),c("React").createElement(c("XUIButton.react"),babelHelpers["extends"]({},c("Tooltip").propsFor(y,"above"),{className:"_3-99",disabled:this.props.saveButtonDisabled,href:"#",label:n,onClick:this.props.onSaveButtonClick,use:"confirm"})))},render:function m(){var n=this.props.hasImplicitLocation?"_icv":"",o="light-wash";return c("React").createElement("div",null,this._getTaggers(),c("React").createElement(c("ReactComposerFooterContainer.react"),{background:o,className:n},c("React").createElement(c("LeftRight.react"),{className:"_d6-"},this._getButtons(),this._getFooterActions())))}});f.exports=l}),null);
__d("VideoEditDialog.react",["cx","fbt","ReactComposerTaggerStore","ActorURI","Arbiter","AsyncRequest","ComposerVideoAdBreakStore","ComposerVideoPostUtils","ComposerVideoShowsDispatcher","ComposerVideoUploadActions","ComposerVideoUploadSphericalStore","ComposerVideoUploadStore","CSS","FBFeedLocations","LayerFadeOnHide","MultilingualPostMessageActions","PageContentTabVideosCopyrightReferenceLibraryActions","PagesComposer","React","ReactComposerMultilingualStatusStore","ReactComposerStatusActions","ReactComposerTaggerActions","ReloadPage","Run","ShowsVideoDataSource","StoreBasedStateMixinHelper","URLVideoThumbnail","VideoCaptionURL","VideoComposerDialogBody.react","VideoComposerDialogCaptionEditorUtils","VideoComposerDialogCaptionsStore","VideoComposerDialogMode","VideoComposerDialogUIEvent","VideoComposerDialogUITypedLogger","VideoComposerDialogVersion","VideoCopyrightAPI","VideoEditDialogFooter.react","VideoEditEvent","VideoEditFlow","VideoEditSource","VideoEditTypedLogger","VideoSurveySource","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUINotice.react","XUIText.react","XVideoEditDialogSaveController","XVideoEditMakeFeaturedController","XVideoGenerateStoryController","XVideoManagerSurveyController","ge","goURI","setImmediate","ComposerVideoShowsStore"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;c("ReactComposerTaggerStore");j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.calculateState=function(m){"use strict";var n=c("ComposerVideoUploadStore").getTitle(m.contextConfig.composerID),o=m.makeTitleMandatory&&n.length===0;return{saveButtonDisabled:o}};function l(m){"use strict";__p&&__p();k.constructor.call(this,m);this.state={selectedThumbnail:null,errorMessage:this.props.initialErrorMessage,copyrightID:this.props.copyrightID,isCopyrighted:this.props.isCopyrighted,stage:"uploading",thumbnails:[],captions:[],liveCaptions:[],saveButtonDisabled:false,dialogVisible:false,featuredSuccessDialogVisible:false,featuredSuccessDialogRedirectURI:null};this.$VideoEditDialog2=function(){this.setState({dialogVisible:true})}.bind(this);this.$VideoEditDialog3=function(event,n,o,p){if(n)n="old_"+n;if(o)o="old_"+o;new(c("VideoComposerDialogUITypedLogger"))().setEvent(event).setComposerDialogVersion(c("VideoComposerDialogVersion").V1).setActorID(this.props.pageID).setVideoID(this.props.videoID).setEditSource(this.props.source).setDialogMode(c("VideoComposerDialogMode").VIDEO_EDIT).setCurrentTab(n).setNextTab(o).setErrorMessage(p&&p.toString()).log()}.bind(this);this.onCancel=function(){var n=this.props.contextConfig.composerID;c("ComposerVideoAdBreakStore").clearComposerData(n);c("ComposerVideoUploadSphericalStore").clearComposerData(n);c("ComposerVideoUploadStore").clearComposerData(n);if(this.props.dialog.isShown()){this.logEvent(c("VideoEditEvent").CANCEL);this.$VideoEditDialog3(c("VideoComposerDialogUIEvent").EXIT_COMPOSER_CONFIRM)}this.props.dialog.hide()}.bind(this);this.onSave=function(){__p&&__p();this.setState({saveButtonDisabled:true});this.logEvent(c("VideoEditEvent").SAVE_CLICKED);this.$VideoEditDialog3(c("VideoComposerDialogUIEvent").SAVE_EDITED_VIDEO_ATTEMPT);c("CSS").show(this.props.throbber);var n=this.props.contextConfig.composerID,o=c("ComposerVideoPostUtils").getDetailsFromStore(n);if(this.shouldThrottleSave(o)){c("CSS").hide(this.props.throbber);this.setState({saveButtonDisabled:false,showCategoryRequiredError:true});return}c("ComposerVideoPostUtils").logSphericalComposerDataIfNeeded(n);c("ComposerVideoPostUtils").logShowsVideoData(n,this.props.videoID,c("ShowsVideoDataSource").EDIT,this.props.pageID);var p=!this.props.hideCustomThumbnail&&!this.props.isReferenceVideo;if(c("ComposerVideoPostUtils").hasInvalidBackdate(o.backdate,this.props.creationTime)){var q=i._("Invalid Date: You have specified a date later than the creation of the post.");c("CSS").hide(this.props.throbber);this.setState({saveButtonDisabled:false,errorMessage:q})}else{if(this.props.isMultilingualPost)c("MultilingualPostMessageActions").submittedEdits(this.props.postID);var r=c("ReactComposerMultilingualStatusStore").getPostData(this.props.contextConfig.composerID),s=this.props.shouldShowNewCaptionsFlow&&c("VideoComposerDialogCaptionsStore").getpublishedStateChangeset().size>0;if(s)c("VideoComposerDialogCaptionEditorUtils").updatePublishedStatesOnServer(this.props.videoID,this.props.pageID,c("VideoComposerDialogCaptionsStore").getpublishedStateChangeset());var t=this.props.shouldShowNewCaptionsFlow;if(t)c("VideoComposerDialogCaptionsStore").logComposerSaveEvent();c("ComposerVideoPostUtils").createFormData(o,r,this.props.publishingConfig,this.state.thumbnails,this.state.captions.concat(this.state.liveCaptions),this.props.embeddable,this.props.isFTEOnly,this.props.source,p,this.props.sharedWithBusiness,this.useNewCopyrightEndpoint,this.props.canCrosspostOutsideBusiness,this.sendData)}}.bind(this);this.useNewCopyrightEndpoint=function(n){n.isReferenceVideo=this.props.isReferenceVideo;if(this.state.isCopyrighted&&!n.isCopyrighted)return c("VideoCopyrightAPI").uncopyrightVideo(this.props.pageAccessToken,this.props.pageID,this.props.videoID,this.state.copyrightID,n,"video_edit_dialog",this.onSuccessfulUncopyright);else if(this.state.isCopyrighted&&n.isCopyrighted)return c("VideoCopyrightAPI").editVideoCopyright(this.props.pageAccessToken,this.props.pageID,this.props.videoID,this.state.copyrightID,n,"video_edit_dialog");else if(n.isCopyrighted)return c("VideoCopyrightAPI").copyrightVideo(this.props.pageAccessToken,this.props.pageID,this.props.videoID,n,"video_edit_dialog",this.onSuccessfulCopyright);return null}.bind(this);this.onSuccessfulCopyright=function(n){this.setState({copyrightID:n.id,isCopyrighted:true})}.bind(this);this.onSuccessfulUncopyright=function(n){this.setState({copyrightID:null,isCopyrighted:false})}.bind(this);this.onDelete=function(){__p&&__p();if(!this.props.isReferenceVideo||!this.props.postID||this.props.source!==c("VideoEditSource").REFERENCE_LIBRARY)return;var n=function(){var p=this.props.contextConfig.composerID;c("ComposerVideoAdBreakStore").clearComposerData(p);c("ComposerVideoUploadSphericalStore").clearComposerData(p);c("ComposerVideoUploadStore").clearComposerData(p);this.props.dialog.hide();new(c("VideoEditTypedLogger"))().setEvent(c("VideoEditEvent").VIDEO_DELETE).setSource(this.props.source).setFlow(c("VideoEditFlow").DIALOG).setVideoID(this.props.videoID).log()}.bind(this),o={reference_video_asset:{id:this.props.videoID},id:this.props.postID};c("PageContentTabVideosCopyrightReferenceLibraryActions").handleDelete(this.props.pageID,[o],n.bind(this))}.bind(this);this.sendData=function(n){__p&&__p();var o=c("XVideoEditDialogSaveController").getURIBuilder().setInt("v",this.props.videoID).getURI();if(this.props.pageID)o=c("ActorURI").create(o,this.props.pageID.toString());new(c("AsyncRequest"))(o).setRawData(n).setHandler(function(p){var q=p.payload.error;if(!q)this.handleSuccessfulSave();else{this.$VideoEditDialog3(c("VideoComposerDialogUIEvent").SAVE_EDITED_VIDEO_FAILURE,null,null,p.payload.errorMessage);c("CSS").hide(this.props.throbber);this.setState({errorMessage:this.convertErrorMessage(p.payload.errorMessage),stage:"post-failed",saveButtonDisabled:false})}}.bind(this)).send()}.bind(this);this.onMakeFeaturedVideo=function(){__p&&__p();var n=c("XVideoEditMakeFeaturedController").getURIBuilder().setFBID("v",this.props.videoID).setBool("is_videos_tab",c("ge")("video_hub_featured_video_container")!=null).getURI();if(this.props.pageID)n=c("ActorURI").create(n,this.props.pageID);c("CSS").show(this.props.throbber);new(c("AsyncRequest"))(n).setHandler(function(o){c("CSS").hide(this.props.throbber);var p=o.payload.error;if(!p)this.handleSuccessfulMakeFeaturedVideo(o.payload);else this.setState({errorMessage:this.convertErrorMessage(o.payload.errorMessage)})}.bind(this)).setServerDialogCancelHandler(function(){c("CSS").hide(this.props.throbber)}.bind(this)).send()}.bind(this);this.$VideoEditDialog5=function(){var n=this.state.featuredSuccessDialogRedirectURI;this.setState({featuredSuccessDialogVisible:false,featuredSuccessDialogRedirectURI:null},function(){this.props.dialog.hide();c("goURI")(n,true)}.bind(this))}.bind(this);this.$VideoEditDialog6=function(){this.setState({featuredSuccessDialogVisible:false,featuredSuccessDialogRedirectURI:null})}.bind(this);this.$VideoEditDialog7=function(){this.setState({errorMessage:null})}.bind(this);c("ComposerVideoShowsDispatcher").explicitlyRegisterStore(c("ComposerVideoShowsStore"))}l.prototype.componentWillMount=function(){"use strict";__p&&__p();this.props.dialog.subscribe("afterexpand",this.$VideoEditDialog2);this.props.dialog.subscribe("hide",this.onCancel);var m=this.props.contextConfig.composerID,n=this.props.typeaheadReporter;c("ReactComposerTaggerActions").updateTaggersSource(m,this.props.taggersSource);c("ReactComposerStatusActions").setMentionsSource(m,this.props.mentionsSource);if(n)c("ReactComposerStatusActions").setTypeaheadReporter(m,n);var o=this.getConvertedCaptions(this.props.captions),p=this.getConvertedCaptions(this.props.liveCaptions),q=this.props.thumbnailURLs.indexOf(this.props.thumbnailURL);c("Run").onLeave(function(){if(this.props.dialog.isShown())this.$VideoEditDialog3(c("VideoComposerDialogUIEvent").NAVIGATED_FROM_PAGE)}.bind(this));c("Run").onLeave(function(){if(this.props.dialog.isShown())this.$VideoEditDialog3(c("VideoComposerDialogUIEvent").NAVIGATED_FROM_PAGE)}.bind(this));var r=this.getConvertedThumbnails(),s=r[q];this.setState({captions:o,liveCaptions:p,selectedThumbnail:s,thumbnails:r});this.updateStore(s,o,p)};l.prototype.componentDidMount=function(){"use strict";__p&&__p();this.logEvent(c("VideoEditEvent").JS_LOADED);this.$VideoEditDialog3(c("VideoComposerDialogUIEvent").DIALOG_OPENED);this.$VideoEditDialog4=null;var m=function(){this.setState(this.constructor.calculateState(this.props));this.$VideoEditDialog4=null}.bind(this);this.$VideoEditDialog1=new(c("StoreBasedStateMixinHelper"))([c("ComposerVideoUploadStore")]);this.$VideoEditDialog1.subscribeCallback(function(){if(this.$VideoEditDialog4===null)this.$VideoEditDialog4=c("setImmediate")(m)}.bind(this))};l.prototype.componentWillUnmount=function(){"use strict";if(this.$VideoEditDialog1)this.$VideoEditDialog1.release();this.$VideoEditDialog1=null};l.prototype.logEvent=function(event){"use strict";new(c("VideoEditTypedLogger"))().setEvent(event).setSource(this.props.source).setFlow(c("VideoEditFlow").DIALOG).setVideoID(this.props.videoID).log()};l.prototype.updateStore=function(m,n,o){"use strict";__p&&__p();var p=this.props.publishingConfig,q=[];if(this.props.canCrosspostOutsideBusiness)q=this.props.crosspostingConfig;else if(this.props.business!==""){var r={allow:this.props.sharedWithBusiness,business:this.props.business};q.push(r)}var s={title:this.props.title,captions:n,category:this.props.category,contentTags:c("ComposerVideoPostUtils").convertContentTagToEntryArray(this.props.contentTags).concat(c("ComposerVideoPostUtils").convertFreeFormTagsToEntryArray(this.props.freeFormTags)),thumbnail:m,description:this.props.description,backdate:this.props.backdate,fov:this.props.fov,feedType:this.props.feedType,initialHeading:this.props.initialHeading,initialPitch:this.props.initialPitch,guideEnabled:this.props.guideEnabled,guideKeyframes:this.props.guideKeyframes||[],projection:this.props.projection,stereoMode:this.props.stereoMode,hasSpatialAudio:this.props.hasSpatialAudio,duration:this.props.duration,isSpherical:this.props.isSpherical,enableOmnistab:this.props.enableOmnistab,locationEntry:this.props.locationEntry,expirationTime:p.expirationTime,expirationType:p.expirationType,scheduledPublishTime:p.scheduledPublishTime,sponsorData:{sponsors:this.props.sponsorTags,directShareStatus:this.props.directShareStatus,sponsorRelationship:this.props.sponsorRelationship},productTags:this.props.productTags,tags:this.props.tags,embeddable:this.props.embeddable,isFeaturedVideo:this.props.isFeaturedVideo,isCopyrighted:this.props.isCopyrighted,monitoringType:this.props.monitoringType,selectedCategory:this.props.selectedCategory,ownershipCountries:this.props.ownershipCountries,areCountriesIncluded:this.props.areCountriesIncluded,ruleIDs:this.props.ruleIDs,attributionID:this.props.attributionID,whitelistedFBUsers:this.props.whitelistedFBUsers,isInternalVideo:this.props.isInternalVideo,isFTEOnly:this.props.isFTEOnly,rotation:this.props.rotation,permissions:q,externalVideoID:this.props.externalVideoID,existingAdBreaks:this.props.existingAdBreaks,adBreaksDisabled:this.props.adBreaksDisabled,customLabels:this.props.customLabels,enableAdBreaksExperiment:this.props.enableAdBreaksExperiment,adBreaksExperimentRevenueLossThreshold:this.props.adBreaksExperimentRevenueLossThreshold,isAdBreakAutoAdjustmentEnabled:this.props.isAdBreakAutoAdjustmentEnabled,isAdBreakAutoInsertionEnabled:this.props.isAdBreakAutoInsertionEnabled,liveCaptions:o,episodeData:this.props.episodeData,isShowPage:this.props.isShowPage};c("ComposerVideoPostUtils").updateStore(this.props.contextConfig.composerID,s)};l.prototype.getConvertedThumbnails=function(){"use strict";var m=this.props.thumbnailURLs;return m.map(function(n){return new(c("URLVideoThumbnail"))(n)})};l.prototype.getConvertedCaptions=function(m){"use strict";return m.map(function(n){var o=new(c("VideoCaptionURL"))(n.uri,n.locale,n.locale_name);if(n.is_default)o.setIsDefault(true);if(n.is_auto_generated)o.setIsAutoGenerated(true);return o})};l.prototype.shouldThrottleSave=function(m){"use strict";if(!m.isCopyrighted)return false;if(!m.selectedCategory)return true;return false};l.prototype.handleSuccessfulSave=function(){"use strict";__p&&__p();this.$VideoEditDialog3(c("VideoComposerDialogUIEvent").SAVE_EDITED_VIDEO_SUCCESS);var m=this.props.contextConfig.composerID,n=this.props.source;if(n===c("VideoEditSource").PERMALINK||n===c("VideoEditSource").SNOWLIFT){c("ComposerVideoAdBreakStore").clearComposerData(m);c("ComposerVideoUploadSphericalStore").clearComposerData(m);c("ComposerVideoUploadStore").clearComposerData(m);this.props.dialog.hide();c("ReloadPage").now()}else if(n===c("VideoEditSource").TIMELINE&&this.props.pageID&&this.props.storyDomID){var o=c("XVideoGenerateStoryController").getURIBuilder().getURI(),p={video_id:this.props.videoID,feed_location:c("FBFeedLocations").PAGE_TIMELINE};if(this.props.timelineIdentifier)p.timeline_identifier=this.props.timelineIdentifier;this.logEvent(c("VideoEditEvent").REQUEST_NEW_STORY);new(c("AsyncRequest"))().setURI(o).setData(p).setHandler(function(r){this.handleNewStory(r,this.props.videoID)}.bind(this)).setErrorHandler(function(r){this.logEvent(c("VideoEditEvent").ERROR_NO_NEW_STORY);var m=this.props.contextConfig.composerID;c("ComposerVideoAdBreakStore").clearComposerData(m);c("ComposerVideoUploadSphericalStore").clearComposerData(m);c("ComposerVideoUploadStore").clearComposerData(m);this.props.dialog.hide()}.bind(this)).send()}else if(n===c("VideoEditSource").LIBRARY||n===c("VideoEditSource").REFERENCE_LIBRARY){var q={id:this.props.postID,videoID:this.props.videoID,isCopyrighted:this.state.isCopyrighted,isReferenceVideo:this.props.isReferenceVideo};if(this.props.videoAssetID)q.videoAssetID=this.props.videoAssetID;c("Arbiter").inform("video/edited"+this.props.pageID,q);this.showSurvey();c("ComposerVideoAdBreakStore").clearComposerData(m);c("ComposerVideoUploadSphericalStore").clearComposerData(m);c("ComposerVideoUploadStore").clearComposerData(m);this.props.dialog.hide()}else{this.showSurvey();c("ComposerVideoAdBreakStore").clearComposerData(m);c("ComposerVideoUploadSphericalStore").clearComposerData(m);c("ComposerVideoUploadStore").clearComposerData(m);this.props.dialog.hide()}};l.prototype.showSurvey=function(){"use strict";if(this.props.showSurvey){var m=c("XVideoManagerSurveyController").getURIBuilder().setInt("page_id",this.props.pageID).setEnum("source",c("VideoSurveySource").EDIT).getURI();new(c("AsyncRequest"))(m).send()}};l.prototype.handleNewStory=function(m,n){"use strict";__p&&__p();var o=m.payload;if(o){this.logEvent(c("VideoEditEvent").RECEIVED_NEW_STORY);c("PagesComposer").replaceByID(this.props.storyDomID,o);this.logEvent(c("VideoEditEvent").REPLACED_OLD_STORY)}else this.logEvent(c("VideoEditEvent").ERROR_NO_NEW_STORY);var p=this.props.contextConfig.composerID;this.showSurvey();c("ComposerVideoAdBreakStore").clearComposerData(p);c("ComposerVideoUploadSphericalStore").clearComposerData(p);c("ComposerVideoUploadStore").clearComposerData(p);this.props.dialog.hide()};l.prototype.handleSuccessfulMakeFeaturedVideo=function(m){"use strict";var n=this.props.contextConfig.composerID;c("ComposerVideoUploadActions").updateIsFeaturedVideo(n,true);this.setState({featuredSuccessDialogVisible:true,featuredSuccessDialogRedirectURI:m.page_uri})};l.prototype.convertErrorMessage=function(m){"use strict";if(m&&m.__html)return c("React").createElement(c("XUIText.react"),{dangerouslySetInnerHTML:m});else return c("React").createElement(c("XUIText.react"),{dangerouslySetInnerHTML:{__html:m}})};l.prototype.renderFeaturedVideoSuccessDialog=function(){"use strict";var m=this.state.featuredSuccessDialogRedirectURI?c("React").createElement(c("XUIDialogButton.react"),{action:"button",label:"Go To Your Videos Tab",use:"default",onClick:this.$VideoEditDialog5}):null;return c("React").createElement(c("XUIDialog.react"),{shown:true,behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},width:445,key:"featureSuccessDialog"},c("React").createElement(c("XUIDialogTitle.react"),null,c("React").createElement("span",null,i._("You've Selected Your Featured Video"))),c("React").createElement(c("XUIDialogBody.react"),null,i._("Your featured video is now displayed at the top of your Page's Videos tab. You can always choose a different featured video or decide not to show one.")),c("React").createElement(c("XUIDialogFooter.react"),null,m,c("React").createElement(c("XUIDialogButton.react"),{action:"confirm",label:"Got It",use:"confirm",onClick:this.$VideoEditDialog6})))};l.prototype.render=function(){"use strict";var m=null;if(this.state.errorMessage)m=c("React").createElement("div",{className:"_4tyn _3-8t"},c("React").createElement(c("XUINotice.react"),{className:"_3-8o",onDismiss:this.$VideoEditDialog7,use:"warn"},this.state.errorMessage));var n=this.props.source===c("VideoEditSource").CAROUSEL_PREVIEW,o=!this.props.hideCustomThumbnail&&!this.props.isReferenceVideo,p=null;if(this.state.featuredSuccessDialogVisible)p=this.renderFeaturedVideoSuccessDialog();return c("React").createElement("div",null,c("React").createElement(c("VideoComposerDialogBody.react"),{accessToken:this.props.accessToken,allowCustomThumbnail:o,canCrosspostOutsideBusiness:this.props.canCrosspostOutsideBusiness,makeTitleMandatory:this.props.makeTitleMandatory,canEditCustomLabels:this.props.canEditCustomLabels,adBreaksExperimentPublicMetadata:this.props.adBreaksExperimentPublicMetadata,isDemonetized:this.props.isDemonetized,canEditExternalVideoID:this.props.canEditExternalVideoID,showAdBreaksTab:this.props.showAdBreaksTab,adBreaksTabDisabledReasons:this.props.adBreaksTabDisabledReasons,canMakeFeatured:this.props.canMakeFeaturedVideo,contextConfig:this.props.contextConfig,canEditAdBreaksTabBlockListContent:this.props.canEditAdBreaksTabBlockListContent,hasAdBreakInsertionGapRule:this.props.hasAdBreakInsertionGapRule,isAdBreakInsertionRedesignV1:this.props.isAdBreakInsertionRedesignV1,isAdBreakInsertionRedesignV2:this.props.isAdBreakInsertionRedesignV2,showAdBreakAdminPreviewSettings:this.props.showAdBreakAdminPreviewSettings,showAttributionsSection:this.props.showAttributionsSection,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,isReferenceVideo:this.props.isReferenceVideo,isSecret:this.props.isSecret,isShowPage:this.props.isShowPage,isFeatured:this.props.isFeaturedVideo,isCarouselPreviewEditing:n,isEditing:true,mentionsSource:this.props.mentionsSource,minEpisodeDuration:this.props.minEpisodeDuration,newUIEventLogFunc:this.$VideoEditDialog3,onMakeFeaturedVideo:this.onMakeFeaturedVideo,pageAccessToken:this.props.pageAccessToken,postID:this.props.postID,selectedThumbnail:this.state.selectedThumbnail,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showLiveCaptionSection:this.props.showLiveCaptionSection,showCopyrightSection:this.props.showCopyrightSection,showCategoryRequiredError:this.state.showCategoryRequiredError,showCrosspostingHelpCenter:this.props.showCrosspostingHelpCenter,showCustomLabels:this.props.showCustomLabels,showExternalVideoIDSection:this.props.showExternalVideoIDSection,showFeedTypeCheckbox:this.props.showFeedTypeCheckbox,showMonitoringTypeSelector:this.props.showMonitoringTypeSelector,showSecretVideoOption:this.props.showSecretVideoOption,showAdvancedTabSphericalCheckbox:this.props.showAdvancedTabSphericalCheckbox,showPermissionsTab:this.props.showPermissionsTab,shouldShowPageOnboardingForAdBreak:this.props.shouldShowPageOnboardingForAdBreak,showSphericalControlsTab:this.props.showSphericalControlsTab,showTagSelector:this.props.showTagSelector,showTagSelectorToken:this.props.showTagSelectorToken,showInternalVideoSettings:this.props.showInternalVideoSettings,showOmnistabSection:this.props.showOmnistabSection,showMarkURI:this.props.showMarkURI,squareThumbnailURI:this.props.squareThumbnailURI,hasOmnistabEncoding:this.props.hasOmnistabEncoding,thumbnails:this.state.thumbnails,videoAssetID:this.props.videoAssetID,videoID:this.props.videoID,videoUrlSD:this.props.videoUrlSD,videoUrlHD:this.props.videoUrlHD,expirableCrosspostsCount:this.props.expirableCrosspostsCount,showCrosspostedPermissionsNUX:this.props.showCrosspostedPermissionsNUX,dialogVisible:this.state.dialogVisible,useEmbedOptions:this.props.useEmbedOptions,embedUrl:this.props.embedUrl,showMultilingualOnMonolingualPost:this.props.showMultilingualOnMonolingualPost,isMultilingualPost:this.props.isMultilingualPost,pagePicture:this.props.pagePicture,isMonetizationOnboarded:this.props.isMonetizationOnboarded,canSeeNewMatchRuleDialog:this.props.canSeeNewMatchRuleDialog,shouldShowNewCaptionsFlow:this.props.shouldShowNewCaptionsFlow,canSeeIGMatches:this.props.canSeeIGMatches,isEditFlow:true}),m,c("React").createElement(c("VideoEditDialogFooter.react"),{config:this.props.config.config,contextConfig:this.props.contextConfig,creationTime:this.props.creationTime,makeTitleMandatory:this.props.makeTitleMandatory,onCancelButtonClick:this.onCancel,onSaveButtonClick:this.onSave,onDeleteButtonClick:this.onDelete,privacy:this.props.privacy,publishingConfig:this.props.publishingConfig,saveButtonDisabled:this.state.saveButtonDisabled,isCarouselPreviewEditing:n,isReferenceVideo:this.props.isReferenceVideo}),p)};f.exports=l}),null);