if (self.CavalryLogger) { CavalryLogger.start_js(["Mvgnp"]); }

__d("IrisProtocolMessageLifetime",[],(function a(b,c,d,e,f,g){f.exports={TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:3e4,TTL_1MINUTE:6e4,TTL_3MINUTES:18e4,TTL_5MINUTES:3e5,TTL_10MINUTES:6e5,TTL_15MINUTES:9e5,TTL_30MINUTES:18e5,TTL_1HOUR:36e5,TTL_2HOURS:72e5,TTL_4HOURS:144e5,TTL_8HOURS:288e5,TTL_12HOURS:432e5,TTL_24HOURS:864e5}}),null);
__d("MessageLiveLocationClientSyncProtocolStopReason",[],(function a(b,c,d,e,f,g){f.exports={EXPIRED:1,CANCELED:2,ARRIVED:3}}),null);
__d("WorkUserAvailabilityStatusType",[],(function a(b,c,d,e,f,g){f.exports={NONE:"None",AVAILABLE:"Available",SPORADIC:"Sporadic",TENTATIVE:"Tentative",BUSY:"Busy",DO_NOT_DISTURB:"Do Not Disturb",FOCUS:"Focus"}}),null);
__d("Dock",["csx","Event","shield","Arbiter","ArbiterMixin","BlueBar","ChatQuietLinks","CSS","DataStore","DOM","Parent","Scroll","Style","Toggler","Vector","emptyFunction"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(){}Object.assign(i,c("ArbiterMixin"),{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function j(k){__p&&__p();this.init=c("emptyFunction");this.rootEl=k;this.calculateViewportDimensions();c("ChatQuietLinks").removeEmptyHrefs(this.rootEl);c("Event").listen(k,"click",this._onClick.bind(this));c("Event").listen(window,"resize",this._onWindowResize.bind(this));c("Toggler").subscribe(["show","hide"],function(l,m){__p&&__p();var n=m.getActive();if(!c("DOM").contains(k,n))return;if(c("CSS").hasClass(n,"fbNub")){this.notifyNub(n,l);if(l==="show")this._resizeNubFlyout(n)}else{var o=c("Parent").byClass(n,"fbNubFlyout");if(o)c("CSS").conditionClass(o,"menuOpened",l==="show")}}.bind(this));this.inform("init",{},c("Arbiter").BEHAVIOR_PERSISTENT)},calculateViewportDimensions:function j(){return this.viewportDimensions=c("Vector").getViewportDimensions()},getFlyoutHeightOffset:function j(){if(this.flyoutHeightOffset)return this.flyoutHeightOffset;this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+c("Vector").getElementDimensions(this.rootEl).y;var k=c("BlueBar").getBar();if(k){var l=c("Style").isFixed(k)?"viewport":"document";this.flyoutHeightOffset+=c("Vector").getElementPosition(k,l).y+c("Vector").getElementDimensions(k).y}return this.flyoutHeightOffset},toggle:function j(k){var l=this._findFlyout(k);if(!l)return;this.subscribe("init",function(){c("Toggler").toggle(k)})},show:function j(k){this.subscribe("init",function(){c("Toggler").show(k)})},showNub:function j(k){c("CSS").show(k)},hide:function j(k){this.subscribe("init",function(){var l=c("Toggler").getInstance(k);c("DOM").contains(k,l.getActive())&&l.hide()})},hideNub:function j(k){c("CSS").hide(k);this.hide(k)},setUseMaxHeight:function j(k,l){c("CSS").conditionClass(k,"maxHeight",l!==false);this._resizeNubFlyout(k)},_resizeNubFlyout:function j(k){__p&&__p();var l=this._findFlyout(k);if(!l||c("CSS").hasClass(k,"placeholder")||!(c("CSS").hasClass(k,"openToggler")||c("CSS").hasClass(k,"opened")))return;var m=c("DOM").find(l,"div.fbNubFlyoutOuter"),n=c("DOM").find(m,"div.fbNubFlyoutInner"),o=c("DOM").find(n,"div.fbNubFlyoutBody"),p=c("CSS").hasClass(k,"canBeCompactTab"),q=c("Scroll").getTop(o),r=o.offsetHeight;c("Style").set(o,"height","auto");var s=c("Vector").getElementDimensions(l),t=c("Vector").getElementDimensions(o),u=this.getMaxFlyoutHeight(k);c("Style").set(l,"max-height",u+"px");c("Style").set(m,"max-height",u+"px");s=c("Vector").getElementDimensions(l);var v=c("Vector").getElementDimensions(n),w=v.y-t.y,x=s.y-w,y=parseInt(o.style.height||o.clientHeight,10),z=x!==y;if(s.y>w&&z&&!p)c("Style").set(o,"height",x+"px");c("CSS").removeClass(l,"swapDirection");var A=c("Vector").getElementPosition(l).x;c("CSS").conditionClass(l,"swapDirection",function(){if(A<0)return true;if(!s||!this.viewportDimensions)return false;return A+s.x>this.viewportDimensions.x}.bind(this)());if(z&&q+r>=t.y)c("Scroll").setTop(o,o.scrollHeight);else c("Scroll").setTop(o,q);this.notifyNub(k,"resize")},getMaxFlyoutHeight:function j(k){var l=this._findFlyout(k),m=c("Vector").getElementPosition(l,"viewport"),n=c("Vector").getElementDimensions(l);if(!this.viewportDimensions||!m)return 0;var o=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.getFlyoutHeightOffset())-(this.viewportDimensions.y-m.y-n.y);return Math.max(o,0)},resizeAllFlyouts:function j(){var k=this._getAllNubs(),l=k.length;while(l--)this._resizeNubFlyout(k[l])},_getAllNubs:function j(){var k=c("DOM").scry(this.rootEl,"div._50-v.openToggler:not(._s0f)");return k.concat(c("DOM").scry(this.rootEl,"div._50-v.opened:not(._s0f)"))},_onClick:function j(event){__p&&__p();var k=event.getTarget(),l=c("Parent").byClass(k,"fbNub");if(l){if(c("Parent").byClass(k,"fbNubFlyoutTitlebar")){var m=c("Parent").byTag(k,"a"),n=k.nodeName=="INPUT"&&k.getAttribute("type")=="submit";if(!m&&!n){this.hide(l);return false}}this.notifyNub(l,"click")}},_onWindowResize:function j(event){this.calculateViewportDimensions();this.resizeAllFlyouts()},_findFlyout:function j(k){return c("CSS").hasClass(k,"fbNubFlyout")?k:c("DOM").scry(k,"div.fbNubFlyout")[0]||null},registerNubController:function j(k,l){c("DataStore").set(k,"dock:nub:controller",l);l.subscribe("nub/button/content-changed",c("shield")(this.inform,this,"resize",k));l.subscribe("nub/flyout/content-changed",c("shield")(this._resizeNubFlyout,this,k))},unregisterNubController:function j(k){c("DataStore").remove(k,"dock:nub:controller")},notifyNub:function j(k,l,m){var n=c("DataStore").get(k,"dock:nub:controller");n&&n.inform(l,m)}});f.exports=b.Dock||i}),null);
__d("DockTabsViewportFantaTabUtils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=269;function i(){return h+1}function j(m){return Math.floor(m/h)}function k(m){if(!m)return null;var n=m.fantaTabModelStateGetter;return n?n():null}function l(m){return m?m.size:0}f.exports={getTabCountToFitWidth:j,getMinRequiredWidthForFirstFantaTab:i,getFantaTabModelFromCallbacks:k,getNumFantaTabsFromModel:l}}),null);
__d("DockTabsViewportPinnedConversationTabUtils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=496+9+2,i=210+9+2,j=52;function k(){return h}function l(){return i}function m(){return j}function n(r){return r.getIsRaised()?k():l()}function o(){return k()+j}function p(r){var s=r||{},t=s.pinnedConvoTabStateGetter;return t?t():null}function q(r){return r?r.getTotalTabCount():0}f.exports={getRaisedPinnedConvoTabWidth:k,getLoweredPinnedConvoTabWidth:l,getPinnedConvoSelectorWidth:m,getPinnedConvoTabWidth:n,getMinRequiredWidthForFirstConvoTab:o,getPinnedConvoTabsStateFromCallbacks:p,getNumPinnedConvoTabsFromModel:q}}),null);
__d("DockTabsViewportCalculator",["csx","Arbiter","DataStore","Dock","DockTabsViewportFantaTabUtils","DockTabsViewportPinnedConversationTabUtils","DOM","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","ge","getViewportDimensions","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=50,j=35,k=j,l="dock-tab-viewport-inst",m=c("DockTabsViewportFantaTabUtils").getMinRequiredWidthForFirstFantaTab,n=c("DockTabsViewportFantaTabUtils").getFantaTabModelFromCallbacks,o=c("DockTabsViewportFantaTabUtils").getNumFantaTabsFromModel,p=c("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab,q=c("DockTabsViewportPinnedConversationTabUtils").getNumPinnedConvoTabsFromModel,r=c("DockTabsViewportPinnedConversationTabUtils").getPinnedConvoTabsStateFromCallbacks;function s(u){return u?c("Vector").getElementDimensions(u).x:0}function t(u){__p&&__p();this.$DockTabsViewportCalculatorImpl1=u;this.$DockTabsViewportCalculatorImpl3=0;this.$DockTabsViewportCalculatorImpl4=0;this.$DockTabsViewportCalculatorImpl5=null;this.$DockTabsViewportCalculatorImpl6=null;this.$DockTabsViewportCalculatorImpl7=false;this.$DockTabsViewportCalculatorImpl8=false;this.$DockTabsViewportCalculatorImpl9=false;this.$DockTabsViewportCalculatorImpl2=new(c("SubscriptionsHandler"))();this.$DockTabsViewportCalculatorImpl10();this.$DockTabsViewportCalculatorImpl11()}t.prototype.$DockTabsViewportCalculatorImpl10=function(){__p&&__p();var u=this.$DockTabsViewportCalculatorImpl12.bind(this);this.$DockTabsViewportCalculatorImpl2.addSubscriptions(c("Event").listen(window,"resize",u),c("Dock").subscribe("resize",u),c("Arbiter").subscribeOnce("sidebar/initialized",u,c("Arbiter").SUBSCRIBE_NEW),c("FullScreen").subscribe("changed",function(){__p&&__p();if(c("FullScreen").isFullScreen()){this.$DockTabsViewportCalculatorImpl7=true;this.$DockTabsViewportCalculatorImpl8=false}else{this.$DockTabsViewportCalculatorImpl7=false;if(this.$DockTabsViewportCalculatorImpl8){c("setImmediate")(function(){u()});this.$DockTabsViewportCalculatorImpl8=false}}}.bind(this)))};t.prototype.registerFantaTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl5=u};t.prototype.registerPinnedConvoTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl6=u};t.prototype.forceRecalculateFBDockWidth=function(){this.$DockTabsViewportCalculatorImpl11();this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:false,pinnedConvoUpdateData:null})};t.prototype.forceRecalculateChatTabs=function(){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:null})};t.prototype.forceRecalculatePinnedConvoTabs=function(u){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:u})};t.prototype.$DockTabsViewportCalculatorImpl12=function(){if(c("FullScreen").isFullScreen()||this.$DockTabsViewportCalculatorImpl7){this.$DockTabsViewportCalculatorImpl8=true;return}this.forceRecalculateFBDockWidth()};t.prototype.$DockTabsViewportCalculatorImpl13=function(u){var v=u.forceRecalculateChatTabs,w=u.pinnedConvoUpdateData,x=this.$DockTabsViewportCalculatorImpl14(),y=x.chatTabAvailableWidth,z=x.pinnedConvoTabAvailableWidth;this.$DockTabsViewportCalculatorImpl15(y,!!v);this.$DockTabsViewportCalculatorImpl16(z,w)};t.prototype.$DockTabsViewportCalculatorImpl16=function(u,v){var w=this.$DockTabsViewportCalculatorImpl6||{},x=w.onAvailableWidthChanged;x&&x(u,v)};t.prototype.$DockTabsViewportCalculatorImpl15=function(u,v){var w=this.$DockTabsViewportCalculatorImpl5||{},x=w.onAvailableWidthChanged;x&&x(u)};t.prototype.$DockTabsViewportCalculatorImpl17=function(){var u=n(this.$DockTabsViewportCalculatorImpl5);return o(u)};t.prototype.$DockTabsViewportCalculatorImpl18=function(){return m()};t.prototype.$DockTabsViewportCalculatorImpl14=function(){__p&&__p();var u=this.$DockTabsViewportCalculatorImpl3,v={chatTabAvailableWidth:u,pinnedConvoTabAvailableWidth:0},w={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:u},x=this.$DockTabsViewportCalculatorImpl17(),y=r(this.$DockTabsViewportCalculatorImpl6),z=q(y);if(!y||z===0)return v;else if(x===0)return w;var A=this.$DockTabsViewportCalculatorImpl18();if(u<=A)return v;var B=p(),C=u-A,D=0;if(C<B)return v;else D=B;var E=D,F=Math.max(A,u-D);return{chatTabAvailableWidth:F,pinnedConvoTabAvailableWidth:E}};t.prototype.$DockTabsViewportCalculatorImpl11=function(){this.$DockTabsViewportCalculatorImpl3=this.$DockTabsViewportCalculatorImpl19();this.$DockTabsViewportCalculatorImpl20("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};t.prototype.$DockTabsViewportCalculatorImpl21=function(){var u=this.$DockTabsViewportCalculatorImpl1;if(!u)return{buddyListNubWidth:0,employeeNubsWidth:0};var v=s(u),w=s(c("DOM").find(u,"._56ox")),x=s(c("DOM").scry(u,"._56oy")[0]),y=s(c("DOM").scry(u,"._ph1")[0]),z=Math.max(v-w-x-y,0);return{buddyListNubWidth:w,employeeNubsWidth:z}};t.prototype.$DockTabsViewportCalculatorImpl19=function(){var u=c("getViewportDimensions").withoutScrollbars().width;u-=c("ViewportBounds").getLeft()+c("ViewportBounds").getRight();u-=i;var v=this.$DockTabsViewportCalculatorImpl21(),w=v.buddyListNubWidth,x=v.employeeNubsWidth;u-=w;this.$DockTabsViewportCalculatorImpl4=Math.max(this.$DockTabsViewportCalculatorImpl4,x);u-=this.$DockTabsViewportCalculatorImpl4;u-=k;return Math.max(u,0)};t.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$DockTabsViewportCalculatorImpl9=true};t.prototype.$DockTabsViewportCalculatorImpl20=function(u){if(this.$DockTabsViewportCalculatorImpl9)c("Arbiter").inform(u)};t.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().chatTabAvailableWidth};t.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().pinnedConvoTabAvailableWidth};t.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl3};f.exports={getInstance:function u(v){__p&&__p();var w=c("ge")("pagelet_dock");if(!w||!c("DOM").contains(w,v))return null;var x=c("DataStore").get(w,l);if(x instanceof t)return x;var y=c("DOM").scry(w,".fbDockWrapperRight .fbDock")[0];x=new t(y);c("DataStore").set(w,l,x);return x}}}),null);
__d("DraftJsEventsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$DraftJsEventsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$DraftJsEventsTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$DraftJsEventsTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$DraftJsEventsTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$DraftJsEventsTypedLogger1)};h.prototype.updateData=function(j){this.$DraftJsEventsTypedLogger1=babelHelpers["extends"]({},this.$DraftJsEventsTypedLogger1,j);return this};h.prototype.setAnonymizedDom=function(j){this.$DraftJsEventsTypedLogger1.anonymized_dom=j;return this};h.prototype.setEvent=function(j){this.$DraftJsEventsTypedLogger1.event=j;return this};h.prototype.setExtraParams=function(j){this.$DraftJsEventsTypedLogger1.extra_params=j;return this};h.prototype.setScriptPath=function(j){this.$DraftJsEventsTypedLogger1.script_path=j;return this};h.prototype.setSelectionState=function(j){this.$DraftJsEventsTypedLogger1.selection_state=j;return this};h.prototype.setVC=function(j){this.$DraftJsEventsTypedLogger1.vc=j;return this};var i={anonymized_dom:true,event:true,extra_params:true,script_path:true,selection_state:true,vc:true};f.exports=h}),null);
__d("MercurySyncHolesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$MercurySyncHolesTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$MercurySyncHolesTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MercurySyncHolesTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MercurySyncHolesTypedLogger1=babelHelpers["extends"]({},this.$MercurySyncHolesTypedLogger1,j);return this};h.prototype.setDifference=function(j){this.$MercurySyncHolesTypedLogger1.difference=j;return this};h.prototype.setSeqID=function(j){this.$MercurySyncHolesTypedLogger1.seq_id=j;return this};h.prototype.setTopicType=function(j){this.$MercurySyncHolesTypedLogger1.topic_type=j;return this};h.prototype.setVC=function(j){this.$MercurySyncHolesTypedLogger1.vc=j;return this};var i={difference:true,seq_id:true,topic_type:true,vc:true};f.exports=h}),null);
__d("ChatActivity",["Arbiter","Event","JSLogger","MercuryConfig","PresenceState","UserActivity"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("MercuryConfig").activity_limit||6e4,i=c("MercuryConfig").idle_limit||18e5,j=c("MercuryConfig").idle_poll_interval||3e5,k=c("JSLogger").create("chat_activity"),l=Date.now(),m=true;function n(){var r=Date.now();return!!(m&&r-l<h)}var o=Object.assign(new(c("Arbiter"))(),{isActive:n});function p(){var r=l;l=Date.now();if(l-r>i){k.debug("idle_to_active",r);c("PresenceState").doSync()}o.inform("activity")}c("Event").listen(window,"focus",function(){m=true;p()});c("Event").listen(window,"blur",function(){m=false});c("UserActivity").subscribe(function(){p()});function q(r){var s=r&&r.at&&c("PresenceState").verifyNumber(r.at);if(typeof s!=="number")s=null;return s||0}setInterval(function(){var r=Date.now(),s=q(c("PresenceState").get()),t=Math.max(l,s);if(r-t>i){k.debug("idle",{cookie:s,local:l});o.inform("idle",r-t)}},j);c("PresenceState").registerStateStorer(function(r){var s=q(r);if(s<l)r.at=l;return r});c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(r,s){s.chat_activity={activity_limit:h,idle_limit:i,idle_poll_interval:j,last_active_time:l}});f.exports=o}),null);
__d("MercuryAssert",["MercuryIDs"],(function a(b,c,d,e,f,g){__p&&__p();f.exports={isParticipantID:function h(i){if(!c("MercuryIDs").isValid(i))throw new Error("bad_participant_id "+i)},allParticipantIDs:function h(i){i.forEach(this.isParticipantID)},isUserParticipantID:function h(i){var j=c("MercuryIDs").tokenize(i);if(j.type!="fbid")throw new Error("bad_user_id "+i)},isEmailParticipantID:function h(i){var j=c("MercuryIDs").tokenize(i);if(j.type!="email")throw new Error("bad_email_id "+i)},allThreadID:function h(i){i.forEach(this.isThreadID)},isThreadID:function h(i){if(!c("MercuryIDs").isValid(i))throw new Error("bad_thread_id "+i)}}}),null);
__d("MercuryAttachmentType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image",EMOJI_LIKE:"emoji_like",GIFT:"gift",THIRDPARTYSTICKER:"third_party_sticker"})}),null);
__d("StoryAttachmentStyle",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",INSPIRATION_PHOTO:"inspiration_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",CANCELED_EVENT:"canceled_event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",TOPIC_FOLLOWING_TOPIC:"topic_following_topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",VIDEO_SHOP:"video_shop",INSPIRATION_VIDEO:"inspiration_video",MULTI_VIDEOS_STITCHED:"multi_videos_stitched",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_NON_LINK_VIDEO:"multi_share_non_link_video",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",MULTI_SHARE_FIXED_TEXT:"multi_share_fixed_text",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",BIRTHDAY_PERCEPTICONS:"birthday_percepticons",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_LEAGUE:"gametime_league",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",POST_CHANNEL:"post_channel",TEXT_FOR_COLLAGE:"text_for_collage",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",P2P_PAYMENT:"p2p_payment",P2P_SERVER_BUBBLE:"p2p_server_bubble",INSTANT_ARTICLE:"instant_article",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",GROUP_ADD_MEMBERS:"group_add_memebers",GROUP_MEMBER_ADDED:"group_member_added",RTC_CALL_LOG:"rtc_call_log",EVENTS_PENDING_POST_QUEUE:"events_pending_post_queue",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",RICH_MEDIA_COLLECTION:"rich_media_collection",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",GROUPSMASH_MEDIA:"groupsmash_media",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET_DEPRECATED:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",WELCOME_CARD_IMAGE:"welcome_card_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card",GOODWILL_THROWBACK_ANNIVERSARY_COLLAGE_CARD:"goodwill_throwback_anniversary_collage_card",MESSAGE_EVENT:"message_event",MESSAGE_THREAD:"message_thread",QUOTE:"quote",VOTER_REGISTRATION_SHARE:"voter_registration_share",AIRLINE_ITINERARY:"airline_itinerary",AIRLINE_UPDATE:"airline_update",PLACE_LIST:"place_list",IMPLICIT_PLACE_LIST_CONVERSION:"implicit_place_list_conversion",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",MINUTIAE_UNIT:"minutiae_unit",INSTANT_ARTICLE_PHOTO:"instant_article_photo",INSTANT_ARTICLE_VIDEO:"instant_article_video",PHOTO_LINK_SHARE:"photo_link_share",BUSINESS_LOCATION:"business_location",GOODWILL_WEATHER:"goodwill_weather",CULTURAL_MOMENT_HOLIDAY_CARD:"cultural_moment_holiday_card",TRANSACTION_INVOICE:"transaction_invoice",GROUP:"group",COMMENT_PLACE_INFO:"comment_place_info",COMMENT_PRODUCT_INFO:"comment_product_info",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD_IPB:"goodwill_throwback_friendversary_polaroids_card_ipb",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD_IPB:"goodwill_throwback_friendversary_collage_card_ipb",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",FUNDRAISER_FOR_STORY:"fundraiser_for_story",MESSAGE_LIVE_LOCATION:"message_live_location",MESSENGER_INVITE:"messenger_invite",GAMES_INSTANT_PLAY:"games_instant_play",PROFILE_MEDIA:"profile_media",NATIVE_TEMPLATES:"native_templates",NATIVE_TEMPLATES_FOX:"native_templates_fox",NATIVE_TEMPLATES_KEEP_ATTACHED:"native_templates_keep_attached",GOODWILL_THROWBACK_VIDEO_BASIC:"goodwill_throwback_video_basic",COMMERCE_PRODUCT_MINI:"commerce_product_mini",COMMERCE_PRODUCT_MINI_LIST:"commerce_product_mini_list",COMMENT:"comment",MESSENGER_TEAM_BOT_SHARE:"messenger_team_bot_share",LIVE_VIDEO_SCHEDULE:"live_video_schedule",PRODUCT_ITEM:"product_item",PLATFORM_INSTANT_APP:"platform_instant_app",YEAR_OVERVIEW:"year_overview",NATIVE_COMPONENT_FLOW_BOOKING_REQUEST:"native_component_flow_booking_request",FRIEND_REQUEST:"friend_request",MESSENGER_GROUP_JOINABLE_LINK:"messenger_group_joinable_link",SOCIAL_SEARCH_CONVERSION_PROMPT:"social_search_conversion_prompt",MDOTME_USER_LINK:"mdotme_user_link",DYNAMIC_MULTI_SHARE_ITEMS:"dynamic_multi_share_items",EVENT_REMINDER:"event_reminder",INSTANT_GAMES_SHARE_MESSAGE:"instant_games_share_message",MESSENGER_PLATFORM_COMPACT_ITEM:"messenger_platform_compact_item",MESSENGER_PLATFORM_COVER_ITEM:"messenger_platform_cover_item",MULTI_SHARE_NON_LINK_VIDEO_AUTO_SCROLL:"multi_share_non_link_video_auto_scroll",ENDORSEMENT:"endorsement",OFFER_VIEW_LIVE_COUNTDOWN:"offer_view_live_countdown",ENHANCED_LINK_REDDIT_POST:"enhanced_link_reddit_post",MESSENGER_COMMERCE_COVER_ITEM:"messenger_commerce_cover_item",ENHANCED_LINK_YELP_BUSINESS:"enhanced_link_yelp_business",PAGES_PLATFORM_LEAD_GEN:"pages_platform_lead_gen",NATIVE_STORY:"native_story",MFS_BILL_PAY_CREATION_UPDATE:"mfs_bill_pay_creation_update",MFS_BILL_PAY_REFERENCE_CODE_UPDATE:"mfs_bill_pay_reference_code_update",MFS_BILL_PAY_AGENT_CASH_IN_UPDATE:"mfs_bill_pay_agent_cash_in_update",ISSUE_POSITION:"issue_position",PAGES_PLATFORM_BOOKING_MESSAGE:"pages_platform_booking_message",EXTERNAL_GALLERY:"external_gallery",MEME_SHARE:"meme_share",MESSENGER_PLATFORM_ELEMENT:"messenger_platform_element",INSTANT_GAMES_SHARE_SCORE_MESSAGE:"instant_games_share_score_message",MESSENGER_PLATFORM_BUTTON_LIST:"messenger_platform_button_list",BALLOT:"ballot",LIGHTWEIGHT_ACTION:"lightweight_action",TAROT_DIGEST:"tarot_digest",EVENT_TOUR:"event_tour",ADAPTIVE_MEDIA:"adaptive_media",DYNAMIC_GAME_BOARD:"dynamic_game_board",PAYMENT_PLATFORM:"payment_platform",OMNI_M_FLOW:"omni_m_flow",GROUP_QUIZ:"group_quiz",TRIAL_AD:"trial_ad",TEEM_COLLECTIONS:"teem_collections",CRISIS_DONATION:"crisis_donation",CRISIS_STATUS:"crisis_status",CRISIS_SHARE:"crisis_share",CRISIS_MARK_SAFE:"crisis_mark_safe",CRISIS_LISTING:"crisis_listing",VR_CONTENT:"vr_content",VIDEO_RECOMMENDATION_HSCROLL:"video_recommendation_hscroll",VIDEO_TRAILER:"video_trailer",SHOW_PAGE_SHARE:"show_page_share",MFS_ATTACHMENT:"mfs_attachment",GROUP_TASK:"group_task",CHECKLIST:"checklist",VIDEO_RECOMMENDATION_SINGLETON:"video_recommendation_singleton",PAGE_REVIEW_PROMPT:"page_review_prompt",VIDEO_SHOW:"video_show",UNCONNECTED_VIDEO:"unconnected_video",SHOW_SHARE:"show_share",JOB_SEARCH_JOB_APPLICATION:"job_search_job_application",PAGE_MESSENGER_ATTACHMENT:"page_messenger_attachment",CONTACT_YOUR_REP:"contact_your_rep",LOCATION_EXTENSION:"location_extension",PLACE_RECOMMENDATION:"place_recommendation",JOB_SEARCH_JOB_OPENING:"job_search_job_opening",PAGE_MESSAGE_ONLINE_INDICATOR:"page_message_online_indicator",LOCAL_PIVOT:"local_pivot",ORION_REQUEST_NEW:"orion_request_new",PHOTO_WITH_SHIELD:"photo_with_shield",PLAYABLE_AD:"playable_ad",FUN_FACT_PROMPT:"fun_fact_prompt",FATIGUED_SHARE:"fatigued_share",DISCUSSION_QUESTION:"discussion_question",PARTIES_INVITE:"parties_invite",PROFILE_INTRO_CARD_BIO:"profile_intro_card_bio",PAGES_SHARE:"pages_share",PRODUCT_RECOMMENDATION_LIST:"product_recommendation_list",VISUAL_POLL:"visual_poll",MULTI_PLACE_RECOMMENDATION:"multi_place_recommendation",PAGE_IN_COMMENT:"page_in_comment",MESSENGER_PLATFORM_MEDIA_ATTACHMENT:"messenger_platform_media_attachment",SCHEDULED_VIDEO_ANNOUNCEMENT:"scheduled_video_announcement",HSCROLL_ITEM:"hscroll_item",MESSENGER_CALL_LOG:"messenger_call_log",PAGE_REVIEW_UPDATE:"page_review_update",LOYALTY_CARD_OFFER:"loyalty_card_offer",GOODWILL_GRID:"goodwill_grid",TRAVEL_PLAN:"travel_plan",FIND_PLAYERS:"find_players",ASSET3D:"asset3d",MESSENGER_GROUP_PERSONAL_LINK:"messenger_group_personal_link",FREQUENTLY_ASKED_QUESTION:"frequently_asked_question",STORY_LIST:"story_list",GOODWILL_SHARED_CARD:"goodwill_shared_card",PAYMENT_BUBBLE_VIEW:"PAYMENT_BUBBLE_VIEW",POST_TO_EVENT_CREATE:"post_to_event_create",MONTAGE_DIRECT:"montage_direct",NEO_INVITATION:"NEO_INVITATION",NATIVE_TEMPLATES_LINK_SHARE_TEST:"native_templates_link_share_test",GOODWILL_HSCROLL:"goodwill_hscroll",NEO_KID_INITIATE_FRIENDING:"NEO_KID_INITIATE_FRIENDING",EVENT_MICRO_ATTACHMENT:"event_micro_attachment",SAVED_LIST:"saved_list",LOCAL_GUIDE:"local_guide",MEET_UP_EVENT:"meet_up_event",DONATION:"donation",BREAKING_NEWS:"breaking_news",VIDEO_REQUEST:"video_request",GOODWILL_COLLAGE:"goodwill_collage",LEAD_FORM:"lead_form",LEAD_FORM_USER_INFO:"lead_form_user_info",EVENT_TICKET_ORDER:"event_ticket_order",PROFILE_CHANNEL:"profile_channel",ICE_BREAKER:"ICE_BREAKER",MOVIE:"movie",ALOHA_CALL:"aloha_call",TIP_JAR_PAYMENT:"tip_jar_payment",COMMENT_MESSAGE_INFO:"comment_message_info",CASH_ON_DELIVERY_ORDER:"cash_on_delivery_order",VOTER_REGISTRATION_DRIVE:"voter_registration_drive",LIVING_ROOM:"living_room",ACHIEVEMENT_POST:"achievement_post",M_BIRTHDAY_REMINDER:"m_birthday_reminder",INSIGHTS_CHART:"insights_chart",GROUP_PROACTIVE_FLAGGED_POST_QUEUE:"group_proactive_flagged_post_queue"})}),null);
__d("MercurySingletonProvider",["CurrentUser"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$MercurySingletonProvider1={};this.$MercurySingletonProvider2=i}h.prototype.getForFBID=function(i){if(!this.$MercurySingletonProvider1[i])this.$MercurySingletonProvider1[i]=new this.$MercurySingletonProvider2(i);return this.$MercurySingletonProvider1[i]};h.prototype.get=function(){return this.getForFBID(c("CurrentUser").getID())};h.mock=function(i){throw new Error("MercurySingletonProvider.mock() must only be used in tests.")};f.exports=h}),null);
__d("MercuryThreadInformer",["ArbiterMixin","LogHistory","MercuryAssert","MercurySingletonProvider","mapObject","mixin"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("LogHistory").getInstance("mercury_informer");h=babelHelpers.inherits(k,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;k.get=function(){return l.get()};k.getForFBID=function(m){return l.getForFBID(m)};function k(m){__p&&__p();i.constructor.call(this);this.$MercuryThreadInformer1=m;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};this.$MercuryThreadInformer12=0}k.prototype.updatedThread=function(m){this.$MercuryThreadInformer3[m]=true;this.$MercuryThreadInformer13()};k.prototype.invalidatedThread=function(m){this.$MercuryThreadInformer4[m]=true;this.$MercuryThreadInformer13()};k.prototype.deletedThread=function(m){this.$MercuryThreadInformer2[m]=true;this.$MercuryThreadInformer13()};k.prototype.updatedThreadlist=function(){this.$MercuryThreadInformer6=true;this.$MercuryThreadInformer13()};k.prototype.updatedUnseenState=function(){this.$MercuryThreadInformer7=true;this.$MercuryThreadInformer13()};k.prototype.updatedUnreadState=function(){this.$MercuryThreadInformer8=true;this.$MercuryThreadInformer13()};k.prototype.changedThreadReadState=function(m,n,o){if(!this.$MercuryThreadInformer5[m]||this.$MercuryThreadInformer5[m].timestamp<o)this.$MercuryThreadInformer5[m]={mark_as_read:n,timestamp:o};this.$MercuryThreadInformer13()};k.prototype.receivedMessage=function(m){c("MercuryAssert").isThreadID(m.thread_id);var n=m.thread_id;if(!this.$MercuryThreadInformer9[n])this.$MercuryThreadInformer9[n]=[];this.$MercuryThreadInformer9[n].push(m);this.updatedThread(n)};k.prototype.reorderedMessages=function(m,n){this.$MercuryThreadInformer10[m]={source:n};this.$MercuryThreadInformer13()};k.prototype.updatedMessage=function(m,n,o){if(!this.$MercuryThreadInformer11[m])this.$MercuryThreadInformer11[m]={};this.$MercuryThreadInformer11[m][n]={source:o};this.updatedThread(m)};k.prototype.synchronizeInforms=function(m){this.$MercuryThreadInformer12++;try{m()}catch(n){throw n}finally{this.$MercuryThreadInformer12--;this.$MercuryThreadInformer13()}};k.prototype.listen=function(m,n){return this.subscribe("threads-updated",function(o,p){if(p[m])n(m)})};k.prototype.$MercuryThreadInformer13=function(){__p&&__p();if(!this.$MercuryThreadInformer12){var m=this.$MercuryThreadInformer2,n=this.$MercuryThreadInformer3,o=this.$MercuryThreadInformer4,p=this.$MercuryThreadInformer5,q=this.$MercuryThreadInformer6,r=this.$MercuryThreadInformer7,s=this.$MercuryThreadInformer8,t=this.$MercuryThreadInformer9,u=this.$MercuryThreadInformer10,v=this.$MercuryThreadInformer11;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};var w=Object.keys(n);if(w.length||q)this.inform("threadlist-updated",w);if(w.length)this.$MercuryThreadInformer14("threads-updated",n);for(var x in o){this.$MercuryThreadInformer14("thread-invalidated",o);break}for(var x in p){this.$MercuryThreadInformer14("thread-read-changed",p);break}for(x in m){this.$MercuryThreadInformer14("threads-deleted",m);break}if(r)this.$MercuryThreadInformer14("unseen-updated",null);if(s)this.$MercuryThreadInformer14("unread-updated",null);for(x in t){this.$MercuryThreadInformer14("messages-received",t);break}for(x in u){this.$MercuryThreadInformer14("messages-reordered",u);break}for(x in v){this.$MercuryThreadInformer14("messages-updated",v);break}}};k.prototype.$MercuryThreadInformer14=function(m,n){if(m==="threads-updated")j.debug(m,JSON.stringify(n));this.inform(m,n)};var l=new(c("MercurySingletonProvider"))(k);f.exports=k}),null);
__d("bs_caml_builtin_exceptions",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=["Out_of_memory",0],i=["Sys_error",-1],j=["Failure",-2],k=["Invalid_argument",-3],l=["End_of_file",-4],m=["Division_by_zero",-5],n=["Not_found",-6],o=["Match_failure",-7],p=["Stack_overflow",-8],q=["Sys_blocked_io",-9],r=["Assert_failure",-10],s=["Undefined_recursive_module",-11];h.tag=248;i.tag=248;j.tag=248;k.tag=248;l.tag=248;m.tag=248;n.tag=248;o.tag=248;p.tag=248;q.tag=248;r.tag=248;s.tag=248;g.out_of_memory=h;g.sys_error=i;g.failure=j;g.invalid_argument=k;g.end_of_file=l;g.division_by_zero=m;g.not_found=n;g.match_failure=o;g.stack_overflow=p;g.sys_blocked_io=q;g.assert_failure=r;g.undefined_recursive_module=s}),null);
__d("bs_caml_array",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(p,q,i){var r=new Array(i),s=0,t=q;while(s<i){r[s]=p[t];s=s+1|0;t=t+1|0}return r}function i(p,q){while(true){var r=q,s=p;if(r){q=r[1];p=r[0].length+s|0;continue}else return s}}function j(p,q,r){__p&&__p();while(true){var s=r,t=q;if(s){var u=s[0],v=u.length,w=t,x=0;while(x<v){p[w]=u[x];w=w+1|0;x=x+1|0}r=s[1];q=w;continue}else return 0}}function k(p){var q=i(0,p),r=new Array(q);j(r,0,p);return r}function l(p,q,r){if(q<0||q>=p.length)throw[c("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else{p[q]=r;return 0}}function m(p,q){if(q<0||q>=p.length)throw[c("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return p[q]}function n(i,p){var q=new Array(i);for(var r=0,s=i-1|0;r<=s;++r)q[r]=p;return q}function o(p,q,r,s,i){if(s<=q){for(var t=0,u=i-1|0;t<=u;++t)r[t+s|0]=p[t+q|0];return 0}else{for(var v=i-1|0;v>=0;--v)r[v+s|0]=p[v+q|0];return 0}}g.caml_array_sub=h;g.caml_array_concat=k;g.caml_make_vect=n;g.caml_array_blit=o;g.caml_array_get=m;g.caml_array_set=l}),null);
__d("bs_caml_exceptions",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[0];function i(m){m[1]=h[0];h[0]+=1;return m}function j(){h[0]+=1;return h[0]}function k(m){var n=j(0),o=[m,n];o.tag=248;return o}function l(m){if(m===undefined)return 0;else if(m.tag===248)return 1;else{var n=m[0];if(n!==undefined)return+(n.tag===248);else return 0}}g.caml_set_oo_id=i;g.get_id=j;g.create=k;g.isCamlExceptionOrOpenVariant=l}),null);
__d("bs_curry",["bs_caml_array"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(G,H){__p&&__p();while(true){var I=H,J=G,K=J.length,L=K?K:1,M=I.length,N=L-M|0;if(N)if(N<0){H=c("bs_caml_array").caml_array_sub(I,L,-N|0);G=J.apply(null,c("bs_caml_array").caml_array_sub(I,0,L));continue}else return function(J,I){return function(O){return h(J,I.concat([O]))}}(J,I);else return J.apply(null,I)}}function i(G,H,I){__p&&__p();if(I>7||I<0)return h(G,[H]);else switch(I){case 0:case 1:return G(H);case 2:return function(J){return G(H,J)};case 3:return function(J,K){return G(H,J,K)};case 4:return function(J,K,L){return G(H,J,K,L)};case 5:return function(J,K,L,M){return G(H,J,K,L,M)};case 6:return function(J,K,L,M,N){return G(H,J,K,L,M,N)};case 7:return function(J,K,L,M,N,O){return G(H,J,K,L,M,N,O)}}}function j(G,H){var I=G.length;if(I===1)return G(H);else return i(G,H,I)}function k(G){var H=G.length;if(H===1)return G;else return function(I){return j(G,I)}}function l(G,H,I,J){__p&&__p();if(J>7||J<0)return h(G,[H,I]);else switch(J){case 0:case 1:return h(G(H),[I]);case 2:return G(H,I);case 3:return function(K){return G(H,I,K)};case 4:return function(K,L){return G(H,I,K,L)};case 5:return function(K,L,M){return G(H,I,K,L,M)};case 6:return function(K,L,M,N){return G(H,I,K,L,M,N)};case 7:return function(K,L,M,N,O){return G(H,I,K,L,M,N,O)}}}function m(G,H,I){var J=G.length;if(J===2)return G(H,I);else return l(G,H,I,J)}function n(G){var H=G.length;if(H===2)return G;else return function(I,J){return m(G,I,J)}}function o(G,H,I,J,K){__p&&__p();var L=0;if(K>7||K<0)return h(G,[H,I,J]);else switch(K){case 0:case 1:L=1;break;case 2:return h(G(H,I),[J]);case 3:return G(H,I,J);case 4:return function(M){return G(H,I,J,M)};case 5:return function(M,N){return G(H,I,J,M,N)};case 6:return function(M,N,O){return G(H,I,J,M,N,O)};case 7:return function(M,N,O,P){return G(H,I,J,M,N,O,P)}}if(L===1)return h(G(H),[I,J])}function p(G,H,I,J){var K=G.length;if(K===3)return G(H,I,J);else return o(G,H,I,J,K)}function q(G){var H=G.length;if(H===3)return G;else return function(I,J,K){return p(G,I,J,K)}}function r(G,H,I,J,K,L){__p&&__p();var M=0;if(L>7||L<0)return h(G,[H,I,J,K]);else switch(L){case 0:case 1:M=1;break;case 2:return h(G(H,I),[J,K]);case 3:return h(G(H,I,J),[K]);case 4:return G(H,I,J,K);case 5:return function(N){return G(H,I,J,K,N)};case 6:return function(N,O){return G(H,I,J,K,N,O)};case 7:return function(N,O,P){return G(H,I,J,K,N,O,P)}}if(M===1)return h(G(H),[I,J,K])}function s(G,H,I,J,K){var L=G.length;if(L===4)return G(H,I,J,K);else return r(G,H,I,J,K,L)}function t(G){var H=G.length;if(H===4)return G;else return function(I,J,K,L){return s(G,I,J,K,L)}}function u(G,H,I,J,K,L,M){__p&&__p();var N=0;if(M>7||M<0)return h(G,[H,I,J,K,L]);else switch(M){case 0:case 1:N=1;break;case 2:return h(G(H,I),[J,K,L]);case 3:return h(G(H,I,J),[K,L]);case 4:return h(G(H,I,J,K),[L]);case 5:return G(H,I,J,K,L);case 6:return function(O){return G(H,I,J,K,L,O)};case 7:return function(O,P){return G(H,I,J,K,L,O,P)}}if(N===1)return h(G(H),[I,J,K,L])}function v(G,H,I,J,K,L){var M=G.length;if(M===5)return G(H,I,J,K,L);else return u(G,H,I,J,K,L,M)}function w(G){var H=G.length;if(H===5)return G;else return function(I,J,K,L,M){return v(G,I,J,K,L,M)}}function x(G,H,I,J,K,L,M,N){__p&&__p();var O=0;if(N>7||N<0)return h(G,[H,I,J,K,L,M]);else switch(N){case 0:case 1:O=1;break;case 2:return h(G(H,I),[J,K,L,M]);case 3:return h(G(H,I,J),[K,L,M]);case 4:return h(G(H,I,J,K),[L,M]);case 5:return h(G(H,I,J,K,L),[M]);case 6:return G(H,I,J,K,L,M);case 7:return function(P){return G(H,I,J,K,L,M,P)}}if(O===1)return h(G(H),[I,J,K,L,M])}function y(G,H,I,J,K,L,M){var N=G.length;if(N===6)return G(H,I,J,K,L,M);else return x(G,H,I,J,K,L,M,N)}function z(G){var H=G.length;if(H===6)return G;else return function(I,J,K,L,M,N){return y(G,I,J,K,L,M,N)}}function A(G,H,I,J,K,L,M,N,O){__p&&__p();var P=0;if(O>7||O<0)return h(G,[H,I,J,K,L,M,N]);else switch(O){case 0:case 1:P=1;break;case 2:return h(G(H,I),[J,K,L,M,N]);case 3:return h(G(H,I,J),[K,L,M,N]);case 4:return h(G(H,I,J,K),[L,M,N]);case 5:return h(G(H,I,J,K,L),[M,N]);case 6:return h(G(H,I,J,K,L,M),[N]);case 7:return G(H,I,J,K,L,M,N)}if(P===1)return h(G(H),[I,J,K,L,M,N])}function B(G,H,I,J,K,L,M,N){var O=G.length;if(O===7)return G(H,I,J,K,L,M,N);else return A(G,H,I,J,K,L,M,N,O)}function C(G){var H=G.length;if(H===7)return G;else return function(I,J,K,L,M,N,O){return B(G,I,J,K,L,M,N,O)}}function D(G,H,I,J,K,L,M,N,O,P){__p&&__p();var Q=0;if(P>7||P<0)return h(G,[H,I,J,K,L,M,N,O]);else switch(P){case 0:case 1:Q=1;break;case 2:return h(G(H,I),[J,K,L,M,N,O]);case 3:return h(G(H,I,J),[K,L,M,N,O]);case 4:return h(G(H,I,J,K),[L,M,N,O]);case 5:return h(G(H,I,J,K,L),[M,N,O]);case 6:return h(G(H,I,J,K,L,M),[N,O]);case 7:return h(G(H,I,J,K,L,M,N),[O])}if(Q===1)return h(G(H),[I,J,K,L,M,N,O])}function E(G,H,I,J,K,L,M,N,O){var P=G.length;if(P===8)return G(H,I,J,K,L,M,N,O);else return D(G,H,I,J,K,L,M,N,O,P)}function F(G){var H=G.length;if(H===8)return G;else return function(I,J,K,L,M,N,O,P){return E(G,I,J,K,L,M,N,O,P)}}g.app=h;g.curry_1=i;g._1=j;g.__1=k;g.curry_2=l;g._2=m;g.__2=n;g.curry_3=o;g._3=p;g.__3=q;g.curry_4=r;g._4=s;g.__4=t;g.curry_5=u;g._5=v;g.__5=w;g.curry_6=x;g._6=y;g.__6=z;g.curry_7=A;g._7=B;g.__7=C;g.curry_8=D;g._8=E;g.__8=F}),null);
__d("bs_js_exn",["bs_caml_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("bs_caml_exceptions").create("Js_exn.Error");function i(q){if(c("bs_caml_exceptions").isCamlExceptionOrOpenVariant(q))return q;else return[h,q]}function j(q){throw new Error(q)}function k(q){throw new EvalError(q)}function l(q){throw new RangeError(q)}function m(q){throw new ReferenceError(q)}function n(q){throw new SyntaxError(q)}function o(q){throw new TypeError(q)}function p(q){throw new URIError(q)}g.$$Error=h;g.internalToOCamlException=i;g.raiseError=j;g.raiseEvalError=k;g.raiseRangeError=l;g.raiseReferenceError=m;g.raiseSyntaxError=n;g.raiseTypeError=o;g.raiseUriError=p}),null);
__d("bs_array",["bs_curry","bs_js_exn","bs_caml_array","bs_caml_exceptions","bs_caml_builtin_exceptions"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function c(x,y){if(x)if(x<0)throw[a("bs_caml_builtin_exceptions").invalid_argument,"Array.init"];else{var z=a("bs_caml_array").caml_make_vect(x,a("bs_curry")._1(y,0));for(var A=1,B=x-1|0;A<=B;++A)z[A]=a("bs_curry")._1(y,A);return z}else return[]}function d(x,y,c){var z=a("bs_caml_array").caml_make_vect(x,[]);for(var A=0,B=x-1|0;A<=B;++A)z[A]=a("bs_caml_array").caml_make_vect(y,c);return z}function e(x){var y=x.length;if(y)return a("bs_caml_array").caml_array_sub(x,0,y);else return[]}function f(x,y){var z=x.length;if(z)if(y.length)return x.concat(y);else return a("bs_caml_array").caml_array_sub(x,0,z);else return e(y)}function g(x,y,z){if(z<0||y>(x.length-z|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"Array.sub"];else return a("bs_caml_array").caml_array_sub(x,y,z)}function h(x,y,z,A){if(y<0||z<0||y>(x.length-z|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"Array.fill"];else{for(var B=y,C=(y+z|0)-1|0;B<=C;++B)x[B]=A;return 0}}function i(x,y,z,A,B){if(B<0||y<0||y>(x.length-B|0)||A<0||A>(z.length-B|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"Array.blit"];else return a("bs_caml_array").caml_array_blit(x,y,z,A,B)}function j(x,y){for(var z=0,A=y.length-1|0;z<=A;++z)a("bs_curry")._1(x,y[z]);return 0}function k(x,y){var z=y.length;if(z){var A=a("bs_caml_array").caml_make_vect(z,a("bs_curry")._1(x,y[0]));for(var B=1,C=z-1|0;B<=C;++B)A[B]=a("bs_curry")._1(x,y[B]);return A}else return[]}function l(x,y){for(var z=0,A=y.length-1|0;z<=A;++z)a("bs_curry")._2(x,z,y[z]);return 0}function m(x,y){var z=y.length;if(z){var A=a("bs_caml_array").caml_make_vect(z,a("bs_curry")._2(x,0,y[0]));for(var B=1,C=z-1|0;B<=C;++B)A[B]=a("bs_curry")._2(x,B,y[B]);return A}else return[]}function n(x){__p&&__p();var y=x.length-1|0,z=0;while(true){var A=z,B=y;if(B<0)return A;else{z=[x[B],A];y=B-1|0;continue}}}function o(x,y){while(true){var z=y,A=x;if(z){y=z[1];x=A+1|0;continue}else return A}}function p(x){__p&&__p();if(x){var y=a("bs_caml_array").caml_make_vect(o(0,x),x[0]),z=1,A=x[1];while(true){var B=A,C=z;if(B){y[C]=B[0];A=B[1];z=C+1|0;continue}else return y}}else return[]}function q(x,y,z){var A=y;for(var B=0,C=z.length-1|0;B<=C;++B)A=a("bs_curry")._2(x,A,z[B]);return A}function r(x,y,z){var A=z;for(var B=y.length-1|0;B>=0;--B)A=a("bs_curry")._2(x,y[B],A);return A}var s=a("bs_caml_exceptions").create("Array.Bottom");function t(x,y){__p&&__p();var z=function z(D,E){__p&&__p();var I=((E+E|0)+E|0)+1|0,J=I;if((I+2|0)<D){if(a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(y,I),a("bs_caml_array").caml_array_get(y,I+1|0))<0)J=I+1|0;if(a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(y,J),a("bs_caml_array").caml_array_get(y,I+2|0))<0)J=I+2|0;return J}else if((I+1|0)<D&&a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(y,I),a("bs_caml_array").caml_array_get(y,I+1|0))<0)return I+1|0;else if(I<D)return I;else throw[s,E]},A=function A(D,E,G){__p&&__p();try{var I=D,J=E,H=G;while(true){var F=J,K=z(I,F);if(a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(y,K),H)>0){a("bs_caml_array").caml_array_set(y,F,a("bs_caml_array").caml_array_get(y,K));J=K;continue}else return a("bs_caml_array").caml_array_set(y,F,H)}}catch(L){var M=a("bs_js_exn").internalToOCamlException(L);if(M[0]===s)return a("bs_caml_array").caml_array_set(y,M[1],G);else throw M}},B=function B(D,E){__p&&__p();try{var I=D,J=E;while(true){var F=J,K=z(I,F);a("bs_caml_array").caml_array_set(y,F,a("bs_caml_array").caml_array_get(y,K));J=K;continue}}catch(L){var M=a("bs_js_exn").internalToOCamlException(L);if(M[0]===s)return M[1];else throw M}},C=function C(I,G){__p&&__p();while(true){var E=I,J=(E-1|0)/3|0;if(E===J)throw[a("bs_caml_builtin_exceptions").assert_failure,["array.ml",168,4]];if(a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(y,J),G)<0){a("bs_caml_array").caml_array_set(y,E,a("bs_caml_array").caml_array_get(y,J));if(J>0){I=J;continue}else return a("bs_caml_array").caml_array_set(y,0,G)}else return a("bs_caml_array").caml_array_set(y,E,G)}},D=y.length;for(var E=((D+1|0)/3|0)-1|0;E>=0;--E)A(D,E,a("bs_caml_array").caml_array_get(y,E));for(var F=D-1|0;F>=2;--F){var G=a("bs_caml_array").caml_array_get(y,F);a("bs_caml_array").caml_array_set(y,F,a("bs_caml_array").caml_array_get(y,0));C(B(F,0),G)}if(D>1){var H=a("bs_caml_array").caml_array_get(y,1);a("bs_caml_array").caml_array_set(y,1,a("bs_caml_array").caml_array_get(y,0));return a("bs_caml_array").caml_array_set(y,0,H)}else return 0}function u(x,y){__p&&__p();var z=function z(G,H,I,J,K,L,M){__p&&__p();var N=G+H|0,O=J+K|0,P=G,Q=a("bs_caml_array").caml_array_get(y,G),R=J,S=a("bs_caml_array").caml_array_get(I,J),T=M;while(true){var U=T,V=S,W=R,X=Q,Y=P;if(a("bs_curry")._2(x,X,V)<=0){a("bs_caml_array").caml_array_set(L,U,X);var Z=Y+1|0;if(Z<N){T=U+1|0;Q=a("bs_caml_array").caml_array_get(y,Z);P=Z;continue}else return i(I,W,L,U+1|0,O-W|0)}else{a("bs_caml_array").caml_array_set(L,U,V);var $=W+1|0;if($<O){T=U+1|0;S=a("bs_caml_array").caml_array_get(I,$);R=$;continue}else return i(y,Y,L,U+1|0,N-Y|0)}}},A=function A(G,H,I,J){for(var K=0,L=J-1|0;K<=L;++K){var M=a("bs_caml_array").caml_array_get(y,G+K|0),N=(I+K|0)-1|0;while(N>=I&&a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(H,N),M)>0){a("bs_caml_array").caml_array_set(H,N+1|0,a("bs_caml_array").caml_array_get(H,N));N=N-1|0}a("bs_caml_array").caml_array_set(H,N+1|0,M)}return 0},B=function B(G,H,I,J){if(J<=5)return A(G,H,I,J);else{var D=J/2|0,E=J-D|0;B(G+D|0,H,I+D|0,E);B(G,y,G+E|0,D);return z(G+E|0,D,H,I+D|0,E,H,I)}},C=y.length;if(C<=5)return A(0,y,0,C);else{var D=C/2|0,E=C-D|0,F=a("bs_caml_array").caml_make_vect(E,a("bs_caml_array").caml_array_get(y,0));B(D,F,0,E);B(0,y,E,D);return z(E,D,F,0,E,y,0)}}var v=d,w=a("bs_caml_array").caml_array_concat,fa=u;b.init=c;b.make_matrix=d;b.create_matrix=v;b.append=f;b.concat=w;b.sub=g;b.copy=e;b.fill=h;b.blit=i;b.to_list=n;b.of_list=p;b.iter=j;b.map=k;b.iteri=l;b.mapi=m;b.fold_left=q;b.fold_right=r;b.sort=t;b.stable_sort=u;b.fast_sort=fa}),null);
__d("bs_block",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){j.tag=i;return j}g.__=h}),null);
__d("bs_caml_obj",["bs_block","bs_caml_builtin_exceptions"],(function a(b,c,d,aa,ba,e){"use strict";__p&&__p();function f(t){var u=t.length|0,v=new Array(u);for(var w=0,x=u-1|0;w<=x;++w)v[w]=t[w];v.tag=t.tag|0;return v}function g(t,u){__p&&__p();var v=t.length|0;if(u<=0||u>v)throw[c("bs_caml_builtin_exceptions").invalid_argument,"Obj.truncate"];else if(v!==u){for(var w=u,x=v-1|0;w<=x;++w)t[w]=0;t.length=u;return 0}else return 0}function h(t){return c("bs_block").__(250,[t])}function i(t,u){var v=u.length|0;for(var w=0,x=v-1|0;w<=x;++w)t[w]=u[w];var y=u.tag|0;if(y!==0){t.tag=y;return 0}else return 0}function j(t,u){if(t<u)return-1;else if(t===u)return 0;else return 1}function k(t,u){__p&&__p();while(true){var v=u,w=t;if(w===v)return 0;else{var x=typeof w,y=typeof v;if(x==="string"){var z=w,A=v;if(z<A)return-1;else if(z===A)return 0;else return 1}else{var B=+(x==="number"),C=+(y==="number");if(B!==0)if(C!==0)return j(w,v);else return-1;else if(C!==0)return 1;else if(x==="boolean"||x==="undefined"||w===null){var D=w,E=v;if(D===E)return 0;else if(D<E)return-1;else return 1}else if(x==="function"||y==="function")throw[c("bs_caml_builtin_exceptions").invalid_argument,"compare: functional value"];else{var F=w.tag|0,G=v.tag|0;if(F===250){t=w[0];continue}else if(G===250){u=v[0];continue}else if(F===248)return j(w[1],v[1]);else if(F===251)throw[c("bs_caml_builtin_exceptions").invalid_argument,"equal: abstract value"];else if(F!==G)if(F<G)return-1;else return 1;else{var H=w.length|0,I=v.length|0;if(H===I){var J=w,K=v,L=0,M=H;while(true){var N=L;if(N===M)return 0;else{var O=k(J[N],K[N]);if(O!==0)return O;else{L=N+1|0;continue}}}}else if(H<I){var P=w,Q=v,R=0,S=H;while(true){var T=R;if(T===S)return-1;else{var U=k(P[T],Q[T]);if(U!==0)return U;else{R=T+1|0;continue}}}}else{var V=w,W=v,X=0,Y=I;while(true){var Z=X;if(Z===Y)return 1;else{var $=k(V[Z],W[Z]);if($!==0)return $;else{X=Z+1|0;continue}}}}}}}}}}function l(t,u){__p&&__p();while(true){var v=u,w=t;if(w===v)return 1;else{var x=typeof w;if(x==="string"||x==="number"||x==="boolean"||x==="undefined"||w===null)return 0;else{var y=typeof v;if(x==="function"||y==="function")throw[c("bs_caml_builtin_exceptions").invalid_argument,"equal: functional value"];else if(y==="number"||y==="undefined"||v===null)return 0;else{var z=w.tag|0,A=v.tag|0;if(z===250){t=w[0];continue}else if(A===250){u=v[0];continue}else if(z===248)return+(w[1]===v[1]);else if(z===251)throw[c("bs_caml_builtin_exceptions").invalid_argument,"equal: abstract value"];else if(z!==A)return 0;else{var B=w.length|0,C=v.length|0;if(B===C){var D=w,E=v,F=0,G=B;while(true){var H=F;if(H===G)return 1;else if(l(D[H],E[H])){F=H+1|0;continue}else return 0}}else return 0}}}}}}function m(t,u){return 1-l(t,u)}function n(t,u){return+(k(t,u)>=0)}function o(t,u){return+(k(t,u)>0)}function p(t,u){return+(k(t,u)<=0)}function q(t,u){return+(k(t,u)<0)}var r=j,s=j;e.caml_obj_dup=f;e.caml_obj_truncate=g;e.caml_lazy_make_forward=h;e.caml_update_dummy=i;e.caml_int_compare=j;e.caml_int32_compare=r;e.caml_nativeint_compare=s;e.caml_compare=k;e.caml_equal=l;e.caml_notequal=m;e.caml_greaterequal=n;e.caml_greaterthan=o;e.caml_lessthan=q;e.caml_lessequal=p}),null);
__d("bs_caml_int32",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(n,o){if(o===0)throw c("bs_caml_builtin_exceptions").division_by_zero;else return n/o|0}function i(n,o){if(o===0)throw c("bs_caml_builtin_exceptions").division_by_zero;else return n%o}function j(n){return(n&255)<<8|(n&65280)>>>8}function k(n){return(n&255)<<24|(n&65280)<<8|(n&16711680)>>>8|(n&4278190080)>>>24}var l=Math.imul||function(n,o){o|=0;return((n>>16)*o<<16)+(n&65535)*o|0},m=k;g.div=h;g.mod_=i;g.caml_bswap16=j;g.caml_int32_bswap=k;g.caml_nativeint_bswap=m;g.imul=l}),null);
__d("bs_caml_utils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=String.prototype.repeat&&function(i,j){return j.repeat(i)}||function(i,j){__p&&__p();if(j.length==0||i==0)return"";if(j.length*i>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var k="";for(;;){if((i&1)==1)k+=j;i>>>=1;if(i==0)break;j+=j}return k};g.repeat=h}),null);
__d("bs_caml_int64",["bs_caml_obj","bs_caml_int32","bs_caml_utils","bs_caml_builtin_exceptions"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();var c=[-2147483648,0],d=[134217727,1],e=[0,1],f=[0,0],g=[-1,4294967295];function h(B){return+((B&2147483648)!==0)}function i(B,C){var D=C[1],E=B[1],F=E+D&4294967295,G=h(E)&&(h(D)||!h(F))||h(D)&&!h(F)?1:0,H=B[0]+C[0]+G&4294967295;return[H,F>>>0]}function j(B){var C=B[0]^-1,D=B[1]^-1;return[C,D>>>0]}function k(B,C){if(B[0]===C[0])return+(B[1]===C[1]);else return 0}function l(B){if(k(B,c))return c;else return i(j(B),e)}function m(B,C){return i(B,l(C))}function n(B,C){if(C){var D=B[1];if(C>=32)return[D<<(C-32|0),0];else{var E=D>>>(32-C|0)|B[0]<<C;return[E,D<<C>>>0]}}else return B}function o(B,C){__p&&__p();if(C){var D=B[0],E=C-32|0;if(E)if(E>0){var F=D>>>E;return[0,F>>>0]}else{var G=D>>>C,H=D<<(-E|0)|B[1]>>>C;return[G,H>>>0]}else return[0,D>>>0]}else return B}function p(B,C){__p&&__p();if(C){var D=B[0];if(C<32){var E=D>>C,F=D<<(32-C|0)|B[1]>>>C;return[E,F>>>0]}else{var G=D>>(C-32|0);return[D>=0?0:-1,G>>>0]}}else return B}function q(B){if(B[0]!==0||B[1]!==0)return 0;else return 1}function r(B,C){__p&&__p();while(true){var D=C,E=B,F=0,G,H=E[0],I=0,J=0,K=0;if(H!==0)K=4;else if(E[1]!==0)K=4;else return f;if(K===4)if(D[0]!==0)J=3;else if(D[1]!==0)J=3;else return f;if(J===3)if(H!==-2147483648)I=2;else if(E[1]!==0)I=2;else{G=D[1];F=1}if(I===2){var L=D[0],M=E[1],N=0;if(L!==-2147483648)N=3;else if(D[1]!==0)N=3;else{G=M;F=1}if(N===3){var O=D[1];if(H<0)if(L<0){C=l(D);B=l(E);continue}else return l(r(l(E),D));else if(L<0)return l(r(E,l(D)));else{var P=H>>>16,Q=H&65535,R=M>>>16,S=M&65535,T=L>>>16,U=L&65535,V=O>>>16,W=O&65535,X=0,Y=0,Z=0,$=S*W;Z=($>>>16)+R*W;Y=Z>>>16;Z=(Z&65535)+S*V;Y=Y+(Z>>>16)+Q*W;X=Y>>>16;Y=(Y&65535)+R*V;X+=Y>>>16;Y=(Y&65535)+S*U;X+=Y>>>16;Y=Y&65535;X=X+(P*W+Q*V+R*U+S*T)&65535;var va=Y|X<<16,wa=$&65535|(Z&65535)<<16;return[va,wa>>>0]}}}if(F===1)if((G&1)===0)return f;else return c}}function s(B){var C=a("bs_caml_int32").caml_int32_bswap(B[1]),D=a("bs_caml_int32").caml_int32_bswap(B[0]);return[C,D>>>0]}function t(B,C){return[B[0]^C[0],(B[1]^C[1])>>>0]}function u(B,C){return[B[0]|C[0],(B[1]|C[1])>>>0]}function fa(B,C){return[B[0]&C[0],(B[1]&C[1])>>>0]}function v(B,C){var D=C[0],E=B[0];if(E>D)return 1;else if(E<D)return 0;else return+(B[1]>=C[1])}function ga(B,C){return 1-k(B,C)}function ha(B,C){return 1-v(B,C)}function w(B,C){if(B[0]>C[0])return 1;else if(B[0]<C[0])return 0;else return+(B[1]>C[1])}function ia(B,C){return 1-w(B,C)}function x(B){return B[0]*4294967296+B[1]}var y=Math.pow(2,32),ja=Math.pow(2,63),ka=-Math.pow(2,63);function z(B){__p&&__p();if(isNaN(B)||!isFinite(B))return f;else if(B<=ka)return c;else if(B+1>=ja)return d;else if(B<0)return l(z(-B));else{var C=B/y|0,D=B%y|0;return[C,D>>>0]}}function A(B,C){__p&&__p();while(true){var D=C,E=B,F=E[0],G=0,H=0;if(D[0]!==0)H=2;else if(D[1]!==0)H=2;else throw a("bs_caml_builtin_exceptions").division_by_zero;if(H===2)if(F!==-2147483648)if(F!==0)G=1;else if(E[1]!==0)G=1;else return f;else if(E[1]!==0)G=1;else if(k(D,e)||k(D,g))return E;else if(k(D,c))return e;else{var I=D[0],J=p(E,1),K=n(A(J,D),1),L=0;if(K[0]!==0)L=3;else if(K[1]!==0)L=3;else if(I<0)return e;else return l(e);if(L===3){var M=r(D,K),N=i(E,l(M));return i(K,A(N,D))}}if(G===1){var O=D[0],P=0;if(O!==-2147483648)P=2;else if(D[1]!==0)P=2;else return f;if(P===2)if(F<0)if(O<0){C=l(D);B=l(E);continue}else return l(A(l(E),D));else if(O<0)return l(A(E,l(D)));else{var Q=f,R=E;while(v(R,D)){var S=Math.max(1,Math.floor(x(R)/x(D))),T=Math.ceil(Math.log(S)/Math.LN2),U=T<=48?1:Math.pow(2,T-48),V=z(S),W=r(V,D);while(W[0]<0||w(W,R)){S-=U;V=z(S);W=r(V,D)}if(q(V))V=e;Q=i(Q,V);R=i(R,l(W))}return Q}}}}function la(B,C){var D=r(A(B,C),C);return i(B,l(D))}function ma(B,C){var D=A(B,C),E=r(D,C);return[D,i(B,l(E))]}function na(B,C){var D=a("bs_caml_obj").caml_nativeint_compare(B[0],C[0]);if(D)return D;else return a("bs_caml_obj").caml_nativeint_compare(B[1],C[1])}function oa(B){return[B<0?-1:0,B>>>0]}function pa(B){return B[1]|0}function qa(B){__p&&__p();var C=function C(I){return(I>>>0).toString(16)},D=B[0],E=B[1],F=0;if(D!==0)F=1;else if(E!==0)F=1;else return"0";if(F===1)if(E!==0)if(D!==0){var G=C(B[1]),H=8-G.length|0;if(H<=0)return C(B[0])+G;else return C(B[0])+(a("bs_caml_utils").repeat(H,"0")+G)}else return C(B[1]);else return C(B[0])+"00000000"}function ra(B){return[2147483647&B[0],B[1]]}function sa(B){var C=new Int32Array([B[1],B[0]]);return new Float64Array(C.buffer)[0]}function ta(B){var C=new Float64Array([B]),D=new Int32Array(C.buffer),E=D[1],F=E,G=D[0],H=G;return[F,H>>>0]}function ua(B,C){var D=B.charCodeAt(C+4|0)<<32|B.charCodeAt(C+5|0)<<40|B.charCodeAt(C+6|0)<<48|B.charCodeAt(C+7|0)<<56,E=B.charCodeAt(C)|B.charCodeAt(C+1|0)<<8|B.charCodeAt(C+2|0)<<16|B.charCodeAt(C+3|0)<<24;return[D,E>>>0]}b.min_int=c;b.max_int=d;b.one=e;b.zero=f;b.not=j;b.of_int32=oa;b.to_int32=pa;b.add=i;b.neg=l;b.sub=m;b.lsl_=n;b.lsr_=o;b.asr_=p;b.is_zero=q;b.mul=r;b.xor=t;b.or_=u;b.and_=fa;b.swap=s;b.ge=v;b.eq=k;b.neq=ga;b.lt=ha;b.gt=w;b.le=ia;b.to_float=x;b.of_float=z;b.div=A;b.mod_=la;b.div_mod=ma;b.compare=na;b.to_hex=qa;b.discard_sign=ra;b.float_of_bits=sa;b.bits_of_float=ta;b.get64=ua}),null);
__d("bs_caml_format",["bs_curry","bs_caml_int32","bs_caml_int64","bs_caml_utils","bs_caml_builtin_exceptions"],(function a(b,c,aa,ba,ca,d){"use strict";__p&&__p();function e(x){throw[c("bs_caml_builtin_exceptions").failure,x]}function f(x){__p&&__p();if(x>=65)if(x>=97)if(x>=123)return-1;else return x-87|0;else if(x>=91)return-1;else return x-55|0;else if(x>57||x<48)return-1;else return x-48|0}function g(x){switch(x){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function h(x){__p&&__p();var y=1,z=2,A=0;if(x[A]==="-"){y=-1;A=A+1|0}var B=x.charCodeAt(A),C=x.charCodeAt(A+1|0);if(B===48)if(C>=89)if(C!==98)if(C!==111){if(C===120){z=1;A=A+2|0}}else{z=0;A=A+2|0}else{z=3;A=A+2|0}else if(C!==66)if(C!==79){if(C>=88){z=1;A=A+2|0}}else{z=0;A=A+2|0}else{z=3;A=A+2|0}return[A,y,z]}function i(x){__p&&__p();var y=h(x),z=y[0],A=g(y[2]),B=4294967295,C=x.length,D=z<C?x.charCodeAt(z):0,E=f(D);if(E<0||E>=A)throw[c("bs_caml_builtin_exceptions").failure,"int_of_string"];var F=function F(I,J){__p&&__p();while(true){var K=J,L=I;if(K===C)return L;else{var M=x.charCodeAt(K);if(M===95){J=K+1|0;continue}else{var N=f(M);if(N<0||N>=A)throw[c("bs_caml_builtin_exceptions").failure,"int_of_string"];else{var O=A*L+N;if(O>B)throw[c("bs_caml_builtin_exceptions").failure,"int_of_string"];else{J=K+1|0;I=O;continue}}}}}},G=y[1]*F(E,z+1|0),H=G|0;if(A===10&&G!==H)throw[c("bs_caml_builtin_exceptions").failure,"int_of_string"];return H}function j(x){__p&&__p();var y=h(x),z=y[2],A=y[0],B=c("bs_caml_int64").of_int32(g(z)),C=c("bs_caml_int64").of_int32(y[1]),D;switch(z){case 0:D=[536870911,4294967295];break;case 1:D=[268435455,4294967295];break;case 2:D=[429496729,2576980377];break;case 3:D=[2147483647,4294967295];break}var E=x.length,F=A<E?x.charCodeAt(A):0,G=c("bs_caml_int64").of_int32(f(F));if(c("bs_caml_int64").lt(G,[0,0])||c("bs_caml_int64").ge(G,B))throw[c("bs_caml_builtin_exceptions").failure,"int64_of_string"];var H=function H(K,L){__p&&__p();while(true){var M=L,N=K;if(M===E)return N;else{var O=x.charCodeAt(M);if(O===95){L=M+1|0;continue}else{var P=c("bs_caml_int64").of_int32(f(O));if(c("bs_caml_int64").lt(P,[0,0])||c("bs_caml_int64").ge(P,B)||c("bs_caml_int64").gt(N,D))throw[c("bs_caml_builtin_exceptions").failure,"int64_of_string"];else{var Q=c("bs_caml_int64").add(c("bs_caml_int64").mul(B,N),P);L=M+1|0;K=Q;continue}}}}},I=c("bs_caml_int64").mul(C,H(G,A+1|0)),J=c("bs_caml_int64").or_(I,[0,0]);if(c("bs_caml_int64").eq(B,[0,10])&&c("bs_caml_int64").neq(I,J))throw[c("bs_caml_builtin_exceptions").failure,"int64_of_string"];return J}function k(x){switch(x){case 0:return 8;case 1:return 16;case 2:return 10}}function l(x){if(x>=65&&x<=90||x>=192&&x<=214||x>=216&&x<=222)return x+32|0;else return x}function m(x){__p&&__p();var y=x.length;if(y>31)throw[c("bs_caml_builtin_exceptions").invalid_argument,"format_int: format too long"];var z=["+","-"," ",0,2,0,0,0,1,-1,"f"],A=0;while(true){var B=A;if(B>=y)return z;else{var C=x.charCodeAt(B),D=0;if(C>=69)if(C>=88)if(C>=121)D=1;else switch(C-88|0){case 0:z[4]=1;z[7]=1;A=B+1|0;continue;case 13:case 14:case 15:D=5;break;case 12:case 17:D=4;break;case 23:z[4]=0;A=B+1|0;continue;case 29:z[4]=2;A=B+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:D=1;break;case 32:z[4]=1;A=B+1|0;continue}else if(C>=72)D=1;else{z[5]=1;z[7]=1;z[10]=String.fromCharCode(l(C));A=B+1|0;continue}else{var E=C-32|0;if(E>25||E<0)D=1;else switch(E){case 3:z[3]=1;A=B+1|0;continue;case 0:case 11:D=2;break;case 13:z[0]="-";A=B+1|0;continue;case 14:z[9]=0;var F=B+1|0;while(function(F){return function(){var H=x.charCodeAt(F)-48|0;return+(H>=0&&H<=9)}}(F)()){z[9]=(c("bs_caml_int32").imul(z[9],10)+x.charCodeAt(F)|0)-48|0;F=F+1|0}A=F;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:D=1;break;case 16:z[2]="0";A=B+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:D=3;break}}switch(D){case 1:A=B+1|0;continue;case 2:z[1]=String.fromCharCode(C);A=B+1|0;continue;case 3:z[6]=0;var G=B;while(function(G){return function(){var H=x.charCodeAt(G)-48|0;return+(H>=0&&H<=9)}}(G)()){z[6]=(c("bs_caml_int32").imul(z[6],10)+x.charCodeAt(G)|0)-48|0;G=G+1|0}A=G;continue;case 4:z[5]=1;z[4]=2;A=B+1|0;continue;case 5:z[5]=1;z[10]=String.fromCharCode(C);A=B+1|0;continue}}}}function n(x,y){__p&&__p();var z=x[0],A=x[1],B=x[2],C=x[3],D=x[4],E=x[5],F=x[6],G=x[7],H=x[8],I=y.length;if(E&&(H<0||A!=="-"))I=I+1|0;if(C)if(D){if(D===1)I=I+2|0}else I=I+1|0;var J="";if(z==="+"&&B===" ")for(var K=I,L=F-1|0;K<=L;++K)J=J+B;if(E)if(H<0)J=J+"-";else if(A!=="-")J=J+A;if(C&&D===0)J=J+"0";if(C&&D===1)J=J+"0x";if(z==="+"&&B==="0")for(var M=I,N=F-1|0;M<=N;++M)J=J+B;J=G?J+y.toUpperCase():J+y;if(z==="-")for(var O=I,P=F-1|0;O<=P;++O)J=J+" ";return J}function o(x,y){__p&&__p();if(x==="%d")return String(y);else{var z=m(x),A=z,B=y,C=B<0?A[5]?(A[8]=-1,-B):B>>>0:B,D=C.toString(k(A[4]));if(A[9]>=0){A[2]=" ";var E=A[9]-D.length|0;if(E>0)D=c("bs_caml_utils").repeat(E,"0")+D}return n(A,D)}}function p(x,y){__p&&__p();var z=m(x),A=z[5]&&c("bs_caml_int64").lt(y,[0,0])?(z[8]=-1,c("bs_caml_int64").neg(y)):y,B="",C=z[4];switch(C){case 0:var D=[0,8],E="01234567";if(c("bs_caml_int64").lt(A,[0,0])){var F=c("bs_caml_int64").discard_sign(A),G=c("bs_caml_int64").div_mod(F,D),H=c("bs_caml_int64").add([268435456,0],G[0]),I=G[1];B=String.fromCharCode(E.charCodeAt(I[1]|0))+B;while(c("bs_caml_int64").neq(H,[0,0])){var J=c("bs_caml_int64").div_mod(H,D);H=J[0];I=J[1];B=String.fromCharCode(E.charCodeAt(I[1]|0))+B}}else{var K=c("bs_caml_int64").div_mod(A,D),L=K[0],M=K[1];B=String.fromCharCode(E.charCodeAt(M[1]|0))+B;while(c("bs_caml_int64").neq(L,[0,0])){var N=c("bs_caml_int64").div_mod(L,D);L=N[0];M=N[1];B=String.fromCharCode(E.charCodeAt(M[1]|0))+B}}break;case 1:B=c("bs_caml_int64").to_hex(A)+B;break;case 2:var O=[0,10],P="0123456789";if(c("bs_caml_int64").lt(A,[0,0])){var Q=c("bs_caml_int64").discard_sign(A),R=c("bs_caml_int64").div_mod(Q,O),S=c("bs_caml_int64").div_mod(c("bs_caml_int64").add([0,8],R[1]),O),T=c("bs_caml_int64").add(c("bs_caml_int64").add([214748364,3435973836],R[0]),S[0]),U=S[1];B=String.fromCharCode(P.charCodeAt(U[1]|0))+B;while(c("bs_caml_int64").neq(T,[0,0])){var V=c("bs_caml_int64").div_mod(T,O);T=V[0];U=V[1];B=String.fromCharCode(P.charCodeAt(U[1]|0))+B}}else{var W=c("bs_caml_int64").div_mod(A,O),X=W[0],Y=W[1];B=String.fromCharCode(P.charCodeAt(Y[1]|0))+B;while(c("bs_caml_int64").neq(X,[0,0])){var Z=c("bs_caml_int64").div_mod(X,O);X=Z[0];Y=Z[1];B=String.fromCharCode(P.charCodeAt(Y[1]|0))+B}}break}if(z[9]>=0){z[2]=" ";var $=z[9]-B.length|0;if($>0)B=c("bs_caml_utils").repeat($,"0")+B}return n(z,B)}function q(x,y){__p&&__p();var z=m(x),A=z[9]<0?6:z[9],B=y<0?(z[8]=-1,-y):y,C="";if(isNaN(B)){C="nan";z[2]=" "}else if(isFinite(B)){var D=z[10];switch(D){case"e":C=B.toExponential(A);var E=C.length;if(C[E-3|0]==="e")C=C.slice(0,E-1|0)+("0"+C.slice(E-1|0));break;case"f":C=B.toFixed(A);break;case"g":var F=A!==0?A:1;C=B.toExponential(F-1|0);var G=C.indexOf("e"),H=Number(C.slice(G+1|0))|0;if(H<-4||B>=1e21||B.toFixed().length>F){var I=G-1|0;while(C[I]==="0")I=I-1|0;if(C[I]===".")I=I-1|0;C=C.slice(0,I+1|0)+C.slice(G);var J=C.length;if(C[J-3|0]==="e")C=C.slice(0,J-1|0)+("0"+C.slice(J-1|0))}else{var K=F;if(H<0){K=K-(H+1|0)|0;C=B.toFixed(K)}else while(function(){C=B.toFixed(K);return+(C.length>(F+1|0))}())K=K-1|0;if(K!==0){var L=C.length-1|0;while(C[L]==="0")L=L-1|0;if(C[L]===".")L=L-1|0;C=C.slice(0,L+1|0)}}break;default:}}else{C="inf";z[2]=" "}return n(z,C)}var r=function r(x,e){__p&&__p();var y=+x;if(x.length>0&&y===y)return y;x=x.replace(/_/g,"");y=+x;if(x.length>0&&y===y||/^[+-]?nan$/i.test(x))return y;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(x)){var z=x.indexOf("p");z=z==-1?x.indexOf("P"):z;var A=+x.substring(z+1);y=+x.substring(0,z);return y*Math.pow(2,A)}if(/^\+?inf(inity)?$/i.test(x))return Infinity;if(/^-inf(inity)?$/i.test(x))return-Infinity;e("float_of_string")};function s(x){return c("bs_curry")._2(r,x,e)}var t=o,u=o,v=i,w=i;d.caml_format_float=q;d.caml_format_int=o;d.caml_nativeint_format=t;d.caml_int32_format=u;d.caml_float_of_string=s;d.caml_int64_format=p;d.caml_int_of_string=i;d.caml_int32_of_string=v;d.caml_int64_of_string=j;d.caml_nativeint_of_string=w}),null);
__d("bs_caml_io",["bs_curry","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(u,v){return u+v}var i=undefined,j=["",function(u,v){var w=v.length-1|0;if(typeof process!=="undefined"&&process.stdout&&process.stdout.write)return process.stdout.write(v);else if(v[w]==="\n")return 0;else return 0}],k=["",function(u,v){var w=v.length-1|0;if(v[w]==="\n")return 0;else return 0}];function l(){throw[c("bs_caml_builtin_exceptions").failure,"caml_ml_open_descriptor_in not implemented"]}function m(){throw[c("bs_caml_builtin_exceptions").failure,"caml_ml_open_descriptor_out not implemented"]}function n(u){if(u[0]!==""){c("bs_curry")._2(u[1],u,u[0]);u[0]="";return 0}else return 0}var o=function o(u){return typeof process!=="undefined"&&process.stdout&&(process.stdout.write(u),true)};function p(u,v,w,x){__p&&__p();var y=w===0&&x===v.length?v:v.slice(w,x);if(typeof process!=="undefined"&&process.stdout&&process.stdout.write&&u===j)return process.stdout.write(y);else{var z=y.lastIndexOf("\n");if(z<0){u[0]=u[0]+y;return 0}else{u[0]=u[0]+y.slice(0,z+1|0);n(u);u[0]=u[0]+y.slice(z+1|0);return 0}}}function q(u,v){return p(u,String.fromCharCode(v),0,1)}function r(u,v,w,x){throw[c("bs_caml_builtin_exceptions").failure,"caml_ml_input ic not implemented"]}function s(){throw[c("bs_caml_builtin_exceptions").failure,"caml_ml_input_char not implemnted"]}function t(){return[j,[k,0]]}g.$caret=h;g.stdin=i;g.stdout=j;g.stderr=k;g.caml_ml_open_descriptor_in=l;g.caml_ml_open_descriptor_out=m;g.caml_ml_flush=n;g.node_std_output=o;g.caml_ml_output=p;g.caml_ml_output_char=q;g.caml_ml_input=r;g.caml_ml_input_char=s;g.caml_ml_out_channels_list=t}),null);
__d("bs_caml_missing_polyfill",[],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){throw new Error(i)};g.not_implemented=h}),null);
__d("bs_caml_string",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(v){return String.fromCharCode(v)}function i(v,w){if(w>=v.length||w<0)throw[c("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return v.charCodeAt(w)}function j(v){if(v<0)throw[c("bs_caml_builtin_exceptions").invalid_argument,"String.create"];else return new Array(v)}function k(v,w){if(v===w)return 0;else if(v<w)return-1;else return 1}function l(v,w,x,y){if(x>0){for(var z=w,A=(x+w|0)-1|0;z<=A;++z)v[z]=y;return 0}else return 0}function m(v,w,x,y,z){__p&&__p();if(z>0){var A=v.length-w|0;if(z<=A){for(var B=0,C=z-1|0;B<=C;++B)x[y+B|0]=v.charCodeAt(w+B|0);return 0}else{for(var D=0,E=A-1|0;D<=E;++D)x[y+D|0]=v.charCodeAt(w+D|0);for(var F=A,G=z-1|0;F<=G;++F)x[y+F|0]=0;return 0}}else return 0}function n(v,w,x,y,z){__p&&__p();if(z>0)if(v===x){var A=v,B=w,C=y,D=z;if(B<C){var E=(A.length-C|0)-1|0,F=D-1|0,G=E>F?F:E;for(var H=G;H>=0;--H)A[C+H|0]=A[B+H|0];return 0}else if(B>C){var I=(A.length-B|0)-1|0,J=D-1|0,K=I>J?J:I;for(var L=0;L<=K;++L)A[C+L|0]=A[B+L|0];return 0}else return 0}else{var M=v.length-w|0;if(z<=M){for(var N=0,O=z-1|0;N<=O;++N)x[y+N|0]=v[w+N|0];return 0}else{for(var P=0,Q=M-1|0;P<=Q;++P)x[y+P|0]=v[w+P|0];for(var R=M,S=z-1|0;R<=S;++R)x[y+R|0]=0;return 0}}else return 0}function o(v){var w=v.length,x=new Array(w);for(var y=0,z=w-1|0;y<=z;++y)x[y]=v.charCodeAt(y);return x}function p(v){__p&&__p();var w=v,x=0,y=v.length,z="",A=y;if(x===0&&y<=4096&&y===w.length)return String.fromCharCode.apply(null,w);else{var B=0;while(A>0){var C=A<1024?A:1024,D=new Array(C);n(w,B,D,0,C);z=z+String.fromCharCode.apply(null,D);A=A-C|0;B=B+C|0}return z}}function q(v){var w=v.length,x=new Array(w);for(var y=0,z=w-1|0;y<=z;++y)x[y]=v[y];return p(x)}function r(v){if(v>31)return+(v<127);else return 0}function s(v,w){return v.charCodeAt(w)+(v.charCodeAt(w+1|0)<<8)|0}function t(v,w){return((v.charCodeAt(w)+(v.charCodeAt(w+1|0)<<8)|0)+(v.charCodeAt(w+2|0)<<16)|0)+(v.charCodeAt(w+3|0)<<24)|0}function u(v,w){if(w<0||w>=v.length)throw[c("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return v.charCodeAt(w)}g.bytes_of_string=o;g.bytes_to_string=p;g.caml_is_printable=r;g.caml_string_of_char_array=q;g.caml_string_get=i;g.caml_string_compare=k;g.caml_create_string=j;g.caml_fill_string=l;g.caml_blit_string=m;g.caml_blit_bytes=n;g.caml_string_get16=s;g.caml_string_get32=t;g.string_of_char=h;g.get=u}),null);
__d("bs_caml_sys",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(q){var r=typeof process==="undefined"?undefined:process;if(r!==undefined){var s=r.env[q];if(s!==undefined)return s;else throw c("bs_caml_builtin_exceptions").not_found}else throw c("bs_caml_builtin_exceptions").not_found}function i(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined)return q.uptime();else return-1}function j(){return[((Date.now()|0)^4294967295)*Math.random()|0]}function k(){return 127}function l(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined)return q.cwd();else return"/"}function m(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined)if(q.argv==null)return["",[""]];else return[q.argv[0],q.argv];else return["",[""]]}function n(q){var r=typeof process==="undefined"?undefined:process;if(r!==undefined)return r.exit(q);else return 0}function o(){throw[c("bs_caml_builtin_exceptions").failure,"caml_sys_is_directory not implemented"]}function p(){throw[c("bs_caml_builtin_exceptions").failure,"caml_sys_file_exists not implemented"]}g.caml_sys_getenv=h;g.caml_sys_time=i;g.caml_sys_random_seed=j;g.caml_sys_system_command=k;g.caml_sys_getcwd=l;g.caml_sys_get_argv=m;g.caml_sys_exit=n;g.caml_sys_is_directory=o;g.caml_sys_file_exists=p}),null);
__d("bs_camlinternalFormatBasics",["bs_block"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){__p&&__p();if(typeof k==="number")return 0;else switch(k.tag|0){case 0:return c("bs_block").__(0,[h(k[0])]);case 1:return c("bs_block").__(1,[h(k[0])]);case 2:return c("bs_block").__(2,[h(k[0])]);case 3:return c("bs_block").__(3,[h(k[0])]);case 4:return c("bs_block").__(4,[h(k[0])]);case 5:return c("bs_block").__(5,[h(k[0])]);case 6:return c("bs_block").__(6,[h(k[0])]);case 7:return c("bs_block").__(7,[h(k[0])]);case 8:return c("bs_block").__(8,[k[0],h(k[1])]);case 9:var l=k[0];return c("bs_block").__(9,[l,l,h(k[2])]);case 10:return c("bs_block").__(10,[h(k[0])]);case 11:return c("bs_block").__(11,[h(k[0])]);case 12:return c("bs_block").__(12,[h(k[0])]);case 13:return c("bs_block").__(13,[h(k[0])]);case 14:return c("bs_block").__(14,[h(k[0])])}}function i(k,l){__p&&__p();if(typeof k==="number")return l;else switch(k.tag|0){case 0:return c("bs_block").__(0,[i(k[0],l)]);case 1:return c("bs_block").__(1,[i(k[0],l)]);case 2:return c("bs_block").__(2,[i(k[0],l)]);case 3:return c("bs_block").__(3,[i(k[0],l)]);case 4:return c("bs_block").__(4,[i(k[0],l)]);case 5:return c("bs_block").__(5,[i(k[0],l)]);case 6:return c("bs_block").__(6,[i(k[0],l)]);case 7:return c("bs_block").__(7,[i(k[0],l)]);case 8:return c("bs_block").__(8,[k[0],i(k[1],l)]);case 9:return c("bs_block").__(9,[k[0],k[1],i(k[2],l)]);case 10:return c("bs_block").__(10,[i(k[0],l)]);case 11:return c("bs_block").__(11,[i(k[0],l)]);case 12:return c("bs_block").__(12,[i(k[0],l)]);case 13:return c("bs_block").__(13,[i(k[0],l)]);case 14:return c("bs_block").__(14,[i(k[0],l)])}}function j(k,l){__p&&__p();if(typeof k==="number")return l;else switch(k.tag|0){case 0:return c("bs_block").__(0,[j(k[0],l)]);case 1:return c("bs_block").__(1,[j(k[0],l)]);case 2:return c("bs_block").__(2,[k[0],j(k[1],l)]);case 3:return c("bs_block").__(3,[k[0],j(k[1],l)]);case 4:return c("bs_block").__(4,[k[0],k[1],k[2],j(k[3],l)]);case 5:return c("bs_block").__(5,[k[0],k[1],k[2],j(k[3],l)]);case 6:return c("bs_block").__(6,[k[0],k[1],k[2],j(k[3],l)]);case 7:return c("bs_block").__(7,[k[0],k[1],k[2],j(k[3],l)]);case 8:return c("bs_block").__(8,[k[0],k[1],k[2],j(k[3],l)]);case 9:return c("bs_block").__(9,[j(k[0],l)]);case 10:return c("bs_block").__(10,[j(k[0],l)]);case 11:return c("bs_block").__(11,[k[0],j(k[1],l)]);case 12:return c("bs_block").__(12,[k[0],j(k[1],l)]);case 13:return c("bs_block").__(13,[k[0],k[1],j(k[2],l)]);case 14:return c("bs_block").__(14,[k[0],k[1],j(k[2],l)]);case 15:return c("bs_block").__(15,[j(k[0],l)]);case 16:return c("bs_block").__(16,[j(k[0],l)]);case 17:return c("bs_block").__(17,[k[0],j(k[1],l)]);case 18:return c("bs_block").__(18,[k[0],j(k[1],l)]);case 19:return c("bs_block").__(19,[j(k[0],l)]);case 20:return c("bs_block").__(20,[k[0],k[1],j(k[2],l)]);case 21:return c("bs_block").__(21,[k[0],j(k[1],l)]);case 22:return c("bs_block").__(22,[j(k[0],l)]);case 23:return c("bs_block").__(23,[k[0],j(k[1],l)]);case 24:return c("bs_block").__(24,[k[0],k[1],j(k[2],l)])}}g.concat_fmtty=i;g.erase_rel=h;g.concat_fmt=j}),null);
__d("bs_pervasives",["bs_curry","bs_caml_io","bs_caml_obj","bs_caml_sys","bs_caml_format","bs_caml_string","bs_caml_exceptions","bs_caml_missing_polyfill","bs_caml_builtin_exceptions","bs_camlinternalFormatBasics"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function c(R){throw[a("bs_caml_builtin_exceptions").failure,R]}function d(R){throw[a("bs_caml_builtin_exceptions").invalid_argument,R]}var e=a("bs_caml_exceptions").create("Pervasives.Exit");function f(R,S){if(a("bs_caml_obj").caml_lessequal(R,S))return R;else return S}function g(R,S){if(a("bs_caml_obj").caml_greaterequal(R,S))return R;else return S}function h(R){if(R>=0)return R;else return-R|0}function i(R){return R^-1}var j=-2147483648;function k(R,S){return R+S}function l(R){if(R<0||R>255)throw[a("bs_caml_builtin_exceptions").invalid_argument,"char_of_int"];else return R}function m(R){if(R)return"true";else return"false"}function n(R){switch(R){case"false":return 0;case"true":return 1;default:throw[a("bs_caml_builtin_exceptions").invalid_argument,"bool_of_string"]}}function o(R){return""+R}function p(R){__p&&__p();var S=R.length,T=0;while(true){var U=T;if(U>=S)return k(R,".");else{var V=a("bs_caml_string").get(R,U);if(V>=48)if(V>=58)return R;else{T=U+1|0;continue}else if(V!==45)return R;else{T=U+1|0;continue}}}}function q(R){return p(a("bs_caml_format").caml_format_float("%.12g",R))}function r(R,S){if(R)return[R[0],r(R[1],S)];else return S}var s=a("bs_caml_io").stdin,t=a("bs_caml_io").stdout,u=a("bs_caml_io").stderr;function v(R,S,T){return a("bs_caml_io").caml_ml_open_descriptor_out(a("bs_caml_missing_polyfill").not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function w(R){return v([1,[3,[4,[7,0]]]],438,R)}function x(R){return v([1,[3,[4,[6,0]]]],438,R)}function y(){__p&&__p();var R=a("bs_caml_io").caml_ml_out_channels_list(0);while(true){var S=R;if(S){try{a("bs_caml_io").caml_ml_flush(S[0])}catch(T){}R=S[1];continue}else return 0}}function z(R,S){return a("bs_caml_io").caml_ml_output(R,S,0,S.length)}function A(R,S){return a("bs_caml_io").caml_ml_output(R,S,0,S.length)}function B(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"output"];else return a("bs_caml_io").caml_ml_output(R,S,T,U)}function C(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"output_substring"];else return a("bs_caml_io").caml_ml_output(R,S,T,U)}function D(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_output_value not implemented by bucklescript yet\n")}function E(R){a("bs_caml_io").caml_ml_flush(R);return a("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}function F(R){try{a("bs_caml_io").caml_ml_flush(R)}catch(S){}try{return a("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(T){return 0}}function G(R,S,T){return a("bs_caml_io").caml_ml_open_descriptor_in(a("bs_caml_missing_polyfill").not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function H(R){return G([0,[7,0]],0,R)}function I(R){return G([0,[6,0]],0,R)}function J(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"input"];else return a("bs_caml_missing_polyfill").not_implemented("caml_ml_input not implemented by bucklescript yet\n")}function K(R,S,T,U){__p&&__p();while(true){var V=U,W=T;if(V<=0)return 0;else{var X=a("bs_caml_missing_polyfill").not_implemented("caml_ml_input not implemented by bucklescript yet\n");if(X){U=V-X|0;T=W+X|0;continue}else throw a("bs_caml_builtin_exceptions").end_of_file}}}function L(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"really_input"];else return K(R,S,T,U)}function M(R,S){var T=a("bs_caml_string").caml_create_string(S);L(R,T,0,S);return a("bs_caml_string").bytes_to_string(T)}function N(R){__p&&__p();var S=function S(U,V,W){__p&&__p();while(true){var X=W,Y=V;if(X){var Z=X[0],$=Z.length;a("bs_caml_string").caml_blit_bytes(Z,0,U,Y-$|0,$);W=X[1];V=Y-$|0;continue}else return U}},T=function T(U,V){__p&&__p();while(true){var W=V,X=U,Y=a("bs_caml_missing_polyfill").not_implemented("caml_ml_input_scan_line not implemented by bucklescript yet\n");if(Y)if(Y>0){var Z=a("bs_caml_string").caml_create_string(Y-1|0);a("bs_caml_missing_polyfill").not_implemented("caml_ml_input not implemented by bucklescript yet\n");a("bs_caml_io").caml_ml_input_char(R);if(X){var $=(W+Y|0)-1|0;return S(a("bs_caml_string").caml_create_string($),$,[Z,X])}else return Z}else{var eb=a("bs_caml_string").caml_create_string(-Y|0);a("bs_caml_missing_polyfill").not_implemented("caml_ml_input not implemented by bucklescript yet\n");V=W-Y|0;U=[eb,X];continue}else if(X)return S(a("bs_caml_string").caml_create_string(W),W,X);else throw a("bs_caml_builtin_exceptions").end_of_file}};return a("bs_caml_string").bytes_to_string(T(0,0))}function O(){try{return a("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(R){return 0}}function fa(R){return a("bs_caml_io").caml_ml_output_char(t,R)}function ga(R){return A(t,R)}function ha(R){return z(t,R)}function ia(R){return A(t,""+R)}function ja(R){return A(t,p(a("bs_caml_format").caml_format_float("%.12g",R)))}function ka(R){return 0}function la(){a("bs_caml_io").caml_ml_output_char(t,10);return a("bs_caml_io").caml_ml_flush(t)}function ma(R){return a("bs_caml_io").caml_ml_output_char(u,R)}function na(R){return A(u,R)}function oa(R){return z(u,R)}function pa(R){return A(u,""+R)}function qa(R){return A(u,p(a("bs_caml_format").caml_format_float("%.12g",R)))}function ra(R){return 0}function sa(){a("bs_caml_io").caml_ml_output_char(u,10);return a("bs_caml_io").caml_ml_flush(u)}function ta(){a("bs_caml_io").caml_ml_flush(t);return N(s)}function ua(){return a("bs_caml_format").caml_int_of_string((a("bs_caml_io").caml_ml_flush(t),N(s)))}function va(){return a("bs_caml_format").caml_float_of_string((a("bs_caml_io").caml_ml_flush(t),N(s)))}function wa(R){return R[1]}function xa(R,S){return[a("bs_camlinternalFormatBasics").concat_fmt(R[0],S[0]),k(R[1],k("%,",S[1]))]}var P=[y];function ya(R){var S=P[0];P[0]=function(){a("bs_curry")._1(R,0);return a("bs_curry")._1(S,0)};return 0}function Q(){return a("bs_curry")._1(P[0],0)}function za(R){Q(0);return a("bs_caml_sys").caml_sys_exit(R)}var Aa=2147483647,Ba=Infinity,Ca=-Infinity,Da=NaN,Ea=Number.MAX_VALUE,Fa=Number.MIN_VALUE,Ga=2220446049250313e-31,Ha=a("bs_caml_io").caml_ml_flush,Ia=a("bs_caml_io").caml_ml_output_char,Ja=a("bs_caml_io").caml_ml_output_char;function Ka(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_output_int not implemented by bucklescript yet\n")}function La(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_out not implemented by bucklescript yet\n")}function Ma(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_out not implemented by bucklescript yet\n")}function Na(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")}function Oa(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")}var Pa=a("bs_caml_io").caml_ml_input_char,Qa=a("bs_caml_io").caml_ml_input_char;function Ra(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_input_int not implemented by bucklescript yet\n")}function Sa(){return a("bs_caml_missing_polyfill").not_implemented("caml_input_value not implemented by bucklescript yet\n")}function Ta(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_in not implemented by bucklescript yet\n")}function Ua(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_in not implemented by bucklescript yet\n")}function Va(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")}function Wa(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}function Xa(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")}function Ya(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_out_64 not implemented by bucklescript yet\n")}function Za(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_out_64 not implemented by bucklescript yet\n")}function $a(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}function ab(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_in_64 not implemented by bucklescript yet\n")}function bb(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_in_64 not implemented by bucklescript yet\n")}function cb(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}var db=[Ya,Za,$a,ab,bb,cb];b.invalid_arg=d;b.failwith=c;b.Exit=e;b.min=f;b.max=g;b.abs=h;b.max_int=Aa;b.min_int=j;b.lnot=i;b.infinity=Ba;b.neg_infinity=Ca;b.nan=Da;b.max_float=Ea;b.min_float=Fa;b.epsilon_float=Ga;b.$caret=k;b.char_of_int=l;b.string_of_bool=m;b.bool_of_string=n;b.string_of_int=o;b.string_of_float=q;b.$at=r;b.stdin=s;b.stdout=t;b.stderr=u;b.print_char=fa;b.print_string=ga;b.print_bytes=ha;b.print_int=ia;b.print_float=ja;b.print_endline=ka;b.print_newline=la;b.prerr_char=ma;b.prerr_string=na;b.prerr_bytes=oa;b.prerr_int=pa;b.prerr_float=qa;b.prerr_endline=ra;b.prerr_newline=sa;b.read_line=ta;b.read_int=ua;b.read_float=va;b.open_out=w;b.open_out_bin=x;b.open_out_gen=v;b.flush=Ha;b.flush_all=y;b.output_char=Ia;b.output_string=A;b.output_bytes=z;b.output=B;b.output_substring=C;b.output_byte=Ja;b.output_binary_int=Ka;b.output_value=D;b.seek_out=La;b.pos_out=Ma;b.out_channel_length=Na;b.close_out=E;b.close_out_noerr=F;b.set_binary_mode_out=Oa;b.open_in=H;b.open_in_bin=I;b.open_in_gen=G;b.input_char=Pa;b.input_line=N;b.input=J;b.really_input=L;b.really_input_string=M;b.input_byte=Qa;b.input_binary_int=Ra;b.input_value=Sa;b.seek_in=Ta;b.pos_in=Ua;b.in_channel_length=Va;b.close_in=Wa;b.close_in_noerr=O;b.set_binary_mode_in=Xa;b.LargeFile=db;b.string_of_format=wa;b.$caret$caret=xa;b.exit=za;b.at_exit=ya;b.valid_float_lexem=p;b.unsafe_really_input=K;b.do_at_exit=Q}),null);
__d("bs_list",["bs_curry","bs_caml_obj","bs_pervasives","bs_caml_builtin_exceptions"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function c(q){__p&&__p();var r=0,s=q;while(true){var t=s,u=r;if(t){s=t[1];r=u+1|0;continue}else return u}}function fa(q){if(q)return q[0];else throw[a("bs_caml_builtin_exceptions").failure,"hd"]}function ga(q){if(q)return q[1];else throw[a("bs_caml_builtin_exceptions").failure,"tl"]}function ha(q,r){__p&&__p();if(r<0)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.nth"];else{var s=q,t=r;while(true){var u=t,v=s;if(v)if(u){t=u-1|0;s=v[1];continue}else return v[0];else throw[a("bs_caml_builtin_exceptions").failure,"nth"]}}}function d(q,r){while(true){var s=r,t=q;if(t){r=[t[0],s];q=t[1];continue}else return s}}function ia(q){return d(q,0)}function e(q){if(q)return a("bs_pervasives").$at(q[0],e(q[1]));else return 0}function f(q,r){if(r){var s=a("bs_curry")._1(q,r[0]);return[s,f(q,r[1])]}else return 0}function g(q,r,s){if(s){var t=a("bs_curry")._2(r,q,s[0]);return[t,g(q+1|0,r,s[1])]}else return 0}function ja(q,r){return g(0,q,r)}function ka(q,r){__p&&__p();var s=0,t=r;while(true){var u=t,v=s;if(u){t=u[1];s=[a("bs_curry")._1(q,u[0]),v];continue}else return v}}function la(q,r){while(true){var s=r;if(s){a("bs_curry")._1(q,s[0]);r=s[1];continue}else return 0}}function ma(q,r){__p&&__p();var s=0,t=q,u=r;while(true){var v=u,w=s;if(v){a("bs_curry")._2(t,w,v[0]);u=v[1];s=w+1|0;continue}else return 0}}function na(q,r,s){while(true){var t=s,u=r;if(t){s=t[1];r=a("bs_curry")._2(q,u,t[0]);continue}else return u}}function h(q,r,s){if(r)return a("bs_curry")._2(q,r[0],h(q,r[1],s));else return s}function i(q,r,s){if(r)if(s){var t=a("bs_curry")._2(q,r[0],s[0]);return[t,i(q,r[1],s[1])]}else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.map2"];else if(s)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.map2"];else return 0}function oa(q,r,s){__p&&__p();var t=0,u=r,v=s;while(true){var w=v,x=u,y=t;if(x)if(w){v=w[1];u=x[1];t=[a("bs_curry")._2(q,x[0],w[0]),y];continue}else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.rev_map2"];else if(w)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.rev_map2"];else return y}}function pa(q,r,s){__p&&__p();while(true){var t=s,u=r;if(u)if(t){a("bs_curry")._2(q,u[0],t[0]);s=t[1];r=u[1];continue}else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.iter2"];else if(t)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.iter2"];else return 0}}function qa(q,r,s,t){__p&&__p();while(true){var u=t,v=s,w=r;if(v)if(u){t=u[1];s=v[1];r=a("bs_curry")._3(q,w,v[0],u[0]);continue}else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.fold_left2"];else if(u)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.fold_left2"];else return w}}function j(q,r,s,t){if(r)if(s)return a("bs_curry")._3(q,r[0],s[0],j(q,r[1],s[1],t));else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.fold_right2"];else if(s)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.fold_right2"];else return t}function ra(q,r){__p&&__p();while(true){var s=r;if(s)if(a("bs_curry")._1(q,s[0])){r=s[1];continue}else return 0;else return 1}}function sa(q,r){__p&&__p();while(true){var s=r;if(s)if(a("bs_curry")._1(q,s[0]))return 1;else{r=s[1];continue}else return 0}}function ta(q,r,s){__p&&__p();while(true){var t=s,u=r;if(u)if(t)if(a("bs_curry")._2(q,u[0],t[0])){s=t[1];r=u[1];continue}else return 0;else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.for_all2"];else if(t)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.for_all2"];else return 1}}function ua(q,r,s){__p&&__p();while(true){var t=s,u=r;if(u)if(t)if(a("bs_curry")._2(q,u[0],t[0]))return 1;else{s=t[1];r=u[1];continue}else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.exists2"];else if(t)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.exists2"];else return 0}}function va(q,r){__p&&__p();while(true){var s=r;if(s)if(a("bs_caml_obj").caml_compare(s[0],q)){r=s[1];continue}else return 1;else return 0}}function wa(q,r){__p&&__p();while(true){var s=r;if(s)if(s[0]===q)return 1;else{r=s[1];continue}else return 0}}function xa(q,r){__p&&__p();while(true){var s=r;if(s){var t=s[0];if(a("bs_caml_obj").caml_compare(t[0],q)){r=s[1];continue}else return t[1]}else throw a("bs_caml_builtin_exceptions").not_found}}function ya(q,r){__p&&__p();while(true){var s=r;if(s){var t=s[0];if(t[0]===q)return t[1];else{r=s[1];continue}}else throw a("bs_caml_builtin_exceptions").not_found}}function za(q,r){__p&&__p();while(true){var s=r;if(s)if(a("bs_caml_obj").caml_compare(s[0][0],q)){r=s[1];continue}else return 1;else return 0}}function Aa(q,r){__p&&__p();while(true){var s=r;if(s)if(s[0][0]===q)return 1;else{r=s[1];continue}else return 0}}function k(q,r){if(r){var s=r[1],t=r[0];if(a("bs_caml_obj").caml_compare(t[0],q))return[t,k(q,s)];else return s}else return 0}function l(q,r){if(r){var s=r[1],t=r[0];if(t[0]===q)return s;else return[t,l(q,s)]}else return 0}function Ba(q,r){__p&&__p();while(true){var s=r;if(s){var t=s[0];if(a("bs_curry")._1(q,t))return t;else{r=s[1];continue}}else throw a("bs_caml_builtin_exceptions").not_found}}function Ca(q){__p&&__p();return function(r){__p&&__p();var s=0,t=r;while(true){var u=t,v=s;if(u){var w=u[1],x=u[0];if(a("bs_curry")._1(q,x)){t=w;s=[x,v];continue}else{t=w;continue}}else return d(v,0)}}}function Da(q,r){__p&&__p();var s=0,t=0,u=r;while(true){var v=u,w=t,x=s;if(v){var y=v[1],z=v[0];if(a("bs_curry")._1(q,z)){u=y;s=[z,x];continue}else{u=y;t=[z,w];continue}}else return[d(x,0),d(w,0)]}}function Ea(q){if(q){var r=q[0],s=Ea(q[1]);return[[r[0],s[0]],[r[1],s[1]]]}else return[0,0]}function Fa(q,r){if(q)if(r)return[[q[0],r[0]],Fa(q[1],r[1])];else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.combine"];else if(r)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.combine"];else return 0}function m(q,r,s){if(r)if(s){var t=s[0],u=r[0];if(a("bs_curry")._2(q,u,t)<=0)return[u,m(q,r[1],s)];else return[t,m(q,r,s[1])]}else return r;else return s}function n(q,r){__p&&__p();while(true){var s=r,t=q;if(t)if(s){r=s[1];q=t-1|0;continue}else throw[a("bs_caml_builtin_exceptions").assert_failure,["list.ml",223,11]];else return s}}function o(q,r){__p&&__p();var p=function p(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0];if(a("bs_curry")._2(q,A,z)<=0)if(a("bs_curry")._2(q,z,y)<=0)return[A,[z,[y,0]]];else if(a("bs_curry")._2(q,A,y)<=0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else if(a("bs_curry")._2(q,A,y)<=0)return[z,[A,[y,0]]];else if(a("bs_curry")._2(q,z,y)<=0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]]}else v=1}else v=1}else v=1;else if(r){var B=r[1];if(B){var C=B[0],D=r[0];if(a("bs_curry")._2(q,D,C)<=0)return[D,[C,0]];else return[C,[D,0]]}else v=1}else v=1;if(v===1){var E=u>>1,F=u-E|0,G=n(E,r),H=s(E,r),I=s(F,G),J=H,K=I,L=0;while(true){var M=L,N=K,O=J;if(O)if(N){var P=N[0],Q=O[0];if(a("bs_curry")._2(q,Q,P)>0){L=[Q,M];J=O[1];continue}else{L=[P,M];K=N[1];continue}}else return d(O,M);else return d(N,M)}}},s=function s(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0];if(a("bs_curry")._2(q,A,z)>0)if(a("bs_curry")._2(q,z,y)>0)return[A,[z,[y,0]]];else if(a("bs_curry")._2(q,A,y)>0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else if(a("bs_curry")._2(q,A,y)>0)return[z,[A,[y,0]]];else if(a("bs_curry")._2(q,z,y)>0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]]}else v=1}else v=1}else v=1;else if(r){var B=r[1];if(B){var C=B[0],D=r[0];if(a("bs_curry")._2(q,D,C)>0)return[D,[C,0]];else return[C,[D,0]]}else v=1}else v=1;if(v===1){var E=u>>1,F=u-E|0,G=n(E,r),H=p(E,r),I=p(F,G),J=H,K=I,L=0;while(true){var M=L,N=K,O=J;if(O)if(N){var P=N[0],Q=O[0];if(a("bs_curry")._2(q,Q,P)<=0){L=[Q,M];J=O[1];continue}else{L=[P,M];K=N[1];continue}}else return d(O,M);else return d(N,M)}}},t=c(r);if(t<2)return r;else return p(t,r)}function Ga(q,r){__p&&__p();var p=function p(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0],B=a("bs_curry")._2(q,A,z);if(B)if(B<0){var C=a("bs_curry")._2(q,z,y);if(C)if(C<0)return[A,[z,[y,0]]];else{var D=a("bs_curry")._2(q,A,y);if(D)if(D<0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else return[A,[z,0]]}else return[A,[z,0]]}else{var E=a("bs_curry")._2(q,A,y);if(E)if(E<0)return[z,[A,[y,0]]];else{var F=a("bs_curry")._2(q,z,y);if(F)if(F<0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]];else return[z,[A,0]]}else return[z,[A,0]]}else{var G=a("bs_curry")._2(q,z,y);if(G)if(G<0)return[z,[y,0]];else return[y,[z,0]];else return[z,0]}}else v=1}else v=1}else v=1;else if(r){var H=r[1];if(H){var I=H[0],J=r[0],K=a("bs_curry")._2(q,J,I);if(K)if(K<0)return[J,[I,0]];else return[I,[J,0]];else return[J,0]}else v=1}else v=1;if(v===1){var L=u>>1,M=u-L|0,N=n(L,r),O=s(L,r),P=s(M,N),Q=O,R=P,S=0;while(true){var T=S,U=R,V=Q;if(V)if(U){var W=U[1],X=U[0],Y=V[1],Z=V[0],$=a("bs_curry")._2(q,Z,X);if($)if($>0){S=[Z,T];Q=Y;continue}else{S=[X,T];R=W;continue}else{S=[Z,T];R=W;Q=Y;continue}}else return d(V,T);else return d(U,T)}}},s=function s(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0],B=a("bs_curry")._2(q,A,z);if(B)if(B>0){var C=a("bs_curry")._2(q,z,y);if(C)if(C>0)return[A,[z,[y,0]]];else{var D=a("bs_curry")._2(q,A,y);if(D)if(D>0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else return[A,[z,0]]}else return[A,[z,0]]}else{var E=a("bs_curry")._2(q,A,y);if(E)if(E>0)return[z,[A,[y,0]]];else{var F=a("bs_curry")._2(q,z,y);if(F)if(F>0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]];else return[z,[A,0]]}else return[z,[A,0]]}else{var G=a("bs_curry")._2(q,z,y);if(G)if(G>0)return[z,[y,0]];else return[y,[z,0]];else return[z,0]}}else v=1}else v=1}else v=1;else if(r){var H=r[1];if(H){var I=H[0],J=r[0],K=a("bs_curry")._2(q,J,I);if(K)if(K>0)return[J,[I,0]];else return[I,[J,0]];else return[J,0]}else v=1}else v=1;if(v===1){var L=u>>1,M=u-L|0,N=n(L,r),O=p(L,r),P=p(M,N),Q=O,R=P,S=0;while(true){var T=S,U=R,V=Q;if(V)if(U){var W=U[1],X=U[0],Y=V[1],Z=V[0],$=a("bs_curry")._2(q,Z,X);if($)if($<0){S=[Z,T];Q=Y;continue}else{S=[X,T];R=W;continue}else{S=[Z,T];R=W;Q=Y;continue}}else return d(V,T);else return d(U,T)}}},t=c(r);if(t<2)return r;else return p(t,r)}var Ha=a("bs_pervasives").$at,Ia=e,Ja=Ca,p=o,Ka=o;b.length=c;b.hd=fa;b.tl=ga;b.nth=ha;b.rev=ia;b.append=Ha;b.rev_append=d;b.concat=Ia;b.flatten=e;b.iter=la;b.iteri=ma;b.map=f;b.mapi=ja;b.rev_map=ka;b.fold_left=na;b.fold_right=h;b.iter2=pa;b.map2=i;b.rev_map2=oa;b.fold_left2=qa;b.fold_right2=j;b.for_all=ra;b.exists=sa;b.for_all2=ta;b.exists2=ua;b.mem=va;b.memq=wa;b.find=Ba;b.filter=Ja;b.find_all=Ca;b.partition=Da;b.assoc=xa;b.assq=ya;b.mem_assoc=za;b.mem_assq=Aa;b.remove_assoc=k;b.remove_assq=l;b.split=Ea;b.combine=Fa;b.sort=p;b.stable_sort=o;b.fast_sort=Ka;b.sort_uniq=Ga;b.merge=m}),null);
__d("ReasonReact.bs",["bs_list","bs_array","bs_curry","React","bs_caml_builtin_exceptions"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function c(y,z,A){var B=[y,z].concat(A);return a("React").createElement.apply(null,B)}var d=null;function e(){return 0}function f(y,z,A){a("bs_curry")._1(y,A);return a("bs_curry")._1(z,A)}var g=[e,f];function h(){return 0}function i(){return 0}function j(){return 0}function k(){return 0}function l(){return 1}function m(y){return y[1]}function n(){return"RenderNotImplemented"}function o(){return 0}function p(y,z){return 0}function q(){return 0}function r(y,z,A){var B=y.reasonProps;if(B==null)if(z)return[a("bs_curry")._1(z[0],y)];else throw[a("bs_caml_builtin_exceptions").invalid_argument,"A JS component called the Reason component "+(A+" which didn't implement the JS->Reason React props conversion.")];else return B}function s(y){__p&&__p();return a("React").createClass({displayName:y,subscriptions:null,self:function z(A,B){var C=this;return[C.handleMethod,A,B,C.sendMethod]},transitionNextTotalState:function z(A,B){if(typeof B==="number")return A;else switch(B.tag|0){case 0:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements,sideEffects:A.sideEffects};case 1:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:A.sideEffects};case 2:return{reasonState:A.reasonState,reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:[B[0],A.sideEffects]};case 3:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements,sideEffects:[B[1],A.sideEffects]};case 4:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:[B[1],A.sideEffects]}}},getInitialState:function z(){var A=this,B=r(A.props,A.jsPropsToReason,y),C=a("bs_curry")._1(B[0][10],0);return{reasonState:C,reasonStateVersion:1,reasonStateVersionUsedToComputeSubelements:1,sideEffects:0}},componentDidMount:function z(){__p&&__p();var A=this,B=this,C=r(B.props,B.jsPropsToReason,y),D=C[0],E=B.state,F=E.reasonState,G=A.self(F,D[11]);if(D[13]!==q){var H=a("bs_list").map(function(K){var L=K[1],M=a("bs_curry")._1(K[0],0);return function(){return a("bs_curry")._1(L,M)}},a("bs_curry")._1(D[13],G));A.subscriptions=H}if(D[4]!==h){var I=a("bs_curry")._1(D[4],G),J=A.transitionNextTotalState(E,I);if(J.reasonStateVersion!==E.reasonStateVersion)return B.setState(J);else return 0}else return 0},componentDidUpdate:function z(A,B){var C=this,D=this,E=D.state,F=E.reasonState,G=D.props,H=r(G,D.jsPropsToReason,y),I=H[0];if(I[5]!==j){var J=+(A===G),K=J!==0?H:r(A,D.jsPropsToReason,y),L=B.reasonState,M=C.self(F,I[11]),N=M[0],O=K[0][11],P=M[3],Q=[N,L,O,P];return a("bs_curry")._1(I[5],[Q,M])}else return 0},componentWillUnmount:function z(){var A=this,B=this,C=r(B.props,B.jsPropsToReason,y),D=C[0],E=B.state,F=E.reasonState;if(D[6]!==k)a("bs_curry")._1(D[6],A.self(F,D[11]));var G=A.subscriptions;if(G==null)return 0;else return a("bs_list").iter(function(H){return a("bs_curry")._1(H,0)},a("bs_list").rev(G))},componentWillUpdate:function z(A,B){var C=this,D=this,E=r(A,D.jsPropsToReason,y),F=E[0];if(F[7]!==i){var G=D.props,H=+(A===G),I=H!==0?E:r(G,D.jsPropsToReason,y),J=D.state,K=J.reasonState,L=B.reasonState,M=C.self(L,F[11]),N=M[0],O=I[0][11],P=M[3],Q=[N,K,O,P];return a("bs_curry")._1(F[7],[Q,M])}else return 0},componentWillReceiveProps:function z(A){__p&&__p();var B=this,C=this,D=r(A,C.jsPropsToReason,y),E=D[0];if(E[3]!==m){var F=C.props,G=+(A===F),H=G!==0?D:r(F,C.jsPropsToReason,y),I=H[0];return C.setState(function(J,K){var L=J.reasonState,M=J.reasonStateVersion,N=B.self(L,I[11]),O=a("bs_curry")._1(E[3],N),G=+(O!==L),P=G!==0?M+1|0:M;if(P!==M)return{reasonState:O,reasonStateVersion:P,reasonStateVersionUsedToComputeSubelements:J.reasonStateVersionUsedToComputeSubelements,sideEffects:O.sideEffects};else return J})}else return 0},shouldComponentUpdate:function z(A,B,C){__p&&__p();var D=this,E=this,F=E.props,G=+(A!==F),H=r(E.props,E.jsPropsToReason,y),I=+(A===F),J=I!==0?H:r(A,E.jsPropsToReason,y),K=J[0],L=B.reasonStateVersion,M=B.reasonStateVersionUsedToComputeSubelements,N=+(M!==L),O=G||N,P=B.reasonState,Q=D.self(P,K[11]),R;if(O&&K[8]!==l){var ra=E.state,sa=ra.reasonState,ta=Q[0],ua=H[0][11],va=Q[3],wa=[ta,sa,ua,va];R=a("bs_curry")._1(K[8],[wa,Q])}else R=O;B.reasonStateVersionUsedToComputeSubelements=L;var S=a("bs_list").rev(B.sideEffects);if(S!==0){a("bs_list").iter(function(T){return a("bs_curry")._1(T,Q)},S);E.setState(function(T,C){__p&&__p();var U=function U(W,X,Y){__p&&__p();while(true){var Z=Y,V=X,$=W;if(Z)if(V>0){Y=Z[1];X=V-1|0;W=[Z[0],$];continue}else return a("bs_list").rev($);else return a("bs_list").rev($)}},V=a("bs_list").length(T.sideEffects)-a("bs_list").length(B.sideEffects)|0,xa=U(0,V,T.sideEffects);return{reasonState:T.reasonState,reasonStateVersion:T.reasonStateVersion,reasonStateVersionUsedToComputeSubelements:T.reasonStateVersionUsedToComputeSubelements,sideEffects:xa}})}return R},handleMethod:function z(A){var B=this,C=this;return function(D){var E=C.state,F=E.reasonState,G=r(C.props,C.jsPropsToReason,y);return a("bs_curry")._2(A,D,B.self(F,G[0][11]))}},updateMethod:function z(A){__p&&__p();var B=this,C=this;return function(D){var E=C.state,F=E.reasonState,G=r(C.props,C.jsPropsToReason,y),H=a("bs_curry")._2(A,D,B.self(F,G[0][11]));if(H){var I=B.transitionNextTotalState(E,H);if(I.reasonStateVersion!==E.reasonStateVersion)return C.setState(I);else return 0}else return d}},sendMethod:function z(A){__p&&__p();var B=this,C=this,D=r(C.props,C.jsPropsToReason,y),E=D[0];if(E[12]!==p){var F=a("bs_curry")._1(E[12],A);return C.setState(function(G,H){var I=G.reasonState,J=a("bs_curry")._1(F,I);if(J){var K=B.transitionNextTotalState(G,J);if(K.reasonStateVersion!==G.reasonStateVersion)return K;else return d}else return d})}else return 0},reduceMethod:function z(A,B){var C=this;return C.sendMethod(a("bs_curry")._1(A,B))},render:function z(){var A=this,B=this,C=r(B.props,B.jsPropsToReason,y),D=C[0],E=B.state,F=E.reasonState;return a("bs_curry")._1(D[9],A.self(F,D[11]))}})}function t(y){return[y,s(y),[0],m,h,j,k,i,l,n,o,0,p,q,0]}var u=t,v=t,fa=t,ga=t;function ha(y,z,A){var B=y?y[0]:undefined,C=z?z[0]:undefined,D=[A],E=A[14];if(E)return a("bs_curry")._2(E[0],B,C);else return a("React").createElement(A[1],{key:B,ref:C,reasonProps:D})}function ia(y,z){var A=y[1].prototype;A.jsPropsToReason=[z];return y[1]}var ja=t("interop");function ka(y,z,A){var B=[function(D,E){var F=y,G=z,H=A,I=D,J=E,K=Object.assign(Object.assign({},G),{ref:J,key:I}),L=[F,K].concat(H);return a("React").createElement.apply(null,L)}],C=ja.slice();C[14]=B;return C}function w(){var y=typeof window==="undefined"?undefined:window;if(y!==undefined){var z=y.location.pathname;switch(z){case"":case"/":return 0;default:var A=z.slice(1),B=A[A.length-1|0],C=B==="/"?A.slice(0,-1):A;return a("bs_array").to_list(C.split("/"))}}else return 0}function la(){var y=typeof window==="undefined"?undefined:window;if(y!==undefined){var z=y.location.hash;switch(z){case"":case"#":return"";default:return z.slice(1)}}else return""}function ma(){var y=typeof window==="undefined"?undefined:window;if(y!==undefined){var z=y.location.search;switch(z){case"":case"?":return"";default:return z.slice(1)}}else return""}function na(w){var y=typeof history==="undefined"?undefined:history,z=typeof window==="undefined"?undefined:window;if(y!==undefined&&z!==undefined){y.pushState(null,"",w);z.dispatchEvent(new Event("popstate"));return 0}else return 0}function x(){return[w(0),la(0),ma(0)]}function oa(y){var z=typeof window==="undefined"?undefined:window;if(z!==undefined){var A=function A(){return a("bs_curry")._1(y,x(0))};z.addEventListener("popstate",A);return A}else return function(){return 0}}function pa(y){var z=typeof window==="undefined"?undefined:window;if(z!==undefined){z.removeEventListener("popstate",y);return 0}else return 0}var qa=[na,oa,pa,x];b.Callback=g;b.statelessComponent=u;b.statelessComponentWithRetainedProps=v;b.reducerComponent=fa;b.reducerComponentWithRetainedProps=ga;b.element=ha;b.wrapReasonForJs=ia;b.createDomElement=c;b.wrapJsForReason=ka;b.Router=qa}),null);
__d("bs_js_boolean",[],(function a(b,c,d,e,f,g){"use strict";function h(i){if(i)return true;else return false}g.to_js_boolean=h}),null);
__d("Utils.bs",["bs_array","bs_curry","bs_js_boolean","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(q){if(q==null)return 0;else return+q}function i(q,r){if(q)return q[0];else return r}function j(q){return+((q==null?0:[q])!==0)}function k(q){if(q)return q[0];else return 0}function l(q){if(q==null)return 0;else return[+q]}function m(q){if(q)return c("bs_js_boolean").to_js_boolean(q[0]);else return undefined}function n(q){if(q)return c("bs_js_boolean").to_js_boolean(q[0]);else return false}function o(q,r){__p&&__p();var s=q,t=r,u=0;while(true){var v=u,w=t;if(w){var x=w[1],y=c("bs_curry")._1(s,w[0]);if(y){u=[y[0],v];t=x;continue}else{t=x;continue}}else return v}}function p(q){return c("bs_array").map(function(r){if(r)return r[0];else throw[c("bs_caml_builtin_exceptions").invalid_argument,"arrayCompact: sorry, something went wrong."]},q.filter(function(r){if(r)return 1;else return 0}))}g.isTruthy=h;g.$pipe$unknown=i;g.isDefined=j;g.isSomeTrue=k;g.nullUndefinedBooleanToOptionBool=l;g.optionBoolToNullUndefinedBoolean=m;g.optionBoolToBoolean=n;g.listFilterMap=o;g.arrayCompact=p}),null);
__d("bs_js_primitive",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(n){if(n===null)return 1;else return+(n===undefined)}function i(n){if(n===null||n===undefined)return 0;else return[n]}function j(n){if(n===undefined)return 0;else return[n]}function k(n){if(n===null)return 0;else return[n]}function l(n){if(n)return n[0];else return undefined}function m(n){if(n)return n[0][1];else return undefined}g.is_nil_undef=h;g.null_undefined_to_opt=i;g.undefined_to_opt=j;g.null_to_opt=k;g.option_get=l;g.option_get_unwrap=m}),null);
__d("LeadGenInfoFieldTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CUSTOM:"CUSTOM",CITY:"CITY",COMPANY_NAME:"COMPANY_NAME",COUNTRY:"COUNTRY",DOB:"DOB",EMAIL:"EMAIL",GENDER:"GENDER",FIRST_NAME:"FIRST_NAME",FULL_NAME:"FULL_NAME",JOB_TITLE:"JOB_TITLE",LAST_NAME:"LAST_NAME",MARITIAL_STATUS:"MARITIAL_STATUS",PHONE:"PHONE",POST_CODE:"POST_CODE",PROVINCE:"PROVINCE",RELATIONSHIP_STATUS:"RELATIONSHIP_STATUS",STATE:"STATE",STREET_ADDRESS:"STREET_ADDRESS",ZIP:"ZIP",WORK_EMAIL:"WORK_EMAIL",MILITARY_STATUS:"MILITARY_STATUS",WORK_PHONE_NUMBER:"WORK_PHONE_NUMBER",MESSENGER:"MESSENGER",STORE_LOOKUP:"STORE_LOOKUP",DATE_TIME:"DATE_TIME",ID_CPF:"ID_CPF"})}),null);
__d("P2PPaymentRequestStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INITED:1,DECLINED:2,TRANSFER_INITED:3,TRANSFER_COMPLETED:4,TRANSFER_FAILED:5,CANCELED:6,EXPIRED:7})}),null);
__d("P2PTransferStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18,CANCELED_SENDER_CANCEL:19,PENDING_SENDER_IDV_REVIEW:20,PENDING_RECEIVER_IDV_REVIEW:21})}),null);
__d("bs_js_null_undefined",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k,l){if(k==null)return k;else return l(k)}function i(k,l){if(k==null)return 0;else return l(k)}function j(k){if(k)return k[0];else return undefined}g.bind=h;g.iter=i;g.from_opt=j}),null);
__d("MessengerThreadCannotReplyReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BLOCKED:"blocked",COMPOSER_DISABLED_BOT:"composer_disabled_bot",HAS_EMAIL_PARTICIPANT:"has_email_participant",OBJECT_ORIGINATED:"object_originated",READ_ONLY:"read_only",VIEWER_NOT_SUBSCRIBED:"viewer_not_subscribed",RECIPIENTS_NOT_LOADABLE:"recipients_not_loadable",RECIPIENTS_UNAVAILABLE:"recipients_unavailable",RECIPIENTS_INVALID:"recipients_invalid",RECIPIENTS_INACTIVE_WORK_ACC:"recipients_inactive_work_account",MONTAGE_NOT_AUTHOR:"montage_not_author"})}),null);
__d("MercuryThreadInfo",["MercuryIDs","MessengerThreadCannotReplyReason"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={canReply:function j(k){return!!(k.is_subscribed&&(k.can_reply===undefined||k.can_reply)&&!k.has_email_participant&&!k.read_only)},getMuteSetting:function j(k){return!k.mute_until?undefined:k.mute_until},isEmptyLocalThread:function j(k){return c("MercuryIDs").tokenize(k.thread_id).type==="root"&&!k.timestamp},isMuted:function j(k){return h.getMuteSetting(k)!==undefined},areMentionsMuted:function j(k){return k.mentions_mute_mode===1},areReactionsMuted:function j(k){return k.reactions_mute_mode===1},isNewEmptyLocalThread:function j(k){return!!(h.isEmptyLocalThread(k)&&k.participants&&k.participants.length===0)},showComposer:function j(k){return!!(k.is_subscribed&&(k.can_reply||!k.cannot_reply_reason||k.cannot_reply_reason===c("MessengerThreadCannotReplyReason").BLOCKED)&&!k.has_email_participant&&!k.read_only)},isColdOpen:function j(k){return!!(k.is_canonical_user&&(k.message_count===0||!k.timestamp))}};function i(j){return j+"@facebook.com"}f.exports=h}),null);
__d("MercuryNotificationRenderer",["fbt","MercuryAssert","MercuryIDs","MercuryMessages","MercuryParticipants","MercuryThreads","MercuryViewer","MessagingGenericAdminTextType"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("MercuryMessages").get(),j=c("MercuryThreads").get(),k="source:messenger_growth:event_upcoming_bump";function l(m,n){__p&&__p();c("MercuryAssert").isThreadID(m);j.getThreadMeta(m,function(o){__p&&__p();i.getThreadMessagesRange(m,0,1,function(p){__p&&__p();var q=p.length&&p[p.length-1],r=[];if(q.tags!==undefined)r=r.concat(q.tags);if(q.log_message_data&&(q.log_message_data.message_type==c("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST||q.log_message_data.message_type==c("MessagingGenericAdminTextType").WORK_INVITE_CLAIMED))n(h._("New contact added"));else if(r.indexOf(k)!==-1)n(h._("You have an upcoming event."));else if(q&&q.author!=c("MercuryViewer").getID())c("MercuryParticipants").get(q.author,function(s){__p&&__p();var t=s.short_name,u=o.custom_nickname;if(u){var v=c("MercuryIDs").getUserIDFromParticipantID(s.id);if(u[v])t=u[v]}if(o.name)n(h._("{senderName} messaged {groupName}",[h.param("senderName",t),h.param("groupName",o.name)]));else if(c("MercuryIDs").isGroupChat(m))n(h._("{name} messaged your group",[h.param("name",t)]));else n(h._("{name} messaged you",[h.param("name",t)]))});else n(h._("New message!"))})})}f.exports={renderDocumentTitle:l}}),null);
__d("MercuryTimestampTracker",["MercuryActionType","MercuryDispatcher","MercuryPayloadSource","MercurySingletonProvider"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};function h(j){this.$MercuryTimestampTracker1=j;this.$MercuryTimestampTracker3=0;this.$MercuryTimestampTracker2=c("MercuryDispatcher").getForFBID(this.$MercuryTimestampTracker1);this.$MercuryTimestampTracker2.subscribe("update-messages",this.$MercuryTimestampTracker4.bind(this))}h.prototype.$MercuryTimestampTracker4=function(j,k){if(!k.actions||!k.actions.length)return;if(k.payload_source===c("MercuryPayloadSource").CLIENT_SEND_MESSAGE||k.payload_source===c("MercuryPayloadSource").UNKNOWN)return;for(var l=0;l<k.actions.length;l++){var m=k.actions[l],n=m.action_type;if(n==c("MercuryActionType").USER_GENERATED_MESSAGE&&m.thread_id&&m.timestamp>this.$MercuryTimestampTracker3)this.$MercuryTimestampTracker3=m.timestamp}};h.prototype.getLastUserMessageTimestamp=function(){return this.$MercuryTimestampTracker3};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("ChatTitleBarBlinker",["ChatActivity","DocumentTitle","JSLogger","MercuryThreadInformer","MercuryNotificationRenderer","PresenceState","MercuryTimestampTracker"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryThreadInformer").get(),i=c("MercuryTimestampTracker").get(),j=c("JSLogger").create("chat_title"),k=null,l=0,m=false;function n(){if(k){k.stop();k=null;return true}return false}function o(u){var v=u||i.getLastUserMessageTimestamp();if(l<=v){l=v;if(n()||m)c("PresenceState").doSync()}}var p={blink:function u(v,w){if(!k&&l<w)c("MercuryNotificationRenderer").renderDocumentTitle(v,function(x){if(!k)k=c("DocumentTitle").blink(x)})},stopBlinking:function u(){o()},blinkingElsewhere:function u(){m=true}};function q(u){var v=c("PresenceState").verifyNumber(u.sb2);if(!v||v<=l)return null;return v}function r(u){var v=u&&q(u);if(v){l=v;j.debug("load",l);n();m=false}}function s(u){var v=q(u);if(!v){j.debug("store",l);u.sb2=l;m=false}return u}c("PresenceState").registerStateStorer(s);c("PresenceState").registerStateLoader(r);h.subscribe("thread-read-changed",function(u,v){var w=i.getLastUserMessageTimestamp(),x=0;for(var y in v)if(v[y].mark_as_read&&v[y].timestamp>=w&&v[y].timestamp>x)x=v[y].timestamp;x&&o(x)});c("ChatActivity").subscribe("activity",function(){return o()});var t=c("PresenceState").getInitial();if(t)l=q(t)||0;f.exports=p}),null);
__d("MercuryIgnoredBlockedParticipants.bs",["bs_caml_obj","bs_js_boolean","MercuryIDs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(l,m,n){var o=n.participants.filter(function(p){return+(p!==c("MercuryIDs").getParticipantIDFromUserID(l))});return o.filter(function(p){return+(+m.has(p)!==0)})}function i(l,m,n){return c("bs_js_boolean").to_js_boolean(1-+n.is_canonical&&+(h(l,m,n).length>0))}function j(l,m,n){if(n.is_canonical)return[];else return h(l,m,n)}function k(l,m,n){var o=+n.is_canonical;if(o!==0){var p=n.participants.filter(function(q){return c("bs_caml_obj").caml_notequal(q,c("MercuryIDs").getParticipantIDFromUserID(l))});return c("bs_js_boolean").to_js_boolean(1-+p.every(function(q){return 1-+m.has(q)}))}else return false}g.findIntersection=h;g.isPresentInGroupThread=i;g.participantsInGroupThread=j;g.qualifiesAs=k}),null);
__d("MercuryBlockedParticipants.bs",["Set","Utils.bs","MercuryIDs","bs_js_primitive","MercuryDispatcher","MercurySingletonProvider.bs","MercuryIgnoredBlockedParticipants.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(m,n){__p&&__p();var o=n.message_blocked_ids;if(o==null)return 0;else{o.forEach(function(p){if(m.has(p)){+m["delete"](p);return 0}else{m.add(p);return 0}});return 0}}function i(m){__p&&__p();var n=new(c("Set"))(),o=c("MercuryDispatcher").getForFBID(m);o.subscribe("update-blocked-users",function(p,q){__p&&__p();var r=q.actions;if(!(r==null))r.forEach(function(t){return h(n,t)});h(n,q);var s=c("Utils.bs").$pipe$unknown(c("bs_js_primitive").null_undefined_to_opt(q.participants),[]);s.forEach(function(t){__p&&__p();var r=c("Utils.bs").nullUndefinedBooleanToOptionBool(t.is_messenger_blocked),u=t.fbid;if(r)if(r[0]!==0)if(u==null)return 0;else{n.add(c("MercuryIDs").getParticipantIDFromUserID(u));return 0}else if(u==null)return 0;else{+n["delete"](c("MercuryIDs").getParticipantIDFromUserID(u));return 0}else return 0});return 0});return{findIntersection:function p(q){return c("MercuryIgnoredBlockedParticipants.bs").findIntersection(m,n,q)},isPresentInGroupThread:function p(q){return c("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(m,n,q)},blockedParticipantsInGroupThread:function p(q){return c("MercuryIgnoredBlockedParticipants.bs").participantsInGroupThread(m,n,q)},isMessageBlocked:function p(q){return c("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(m,n,q)},__fbid:m}}var j=c("MercurySingletonProvider.bs").Provider([i]),k=j[0],l=j[1];g.getForFBID=k;g.get=l}),null);
__d("SoundPlayer",["Map","URI","createArrayFromMixed"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("Map"))();function i(l){var m=new(c("URI"))(l);return m.getDomain()?l:new(c("URI"))(window.location.href).setPath(m.getPath()).toString()}function j(l){var m=new(c("URI"))(l).getPath();if(/\.mp3$/.test(m))return"audio/mpeg";if(/\.og[ga]$/.test(m))return"audio/ogg";return""}var k={preload:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;if(h.has(r))return;var s=document.createElement("audio");if(!s||!s.canPlayType||!s.canPlayType(j(r)))continue;s.preload="auto";s.src=i(r);document.body&&document.body.appendChild(s);h.set(r,s);return}},play:function l(m){__p&&__p();var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];for(var o=c("createArrayFromMixed")(m),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;if(!h.has(s))k.preload(s);var t=h.get(s);if(!t)continue;if(n.loop)t.setAttribute("loop","");if(n.volume)t.volume=n.volume;t.play();return}},pause:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();return}}},stop:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();s.removeAttribute("src");s.src=i(r);return}}}};f.exports=k}),null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function a(b,c,d,e,f,g){__p&&__p();var h="fb_sounds_playing3";function i(){__p&&__p();var m=c("WebStorage").getLocalStorage();if(m)try{var n=m[h];if(n){n=JSON.parse(n);if(Array.isArray(n))return n}}catch(o){}return[]}function j(m){var n=c("WebStorage").getLocalStorage();if(n){var o=i();o.push(m);while(o.length>5)o.shift();try{n[h]=JSON.stringify(o)}catch(p){}}}function k(m){return i().some(function(n){return n===m})}var l={play:function m(n,o,p){n=c("createArrayFromMixed")(n);o=o||n[0]+Math.floor(Date.now()/1e3);if(k(o))return;c("SoundPlayer").play(n,{loop:!!p});j(o)},isSupported:function m(){return!!c("WebStorage").getLocalStorage()}};f.exports=l}),null);
__d("SoundRPC",["Event","FBJSON","SoundSynchronizer"],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k,l){c("SoundSynchronizer").play(j,k,l)}var i={playLocal:h,playRemote:function j(k,l,m,n){var o={name:"SoundRPC",data:{paths:l,sync:m,loop:n}};k.postMessage(c("FBJSON").stringify(o),"*")},supportsRPC:function j(){return!!window.postMessage},_listen:function j(){c("Event").listen(window,"message",function(k){if(!/\.facebook.com$/.test(k.origin))return;var l={};try{l=c("FBJSON").parse(k.data)}catch(m){}if(l.name==="SoundRPC")h(l.data.paths,l.data.sync,l.data.loop)})}};f.exports=i}),null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function a(b,c,d,e,f,g){__p&&__p();var h=null,i=false,j={init:function n(o){},play:function n(o,p,q){if(h)c("SoundRPC").playRemote(h.contentWindow,o,p,false);else c("SoundRPC").playLocal(o,p,q);i=true},hasPlayedSoundBefore:function n(){return i},playOnlyIfImmediate:function n(o,p,q){if(!i&&c("Visibility").isHidden())return;this.play(o,p,q)},stop:function n(o){if(!h)c("SoundPlayer").stop(o)}},k=new(c("URI"))(location.href);if(k.getSubdomain()&&k.getSubdomain()!=="www")k.setSubdomain("www");var l=k.getDomain();function m(){if(c("UserAgent_DEPRECATED").ie()<9)return false;if(c("SoundInitialData").RPC_DISABLED)return false;return c("SoundSynchronizer").isSupported()&&c("SoundRPC").supportsRPC()}if(c("isFacebookURI")(k)&&location.host!==l&&m()){h=document.createElement("iframe");h.setAttribute("src","//"+l+"/sound_iframe.php");h.style.display="none";document.body.appendChild(h)}f.exports=j}),null);
__d("MercuryBrowserAlerts",["ArbiterMixin","ChatActivity","ChatConfig","ChatOptions","ChatTitleBarBlinker","Event","Map","MercuryBlockedParticipants.bs","MercuryIDs","MercuryThreadInfo","MercuryThreads","MercuryViewer","MessagingTag","Sound","UserActivity"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryBlockedParticipants.bs").get(),i=c("MercuryThreads").get(),j=3,k=6e5,l=new(c("Map"))(),m=null;function n(){return!c("UserActivity").isOnTab()&&!c("UserActivity").hasBeenInactive()}function o(){l=new(c("Map"))()}function p(r){if(c("ChatOptions").getSetting("sound")&&!n())c("Sound").play([c("ChatConfig").get("sound.notif_ogg_url"),c("ChatConfig").get("sound.notif_mp3_url")],r,false)}var q=Object.assign({init:function r(){c("Event").listen(window,"focus",function(){o();clearInterval(m)});c("Event").listen(window,"blur",function(){m=setInterval(o,k)})},messageReceived:function r(s){__p&&__p();if(s.author&&c("MercuryViewer").isViewer(s.author)||!s.is_unread||s.folder!=c("MessagingTag").INBOX&&s.folder!=c("MessagingTag").ARCHIVED)return;var t=s.thread_id,u=c("ChatActivity").isActive();if(u){var v=false;q.inform("before-alert",{threadID:t,cancelAlert:function w(){v=true}})}i.getThreadMeta(t,function(w){__p&&__p();var x=c("MercuryThreadInfo").isMuted(w),y=c("MercuryIDs").getUserIDFromParticipantID(c("MercuryViewer").getID());if(x)if(!c("MercuryThreadInfo").areMentionsMuted(w)){if(!s.profile_ranges||!s.profile_ranges.some||!s.profile_ranges.some(function(B){return B.id===y}))return}else return;if(h.isPresentInGroupThread(w))return;var z=s.timestamp;if(u)!v&&p(z);else{c("ChatTitleBarBlinker").blink(t,z);var A=l.get(t)||0;if(A<j){l.set(t,A+1);p(z)}}c("ChatTitleBarBlinker").blinkingElsewhere()})}},c("ArbiterMixin"));f.exports=q}),null);
__d("ChatAppActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("keyMirror")({INITIAL_DISPLAY_DONE:null,HIDE:null,LOAD:null,TTI:null,UNHIDE:null})}),null);
__d("ChatAppActions",["ChatDispatcher","ChatAppActionTypes"],(function a(b,c,d,e,f,g){"use strict";var h={tti:function i(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").TTI})},hide:function i(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").HIDE})},unhide:function i(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").UNHIDE})},setInitialDisplayDone:function i(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").INITIAL_DISPLAY_DONE})},load:function i(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").LOAD})}};f.exports=h}),null);
__d("ChatAppStore",["ChatAppActionTypes","ChatDispatcher","FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("ChatDispatcher"));this.$ChatAppStore2={initialDisplayDone:false,isHidden:false,isInitialized:false,isLoaded:false};this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2)}j.prototype.__onDispatch=function(k){__p&&__p();var l=k.type;this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2);switch(l){case c("ChatAppActionTypes").INITIAL_DISPLAY_DONE:this.$ChatAppStore2.initialDisplayDone=true;this.__emitChange();break;case c("ChatAppActionTypes").HIDE:this.$ChatAppStore2.isHidden=true;this.__emitChange();break;case c("ChatAppActionTypes").UNHIDE:this.$ChatAppStore2.isHidden=false;this.__emitChange();break;case c("ChatAppActionTypes").TTI:this.$ChatAppStore2.isInitialized=this.$ChatAppStore2.isLoaded=true;this.__emitChange();break;case c("ChatAppActionTypes").LOAD:this.$ChatAppStore2.isLoaded=true;this.__emitChange();break}};j.prototype.getPreviousState=function(){return this.$ChatAppStore1};j.prototype.getState=function(){return this.$ChatAppStore2};f.exports=new j()}),null);
__d("ChatPrivacyActionController",["ChatVisibility","JSLogger","PresencePrivacy"],(function a(b,c,d,e,f,g){__p&&__p();var h=function h(i,j){__p&&__p();this._userID=i;this._logger=c("JSLogger").create("blackbird");this._getState=function(){if(c("ChatVisibility").isOnline())return c("PresencePrivacy").allows(this._userID)?h.NORMAL:h.BLOCKED;return h.OFFLINE};this._togglePrivacy=function(){__p&&__p();var l=this._getState();switch(this._getState()){case h.OFFLINE:if(c("ChatVisibility").isOnline()){this._logger.error("tabs_already_online");break}this._logger.log("tabs_go_online",{tab_id:this._userID});c("ChatVisibility").goOnline(function(){if(!c("PresencePrivacy").allows(this._userID)){if(this._getState()!==h.BLOCKED)this._logger.error("privacy_action_controller_blocked_inconsistency");this._togglePrivacy()}}.bind(this));break;case h.BLOCKED:c("PresencePrivacy").allow(this._userID);this._logger.log("tabs_unblock",{tab_id:this._userID});break;case h.NORMAL:c("PresencePrivacy").disallow(this._userID);this._logger.log("tabs_block",{tab_id:this._userID});break}};var k=function(){j&&j(this._getState())}.bind(this);k();this._subscribeToken=c("PresencePrivacy").subscribe("privacy-changed",k)};h.OFFLINE="offline";h.BLOCKED="blocked";h.NORMAL="normal";Object.assign(h.prototype,{togglePrivacy:function i(){this._logger.log("gear_menu_toggle_privacy",{tab_id:this._userID});this._togglePrivacy()},destroy:function i(){this._subscribeToken&&c("PresencePrivacy").unsubscribe(this._subscribeToken)}});f.exports=h}),null);
__d("MontageDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationDispatcher"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=new j({strict:false})}),null);
__d("MontageActions",["MontageDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({REQUEST_UPDATE:null,HAS_UPDATED:null}),i={Types:h,requestUpdate:function j(k){c("MontageDispatcher").dispatch({type:h.REQUEST_UPDATE,threadFBID:k})},hasUpdated:function j(k){c("MontageDispatcher").dispatch({type:h.HAS_UPDATED,threadFBID:k})}};f.exports=i}),null);
__d("MercuryTypeaheadDataSource",["CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles","WorkModeConfig"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=[],k={},l={},m={},n=[],o=false,p=false;h=babelHelpers.inherits(q,c("DataSource"));i=h&&h.prototype;function q(r){"use strict";r=r||{};r.kanaNormalization=true;i.constructor.call(this,r);this.showDefaultList=r.showDefaultList||false}q.prototype.dirty=function(){"use strict";this.$MercuryTypeaheadDataSource1=j;this.localCache=l;this.queryCache=k;this.queryIDs=m;this.defaultList=n;return this};q.prototype.bootstrap=function(){"use strict";__p&&__p();if(o||p)return false;p=true;c("ShortProfiles").fetchAll().then(function(){this.updateBootstrapData();p=false;o=true;if(this.showDefaultList)this.inform("show-default")}.bind(this),function(){}.bind(this));return true};q.prototype.updateBootstrapData=function(){"use strict";__p&&__p();var r=this.getCachedShortProfileIDs(),s=c("WorkModeConfig").is_work_user?c("MercuryParticipantTypes").FB4C:c("MercuryParticipantTypes").FRIEND,t=r.map(function(v){var w=c("ShortProfiles").getNow(v),x=v==c("CurrentUser").getID()?s:w.type,y=[w.additionalName,w.alternateName].concat(w.searchTokens||[]).join(" "),z=w.name,A=null;return{uid:v,index:c("OrderedFriendsList").getActiveRank(v),text:z,subtext:A,tokens:y,localized_text:w.name,additional_text:w.additionalName,photo:w.thumbSrc,render_type:x,type:c("MercuryTypeaheadConstants").USER_TYPE}});if(t.length)this.addEntries(t);if(!this.showDefaultList)return;var u=t.sort(function(v,w){return v.index-w.index}).slice(0,5);n=this.buildData(u.map(function(v){return v.uid}));this.defaultList=n};q.prototype.query=function(r,s,t,u){"use strict";var v=s||r.length===1;return i.query.call(this,r,v,t,u)};q.prototype.getQueryData=function(r,s){"use strict";return babelHelpers["extends"]({},i.getQueryData.call(this,r,s))};q.prototype.setEntry=function(r,s){"use strict";this.$MercuryTypeaheadDataSource1[r]=s};q.prototype.getEntry=function(r){"use strict";return this.$MercuryTypeaheadDataSource1[r]||null};q.prototype.getCachedShortProfileIDs=function(){"use strict";var r=c("ShortProfiles").getCachedProfileIDs(),s=r.filter(function(t){var u=c("ShortProfiles").getNow(t);return t==c("CurrentUser").getID()||u.type===c("MercuryParticipantTypes").FRIEND||u.type===c("MercuryParticipantTypes").FB4C});return s};q.prototype.isBootstrapped=function(){"use strict";return o};q.prototype.isBootstrapping=function(){"use strict";return p};q.prototype.processEntries=function(r,s){"use strict";r=r.map(function(t){if(t.index==null&&(t.render_type===c("MercuryParticipantTypes").FRIEND||t.render_type===c("MercuryParticipantTypes").FB4C))t.index=c("OrderedFriendsList").getActiveRank(t.uid);return t});return i.processEntries.call(this,r)};q.prototype.mergeUids=function(r,s,t,u){"use strict";var v=s.sort(function(w,x){return this.getEntry(w).index-this.getEntry(x).index}.bind(this));return i.mergeUids.call(this,r,v,t,u)};q.prototype.setShowDefaultList=function(r){"use strict";this.showDefaultList=r};f.exports=q}),null);
__d("ChatTabTypeaheadDataSource",["MercuryTypeaheadConstants","MercuryTypeaheadDataSource"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("MercuryTypeaheadDataSource"));i=h&&h.prototype;function j(k){"use strict";k=k||{};k.maxResults=c("MercuryTypeaheadConstants").COMPOSER_CHATTAB_MAX;i.constructor.call(this,k);this.$ChatTabTypeaheadDataSource1=true}j.prototype.buildData=function(k){"use strict";__p&&__p();var l=[],m=[],n=[],o=[],p=[],q=[],r=[];k.forEach(function(t){__p&&__p();var u=i.getEntry.call(this,t);switch(u.render_type){case c("MercuryTypeaheadConstants").FRIEND_TYPE:l.push(t);break;case c("MercuryTypeaheadConstants").THREAD_TYPE:if(this.$ChatTabTypeaheadDataSource1)m.push(t);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:n.push(t);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:o.push(t);break;case c("MercuryTypeaheadConstants").PAGE_TYPE:if(this.$ChatTabTypeaheadDataSource1)p.push(t);break;case c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:r.push(t);break;default:break}}.bind(this),this);var s=q.concat(l,o,m,p,n,r);return i.buildData.call(this,s)};j.prototype.query=function(k,l,m,n){"use strict";return i.query.call(this,k,l,m,n)};j.prototype.respond=function(k,l,m){"use strict";return i.respond.call(this,k,l,m)};j.prototype.setShowThreads=function(k){"use strict";this.$ChatTabTypeaheadDataSource1=k};f.exports=j}),null);
__d("DisplayGenderConst",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNKNOWN:"UNKNOWN",FEMALE:"FEMALE",MALE:"MALE",NEUTER:"NEUTER"})}),null);
__d("bs_js_types",["bs_block"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){__p&&__p();if(typeof k==="undefined")return[0,k];else if(k===null)return[1,k];else if(typeof k==="number")return[3,k];else if(typeof k==="string")return[4,k];else if(typeof k==="boolean")return[2,k];else if(typeof k==="function")return[5,k];else if(typeof k==="object")return[6,k];else return[7,k]}function i(k){__p&&__p();var l=typeof k;if(l==="undefined")return 3;else if(k===null)return 2;else if(l==="number")return c("bs_block").__(0,[k]);else if(l==="string")return c("bs_block").__(1,[k]);else if(l==="boolean")if(k===true)return 1;else return 0;else if(l==="function")return c("bs_block").__(2,[k]);else if(l==="object")return c("bs_block").__(3,[k]);else return c("bs_block").__(4,[k])}function j(k,l){switch(l){case 0:return+(typeof k==="undefined");case 1:return+(k===null);case 2:return+(typeof k==="boolean");case 3:return+(typeof k==="number");case 4:return+(typeof k==="string");case 5:return+(typeof k==="function");case 6:return+(typeof k==="object");case 7:return+(typeof k==="symbol")}}g.reify_type=h;g.test=j;g.classify=i}),null);
__d("FBID.bs",["invariant","bs_js_exn","bs_string","gkx","bs_js_types","bs_js_boolean"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(l){if(c("gkx")("AT5AGDWr7VWKZPg1PvTz69G07vIW7nWrxrA4PloGCgjyPuof8r7WUUsWLIKzWOZMmcJyN6U1BeEUXZmBqPUEAKAe")){c("bs_js_boolean").to_js_boolean(c("bs_js_types").test(l,4))||h(0);c("bs_js_boolean").to_js_boolean(+(l!=="0"))||h(0);var m=/^[0-9]+$/;c("bs_js_boolean").to_js_boolean(+m.test(l))||h(0)}return l}function j(l){try{return[i(l)]}catch(m){var n=c("bs_js_exn").internalToOCamlException(m);if(n[0]===c("bs_js_exn").$$Error)return 0;else throw n}}var k=c("bs_string").compare;g.compare=k;g.ofString=j;g.ofStringExn=i}),null);
__d("MessagingThreadType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ONE_TO_ONE:1,GROUP:2,ROOM:3,MONTAGE:4,MARKETPLACE:5})}),null);
__d("MessengerServerPayloadTransformer.bs",["URI","FBID.bs","bs_array","Utils.bs","bs_string","getByPath","bs_caml_array","bs_js_boolean","MercuryIDs","bs_caml_format","GenderConst","bs_js_primitive","WorkModeConfig","bs_js_null_undefined","DisplayGenderConst","MessagingThreadType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs","MessengerThreadCannotReplyReason"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function c(f){__p&&__p();var g=f.location_coordinates,h=g==null?[null,null]:[g.latitude,g.longitude],i=f.location_page,j;if(i==null)j=null;else{var k=i.address;j=k==null?null:k.full_address}var l=f.allows_rsvp,m=l!==0?1:0,n=a("bs_array").fold_left(function(p,q){p[q.node.id]=q.guest_list_state;return p},{},f.event_reminder_members.edges),o=f.lightweight_event_creator;return{creator_id:o==null?null:o.id,event_members:n,event_time:f.time,event_type:f.lightweight_event_type,latitude:h[0],longitude:h[1],location_address:j,location_name:f.location_name,note:f.note,oid:f.id,related_event:f.related_event,repeat_mode:f.repeat_mode,seconds_to_notify_before:f.seconds_to_notify_before,status:f.lightweight_event_status,title:f.event_title,track_rsvp:m}}function d(f){__p&&__p();var g=f.associated_object;if(g==null)return null;else{var h=g.action_link,i;if(h==null)i=null;else{var j=+a("WorkModeConfig").is_work_user,k=j!==0?a("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";i=new(a("URI"))(h).setDomain(k)}var l=g.profile_picture;return{id:g.id,name:g.name,action_link:i,profile_picture:l==null?null:{uri:l.uri},room_type:g.room_type,privacy_mode:g.privacy_mode,approval_mode_toggleable:g.approval_mode_toggleable,start_timestamp:g.start_timestamp,event_place:g.event_place,mentorship_program:g.mentorship_program}}}function fa(f){var g=f.related_page_thread;if(g==null)return null;else{var h=a("bs_array").map(function(k){return k.name},g.custom_thread_tags.nodes),i=g.page,j=i==null?null:i.id;return{flagged:g.is_flagged,pageID:j,customTagNames:h}}}function ga(f){__p&&__p();var g=f.thread_key.other_user_id;if(g==null)return 0;else{var h=f.all_participants.nodes;return a("bs_array").fold_left(function(i,j){var k=j.messaging_actor;if(k.id===g)return+(k.__typename==="User");else return i},0,h)}}function ha(f){__p&&__p();if(f.length){var g={};a("bs_array").iter(function(h){var i=h.nickname;if(i==null)return 0;else{g[h.participant_id]=i;return 0}},f);return g}else return null}function ia(f){if(!(f==null)&&f!=="")return"#"+a("bs_string").sub(f,2,f.length-2|0);else return null}function ja(f){return f.thread_key.thread_fbid}function ka(f){return f.thread_key.other_user_id}function la(f){return a("bs_js_primitive").null_undefined_to_opt(a("getByPath")(f,["messages","page_info"]))}function e(f){__p&&__p();var g=f.gender,h=f.url,i;if(h==null)i=null;else{var j=+a("WorkModeConfig").is_work_user,k=j!==0?a("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";i=new(a("URI"))(h).getUnqualifiedURI().setDomain(k).setProtocol("https").toString()}var l=f.big_image_src,m=f.big_image_src,n=f.__typename,o;switch(n){case"Page":o="page";break;case"User":o="user";break;default:o=null}var p=f.accepts_messenger_user_feedback,q=f.is_viewer_friend,r=f.is_messenger_user,s=f.is_verified,t=f.is_messenger_platform_bot,u=f.is_message_blocked_by_viewer,v=f.is_viewer_subscribed_to_message_updates,w=f.is_viewer_coworker,x=f.scim_company_user,y;if(x==null)y=null;else{var z=x.company_title;if(z==="")y=null;else{var A=a("bs_js_null_undefined").bind(f.work_info,function(C){return a("bs_js_null_undefined").bind(C.work_community,function(D){return D.name})});y=A==null?z:""+(String(z)+(" \u2022 "+(String(A)+"")))}}var B=f.is_employee;return{id:"fbid:"+f.id,fbid:f.id,gender:g==null?a("GenderConst").NOT_A_PERSON:g===a("DisplayGenderConst").MALE?a("GenderConst").MALE_SINGULAR:g===a("DisplayGenderConst").FEMALE?a("GenderConst").FEMALE_SINGULAR:a("GenderConst").NOT_A_PERSON,href:i,image_src:l==null?null:l.uri,big_image_src:m==null?null:m.uri,name:f.name,short_name:a("Utils.bs").$pipe$unknown(a("bs_js_primitive").null_undefined_to_opt(f.short_name),f.name),type:o,vanity:f.username,accepts_messenger_user_feedback:p==null?false:p,is_friend:q==null?false:q,is_messenger_user:r==null?false:r,is_business_enabled:f.__typename==="Page"?true:false,is_verified:s==null?false:s,is_messenger_platform_bot:t==null?false:t,is_messenger_ignored:null,is_messenger_blocked:u==null?false:u,is_subscribed_to_page_updates:v==null?true:v,is_coworker:w==null?true:w,title:y,employee:B==null?false:B}}function ma(f){return a("bs_array").map(function(g){return e(g.messaging_actor)},f.all_participants.nodes)}function na(f,g){__p&&__p();var h=g.read_receipts;if(h==null)return 0;else{var i={};a("bs_array").iter(function(j){var h=j.actor;if(!(h==null)&&f!==h.id){i[h.id]={action:a("bs_caml_format").caml_float_of_string(j.action),watermark:a("bs_caml_format").caml_float_of_string(j.watermark)};return 0}else return 0},h.nodes);return[i]}}function oa(f){__p&&__p();var g=f.delivery_receipts;if(g==null)return[];else return g.nodes.sort(function(h,i){var j=a("bs_caml_format").caml_float_of_string(h.timestamp_precise),k=a("bs_caml_format").caml_float_of_string(i.timestamp_precise);if(j>k)return-1;else if(j===k)return 0;else return 1})}function pa(f,g,h){var i=g.messages;if(i==null)return 0;else return[a("bs_array").map(function(j){return a("MessengerMessageTransformer.bs").transformMessage(f,j,{thread_id:null,thread_fbid:g.thread_key.thread_fbid,other_user_fbid:g.thread_key.other_user_id,folder:a("bs_string").lowercase(g.folder)},h)},i.nodes)]}function qa(f,g,h){__p&&__p();var i=a("bs_array").map(function(Z){var ra=a("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(Z),k=Z.extensible_attachment,$;if(k==null)$=null;else{var l=k.story_attachment;$={legacy_attachment_id:k.legacy_attachment_id,story_attachment:l==null?null:a("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(l)}}return{snippet:Z.snippet,message_sender:Z.message_sender,timestamp_precise:Z.timestamp_precise,commerce_message_type:Z.commerce_message_type,extensible_attachment:$,blob_attachments:ra,sticker:Z.sticker,extensible_message_admin_text:Z.extensible_message_admin_text}},g.last_message.nodes),j={thread_key:g.thread_key,name:g.name,all_participants:g.all_participants,last_message:{nodes:i},unread_count:g.unread_count,message_count:g.messages_count,image:g.image,updated_time_precise:g.updated_time_precise,mute_until:g.mute_until,is_pin_protected:g.is_pin_protected,is_viewer_subscribed:g.is_viewer_subscribed,is_canonical_neo_user:g.is_canonical_neo_user,thread_queue_enabled:g.thread_queue_enabled,folder:g.folder,has_viewer_archived:g.has_viewer_archived,is_page_follow_up:g.is_page_follow_up,cannot_reply_reason:g.cannot_reply_reason,ephemeral_ttl_mode:g.ephemeral_ttl_mode,customization_info:g.customization_info,thread_admins:g.thread_admins,approval_mode:g.approval_mode,joinable_mode:g.joinable_mode,thread_queue_metadata:g.thread_queue_metadata,event_reminders:g.event_reminders,montage_thread:g.montage_thread,last_read_receipt:g.last_read_receipt,related_page_thread:g.related_page_thread,rtc_call_data:g.rtc_call_data,associated_object:g.associated_object,reactions_mute_mode:g.reactions_mute_mode,mentions_mute_mode:g.mentions_mute_mode,privacy_mode:g.privacy_mode,customization_enabled:g.customization_enabled,thread_type:g.thread_type,participant_add_mode_as_string:g.participant_add_mode_as_string,participants_event_status:g.participants_event_status,marketplace_thread_data:g.marketplace_thread_data,page_comm_item:g.page_comm_item,group_approval_queue:g.group_approval_queue},k=j.customization_info,l;if(k==null)l=[null,null,null];else{var m=k.emoji;l=[ia(k.outgoing_bubble_color),m==null?null:{emoji:m},ha(k.participant_customizations)]}var n=j.page_comm_item,o=n==null?[null,null,null,null,null]:[n.comm_status,n.comm_source_id,n.id,n.subtitle,n.comm_item_owners],p=j.last_message.nodes.length?[a("bs_caml_array").caml_array_get(j.last_message.nodes,0)]:0,q=j.last_read_receipt.nodes.length?[a("bs_caml_array").caml_array_get(j.last_read_receipt.nodes,0)]:0,r;if(p){var s=p[0];r=a("MessengerAttachmentTransformer.bs").transformAttachment(f,{extensible_attachment:s.extensible_attachment,blob_attachments:s.blob_attachments,sticker:s.sticker},h)}else r=[];var t;if(p){var u=p[0].extensible_message_admin_text;if(u==null)t=null;else{var v=u.game;t=v==null?null:v.id}}else t=null;var w=j.cannot_reply_reason,x=j.thread_queue_metadata,y=j.thread_type,z=j.montage_thread,A=j.image,B=j.thread_key.other_user_id,C=j.thread_queue_metadata,D=j.name,E=j.thread_key.other_user_id,F;if(E==null){var G=j.thread_key.thread_fbid;F=G==null?null:G}else F=E;var H=j.rtc_call_data,I;if(H==null)I=null;else{var J=H.initiator;I={call_state:H.call_state,server_info_data:H.server_info_data,initiator_fbid:J==null?0:a("bs_caml_format").caml_float_of_string(J.id)}}var K=j.marketplace_thread_data,L;if(K==null)L=null;else{var M=K.for_sale_item,N;if(M==null)N=null;else{var O=M.id,P=M.formatted_price,Q=M.location,R;if(Q==null)R=null;else{var S=Q.reverse_geocode;R={reverse_geocode:S==null?null:{city:S.city,state:S.state}}}var T=M.primary_photo,U;if(T==null)U=null;else{var V=T.image;U=V==null?null:V.uri}N={id:O==null?0:a("bs_caml_format").caml_float_of_string(O),story_id:M.story_id,title:M.group_commerce_item_title,price:P==null?null:P.text,location:R,is_sold:M.is_sold,image_uri:U}}var W=K.buyer,X=K.seller;L={for_sale_item:N,buyer_fbid:W==null?0:a("bs_caml_format").caml_float_of_string(W.id),seller_fbid:X==null?0:a("bs_caml_format").caml_float_of_string(X.id)}}var Y=j.group_approval_queue;return{admin_ids:a("bs_array").map(function(Z){return Z.id},j.thread_admins),approval_mode:j.approval_mode,approval_queue_ids:x==null?[]:a("bs_array").map(function(Z){return a("MercuryIDs").getParticipantIDFromUserID(a("FBID.bs").ofStringExn(Z.id))},x.approval_requests.nodes),can_reply:w==null?true:false,cannot_reply_reason:j.cannot_reply_reason,custom_color:l[0],custom_like_icon:l[1],custom_nickname:l[2],customization_enabled:j.customization_enabled,thread_type:y==null?null:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("MessagingThreadType")[y])),participant_add_mode:j.participant_add_mode_as_string,ephemeral_ttl_mode:j.ephemeral_ttl_mode,folder:a("bs_string").lowercase(j.folder),has_email_participant:w==null?false:a("bs_js_boolean").to_js_boolean(+(w===a("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT)),has_montage:z==null?false:true,image_src:A==null?null:A.uri,is_archived:a("bs_js_boolean").to_js_boolean(j.has_viewer_archived),is_page_follow_up:a("bs_js_boolean").to_js_boolean(j.is_page_follow_up),is_canonical_user:a("bs_js_boolean").to_js_boolean(ga(j)),is_canonical:B==null?false:true,is_pin_protected:a("bs_js_boolean").to_js_boolean(j.is_pin_protected),is_subscribed:a("bs_js_boolean").to_js_boolean(j.is_viewer_subscribed),is_canonical_neo_user:a("bs_js_boolean").to_js_boolean(j.is_canonical_neo_user),is_thread_queue_enabled:C==null?false:true,joinable_mode:{mode:a("bs_caml_format").caml_int_of_string(j.joinable_mode.mode),link:j.joinable_mode.link},last_message_timestamp:p?a("bs_caml_format").caml_float_of_string(p[0].timestamp_precise):0,last_message_type:p?p[0].commerce_message_type:null,last_read_timestamp:q?a("bs_caml_format").caml_float_of_string(q[0].timestamp_precise):0,lightweight_event:j.event_reminders.nodes.length?c(a("bs_caml_array").caml_array_get(j.event_reminders.nodes,0)):null,message_count:j.message_count,mute_until:j.mute_until,name:D==null?"":D,other_user_fbid:j.thread_key.other_user_id,page_thread_info:fa(j),participants:a("bs_array").map(function(Z){return a("MercuryIDs").getParticipantIDFromUserID(Z.messaging_actor.id)},j.all_participants.nodes),participants_event_status:j.participants_event_status,read_only:w==null?false:a("bs_js_boolean").to_js_boolean(+(w===a("MessengerThreadCannotReplyReason").READ_ONLY)),recipients_loadable:w==null?true:a("bs_js_boolean").to_js_boolean(+(w!==a("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE)),server_timestamp:a("bs_caml_format").caml_float_of_string(j.updated_time_precise),snippet_attachments:r,snippet_sender:p?a("MercuryIDs").getParticipantIDFromUserID(p[0].message_sender.messaging_actor.id):null,snippet:p?p[0].snippet:null,thread_fbid:F,thread_id:"",timestamp:a("bs_caml_format").caml_float_of_string(j.updated_time_precise),unread_count:j.unread_count,rtc_call_data:I,marketplace_thread_data:L,associated_object:d(j),reactions_mute_mode:j.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:j.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:o[0],page_comm_item_id:o[2],comm_source_id:o[1],subtitle:o[3],comm_item_owners:o[4],group_approval_queue:Y==null?null:Y.nodes,game_id:t}}b.getThreadFBID=ja;b.getOtherUserID=ka;b.getMessagePageInfo=la;b.transformParticipant=e;b.transformParticipants=ma;b.transformReadReceipts=na;b.transformDeliveryReceipts=oa;b.transformMessages=pa;b.transformThread=qa}),null);
__d("MercuryCanonicalGroupThreadManager",["Bootloader","KeyedCallbackManager","MercuryIDs","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MercuryThreads","MessengerServerPayloadTransformer.bs","MercuryServerDispatcher","SubscriptionsHandler"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){this.$MercuryCanonicalGroupThreadManager1=j;this.$MercuryCanonicalGroupThreadManager2=new(c("KeyedCallbackManager"))();this.$MercuryCanonicalGroupThreadManager3=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercuryCanonicalGroupThreadManager1);this.$MercuryCanonicalGroupThreadManager6=c("MercuryThreads").getForFBID(this.$MercuryCanonicalGroupThreadManager1);this.$MercuryCanonicalGroupThreadManager4={};this.$MercuryCanonicalGroupThreadManager8();this.$MercuryCanonicalGroupThreadManager9();this.$MercuryCanonicalGroupThreadManager7={}}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.getCanonicalGroupThreadIDForParticipants=function(j,k){j=this.$MercuryCanonicalGroupThreadManager10(j);var l=this.$MercuryCanonicalGroupThreadManager11(j),m=this.$MercuryCanonicalGroupThreadManager2.executeOrEnqueue(l,k);this.$MercuryCanonicalGroupThreadManager12(j);return m};h.prototype.unsubscribe=function(j){if(j)this.$MercuryCanonicalGroupThreadManager2.unsubscribe(j)};h.prototype.$MercuryCanonicalGroupThreadManager11=function(j){return j.sort().join(",")};h.prototype.$MercuryCanonicalGroupThreadManager13=function(j,k){var l=c("MercuryIDs").getThreadIDFromThreadFBID(k);this.$MercuryCanonicalGroupThreadManager2.setResource(j,l);this.$MercuryCanonicalGroupThreadManager4[l]=j};h.prototype.$MercuryCanonicalGroupThreadManager12=function(j){var k=this.$MercuryCanonicalGroupThreadManager11(j),l={canonical_group_key:k,participants:j};c("MercuryServerDispatcher").trySend("/ajax/mercury/search_canonical_groups.php",l,null,this.$MercuryCanonicalGroupThreadManager1)};h.prototype.$MercuryCanonicalGroupThreadManager8=function(){c("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_canonical_groups.php":{request_user_id:this.$MercuryCanonicalGroupThreadManager1,mode:c("MercuryServerDispatcher").IMMEDIATE,handler:function(j){this.handleUpdate(j)}.bind(this)}})};h.prototype.$MercuryCanonicalGroupThreadManager10=function(j){if(j.indexOf(this.$MercuryCanonicalGroupThreadManager1)===-1)j.push(this.$MercuryCanonicalGroupThreadManager1);return j};h.prototype.handleUpdate=function(j){if(j.graphql_payload){var k=c("MessengerServerPayloadTransformer.bs").transformThread(j.viewer,j.graphql_payload,j.for_page);this.$MercuryCanonicalGroupThreadManager3.handleUpdate({threads:[k],payload_source:c("MercuryPayloadSource").SERVER_SEARCH})}var l=j.canonical_group;if(l)for(var m in l)this.$MercuryCanonicalGroupThreadManager13(m,l[m])};h.prototype.getNow=function(j){var k=this.$MercuryCanonicalGroupThreadManager11(this.$MercuryCanonicalGroupThreadManager10(j));return this.$MercuryCanonicalGroupThreadManager2.getResource(k)};h.prototype.$MercuryCanonicalGroupThreadManager9=function(){c("Bootloader").loadModules(["MercuryThreadInformer"],function(j){var k=j.getForFBID(this.$MercuryCanonicalGroupThreadManager1),l=new(c("SubscriptionsHandler"))();l.addSubscriptions(k.subscribe("threads-deleted",function(m,n){for(var o in n)if(this.$MercuryCanonicalGroupThreadManager4[o]){this.$MercuryCanonicalGroupThreadManager2.setResource(this.$MercuryCanonicalGroupThreadManager4[o],undefined);delete this.$MercuryCanonicalGroupThreadManager4[o]}}.bind(this)));this.$MercuryCanonicalGroupThreadManager5=l}.bind(this),"MercuryCanonicalGroupThreadManager")};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("FantaGetMessageActions",["FantaDispatcher","MercuryCanonicalGroupThreadManager","MercuryIDs","MercuryTypeaheadConstants","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({ADD_PARTICIPANTS:null,CLEAR_PARTICIPANTS:null,CLEAR_PREVIEW:null,FETCH_MORE_MESSAGES:null,ON_BOOTLOAD_TYPEAHEAD:null,ON_GET_APPROVAL_QUEUE_RESPONSE:null,ON_GET_THREAD_PREVIEW_RESPONSE:null,ON_GET_THREAD_RESPONSE:null,ON_MESSAGE_STORE_RESPONSE:null,ON_PAGE_NULL_RESPONSE:null,ON_PRIVACY_STATE_CHANGE:null,ON_SHOW_CONTEXT_BANNER_TIMER:null,REFRESH_THREAD:null,THREADS_UPDATED:null}),i={Types:h,addParticipants:function j(k,l){__p&&__p();var m,n=l.length===1&&l[0].getInfo().render_type===c("MercuryTypeaheadConstants").THREAD_TYPE,o=void 0;if(n){var p=l[0].getInfo().mercury_thread;if(p)o=c("MercuryIDs").getThreadIDFromThreadFBID(p.thread_fbid)}else if(l.length===1){var q=l[0].info&&l[0].info.uid;if(q)o=c("MercuryIDs").getThreadIDFromUserID(q)}else if(l.length===0){c("FantaDispatcher").dispatch({type:h.CLEAR_PARTICIPANTS,tabID:k});return}else(function(){var r=c("MercuryCanonicalGroupThreadManager").get(),s=l.map(function(u){return u.info.uid});c("FantaDispatcher").dispatch({type:h.CLEAR_PREVIEW,tabID:k,tokens:l});var t=r.getCanonicalGroupThreadIDForParticipants(Array.from(s),function(o){r.unsubscribe(t);if(o)c("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:o,tabID:k,tokens:l})})})();if(o)c("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:o,tabID:k,tokens:l})},onBootloadTypeahead:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_BOOTLOAD_TYPEAHEAD,tabID:k,thread:l})},fetchMoreMessages:function j(k){c("FantaDispatcher").dispatch({type:h.FETCH_MORE_MESSAGES,threadID:k})},refreshThread:function j(k){c("FantaDispatcher").dispatch({type:h.REFRESH_THREAD,threadID:k})},onGetThreadResponse:function j(k){c("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_RESPONSE,thread:k})},onGetThreadPreviewResponse:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_PREVIEW_RESPONSE,tabID:k,thread:l})},onApprovalQueueResponse:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_GET_APPROVAL_QUEUE_RESPONSE,membershipParticipants:l,tabID:k})},onShowContextBannerTimer:function j(k){c("FantaDispatcher").dispatch({type:h.ON_SHOW_CONTEXT_BANNER_TIMER,threadID:k})},onMessageStoreResponse:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_MESSAGE_STORE_RESPONSE,messages:k,tabID:l})},threadsUpdated:function j(k){c("FantaDispatcher").dispatch({type:h.THREADS_UPDATED,threads:k})},onPrivacyStateChange:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_PRIVACY_STATE_CHANGE,threadID:k,privacyState:l})},onPageNullResponse:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_PAGE_NULL_RESPONSE,threadID:k,nullStateCTA:l})}};f.exports=i}),null);
__d("FantaTabSheetActions",["FantaDispatcher","LogHistory","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({CLOSE_ADD_FRIENDS_SHEET:null,CLOSE_ADD_MORE_FRIENDS_SHEET:null,CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:null,CLOSE_EMPLOYEE_WORK_USER_SHEET:null,CLOSE_NAME_CONVERSATION_TAB_SHEET:null,CLOSE_PAGE_INDICATOR_SHEET:null,CLOSE_READ_ONLY_PERMANENT_SHEET:null,CLOSE_READ_ONLY_SHEET:null,CLOSE_USER_FOCUS_AND_BYPASS_SHEET:null,CLOSE_USER_TIMEZONE_SHEET:null,ON_BOOTLOAD_EVENT_REMINDER:null,ON_WORK_DO_NOT_DISTURB_RESPONSE:null,ON_MENTORSHIP_PROGRAM_RESPONSE:null,ON_IS_PAGE_TAB:null,OPEN_ADD_MORE_FRIENDS_SHEET:null,OPEN_APPOINTMENT_SHEET:null,OPEN_BYPASS_FOCUS_SHEET:null,OPEN_EMPLOYEE_AWAY_SHEET:null,OPEN_EMPLOYEE_PERSONAL_USER_SHEET:null,OPEN_EMPLOYEE_WORK_USER_SHEET:null,OPEN_NAME_CONVERSATION_TAB_SHEET:null,OPEN_PAGE_INDICATOR_SHEET:null,OPEN_READ_ONLY_PERMANENT_SHEET:null,OPEN_READ_ONLY_SHEET:null,OPEN_USER_FOCUS_SHEET:null,OPEN_USER_TIMEZONE_SHEET:null,OPEN_WORK_DO_NOT_DISTURB_SHEET:null,OPEN_MENTORSHIP_PROGRAM_SHEET:null}),i=c("LogHistory").getInstance("fanta_sheets");function j(l){c("FantaDispatcher").dispatch(l);i.log(l.type,l.tabID)}var k={Types:h,openUserFocusSheet:function l(m){j({type:h.OPEN_USER_FOCUS_SHEET,tabID:m})},openBypassFocusSheet:function l(m){j({type:h.OPEN_BYPASS_FOCUS_SHEET,tabID:m})},closeUserFocusAndBypassSheet:function l(m){j({type:h.CLOSE_USER_FOCUS_AND_BYPASS_SHEET,tabID:m})},openUserTimezoneSheet:function l(m,n){j({type:h.OPEN_USER_TIMEZONE_SHEET,tabID:m,timezoneInfo:n})},closeUserTimezoneSheet:function l(m){j({type:h.CLOSE_USER_TIMEZONE_SHEET,tabID:m})},openAddMoreFriendsSheet:function l(m){j({type:h.OPEN_ADD_MORE_FRIENDS_SHEET,tabID:m})},closeAddMoreFriendsSheet:function l(m){j({type:h.CLOSE_ADD_MORE_FRIENDS_SHEET,tabID:m})},closeAddFriendsSheet:function l(m){j({type:h.CLOSE_ADD_FRIENDS_SHEET,tabID:m})},openNameConversationSheet:function l(m){j({type:h.OPEN_NAME_CONVERSATION_TAB_SHEET,tabID:m})},closeNameConversationSheet:function l(m){j({type:h.CLOSE_NAME_CONVERSATION_TAB_SHEET,tabID:m})},openReadOnlySheet:function l(m){j({type:h.OPEN_READ_ONLY_SHEET,tabID:m})},closeReadOnlySheet:function l(m){j({type:h.CLOSE_READ_ONLY_SHEET,tabID:m})},openReadOnlyPermanentSheet:function l(m){j({type:h.OPEN_READ_ONLY_PERMANENT_SHEET,tabID:m})},closeReadOnlyPermanentSheet:function l(m){j({type:h.CLOSE_READ_ONLY_PERMANENT_SHEET,tabID:m})},openEmployeeAwaySheet:function l(m){j({type:h.OPEN_EMPLOYEE_AWAY_SHEET,tabID:m})},openEmployeePersonalUserSheet:function l(m){j({type:h.OPEN_EMPLOYEE_PERSONAL_USER_SHEET,tabID:m})},closeEmployeePersonalUserSheet:function l(m){j({type:h.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET,tabID:m})},openEmployeeWorkUserSheet:function l(m){j({type:h.OPEN_EMPLOYEE_WORK_USER_SHEET,tabID:m})},closeEmployeeWorkUserSheet:function l(m){j({type:h.CLOSE_EMPLOYEE_WORK_USER_SHEET,tabID:m})},openPageIndicatorSheet:function l(m,n){j({type:h.OPEN_PAGE_INDICATOR_SHEET,description:n,tabID:m})},closePageIndicatorSheet:function l(m){j({type:h.CLOSE_PAGE_INDICATOR_SHEET,tabID:m})},openWorkDoNotDisturbSheet:function l(m,n){j({type:h.OPEN_WORK_DO_NOT_DISTURB_SHEET,description:n,tabID:m})},openMentorshipProgramSheet:function l(m){j({type:h.OPEN_MENTORSHIP_PROGRAM_SHEET,tabID:m})},onIsPageTab:function l(m,n){j({type:h.ON_IS_PAGE_TAB,pageIndicator:n,tabID:m})},onBootloadEventReminder:function l(m){j({type:h.ON_BOOTLOAD_EVENT_REMINDER,tabID:m})},openAppointmentBannerSheet:function l(m){j({type:h.OPEN_APPOINTMENT_SHEET,tabID:m})},onWorkDoNotDisturbResponse:function l(m,n,o){j({type:h.ON_WORK_DO_NOT_DISTURB_RESPONSE,tabID:m,status:n,description:o})},onMentorshipProgramResponse:function l(m,n,o){j({type:h.ON_MENTORSHIP_PROGRAM_RESPONSE,tabID:m,groupID:o,programName:n})}};f.exports=k}),null);
__d("MercurySheetPolicy",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={ChatThreadIsMutedTabSheet:{isPermanent:false,isSheetWithInput:false},ChatUserFocusSheet:{isPermanent:true,isSheetWithInput:true},ChatUserFocusBypassSheet:{isPermanent:true,isSheetWithInput:true},ChatUserTimezoneSheet:{isPermanent:true,isSheetWithInput:true},ChatUserBlockedTabSheet:{isPermanent:true,isSheetWithInput:false},ChatUploadWarningTabSheet:{isPermanent:false,isSheetWithInput:false},ChatThreadIsMessageBlockedSheet:{isPermanent:true,isSheetWithInput:false},ChatReadOnlyTabSheet:{isPermanent:false,isSheetWithInput:false},ChatReadOnlyPermanentTabSheet:{isPermanent:true,isSheetWithInput:false},ChatOfflineTabSheet:{isPermanent:true,isSheetWithInput:false},ChatNoRecipientsTabSheet:{isPermanent:true,isSheetWithInput:false},ChatNewMessagesTabSheet:{isPermanent:true,isSheetWithInput:true},ChatNameConversationTabSheet:{isPermanent:true,isSheetWithInput:true},ChatEmployeeAwaySheet:{isPermanent:true,isSheetWithInput:false},ChatEventReminderTabSheet:{isPermanent:true,isSheetWithInput:false},ChatAppointmentBanner:{isPermanent:true,isSheetWithInput:false},ChatMontageSheet:{isPermanent:false,isSheetWithInput:false},ChatJoinCallSheet:{isPermanent:true,isSheetWithInput:false},FantaAddFriendsSheet:{isPermanent:true,isSheetWithInput:true},FantaAddMoreFriendsSheet:{isPermanent:true,isSheetWithInput:true},ChatRoomAssociatedObjectSheet:{isPermanent:false,isSheetWithInput:false},ChatWorkDoNotDisturbSheet:{isPermanent:false,isSheetWithInput:false},ChatMentorshipProgramSheet:{isPermanent:false,isSheetWithInput:false}},i={canReplaceOpenSheet:function j(k,l){var m=this.getType(l),n=this.isPermanent(l),o=this.isSheetWithInput(l),p=this.getType(k),q=this.isPermanent(k),r=this.isSheetWithInput(k);if(r)return!!(m!==p&&o);if(q&&!n)return false;if(p===this.sheets.ChatThreadIsMessageBlockedSheet)return false;return true},getType:function j(k){var l=k.getType||k.type&&k.type.getType||function(){return k},m=l.call(k);return m},isPermanent:function j(k){if(typeof k==="string"&&h[k])return h[k].isPermanent;var l=k.isPermanent||k.type&&k.type.isPermanent||function(){return false},j=l.call(k);return j},isSheetWithInput:function j(k){if(typeof k==="string"&&h[k])return h[k].isSheetWithInput;var l=k.isSheetWithInput||k.type&&k.type.isSheetWithInput||function(){return false},j=l.call(k);return j},sheets:c("keyMirror")(h)};f.exports=i}),null);
__d("TimeSpentRoomTypeEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT"})}),null);
__d("MessageThreadAssociatedObjectUtils",["TimeSpentRoomTypeEnum"],(function a(b,c,d,e,f,g){"use strict";var h={shouldRender:function i(j){return j&&j.room_type===c("TimeSpentRoomTypeEnum").GROUP&&!j.is_workplace_community},isLinkedToGroupChat:function i(j){return j&&j.room_type===c("TimeSpentRoomTypeEnum").GROUP&&!j.is_workplace_community}};f.exports=h}),null);
__d("MessengerApprovalModeTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OPEN:0,APPROVALS:1})}),null);
__d("MessengerJoinableModeType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PRIVATE:0,JOINABLE:1})}),null);
__d("MessengerParticipantAddModeTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADD:"ADD",INVITE:"INVITE",ADD_INVITE:"ADD_INVITE"})}),null);
__d("MessengerAdminGroupUtils",["fbt","MercuryConfig","MercuryIDs","MessageThreadAssociatedObjectUtils","MessengerApprovalModeTypes","MessengerJoinableModeType","MessengerParticipantAddModeTypes","WorkModeConfig","CurrentUser","QE2Logger","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i="messenger_use_new_group_participant_suggestion_ranking",j="show_nullstate_chat_tab_composer",k="show_nullstate_chat_tab_group_chat",l={isJoinableAndOpenThread:function m(n){return this.isJoinableThread(n)&&this.isApprovalOpenThread(n)},isJoinableAndApprovalRequiredThread:function m(n){return!!(this.isJoinableThread(n)&&n&&n.approval_mode===c("MessengerApprovalModeTypes").APPROVALS)},shouldAddToApprovalQueue:function m(n,o){return!!(this.isJoinableAndApprovalRequiredThread(n)&&n&&!l.isViewerAdmin(n.admin_ids,o))},isJoinableThread:function m(n){return!!(c("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&n&&n.is_thread_queue_enabled===true&&n.joinable_mode&&n.joinable_mode.mode===c("MessengerJoinableModeType").JOINABLE)},isGroupChat:function m(n){return!!(n&&c("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(n.associated_object))},shouldInvite:function m(n){return!!(c("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&n&&n.participant_add_mode===c("MessengerParticipantAddModeTypes").INVITE)},isApprovalOpenThread:function m(n){return!!(c("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&n&&n.approval_mode===c("MessengerApprovalModeTypes").OPEN)},isOwner:function m(n,o){return n&&this.isJoinableThread(o)},canSeeGroupOptions:function m(n,o,p){var q=c("WorkModeConfig").is_work_user;return!q&&this.isJoinableThread(o)},canSeeBotsInGroupTypeahead:function m(){var n=c("CurrentUser").isWorkUser();return n&&c("gkx")("AT5GhC4rylRpYKpnZf2oEtsedOSc0WCJLB5V8z6-mqCNieSKORSJnqenUlgYVRpQaRNASrJq2SeIYY3m4QNhPBlK")},canMakeOthersAdmins:function m(n,o,p){return this.isOwner(n,p)&&!o},canMakeSelfAdmin:function m(n,o){return this.isJoinableThread(o)&&o.admin_ids.length===0&&n},canRemoveAdmin:function m(n,o,p){return this.isOwner(n,p)&&o},canRemoveFromGroup:function m(n,o){return this.isOwner(n,o)||!this.isJoinableThread(o)},showJoinableLink:function m(n){var o=!!(n&&n.joinable_mode&&n.joinable_mode.link),p=l.isJoinableThread(n);return p&&o},showJoinableApprovalToggle:function m(n,o){if(n.associated_object&&!n.associated_object.approval_mode_toggleable)return false;var p=l.isViewerAdmin(n.admin_ids,o);return l.isOwner(p,n)},showApprovalQueue:function m(n,o){var p=l.isViewerAdmin(n.admin_ids,o),q=l.isOwner(p,n),r=0;if(n&&n.approval_queue_ids&&n.approval_queue_ids.length)r=n.approval_queue_ids.length;var s=l.isJoinableAndApprovalRequiredThread(n);return s&&q&&r>0},showParticipantsModal:function m(n,o,p){return this.isJoinableThread(p)&&!n&&!o},useNewGroupMemberSuggestionRanking:function m(){c("QE2Logger").logExposureForUser(i);return c("MercuryConfig").MessengerNewGroupParticipantSuggestionQE},showDefaultListForNewPersonAddChatTab:function m(){c("QE2Logger").logExposureForUser(k);return c("MercuryConfig").ChatGroupChat},showDefaultListForNewChatTab:function m(){c("QE2Logger").logExposureForUser(j);return c("MercuryConfig").ChatComposer},canUpdateThreadCustomization:function m(n,o){var p=l.isJoinableThread(n),q=l.isViewerAdmin(n.admin_ids,o);return n.is_subscribed&&(!p||q)},isViewerAdmin:function m(n,o){return this.isAdmin(n,c("MercuryIDs").getParticipantIDFromUserID(o))},isAdmin:function m(n,o){return n!==null&&n!==undefined&&n.indexOf(o)!==-1},getLeaveGroupBodyText:function m(n,o){return this.isOwner(n,o)?h._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."):h._("You will stop receiving messages from this conversation and people will see that you left.")},getLeaveGroupTitleText:function m(n,o){return this.isOwner(n,o)?h._("Leave this conversation?"):h._("Leave Conversation?")},getLeaveGroupButtonText:function m(n,o){return this.isOwner(n,o)?h._("Leave converstaion"):h._("Leave")},getMakeOwnerBodyText:function m(n,o){return n?h._("As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."):h._("As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners.",[h.param("owner's name",o)])},getMakeOwnerTitleText:function m(n){return n?h._("Become group owner?"):h._("Add group owner?")},getMakeOwnerButtonText:function m(n){return n?h._("Become owner"):h._("Make owner")},getRemoveOwnerBodyText:function m(n,o,p){var q=void 0;if(n&&o)q=h._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group.");else if(n&&!o)q=h._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group.");else q=h._("\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group.",[h.param("owner's name",p)]);return q}};f.exports=l}),null);
__d("MessengerRoomPrivacyMode",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({WHITELISTED_MODE:0,PUBLIC_MODE:1})}),null);
__d("FantaComposeViewReducers",["Bootloader","FantaGetMessageActions","FantaTabSheetActions","MercuryDataSourceWrapper","MercurySheetPolicy","MercuryTypeaheadConstants","MessengerRoomPrivacyMode","MessengerAdminGroupUtils","ifRequired"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FantaGetMessageActions").Types,i=c("FantaTabSheetActions").Types;function j(r,s){switch(s.type){case h.ON_GET_THREAD_RESPONSE:case h.ON_GET_THREAD_PREVIEW_RESPONSE:var t=s.thread,u=s.tabID||t.thread_id;r=k(r,t,u)}return r}function k(r,s,t){if(s.participants.length===0){r=m(r,t,s);r=p(r,t,c("MercurySheetPolicy").sheets.FantaAddFriendsSheet)}return r}function l(r,s){switch(s.type){case h.ON_BOOTLOAD_TYPEAHEAD:var t=s.thread,u=t.thread_id;r=m(r,u,t)}return r}function m(r,s,t){__p&&__p();var u=r.mercury.tabContents.get(s);if(!u||u.typeahead)return r;c("ifRequired")("ChatTabTypeaheadRenderer",function(v){__p&&__p();c("ifRequired")("ContextualTypeaheadView",function(w){__p&&__p();c("ifRequired")("MercuryTypeahead",function(x){__p&&__p();if(!r.mercury.tabContents.get(s))return;var y=!!(t&&t.participants&&t.participants.length===0),z=!!(t&&t.associated_object&&t.associated_object.privacy_mode===c("MessengerRoomPrivacyMode").WHITELISTED_MODE),A=y?c("MercuryDataSourceWrapper").chat_typeahead_source:z?c("MercuryDataSourceWrapper").chat_add_people_froup_source:c("MercuryDataSourceWrapper").chat_add_people_source;A.setShowThreads(y);if(y)A.setShowDefaultList(c("MessengerAdminGroupUtils").showDefaultListForNewChatTab());else if(!z)A.setShowDefaultList(c("MessengerAdminGroupUtils").showDefaultListForNewPersonAddChatTab());if(z)A.setQueryData({thread_id:t.thread_fbid});var B=new x(A,w);B.setViewOption("renderer",v);B.setExcludedParticipantsFromThreadMeta(t);u=u.merge({typeahead:B});r=r.setIn(["mercury","tabContents",s],u)},function(){return o(s,t)})},function(){return o(s,t)})},function(){return o(s,t)});return r}function n(r,s){switch(s.type){case i.OPEN_ADD_MORE_FRIENDS_SHEET:var t=s.tabID,u=r.mercury.tabContents.get(t).thread;if(u){r=m(r,t,u);return p(r,s.tabID,c("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet)}}return r}function o(r,s){c("Bootloader").loadModules(["ChatTabTypeaheadRenderer","ContextualTypeaheadView","MercuryTypeahead"],function(t,u,v){c("FantaGetMessageActions").onBootloadTypeahead(r,s)},"FantaComposeViewReducers")}function p(r,s,t){var u=r.mercury.tabContents.get(s),v=r.tabGroup.tabs.get(s);if(!v||!u)return r;var w=u,x=w.openSheet;if(x&&!c("MercurySheetPolicy").canReplaceOpenSheet(x,t))return r;u=u.merge({openSheet:t});r=r.setIn(["mercury","tabContents",s],u);return r}function q(r,s){switch(s.type){case h.ADD_PARTICIPANTS:var t=s.tokens,u=s.tabID,v=t.length===1&&t[0].getInfo().render_type===c("MercuryTypeaheadConstants").THREAD_TYPE;if(!v)return p(r,u,c("MercurySheetPolicy").sheets.FantaAddFriendsSheet)}return r}f.exports={addParticipants:q,onBootloadTypeahead:l,onGetThreadResponse:j,openAddMoreFriends:n}}),null);
__d("FantaTypeFileUploader",["immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=Object.freeze({ANIMATED_IMAGE:"animated_image",AUDIO:"audio",FILE:"file",GENERIC_ATTACHMENT:"generic_attachment",IMAGE:"image",VIDEO:"video"}),k={uploadedFiles:c("immutable").Map(),uploadingFiles:c("immutable").Map()};h=babelHelpers.inherits(l,c("immutable").Record(k));i=h&&h.prototype;l.prototype.getTypeIDs=function(m){return this.uploadedFiles.reduce(function(n,o){if(o.type===m&&o.uploadedID)n=n.concat(o.uploadedID);return n},[])};function l(){h.apply(this,arguments)}l.fileTypes=j;f.exports=l}),null);
__d("FantaTypeSharePreview",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={isLoading:false,params:null,type:null,uri:null};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("FantaTypeComposer",["FantaTypeFileUploader","FantaTypeSharePreview","immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=0,k={fileUploader:new(c("FantaTypeFileUploader"))(),sharePreview:new(c("FantaTypeSharePreview"))(),text:"",version:j};h=babelHelpers.inherits(l,c("immutable").Record(k));i=h&&h.prototype;function l(){i.constructor.call(this,{version:++j})}f.exports=l}),null);
__d("FantaMessageActions",["Bootloader","FantaDispatcher","FantaTypeComposer","MercuryConfig","ifRequired","keyMirror","emptyFunction","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({CANCEL_FILE_UPLOAD:null,COMPOSER_TEXT_UPDATE:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,PREPARE_FILES_FOR_SEND:null,RECEIVED_NEW_MESSAGE:null,REMOVE_SHARE_PREVIEW:null,SEND_GROUP_MESSAGE:null,SEND_HOT_LIKE:null,SEND_MESSAGE:null,SEND_PHOTO:null,SEND_STICKER:null,UPDATE_GROUP_NAME:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null});function i(){var l=document.createElement("form");l.action=c("MercuryConfig").upload_url;l.method="post";return l}function j(l,m){var n=document.createElement("input");n.type="file";n.name="attachment[]";n.multiple=true;if(m)n.onchange=m;l.appendChild(n);return n}var k={Types:h,prepareFilesForSend:function l(m,n,o){this.dispatchOrBootloadUploader(function(){c("FantaDispatcher").dispatch({type:h.PREPARE_FILES_FOR_SEND,tabID:m,files:n,composer:o})})},openUploadFilePicker:function l(m,n){var o=i(),p=j(o,function(){k.prepareFilesForSend(m,this.files,n)});p.click()},uploadedFile:function l(m,n,o){this.dispatchOrBootloadUploader(function(){c("FantaDispatcher").dispatch({type:h.UPLOADED_FILE,tabID:m,uploadID:n,payload:o})})},uploadFileFailed:function l(m,n){this.dispatchOrBootloadUploader(function(){c("FantaDispatcher").dispatch({type:h.UPLOAD_FILE_FAILED,tabID:m,uploadID:n})})},cancelFileUpload:function l(m,n){this.dispatchOrBootloadUploader(function(){c("FantaDispatcher").dispatch({type:h.CANCEL_FILE_UPLOAD,tabID:m,uploadID:n})})},linkPreview:function l(m,n){this.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:h.LINK_PREVIEW,tabID:m,uri:n})})},loadedShareData:function l(m,n,o){this.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:h.LOADED_SHARE_DATA,tabID:m,attachmentData:n,composer:o})})},loadingShareData:function l(m,n){this.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:h.LOADING_SHARE_DATA,composer:n,tabID:m})})},removeSharePreview:function l(m,n){this.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:h.REMOVE_SHARE_PREVIEW,tabID:m,composer:n})})},receivedNewMessage:function l(m,n){c("FantaDispatcher").dispatch({type:h.RECEIVED_NEW_MESSAGE,tabID:m,message:n})},updateGroupName:function l(m,n){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.UPDATE_GROUP_NAME,threadID:m,newName:n})})},sendGroupMessage:function l(m,n){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.SEND_GROUP_MESSAGE,threadID:m,onSendSuccess:n})})},sendMessage:function l(m,n,o,p){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.SEND_MESSAGE,threadID:m,message:n,composer:o,onSendSuccess:p})})},sendPhoto:function l(m,n,o){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.SEND_PHOTO,onSendSuccess:o,photoData:n,threadID:m})})},sendHotLike:function l(m,n,o,p,q){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.SEND_HOT_LIKE,emoji:n,onSendSuccess:q,size:o,source:p,threadID:m})})},sendSticker:function l(m,n,o){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.SEND_STICKER,threadID:m,stickerID:n,onSendSuccess:o})})},composerTextUpdate:function l(m,n,o){if(n.length>0)c("ifRequired")("FantaReducersSendMessages",c("emptyFunction"),function(){return this.dispatchOrBootloadSendMessages(c("emptyFunction"))}.bind(this));this.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:h.COMPOSER_TEXT_UPDATE,composer:o,message:n,threadID:m})})},dispatchOrBootloadSendMessages:function l(m){c("ifRequired")("FantaReducersSendMessages",function(){c("setImmediate")(m)},function(){c("Bootloader").loadModules(["FantaAppStore","FantaReducersSendMessages"],function(n,o){n.addReducers(o);c("setImmediate")(m)},"FantaMessageActions")})},dispatchOrBootloadUploader:function l(m){c("ifRequired")("FantaReducersFileUploader",function(){m()},function(){c("Bootloader").loadModules(["FantaAppStore","FantaReducersFileUploader"],function(n,o){n.addReducers(o);m()},"FantaMessageActions")})},dispatchOrBootloadSharePreview:function l(m){c("ifRequired")("FantaReducersSharePreview",function(){m()},function(){c("Bootloader").loadModules(["FantaAppStore","FantaReducersSharePreview"],function(n,o){n.addReducers(o);m()},"FantaMessageActions")})}};f.exports=k}),null);
__d("FantaReducersCookie",["FantaMessageActions","FantaTabActions","PresenceState","throttle"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FantaMessageActions").Types,i=c("FantaTabActions").Types,j=c("throttle").acrossTransitions(c("PresenceState").doSync,500);function k(n,o){switch(o.type){case h.RECEIVED_NEW_MESSAGE:case i.CLOSE_ALL_TABS:case i.CLOSE_AND_TAB_NEXT:case i.CLOSE_TAB:case i.DELETE_TAB:case i.MINIMIZE_ALL_TABS:case i.MINIMIZE_TAB:case i.OPEN_TAB:case i.OPEN_TAB_WITH_INTERSTITIAL_DATA:case i.REPLACE_TAB:case i.UNMINIMIZE_TAB:j();return m(n)}return n}function l(n,o){switch(o.type){case i.LOAD_FROM_DATA:var p=n.tabGroup,q=o.tabData,r=p.updatedTime,s=r>=q.updatedTime||q.updatedTime===undefined?r:q.updatedTime;return n.mergeIn(["tabGroup"],{updatedTime:s})}return n}function m(n){return n.mergeIn(["tabGroup"],{updatedTime:Date.now()})}f.exports={updateCookie:k,loadFromData:l}}),null);
__d("FantaReducersDockCalculator",["Arbiter","FantaTabActions","FantaMessageActions","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FantaTabActions").Types,i=c("FantaMessageActions").Types,j=null;function k(n){j=n;c("setImmediate")(function(){c("Arbiter").inform("FantaReducersDockCalculator/shouldRecalculate")})}function l(n){__p&&__p();if(!j||n.size!==j.size)k(n);else{var o=false;n.forEach(function(p){var q=j&&j.get(p.id);if(!q||p.isMinimized!==q.isMinimized)o=true});if(o)k(n)}}function m(n,o){var p=n.tabGroup.tabs;switch(o.type){case h.CLOSE_ALL_TABS:case h.CLOSE_AND_TAB_NEXT:case h.CLOSE_TAB:case h.DELETE_TAB:case h.MINIMIZE_ALL_TABS:case h.MINIMIZE_TAB:case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:case h.UNMINIMIZE_TAB:k(p);break;case h.LOAD_FROM_DATA:case i.RECEIVED_NEW_MESSAGE:l(p);break}return n}f.exports={recalculateDock:m}}),null);
__d("FantaReducersLogging",["Bootloader","FantaMessageActions","FantaTabActions"],(function a(b,c,d,e,f,g){"use strict";var h=c("FantaMessageActions").Types,i=c("FantaTabActions").Types;function j(k,l){switch(l.type){case i.CLOSE_ALL_TABS:case i.CLOSE_AND_TAB_NEXT:case i.CLOSE_TAB:case i.DELETE_TAB:case i.OPEN_TAB:case i.OPEN_TAB_WITH_INTERSTITIAL_DATA:var m=k.tabGroup.allowedRaisedTabs,n=k.tabGroup.getRaisedandUnraisedTabs(),o=n.raisedTabs,p=n.unraisedTabs,q=o.count(),r=q+p.count();c("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(s){new s().setAllowedRaisedTabs(m).setOpenTabs(r).setVisibleTabs(q).log()},"FantaReducersLogging")}return k}f.exports={updateVisibleTabs:j}}),null);
__d("FantaAvailableStatus",["AvailableListConstants","ChatVisibility","MercuryIDs","PresenceStatus","ShortProfiles"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports={isAvailable:function h(i,j){var k=void 0,l=this.getStatus(i,j),m=c("MercuryIDs").getUserIDFromThreadID(j);if(m)k=c("ShortProfiles").getNow(m);return l===c("AvailableListConstants").ACTIVE&&(k===undefined||k===null||!k.is_messenger_only)},getStatus:function h(i,j){__p&&__p();var k=c("AvailableListConstants").OFFLINE,l=c("MercuryIDs").getUserIDFromThreadID(j);if(l)k=c("PresenceStatus").get(l);else if(i){var m=i.participants.map(function(n){return c("MercuryIDs").getUserIDFromParticipantID(n)});k=c("PresenceStatus").getGroup(m)}if(!c("ChatVisibility").isOnline())k=c("AvailableListConstants").OFFLINE;return k}}}),null);
__d("FantaTypeJoinableThread",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={admins:[],approvalMode:0,associatedObject:null,description:null,friendsInParticipants:[],imageURL:null,isViewerSubscribed:false,isWorkpaceChat:false,joinableMode:{mode:0,link:""},linkHash:"",participants:[],threadID:null,threadFBID:null,threadName:null};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("FantaTypeTabContents",["ChatPrivacyActionController","FantaGetMessageActions","FantaTypeComposer","immutable","ImmutableObject","MercuryIDs","emptyFunction","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j={composer:new(c("FantaTypeComposer"))(),hasFetchedAll:false,id:"",isMultiCompany:null,isScrolledToBottom:true,joinableInterstitialData:null,membershipParticipants:null,mentorship:null,messages:c("immutable").List(),messageStore:null,nullStateCTA:null,openSheet:null,pageIndicator:null,pageIndicatorDescription:null,privacyController:null,showContextBanner:false,showUnseenMessages:c("emptyFunction"),signatureID:null,thread:null,threadPreviewID:null,threadPreviewRecipients:null,timezoneInfo:null,typeahead:null,workAvailabilityHumanReadable:null,workAvailabilityStatus:null};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(l){var m=void 0,n=c("MercuryIDs").getUserIDFromThreadID(l.id);if(n)m=new(c("ChatPrivacyActionController"))(n,function(o){c("setImmediate")(function(){c("FantaGetMessageActions").onPrivacyStateChange(l.id,o)})});i.constructor.call(this,babelHelpers["extends"]({privacyController:m},l))}f.exports=k}),null);
__d("WorkFocusMode",["invariant","WorkModeConfig","WorkUserAvailabilityStatusType","emptyFunction","ifRequired"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={},j={status:"AVAILABLE",end_date:0};if(c("WorkModeConfig").availability){j.status=c("WorkModeConfig").availability.status;j.end_date=c("WorkModeConfig").availability.end_date}f.exports={updateAvailability:function k(l,m){var n=Object.keys(c("WorkUserAvailabilityStatusType")).find(function(o){return c("WorkUserAvailabilityStatusType")[o]===l});typeof n==="string"||h(0);j.status=n;j.end_date=m},currentViewerInFocusMode:function k(l){__p&&__p();if(!c("WorkModeConfig").focus_messaging_enabled)return false;if(l){if(i[l])return false;var m=null;c("ifRequired")("MercuryThreads",function(o){m=o.get().getThreadMetaNow(l)},c("emptyFunction"));if(m&&m.bypass_focus_mode_until&&m.bypass_focus_mode_until>Date.now()/1e3)return false}var n=c("WorkUserAvailabilityStatusType")[j.status];if(n===c("WorkUserAvailabilityStatusType").FOCUS&&j.end_date*1e3>Date.now())return true;return false},addBypassFocusModeForThread:function k(l){i[l]=true},removeBypassFocusModeForThread:function k(l){i[l]=false}}}),null);
__d("FantaReducersMercury",["Arbiter","AsyncSignal","AvailableList","AvailableListConstants","Bootloader","FantaAvailableStatus","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTabSheetActions","FantaTypeJoinableThread","FantaTypeTabContents","JSLogger","MercuryIDs","MercuryThreadIDMap","TimeSlice","WorkFocusMode","getPageIDFromThreadID","ifRequired","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryThreadIDMap").get(),i=c("JSLogger").create("FantaReducersMercury"),j=c("FantaMessageActions").Types,k=c("FantaTabActions").Types,l=c("FantaGetMessageActions").Types;function m(){return Math.floor(Math.random()*2147483648).toString(16)}function n(G,H){__p&&__p();switch(H.type){case k.OPEN_TAB:case k.OPEN_TAB_WITH_INTERSTITIAL_DATA:var I=H.tabID;c("ifRequired")("FantaTabsReactApp",function(M){if(!c("MercuryIDs").isValidThreadID(I)){G=G.deleteIn(["tabGroup","tabs",I]);v(I)}else D(G,I)},function(){return G=o(G,H.tabID)});G=q(G,I);var J=m(),K=G.mercury.tabContents.get(I);K=K.merge({signatureID:J});G=G.setIn(["mercury","tabContents",I],K);new(c("AsyncSignal"))("/ajax/chat/opentab_tracking.php",{threadID:I,userID:c("MercuryIDs").getUserIDFromThreadID(I),signatureID:J}).send();if(H.interstitialData){var L=new(c("FantaTypeJoinableThread"))(H.interstitialData);K=K.merge({joinableInterstitialData:L});G=G.setIn(["mercury","tabContents",I],K)}c("Arbiter").inform("jewel/hide");return G}return G}function o(G,H){c("ifRequired")("FantaTabsSlimApp",function(I){if(!c("MercuryIDs").isValidThreadID(H)){G=G.deleteIn(["tabGroup","tabs",H]);v(H)}else D(G,H)},function(){D(G,H)});return G}function p(G,H){switch(H.type){case j.RECEIVED_NEW_MESSAGE:G=q(G,H.tabID)}return G}function q(G,H){__p&&__p();var I,J=G.mercury.tabContents.get(H);if(!J){var I=function(){__p&&__p();var K=c("getPageIDFromThreadID")(H);if(K)c("Bootloader").loadModules(["PagesMercuryChatTabIndicatorHandler"],function(L){var M=c("AvailableListConstants").OFFLINE,N=new L(K,M,function(O){c("setImmediate")(function(){c("FantaTabSheetActions").openPageIndicatorSheet(H,O)})},function(){c("setImmediate")(function(){return c("FantaTabSheetActions").closePageIndicatorSheet(H)})});c("setImmediate")(function(){c("FantaTabSheetActions").onIsPageTab(H,N)});N.checkResponsiveness()},"FantaReducersMercury");return{v:G.setIn(["mercury","tabContents",H],new(c("FantaTypeTabContents"))({id:H}))}}();if(typeof I==="object")return I.v}return G}function r(G,H){switch(H.type){case k.REPLACE_TAB:G=u(G,H.newTabID);G=q(G,H.newTabID);return G}return G}function s(G,H){switch(H.type){case l.ADD_PARTICIPANTS:var I=H.tabID,J=H.previewTabID,K=G.mercury.tabContents.get(I);if(!K)return G;K=K.merge({threadPreviewID:J});G=G.setIn(["mercury","tabContents",I],K);return G}return G}function t(G,H){switch(H.type){case l.CLEAR_PARTICIPANTS:var I=H.tabID;G=G.setIn(["mercury","tabContents",I],new(c("FantaTypeTabContents"))({id:I}))}return G}function u(G,H){__p&&__p();c("ifRequired")("FantaTabsReactApp",function(I){if(!c("MercuryIDs").isValidThreadID(H)){G=G.deleteIn(["tabGroup","tabs",H]);v(H)}},function(){c("ifRequired")("FantaTabsSlimApp",function(I){if(!c("MercuryIDs").isValidThreadID(H)){G=G.deleteIn(["tabGroup","tabs",H]);v(H)}})});return G}function v(G){h.getClientIDFromServerID(G,function(H){return c("setImmediate")(function(){if(c("MercuryIDs").isValidThreadID(H))c("FantaTabActions").openTab(H);else i.error("invalid id",G)})})}function w(G,H){switch(H.type){case k.FOCUS_TAB:D(G,H.tabID)}return G}function x(G,H){switch(H.type){case k.CLOSE_TAB:var I=H.tabID;G=z(G,I)}return G}function y(G,H){switch(H.type){case k.DELETE_TAB:var I=H.tabID;G=z(G,I);G=G.deleteIn(["mercury","tabContents",I])}return G}function z(G,H){c("ifRequired")("MessengerVideoAutoplayActions",function(I){I.deleteThread(H)});c("WorkFocusMode")&&c("WorkFocusMode").removeBypassFocusModeForThread(H);return G}function A(G,H){switch(H.type){case k.CLOSE_ALL_TABS:c("ifRequired")("MessengerVideoAutoplayActions",function(I){I.deleteAllThreads()});return G}return G}function B(G,H){switch(H.type){case k.FOCUS_NEXT_TAB:case k.FOCUS_PREVIOUS_TAB:case k.CLOSE_AND_TAB_NEXT:var I=G.tabGroup.focusedTabID;if(I)D(G,I)}return G}function C(G,H){switch(H.type){case k.CLOSE_AND_TAB_NEXT:var I=H.tabID;c("WorkFocusMode")&&c("WorkFocusMode").removeBypassFocusModeForThread(I)}return G}function D(G,H){__p&&__p();var I=c("MercuryIDs").getUserIDFromThreadID(H);if(I){var J=function J(){c("AvailableList").updateForID(I)};c("TimeSlice").guard(J,"superfluous request to first open DD",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()}var K=G.mercury.tabContents.get(H);if(K){var L=K.thread,M=K.pageIndicator;if(M)M.notifyPageOnlineStatusChanged(c("FantaAvailableStatus").getStatus(L,H))}}function E(G,H){switch(H.type){case k.UNMINIMIZE_TAB:D(G,H.tabID)}return G}function F(G,H){__p&&__p();switch(H.type){case k.LOAD_FROM_DATA:for(var I=G.tabGroup.tabs.keys(),J=Array.isArray(I),K=0,I=J?I:I[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var L;if(J){if(K>=I.length)break;L=I[K++]}else{K=I.next();if(K.done)break;L=K.value}var M=L;G=q(G,M)}}return G}f.exports={addParticipants:s,clearParticipants:t,closeAllTabs:A,closeAndTabNext:C,closeTab:x,deleteTab:y,focusTab:w,focusTabEvents:B,loadFromData:F,openTab:n,receivedNewMessage:p,replaceTab:r,unminimizeTab:E}}),null);
__d("FantaReducersMessages",["CurrentUser","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTypeComposer","MercuryBrowserAlerts","MercuryParticipants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FantaMessageActions").Types,i=c("FantaTabActions").Types,j=c("FantaGetMessageActions").Types;function k(r,s){switch(s.type){case h.RECEIVED_NEW_MESSAGE:var t=s.message;c("MercuryBrowserAlerts").messageReceived(t);return r}return r}function l(r,s){switch(s.type){case h.COMPOSER_TEXT_UPDATE:var t=s.composer,u=s.message,v=s.threadID,w=r.mercury.tabContents.get(v);if(!w||w&&w.composer.version!==t.version)return r;return r.mergeIn(["mercury","tabContents",v,"composer"],{text:u})}return r}function m(r,s){switch(s.type){case i.CLOSE_TAB:case i.CLOSE_AND_TAB_NEXT:if(!r.mercury.tabContents.get(s.tabID))return r;return r.setIn(["mercury","tabContents",s.tabID,"composer"],new(c("FantaTypeComposer"))())}return r}function n(r,s){switch(s.type){case i.CLOSE_ALL_TABS:var t=r.mercury.tabContents;t.forEach(function(u){var v=u.id;r=r.setIn(["mercury","tabContents",v,"composer"],new(c("FantaTypeComposer"))())});return r}return r}function o(r,s){switch(s.type){case i.SCROLL_BOTTOM_CHANGED:var t=s.tabID,u=s.isScrolledToBottom,p=s.showUnseenMessages,v=r.mercury.tabContents.get(t);if(!v)return r;v=v.merge({isScrolledToBottom:u,showUnseenMessages:p});r=r.setIn(["mercury","tabContents",t],v)}return r}function p(r,s){switch(s.type){case i.SHOW_UNSEEN_MESSAGES:var t=s.tabID,u=r.mercury.tabContents.get(t);if(u)u.showUnseenMessages()}return r}function q(r,s){__p&&__p();switch(s.type){case j.ON_GET_THREAD_RESPONSE:var t=s.thread,u=t.thread_id,v=r.mercury.tabContents.get(u);if(!v)return r;var w=null;if(c("CurrentUser").isWorkUser()&&t.participants)w=t.participants.map(c("MercuryParticipants").getOrFetch,c("MercuryParticipants")).find(function(x){return x&&x.is_coworker===false})!==undefined;v=v.merge({thread:t,isMultiCompany:w});r=r.setIn(["mercury","tabContents",u],v);break}return r}f.exports={closeAllTabs:n,closeTab:m,composerTextUpdate:l,onGetThreadResponse:q,receivedNewMessage:k,scrollBottomChanged:o,showUnseenMessages:p}}),null);
__d("FantaTypeTab",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={focusCounter:0,id:"",isHovered:false,isMinimized:false,openCounter:0,entryPoint:"unknown"};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("FantaTypeTabGroup",["FantaConst","immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j={allowedRaisedTabs:c("FantaConst").DEFAULT_ALLOWED_RAISED_TABS,focusedTabID:null,tabs:c("immutable").Map({}),updatedTime:0},k=function k(n){return n.openCounter*-1},l=function l(n){return n.focusCounter*-1};h=babelHelpers.inherits(m,c("immutable").Record(j));i=h&&h.prototype;m.prototype.getRaisedandUnraisedTabs=function(){var n=this.tabs.sortBy(l),o=n.slice(this.allowedRaisedTabs),p=n.take(this.allowedRaisedTabs).sortBy(k);return{raisedTabs:p,unraisedTabs:o}};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d("isWebMessengerURI",[],(function a(b,c,d,e,f,g){function h(i){return/^(\/messages)/.test(i.getPath())}f.exports=h}),null);
__d("FantaReducersTabs",["Bootloader","EventProfiler","FantaConst","FantaMessageActions","FantaTabActions","FantaTypeTab","FantaTypeTabGroup","LogHistory","MercuryThreads","PinnedConversationNubsConfig","TimeSlice","URI","isWebMessengerURI"],(function a(b,c,d,e,f,aa){"use strict";__p&&__p();var g=c("MercuryThreads").get(),h=c("FantaMessageActions").Types,i=c("FantaTabActions").Types,j="tab_",k=c("LogHistory").getInstance("fanta_tabs"),l=1,m=1,n=1;function o(O,P){switch(P.type){case i.OPEN_TAB:case i.OPEN_TAB_WITH_INTERSTITIAL_DATA:k.debug(P.type,JSON.stringify({id:P.tabID}));if(m===1)c("EventProfiler").tagCurrentActiveInteractionsAs("FirstChatTabOpen");return v(O,P.tabID||j+n++,true,P.entryPoint)}return O}function p(O,P){__p&&__p();switch(P.type){case i.REPLACE_TAB:var Q=P.tabID,R=P.newTabID,S=O.tabGroup,T=S.tabs,U=T.get(Q);k.debug(P.type,JSON.stringify({id:Q,isExisting:!!U,newID:R}));if(U){var V=U.id===O.tabGroup.focusedTabID;O=O.setIn(["tabGroup","tabs",R],U.merge({id:R})).deleteIn(["tabGroup","tabs",Q]);return v(O,R,V,"replace_tab")}return v(O,R,false,"replace_tab")}return O}function q(O,P){switch(P.type){case i.MINIMIZE_TAB:return w(O,P.tabID,true)}return O}function r(O,P){switch(P.type){case i.UNMINIMIZE_TAB:return w(O,P.tabID,false)}return O}function s(O,P){switch(P.type){case i.FOCUS_TAB:var Q=P.tabID;return D(O,Q)}return O}function t(O,P){switch(P.type){case i.BLUR_TAB:return E(O,P.tabID)}return O}function u(O,P){__p&&__p();var Q;switch(P.type){case h.RECEIVED_NEW_MESSAGE:var R=P.tabID,o=O.tabGroup.tabs.get(R);k.debug(P.type,JSON.stringify({id:R,isOpen:!!o}));if(!o){var Q=function(){__p&&__p();var S=O.tabGroup.focusedTabID;O=v(O,R,false,"message_received");var T=O.tabGroup.allowedRaisedTabs,U=O.tabGroup.getRaisedandUnraisedTabs(),V=U.raisedTabs,W=U.unraisedTabs,X=V.count(),Y=X+W.count();c("TimeSlice").guard(function(){c("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function($){new $().setAllowedRaisedTabs(T).setOpenTabs(Y).setVisibleTabs(X).log()},"FantaReducersTabs")},"name",{propagationType:c("TimeSlice").PropagationType.ORPHAN})();var Z=c("URI").getNextURI();if(c("isWebMessengerURI")(Z))return{v:O=w(O,R,true)};else if(S)return{v:D(O,S)}}();if(typeof Q==="object")return Q.v}}return O}function v(O,P,Q){__p&&__p();var R=arguments.length<=3||arguments[3]===undefined?"unknown":arguments[3],S=O.tabGroup,T=S.tabs,U=T.get(P);if(!U){U=new(c("FantaTypeTab"))({id:P,focusCounter:l,openCounter:m++,entryPoint:R});O=O.setIn(["tabGroup","tabs",P],U)}else if(U.isMinimized&&Q)O=w(O,P,false);if(Q)return D(O,P);return O}function w(O,P,Q){var R=O.tabGroup,S=R.tabs.get(P);if(S)O=O.mergeIn(["tabGroup","tabs",P],{isMinimized:Q});return O}function x(O,P){__p&&__p();switch(P.type){case i.MINIMIZE_ALL_TABS:for(var Q=O.tabGroup.tabs.keys(),R=Array.isArray(Q),S=0,Q=R?Q:Q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var T;if(R){if(S>=Q.length)break;T=Q[S++]}else{S=Q.next();if(S.done)break;T=S.value}var U=T;O=w(O,U,true)}return O}return O}function y(O,P){switch(P.type){case i.CLOSE_TAB:case i.DELETE_TAB:var Q=P.tabID;k.debug(P.type,JSON.stringify({id:Q}));return A(O,Q)}return O}function z(O,P){switch(P.type){case h.SEND_GROUP_MESSAGE:var Q=P.threadID,R=g.isEmptyLocalThread(Q);if(R)return A(O,Q)}return O}function A(O,P){O=E(O,P);return O.deleteIn(["tabGroup","tabs",P])}function B(O,P){switch(P.type){case i.CLOSE_ALL_TABS:k.debug(P.type);O=E(O,O.tabGroup.focusedTabID);return O.setIn(["tabGroup","tabs"],O.tabGroup.tabs.clear())}return O}function C(O,P){switch(P.type){case i.CLOSE_AND_TAB_NEXT:k.debug(P.type,JSON.stringify({id:P.tabID}));O=A(O,P.tabID);return M(O)}return O}function D(O,P){var Q=arguments.length<=2||arguments[2]===undefined?false:arguments[2],R=O.tabGroup,S=R.tabs.get(P);if(S)O=O.mergeIn(["tabGroup","tabs",P],{focusCounter:l++});var T=Q?null:P;O=O.mergeIn(["tabGroup"],{focusedTabID:T});return O}function E(O,P){if(O.tabGroup.focusedTabID===P)return O.mergeIn(["tabGroup"],{focusedTabID:null});return O}function F(O,P){switch(P.type){case i.HOVERED_TAB:var Q=P.tabID;return H(O,Q,true)}return O}function G(O,P){switch(P.type){case i.UNHOVERED_TAB:var Q=P.tabID;return H(O,Q,false)}return O}function H(O,P,Q){var R=O.tabGroup,S=R.tabs.get(P);if(S)O=O.mergeIn(["tabGroup","tabs",P],{isHovered:Q});return O}function I(O,P){__p&&__p();var Q;switch(P.type){case i.SET_ALLOWED_RAISED_TABS:var R=P.allowedRaisedTabs,S=O.tabGroup.allowedRaisedTabs;if(R!==S)(function(){k.debug(P.type,JSON.stringify({count:R}));if(!c("PinnedConversationNubsConfig").chatTabTypingPriority)R=Math.max(1,R);var T=O.tabGroup.tabs.count(),U=T>R?R:T,V=R>S&&T>S,W=R<S&&T>R;if(V||W)c("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(X){new X().setAllowedRaisedTabs(R).setOpenTabs(T).setVisibleTabs(U).log()},"FantaReducersTabs")})();return J(O,R)}return O}function J(O){var P=arguments.length<=1||arguments[1]===undefined?c("FantaConst").DEFAULT_ALLOWED_RAISED_TABS:arguments[1];if(P===O.tabGroup.allowedRaisedTabs)return O;if(!c("PinnedConversationNubsConfig").chatTabTypingPriority)P=Math.max(1,P);return O.mergeIn(["tabGroup"],{allowedRaisedTabs:P})}function K(O,P){__p&&__p();switch(P.type){case i.LOAD_FROM_DATA:var Q=O.tabGroup,R=P.tabData,S=Q.updatedTime;if(S>=R.updatedTime||R.updatedTime===undefined)return O;O=J(O.set("tabGroup",new(c("FantaTypeTabGroup"))()),Q.allowedRaisedTabs);var T=[];R.tabs.sort(function(U,V){return U.openCounter-V.openCounter}).forEach(function(U){T.push(U.id);O=v(O,U.id,false,"loaded_from_data");if(U.isMinimized)O=w(O,U.id,U.isMinimized)});R.tabs.sort(function(U,V){return U.focusCounter-V.focusCounter}).forEach(function(U){O=D(O,U.id,true)});k.debug(P.type,JSON.stringify({updatedTime:S,newerTime:R.updatedTime,opened:T}));O=R.focusedTabID?D(O,R.focusedTabID,true):E(O)}return O}function L(O,P){switch(P.type){case i.FOCUS_NEXT_TAB:return M(O)}return O}function M(O){__p&&__p();var P=O.tabGroup.focusedTabID,Q=O.tabGroup.getRaisedandUnraisedTabs(),R=Q.raisedTabs,S=R.count();if(S===0)return O;else if(R.count()===1)return D(O,R.first().id);var T=R.skipUntil(function(U){return U.id===P}).rest();if(T.count()===0)return D(O,R.first().id);else return D(O,T.first().id)}function N(O,P){__p&&__p();switch(P.type){case i.FOCUS_PREVIOUS_TAB:var Q=O.tabGroup.focusedTabID,R=O.tabGroup.getRaisedandUnraisedTabs(),S=R.raisedTabs;if(S.count()<2)return O;var T=S.reverse().skipUntil(function(U){return U.id===Q}).rest();if(T.count()===0)return D(O,S.last().id);else return D(O,T.first().id)}return O}f.exports={addParticipantsToLocalGroup:z,blurTab:t,closeAllTabs:B,closeAndTabNext:C,closeTab:y,focusNextTab:L,focusPreviousTab:N,focusTab:s,hoveredTab:F,loadFromData:K,minimizAllTabs:x,minimizeTab:q,openTab:o,receivedNewMessage:u,replaceTab:p,setAllowedRaisedTabs:I,unhoveredTab:G,unminimizeTab:r}}),null);
__d("FantaTypeMercuryState",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={tabContents:c("immutable").Map({})};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("FantaTypeAppState",["FantaTypeMercuryState","FantaTypeTabGroup","immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={tabGroup:new(c("FantaTypeTabGroup"))(),mercury:new(c("FantaTypeMercuryState"))()};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("FantaAppStore",["FantaComposeViewReducers","FantaDispatcher","FantaReducersCookie","FantaReducersDockCalculator","FantaReducersLogging","FantaReducersMercury","FantaReducersMessages","FantaReducersTabs","FantaTypeAppState","FluxReduceStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=[].concat(Object.values(c("FantaReducersTabs")),Object.values(c("FantaReducersMercury")),Object.values(c("FantaReducersMessages")),Object.values(c("FantaReducersDockCalculator")),Object.values(c("FantaReducersCookie")),Object.values(c("FantaComposeViewReducers")),Object.values(c("FantaReducersLogging")));h=babelHelpers.inherits(k,c("FluxReduceStore"));i=h&&h.prototype;k.prototype.getInitialState=function(){return new(c("FantaTypeAppState"))()};k.prototype.ignoreReducer=function(m){var n=Object.values(m);j=j.filter(function(o){return!n.find(function(p){return p===o})})};k.prototype.addReducers=function(m){this.ignoreReducer(m);j=j.concat(Object.values(m))};k.prototype.reduce=function(m,n){return j.reduce(function(m,o){return o(m,n)},m)};function k(){h.apply(this,arguments)}var l=new k(c("FantaDispatcher"));f.exports=l}),null);
__d("MessengerDiscoveryEntryPoint",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BROWSER_PROFILE_ICON:"browser_profile_icon",FB_STORY:"fb_story",SPONSORED_MESSAGES_ADS:"sponsored_messages_ads",BEGIN_SHARE_FLOW:"begin_share_flow",APP_INSIGHTS:"app_insights",BRANDED_CAMERA:"branded_camera",BRANDED_CAMERA_XMA:"branded_camera:xma",BRANDED_CAMERA_CTM_ADS:"branded_camera:ctm_ads",SAMPLE_BOTS:"sample_bots",CUSTOMER_MATCHING:"customer_matching",CUSTOMER_MATCHING_PHONE_NUMBER:"customer_matching:phone_number",MESSENGERDOTCOM:"messengerdotcom",MESSENGERDOTCOM_WEB_SEARCH:"messengerdotcom:web_search",UNKNOWN:"unknown",UNKNOWN_BNP_PSID:"unknown:bnp_psid",FB_SEARCH:"fb_search",FB_SEARCH_SEARCH_ENTITY_CARD:"fb_search:search_entity_card",FB_FEED:"fb_feed",FB_FEED_ORGANIC_FEED_STORY:"fb_feed:organic_feed_story",FB_FEED_ADS_FEED_STORY:"fb_feed:ads_feed_story",BUSINESS_ON_MESSENGER:"business_on_messenger",CLICK_TO_MESSENGER_AD:"click_to_messenger_ad",CLICK_TO_MESSENGER_AD_MESSENGER_DEEPLINK_ADS:"click_to_messenger_ad:messenger_deeplink_ads",MDOTME:"mdotme",MDOTME_FBPAGE:"mdotme:fbpage",MDOTME_CHATEXTENSION:"mdotme:chatextension",ADMIN_MESSAGES:"admin_messages",TRANSPORTATION:"transportation",SUBSCRIPTIONS:"subscriptions",FB_PAGE:"fb_page",FB_PAGE_FREQUENTLY_ASKED_QUESTION_CARD:"fb_page:frequently_asked_question_card",FB_PAGE_ABOUT_CARD_DETAIL_VIEW:"fb_page:about_card_detail_view",FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:"fb_page:responsiveness_context_card",FB_PAGE_ABOUT_CARD:"fb_page:about_card",FB_PAGE_PAGE_HEADER:"fb_page:page_header",FB_PAGE_PRIMARY_MESSAGE_BUTTON:"fb_page:primary_message_button",FB_PAGE_SECONDARY_MESSAGE_BUTTON:"fb_page:secondary_message_button",FB_PAGE_FB_PAGE_CTA_PAGES_ACTIONS_UNIT:"fb_page:fb_page_cta_pages_actions_unit",FB_PAGE_JEWEL_THREAD:"fb_page:jewel_thread",FB_PAGE_USER_MESSAGE_PROMPT:"fb_page:user_message_prompt",FB_PAGE_PAGES_INFO:"fb_page:pages_info",FB_PAGE_LOADED_FROM_DATA:"fb_page:loaded_from_data",FB_PAGE_HOVER_CARD:"fb_page:hover_card",FB_PAGE_CHAT_SIDEBAR_TYPEAHEAD:"fb_page:chat_sidebar_typeahead",FB_PAGE_DYNAMICHOVERCARD:"fb_page:dynamicHoverCard",FB_PAGE_ABOUT_ROW:"fb_page:about_row",FB_PAGE_PYMM_RHC:"fb_page:pymm_rhc",FB_PAGE_GROUPS_RHC:"fb_page:groups_rhc",FB_PAGE_CONTEXT_CARD:"fb_page:context_card",FB_PAGE_CONTEXTUAL_RECOMMENDATIONS:"fb_page:contextual_recommendations",FB_PAGE_SEARCHENTITYCARD:"fb_page:searchEntityCard",FB_PAGE_MESSAGE_RECEIVED:"fb_page:message_received",FB_PAGE_PAGE_HOVERCARD:"fb_page:page_hovercard",FB_PAGE_QUESTION_TRIGGERED_CONVO:"fb_page:question_triggered_convo",PIXEL_EVENT:"pixel_event",BROADCAST:"broadcast",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",NULL_STATE_CTA:"null_state_cta",SEARCH:"search",SEARCH_HOME:"search:home",SEARCH_PEOPLE:"search:people",SEARCH_GAMES:"search:games",SEARCH_DISCOVER:"search:discover",SEND_TO_MESSENGER_PLUGIN:"send_to_messenger_plugin",WORK_CHAT:"work_chat",WORK_CHAT_WORK_IDS:"work_chat:work_ids",WORK_CHAT_EMAIL:"work_chat:email",CHECKBOX_PLUGIN:"checkbox_plugin",M:"m",DYNAMIC_LOCAL_ADS:"dynamic_local_ads"})}),null);
__d("FantaCookieUtil",["CurrentUser","FantaConst","Map","MercuryIDs","MercuryThreads","MessengerDiscoveryEntryPoint","MercuryMessages","WorkModeConfig","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryThreads").get(),i={convertCookieData:function j(k,l,m){__p&&__p();var n={tabs:[],focusedTabID:null,updatedTime:0,interstitialData:m},o=[],p=this._getCookieKeys();k=k||{};if(k[p.tabs])o=k[p.tabs];o.forEach(function(u){n.tabs.push({id:u.i,isMinimized:!u.r,openCounter:u.o,focusCounter:u.f})});if(l)for(var q=l.tabs.values(),r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t;if(h.isEmptyLocalThread(u.id))n.tabs.push({id:u.id,isMinimized:u.isMinimized,openCounter:u.openCounter,focusCounter:u.focusCounter})}n.focusedTabID=k[p.focusedTabID];n.updatedTime=k[p.updatedTime];return n},createCookieData:function j(k,l){__p&&__p();var m=[],n=this._getCookieKeys();if(l[n.updatedTime]>k.updatedTime)return l;for(var o=k.tabs.values(),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;if(!c("MercuryIDs").isLocalThread(s.id)&&!this._shouldDisableForCookie(s.id,s.entryPoint))m.push({i:s.id,r:s.isMinimized?undefined:1,o:s.openCounter,f:s.focusCounter})}l[n.tabs]=m;l[n.focusedTabID]=k.focusedTabID;l[n.updatedTime]=k.updatedTime;return l},_shouldDisableForCookie:function j(k,l){if(!l.includes(c("MessengerDiscoveryEntryPoint").FB_PAGE_USER_MESSAGE_PROMPT))return false;var m=c("MercuryMessages").getForFBID(c("CurrentUser").getID()),n=m.getThreadMessagesRangeNow(k,0,1)[0];return n===undefined&&c("gkx")("AT5yvaIVlO2OHqFIDWWRhRABINJAcxCp1ro66bHRcO0eEaLcqpagLVIr-zqdMYZpNoEnM0j8G8evTFI0zml2LudFjHJmYlaU_Y6yQ26Iu3tDvgUsS-yP2Aotk3FJ2AWnq4g")},_getCookieKeys:function j(){var k=c("WorkModeConfig").is_work_user;return{tabs:k?c("FantaConst").cookieIDs.WORK_COOKIE_ID:c("FantaConst").cookieIDs.PERSONAL_COOKIE_ID,focusedTabID:k?c("FantaConst").cookieIDs.WORK_FOCUS_COOKIE_ID:c("FantaConst").cookieIDs.PERSONAL_FOCUS_COOKIE_ID,updatedTime:k?c("FantaConst").cookieIDs.WORK_TIME_COOKIE_ID:c("FantaConst").cookieIDs.PERSONAL_TIME_COOKIE_ID}}};f.exports=i}),null);
__d("FantaMercuryThreadEventsBootloaded",["Bootloader","MercuryThreadInformer","MercuryThreads","MercuryViewer"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryThreadInformer").get(),i=c("MercuryThreads").get(),j={onMessagesReceived:function k(l){__p&&__p();h.subscribe("messages-received",function(m,n){__p&&__p();var o,p=function p(q){__p&&__p();var r,s=n[q],t=function t(u){var v=s[u];if(v.author!=c("MercuryViewer").getID()){if(!v.is_unread)return"continue";i.getThreadMeta(q,function(w){c("Bootloader").loadModules(["ChatTabPolicy"],function(x){x.messageIsAllowed(w,v,function(){l(q,v)})},"FantaMercuryThreadEventsBootloaded")})}};for(var u=0;u<s.length;u++){var r=t(u);if(r==="continue")continue}};for(var q in n)p(q)})}};f.exports=j}),null);
__d("FantaTabViewportManager",["Arbiter","DockTabsViewportCalculator","DockTabsViewportFantaTabUtils","FantaTabActions","immutable","ifRequired","isWebMessengerURI","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=c("DockTabsViewportCalculator").getInstance(i);if(!j)return;j.registerFantaTabCallbacks({fantaTabModelStateGetter:function k(){var l=c("immutable").Map({});c("ifRequired")("FantaAppStore",function(m){l=m.getState().tabGroup.tabs});return l},onAvailableWidthChanged:function k(l){c("setImmediate")(function(){c("FantaTabActions").setAllowedRaisedTabs(c("DockTabsViewportFantaTabUtils").getTabCountToFitWidth(l))})}});c("Arbiter").subscribe("FantaReducersDockCalculator/shouldRecalculate",function(){j.forceRecalculateChatTabs()});j.forceRecalculateFBDockWidth();c("Arbiter").subscribe("page_transition",function(k,l){if(c("isWebMessengerURI")(l.uri))c("setImmediate")(function(){return c("FantaTabActions").minimizeAllTabs()})})}f.exports={init:h}}),null);
__d("HotLikeSound",["MercurySoundsConfig","SoundPlayer","StickerConstants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[c("MercurySoundsConfig").hot_like_grow_mp3_url,c("MercurySoundsConfig").hot_like_grow_ogg_url],i=[c("MercurySoundsConfig").hot_like_pop_mp3_url,c("MercurySoundsConfig").hot_like_pop_ogg_url],j=[c("MercurySoundsConfig").hot_like_outgoing_small_mp3_url,c("MercurySoundsConfig").hot_like_outgoing_small_ogg_url],k=[c("MercurySoundsConfig").hot_like_outgoing_medium_mp3_url,c("MercurySoundsConfig").hot_like_outgoing_medium_ogg_url],l=[c("MercurySoundsConfig").hot_like_outgoing_large_mp3_url,c("MercurySoundsConfig").hot_like_outgoing_large_ogg_url],m=function m(){return false},n={setCheckSoundEnabledFunc:function o(p){m=p},start:function o(){this._play(h)},stop:function o(){c("SoundPlayer").stop(h)},pop:function o(){this.stop();this._play(i)},snap:function o(p){this.stop();if(p===c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID)this._play(j);if(p===c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID)this._play(k);if(p===c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID)this._play(l)},_play:function o(p){if(m())c("SoundPlayer").play(p)}};f.exports=n}),null);
__d("MercuryDeliveryState",["MercuryConfig","MercuryIDs","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInformer","PresencePrivacy","UserActivity","debounceAcrossTransitions","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryConfig").delivery_timeout||12e4;i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};function i(k){__p&&__p();this.$MercuryDeliveryState8=function(){if(this.$MercuryDeliveryState5.length===0&&Object.keys(this.$MercuryDeliveryState6).length===0)return;var l=this.$MercuryDeliveryState5.map(function(m){return m.message_id});if(l)this.$MercuryDeliveryState2.sendDeliveryReceipts(l,this.$MercuryDeliveryState6);this.$MercuryDeliveryState6={};this.$MercuryDeliveryState5=[]}.bind(this);this.$MercuryDeliveryState1=k;this.$MercuryDeliveryState2=c("MercuryServerRequests").getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState3=c("MercuryThreadInformer").getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState4=c("MercuryThreadIDMap").getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState5=[];this.$MercuryDeliveryState6={};this.$MercuryDeliveryState3.subscribe("messages-received",this.$MercuryDeliveryState7.bind(this));c("UserActivity").subscribe(c("debounceAcrossTransitions")(this.$MercuryDeliveryState8,300,this))}i.prototype.$MercuryDeliveryState7=function(k,l){__p&&__p();for(var m in l){var n=l[m];n.forEach(function(o){if(this.$MercuryDeliveryState9(o)){this.$MercuryDeliveryState5.push(o);this.$MercuryDeliveryState4.getServerIDFromClientID(m,function(p){if(!this.$MercuryDeliveryState6[p])this.$MercuryDeliveryState6[p]=[];this.$MercuryDeliveryState6[p].push(o.message_id)}.bind(this))}}.bind(this))}if(c("UserActivity").isActive(h)||c("gkx")("AT6QldQ637XMvCyugHEhjQqDDf2-wtP50HTiWZ1Ww9U3TKMTy-LCSwNJff4SK8McDFogXyIPPHKCxhkz9mFRLCX-m6fUBuF8qkM5EElKo4EzDw"))this.$MercuryDeliveryState8()};i.prototype.$MercuryDeliveryState9=function(k){var l=k.author?c("MercuryIDs").getUserIDFromParticipantID(k.author):null;if(l===this.$MercuryDeliveryState1)return false;if(!k.is_unread)return false;return true};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("MercuryDelayedDispatcher",["MercuryDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){this.$MercuryDelayedDispatcher1=j;this.$MercuryDelayedDispatcher2=[];this.$MercuryDelayedDispatcher3=c("MercuryThreadIDMap").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4=c("MercuryDispatcher").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher5=c("MercuryServerRequests").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher6=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4.subscribe("model-update-completed",function(k,l){return this.$MercuryDelayedDispatcher7()}.bind(this))}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.handleUpdateWaitForThread=function(j,k){var l=this.$MercuryDelayedDispatcher3.getClientIDFromServerIDNow(k);if(l){this.$MercuryDelayedDispatcher8(j);return}this.$MercuryDelayedDispatcher3.getClientIDFromServerID(k,function(){return this.$MercuryDelayedDispatcher2.push({thread_fbid:k,payload:j})}.bind(this));this.$MercuryDelayedDispatcher5.ensureThreadIsFetched(k)};h.prototype.$MercuryDelayedDispatcher7=function(){if(this.$MercuryDelayedDispatcher2&&this.$MercuryDelayedDispatcher2.length){var j=this.$MercuryDelayedDispatcher2.shift(),k=j.thread_fbid,l=j.payload;this.handleUpdateWaitForThread(l,k)}};h.prototype.$MercuryDelayedDispatcher8=function(j){if(j.from_client)this.$MercuryDelayedDispatcher4.handleUpdate(j);else this.$MercuryDelayedDispatcher6.handleUpdate(j)};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("MercurySyncChannelMonitor",["Arbiter","ChannelConstants","CurrentUser","MercurySingletonProvider","MercurySyncFakeDFFSender"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){this.handleAwfulChannelEvent=function(){if(!c("CurrentUser").isLoggedInNow()){this.killSubscriptions();return}c("MercurySyncFakeDFFSender").getForFBID(this.$MercurySyncChannelMonitor1).sendGlobalDFF()}.bind(this);this.$MercurySyncChannelMonitor1=j;this.$MercurySyncChannelMonitor2=false}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.setupSubscriptions=function(){if(!this.$MercurySyncChannelMonitor2){this.$MercurySyncChannelMonitor4=c("Arbiter").subscribe(c("ChannelConstants").JUMPSTART,this.handleAwfulChannelEvent);this.$MercurySyncChannelMonitor3=c("Arbiter").subscribe(c("ChannelConstants").THROTTLED,this.handleAwfulChannelEvent);this.$MercurySyncChannelMonitor2=true}};h.prototype.killSubscriptions=function(){if(this.$MercurySyncChannelMonitor2){c("Arbiter").unsubscribe(this.$MercurySyncChannelMonitor4);c("Arbiter").unsubscribe(this.$MercurySyncChannelMonitor3);this.$MercurySyncChannelMonitor2=false}};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("MercuryMessageCustomizations",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j,k){var l=j.customizations;if(!l)return null;var m=l.filter(function(n){return n.customization_type===k});return m.length>0?m[0].customization_value:null}function i(j){var k=JSON.parse(j),l=[];Object.keys(k).forEach(function(m){l.push({customization_type:m,customization_value:k[m]})});return l}f.exports={getCustomizationValue:h,parseCustomizations:i}}),null);
__d("MercuryProfileRanges",["idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){if(!i.id&&i.i)return{id:i.i,offset:i.o,length:i.l};return i}f.exports={extractFromDelta:function i(j){var k,l=(k=j)!=null?(k=k.data)!=null?k.prng:k:k;if(!l)return undefined;var m=[];try{m=JSON.parse(l);if(m.length>0)return m.map(h)}catch(n){}return m}}}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k){var l=c("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(j),m=j.extensible_attachment,n;if(m==null)n=null;else{var o=m.story_attachment;n={legacy_attachment_id:m.legacy_attachment_id,story_attachment:o==null?null:c("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(o)}}return c("MessengerAttachmentTransformer.bs").transformAttachment(i,{extensible_attachment:n,blob_attachments:l,sticker:j.sticker},k)}g.transform=h}),null);
__d("MercurySyncNewMessageTransformer",["FBIDCheck","IrisProtocolMessageLifetime","MercuryActionType","MercuryConfig","MercuryIDs","MercuryMessageCustomizations","MercuryProfileRanges","MercuryTimestamp","MessagingTag","PageCommItemStatus","MessengerRealtimeAttachmentTransformer.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(j){var k={};try{k=JSON.parse(j)}catch(l){}return k};function i(j,k){__p&&__p();var l=parseInt(k.messageMetadata.timestamp,10),m=c("MercuryTimestamp").getFormatedTimestamp(l),n=k.messageMetadata.skipBumpThread,o=j!==k.messageMetadata.actorFbId,p=[];if(k.attachments)p=k.attachments.map(function(u){__p&&__p();var v=u.mercury,w=v.extensible_attachment,x=v.blob_attachment,y=v.sticker_attachment;if(!w&&!x&&!y)return null;var z=c("FBIDCheck").isUser_deprecated(j),A=[];if(w)A=c("MessengerRealtimeAttachmentTransformer.bs").transform(j,{extensible_attachment:w},z);else if(x)A=c("MessengerRealtimeAttachmentTransformer.bs").transform(j,{blob_attachments:[x]},z);else A=c("MessengerRealtimeAttachmentTransformer.bs").transform(j,{sticker:y});return A.length>0?A[0]:null});var q=!c("FBIDCheck").isUser_deprecated(j);p=p.filter(Boolean);var r=k.messageMetadata.tags?k.messageMetadata.tags[0]:undefined,s=null;if(k.data&&k.data.adminSignatureCreatorID){var t=k.data;s={creatorID:t.adminSignatureCreatorID||null,creatorName:t.adminSignatureCreatorName||null,creatorType:t.adminSignatureCreatorType||null,labelType:t.adminSignatureLabelType||null,pageID:t.adminSignaturePageID||null,profileURI:t.adminSignatureProfileURI||null}}return{message_id:k.messageMetadata.messageId,threading_id:null,offline_threading_id:k.messageMetadata.offlineThreadingId,author:c("MercuryIDs").getParticipantIDFromUserID(k.messageMetadata.actorFbId),author_email:k.messageMetadata.actorFbId+"@facebook.com",ephemeral_ttl_mode:k.ttl?c("IrisProtocolMessageLifetime")[k.ttl]:0,timestamp:l,is_unread:o,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,source:r,tags:k.messageMetadata.tags,is_spoof_warning:false,folder:c("MessagingTag").INBOX,thread_fbid:k.messageMetadata.threadKey.threadFbId,other_user_fbid:k.messageMetadata.threadKey.otherUserFbId,body:k.body!==undefined?k.body:"",html_body:null,subject:null,has_attachment:p.length>0,attachments:p,ranges:undefined,thread_id:null,action_type:c("MercuryActionType").USER_GENERATED_MESSAGE,is_from_iris:true,is_sponsored:!!(k.data&&k.data.is_sponsored&&k.data.is_sponsored==="true")||!!(k.untypedData&&k.untypedData.is_sponsored&&k.untypedData.is_sponsored==="true"),commerce_message_type:k.data?k.data.commerce_message_type:null,customizations:k.data&&k.data.customization?c("MercuryMessageCustomizations").parseCustomizations(k.data.customization):null,platform_xmd:k.data&&k.data.platform_xmd?k.data.platform_xmd:null,profile_ranges:c("MercuryProfileRanges").extractFromDelta(k),message_source:k.data&&k.data.message_source_data?h(k.data.message_source_data).message_source:null,skip_bump_thread:n,montage_reply_data:k.data&&k.data.montage_reply_data?h(k.data.montage_reply_data):null,meta_ranges:k.data&&k.data.meta_ranges?h(k.data.meta_ranges):null,creator_info:s,comm_status:q?c("PageCommItemStatus").TODO:null}}f.exports={transform:i}}),null);
__d("MercurySyncAdminTextMessageTransformer",["MercuryActionType","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=c("MercurySyncNewMessageTransformer").transform(i,j);k.action_type=c("MercuryActionType").LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={message_type:j.type,untypedData:j.untypedData};k.log_message_type=c("MercuryLogMessageType").GENERIC_ADMIN_TEXT;return k}f.exports={transform:h}}),null);
__d("LiveLocationStopReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({EXPIRED:1,CANCELED:2,ARRIVED:3})}),null);
__d("MercurySyncClientPayloadTransformer",["DateConsts","LiveLocationStopReason","MercuryActionType","MercuryIDs","MessageLiveLocationClientSyncProtocolStopReason","PageCommItemStatus","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")(c("LiveLocationStopReason")),i=8;function j(r){__p&&__p();var s=r.payload;s=JSON.parse(String.fromCharCode.apply(null,s));var t=s&&s.deltas,u=t[0];if(u.deltaMessageReaction)return m(u.deltaMessageReaction);else if(u.liveLocationData)return o(u.liveLocationData);else if(u.deltaUpdateGroupEventRSVPStatus){var v=u.deltaUpdateGroupEventRSVPStatus;return n(v)}else if(u.deltaPageThreadFollowUpData)return q(u.deltaPageThreadFollowUpData);else if(u.deltaChangeViewerStatus)return k(u.deltaChangeViewerStatus);else if(u.deltaMontageDirectExpire)return l(u.deltaMontageDirectExpire);else return p(u)}function k(r){var s=r.actorFbid,t=r.canViewerReply,u=r.reason,v=r.threadKey,w=c("MercuryIDs").getParticipantIDFromUserID(v.otherUserFbId);return{action_type:c("MercuryActionType").BLOCK_STATUS_CHANGED,actorFbid:s,canViewerReply:t,reason:u,message_blocked_ids:[w],other_user_fbid:v.otherUserFbId.toString()}}function l(r){var s=r.threadKey.threadFbId||r.threadKey.otherUserFbId;return{action_type:c("MercuryActionType").MONTAGE_DIRECT_EXPIRE,messageId:r.messageId,timestamp:r.timestamp,thread_fbid:s.toString(),keep_expiry_timestamp:r.keepExpiryTimestamp}}function m(r){var s=r.messageId,t=r.offlineThreadingId,u=r.reaction,v=r.senderId,w=r.userId,x=r.threadKey.threadFbId||r.threadKey.otherUserFbId;return{action_type:c("MercuryActionType").REACTION_UPDATE,messageId:s,offlineThreadingId:t,reaction:u,senderId:v,thread_fbid:x.toString(),userId:w}}function n(r){var s=r.threadKey&&r.threadKey.threadFbId;if(!s)return null;var t=r.actorFbId,u=r.rsvpStatus;if(!t)return null;return{action_type:c("MercuryActionType").EVENT_RSVP_CHANGED,thread_fbid:s.toString(),actor_fbid:t.toString(),rsvp_status:u}}function o(r){__p&&__p();var s=r.threadKey;if(!s)return null;var t=s.threadFbId||s.otherUserFbId;if(!t)return null;if(!r.messageLiveLocations||r.messageLiveLocations.length!==1)return null;var u=r.messageLiveLocations[0],v=u.expirationTime,w=u.stopReason!=null||Date.now()/c("DateConsts").MS_PER_SEC>v,x=function x(B){return B/Math.pow(10,i)},y=u.coordinate?{latitude:x(u.coordinate.latitude),longitude:x(u.coordinate.longitude)}:null,z=null;if(u.destination)z={latitude:x(u.destination.latitude),longitude:x(u.destination.longitude),label:u.destination.label};var A=null;switch(u.stopReason){case c("MessageLiveLocationClientSyncProtocolStopReason").EXPIRED:A=h.EXPIRED;break;case c("MessageLiveLocationClientSyncProtocolStopReason").CANCELED:A=h.CANCELED;break;case c("MessageLiveLocationClientSyncProtocolStopReason").ARRIVED:A=h.ARRIVED;break}return{action_type:c("MercuryActionType").LIVE_LOCATION_UPDATE,thread_fbid:t.toString(),messageId:u.messageId,liveLocation:{live_location_id:u.id.toString(),is_expired:w,expiration_time:v,sender:{id:u.senderId.toString()},coordinate:y,location_title:u.locationTitle,sender_destination:z,stop_reason:A}}}function p(r){var s=r&&r.deltaPaymentPinProtectionStatusData,t=s&&s.threadKey&&s.threadKey.otherUserFbId,u=s&&s.isPinProtected;if(!t)return null;var v=t.toString();return{action_type:c("MercuryActionType").IS_PIN_PROTECTED,thread_fbid:v,is_pin_protected:u}}function q(r){var s=r.threadKey.otherUserFbId;return{action_type:c("MercuryActionType").UPDATE_COMM_STATUS,comm_status:r.isFollowUp?c("PageCommItemStatus").FOLLOW_UP:c("PageCommItemStatus").TODO,thread_fbid:s.toString()}}f.exports={transform:j}}),null);
__d("MercurySyncDeliveryReceiptTransformer",[],(function a(b,c,d,e,f,g){"use strict";function h(i){return{delivery_receipts:[{other_user_fbid:i.threadKey.otherUserFbId?i.threadKey.otherUserFbId:"",thread_fbid:i.threadKey.threadFbId?i.threadKey.threadFbId:"",time:parseInt(i.deliveredWatermarkTimestampMs,10)}]}}f.exports={transform:h}}),null);
__d("MercurySyncMarkFolderChangeTransformer",["MercuryActionType","MessagingTag"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").CHANGE_FOLDER,other_user_fbid:i.threadKey.otherUserFbId,new_folder:c("MessagingTag").IRIS_MAPPING[i.folder]}}f.exports={transform:h}}),null);
__d("MercurySyncMarkFolderSeenTransformer",["MercuryGlobalActionType","MessagingTag"],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.folders.map(function(j){return{action_type:c("MercuryGlobalActionType").MARK_ALL_SEEN,folder:c("MessagingTag").IRIS_MAPPING[j],timestamp:parseInt(i.timestamp,10)}})}f.exports={transform:h}}),null);
__d("MercurySyncMarkReadTransformer",["MercuryActionType","MercuryGlobalActionType","MessagingTag"],(function a(b,c,d,e,f,g){"use strict";function h(i){if(i.folders&&i.folders.length>0)return i.folders.map(function(j){return{action_type:c("MercuryGlobalActionType").MARK_ALL_READ,action_id:null,folder:c("MessagingTag").IRIS_MAPPING[j],timestamp:parseInt(i.watermarkTimestamp,10)}});return i.threadKeys.map(function(j){return{action_type:c("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId,mark_as_read:true,timestamp:parseInt(i.watermarkTimestamp,10),folder:c("MessagingTag").INBOX}})}f.exports={transform:h}}),null);
__d("MercurySyncMarkUnreadTransformer",["MercuryActionType","MessagingTag"],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.threadKeys.map(function(j){return{action_type:c("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId,mark_as_read:false,timestamp:parseInt(i.watermarkTimestamp,10),folder:c("MessagingTag").INBOX}})}f.exports={transform:h}}),null);
__d("MercurySyncMessageDeleteTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").DELETE_MESSAGES,message_ids:i.messageIds,other_user_fbid:i.threadKey.otherUserFbId,thread_fbid:i.threadKey.threadFbId}}f.exports={transform:h}}),null);
__d("PagesMessagingEventType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLAG:1,CREATE_ADMIN_NOTE:2,PRIORITY_UPDATE:3})}),null);
__d("MercurySyncPagesManagerEventTransformer",["MercuryActionType","PagesMessagingEventType"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){var j=JSON.parse(i.jsonBlob),k=j&&j.type;if(!k)return undefined;switch(k){case c("PagesMessagingEventType").FLAG:var l=!!(j&&j.flagData&&j.flagData.state),m={action_type:c("MercuryActionType").CHANGE_FLAG,mark_as_flag:l,other_user_fbid:i.threadKey.otherUserFbId,thread_fbid:i.threadKey.threadFbId};return m;default:return undefined}}f.exports={transform:h}}),null);
__d("MercurySyncParticipantLeftGroupThreadTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=c("MercurySyncNewMessageTransformer").transform(i,j);k.action_type=c("MercuryActionType").LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={removed_participants:[c("MercuryIDs").getParticipantIDFromUserID(j.leftParticipantFbId)]};k.log_message_type=c("MercuryLogMessageType").UNSUBSCRIBE;return k}f.exports={transform:h}}),null);
__d("MercurySyncParticipantsAddedToGroupThreadTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=c("MercurySyncNewMessageTransformer").transform(i,j);k.action_type=c("MercuryActionType").LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={added_participants:j.addedParticipants.map(function(l){return c("MercuryIDs").getParticipantIDFromUserID(l.userFbId)})};k.log_message_type=c("MercuryLogMessageType").SUBSCRIBE;return k}f.exports={transform:h}}),null);
__d("MercurySyncRTCEventLogTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=c("MercurySyncNewMessageTransformer").transform(i,j),l=j.messageMetadata.actorFbId,m=l===i?j.messageMetadata.threadKey.otherUserFbId:i,n=j.eventType==="VOICE_EVENT"?c("MercuryLogMessageType").PHONE_CALL:c("MercuryLogMessageType").VIDEO_CALL;k.action_type=c("MercuryActionType").LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={answered:j.duration>0,callee:c("MercuryIDs").getParticipantIDFromUserID(m),caller:c("MercuryIDs").getParticipantIDFromUserID(l)};k.log_message_type=n;return k}f.exports={transform:h}}),null);
__d("MercurySyncReadReceiptTransformer",[],(function a(b,c,d,e,f,g){"use strict";function h(i){var j={watermark:parseInt(i.watermarkTimestampMs,10),action:parseInt(i.actionTimestampMs,10)},k=i.threadKey.otherUserFbId||i.actorFbId,l=i.threadKey.otherUserFbId||i.threadKey.threadFbId,m={roger:{}};m.roger[l]={};m.roger[l][k]=j;return m}f.exports={transform:h}}),null);
__d("MercurySyncReplaceMessageTransformer",["MercuryActionType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){j=Object.assign({},j.newMessage,j);return Object.assign(c("MercurySyncNewMessageTransformer").transform(i,j),{action_type:c("MercuryActionType").REPLACE_MESSAGE,replaced_message_id:j.replacedMessageId})}f.exports={transform:h}}),null);
__d("MercurySyncRtcCallDataTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.messageMetadata.threadKey&&i.messageMetadata.threadKey.threadFbId?i.messageMetadata.threadKey.threadFbId.toString():undefined,k=i.initiator&&i.initiator.userFbId?i.initiator.userFbId.toString():undefined;return{action_type:c("MercuryActionType").UPDATE_RTC_CALL_DATA,thread_fbid:j,call_state:i.callState,server_info_data:i.serverInfoData,initiator_fbid:k}}f.exports={transform:h}}),null);
__d("MessagingThreadAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACTION_INVALID:"ACTION_INVALID",ACTION_ARCHIVED:"ACTION_ARCHIVED",ACTION_UNARCHIVED:"ACTION_UNARCHIVED"})}),null);
__d("MercurySyncThreadActionTransformer",["MercuryActionType","MessagingThreadAction"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j={action_type:c("MercuryActionType").CHANGE_ARCHIVED_STATUS,thread_fbid:i.threadKey.threadFbId,other_user_fbid:i.threadKey.otherUserFbId,archived:i.action===c("MessagingThreadAction").ACTION_ARCHIVED};return j}f.exports={transform:h}}),null);
__d("MercurySyncThreadAdminsAddToGroupTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").ADD_GROUP_ADMINS,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,added_admin_ids:i.addedAdmins.map(function(j){return j.userFbId})}}f.exports={transform:h}}),null);
__d("MercurySyncThreadAdminsRemovedFromGroupTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,removed_admin_ids:i.removedAdminFbIds}}f.exports={transform:h}}),null);
__d("MercurySyncThreadApprovalModeTransformer",["MercuryActionType","MessengerApprovalModeTypes"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").APPROVAL_MODE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,approval_mode:c("MessengerApprovalModeTypes")[i.mode]}}f.exports={transform:h}}),null);
__d("MessengerApprovalQueueTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({REQUESTED:"REQUESTED",REMOVED:"REMOVED"})}),null);
__d("MercurySyncThreadApprovalQueueTransformer",["MercuryActionType","MercuryIDs","MessengerApprovalQueueTypes"],(function a(b,c,d,e,f,g){"use strict";function h(i){if(i.inviterFbId)return{action_type:c("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,removed_group_id:i.action===c("MessengerApprovalQueueTypes").REMOVED?i.recipientFbId:null,added_group_id:i.action===c("MessengerApprovalQueueTypes").REQUESTED?{requester:{id:i.recipientFbId},inviter:{id:i.inviterFbId}}:null};var j=c("MercuryIDs").getParticipantIDFromUserID(i.recipientFbId);return{action_type:c("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,removed_id:i.action===c("MessengerApprovalQueueTypes").REMOVED?j:null,added_id:i.action===c("MessengerApprovalQueueTypes").REQUESTED?j:null}}f.exports={transform:h}}),null);
__d("MercurySyncThreadDeleteTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.threadKeys.map(function(j){return{action_type:c("MercuryActionType").DELETE_THREAD,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId}})}f.exports={transform:h}}),null);
__d("MercurySyncThreadJoinableModeTransformer",["MercuryActionType","MessengerJoinableModeType"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").JOINABLE_MODE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,joinable_mode:{mode:c("MessengerJoinableModeType")[i.mode],link:i.link}}}f.exports={transform:h}}),null);
__d("MercurySyncThreadMuteSettingsTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j={action_type:c("MercuryActionType").CHANGE_MUTE_SETTINGS,thread_fbid:i.threadKey.threadFbId,other_user_fbid:i.threadKey.otherUserFbId,mute_until:parseInt(i.expireTime,10)};return j}f.exports={transform:h}}),null);
__d("MercurySyncThreadNameTransformer",["MercuryActionType","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=c("MercurySyncNewMessageTransformer").transform(i,j);k.action_type=c("MercuryActionType").LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={name:j.name};k.log_message_type=c("MercuryLogMessageType").THREAD_NAME;return k}f.exports={transform:h}}),null);
__d("MercurySyncDispatcher",["MercuryDelayedDispatcher","MercuryGlobalActionType","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySyncThreadAdminsAddToGroupTransformer","MercurySyncThreadAdminsRemovedFromGroupTransformer","MercurySyncAdminTextMessageTransformer","MercurySyncClientPayloadTransformer","MercurySyncDeliveryReceiptTransformer","MercurySyncMarkFolderSeenTransformer","MercurySyncMarkReadTransformer","MercurySyncMarkUnreadTransformer","MercurySyncMessageDeleteTransformer","MercurySyncNewMessageTransformer","MercurySyncReadReceiptTransformer","MercurySyncPagesManagerEventTransformer","MercurySyncParticipantLeftGroupThreadTransformer","MercurySyncParticipantsAddedToGroupThreadTransformer","MercurySyncRTCEventLogTransformer","MercurySyncThreadDeleteTransformer","MercurySyncMarkFolderChangeTransformer","MercurySyncThreadMuteSettingsTransformer","MercurySyncThreadNameTransformer","MercurySyncThreadActionTransformer","MercurySyncReplaceMessageTransformer","MercurySyncThreadJoinableModeTransformer","MercurySyncThreadApprovalModeTransformer","MercurySyncThreadApprovalQueueTransformer","MercurySyncRtcCallDataTransformer","MercurySyncDeltaTypes","MercurySingletonProvider","MontageActions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="FOLDER_MONTAGE";i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};function i(k){this.$MercurySyncDispatcher1=k;this.$MercurySyncDispatcher2=c("MercuryDelayedDispatcher").getForFBID(this.$MercurySyncDispatcher1);this.$MercurySyncDispatcher3=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercurySyncDispatcher1)}i.prototype.process=function(k){__p&&__p();var l=void 0,m=void 0;switch(k["class"]){case c("MercurySyncDeltaTypes").NewMessage:l=c("MercurySyncNewMessageTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ReplaceMessage:l=c("MercurySyncReplaceMessageTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").DeliveryReceipt:l=c("MercurySyncDeliveryReceiptTransformer").transform(k);this.$MercurySyncDispatcher3.handleUpdate(l);break;case c("MercurySyncDeltaTypes").MarkRead:l=c("MercurySyncMarkReadTransformer").transform(k);var n=[],o=[];l.forEach(function(p){if(p.action_type===c("MercuryGlobalActionType").MARK_ALL_READ)n.push(p);else o.push(p)});n.length&&this.$MercurySyncDispatcher5(n);o.length&&this.$MercurySyncDispatcher6(o);break;case c("MercurySyncDeltaTypes").MarkUnread:l=c("MercurySyncMarkUnreadTransformer").transform(k);this.$MercurySyncDispatcher6(l);break;case c("MercurySyncDeltaTypes").ParticipantLeftGroupThread:l=c("MercurySyncParticipantLeftGroupThreadTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread:l=c("MercurySyncParticipantsAddedToGroupThreadTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").RTCEventLog:l=c("MercurySyncRTCEventLogTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ThreadName:l=c("MercurySyncThreadNameTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ReadReceipt:l=c("MercurySyncReadReceiptTransformer").transform(k);this.$MercurySyncDispatcher3.handleUpdate(l);break;case c("MercurySyncDeltaTypes").AdminTextMessage:l=c("MercurySyncAdminTextMessageTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").MessageDelete:m=k.threadKey.threadFbId;if(m&&k.folder&&k.folder===h)c("MontageActions").requestUpdate(m);else{l=c("MercurySyncMessageDeleteTransformer").transform(k);this.$MercurySyncDispatcher4(l)}break;case c("MercurySyncDeltaTypes").ThreadAction:l=c("MercurySyncThreadActionTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ThreadDelete:l=c("MercurySyncThreadDeleteTransformer").transform(k);this.$MercurySyncDispatcher6(l);break;case c("MercurySyncDeltaTypes").AdminAddedToGroupThread:l=c("MercurySyncThreadAdminsAddToGroupTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").AdminRemovedFromGroupThread:l=c("MercurySyncThreadAdminsRemovedFromGroupTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ThreadMuteSettings:l=c("MercurySyncThreadMuteSettingsTransformer").transform(k);this.$MercurySyncDispatcher6([l]);break;case c("MercurySyncDeltaTypes").PagesManagerEvent:l=c("MercurySyncPagesManagerEventTransformer").transform(k);if(!l)return;this.$MercurySyncDispatcher6([l]);break;case c("MercurySyncDeltaTypes").JoinableMode:l=c("MercurySyncThreadJoinableModeTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ApprovalMode:l=c("MercurySyncThreadApprovalModeTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ApprovalQueue:l=c("MercurySyncThreadApprovalQueueTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ClientPayload:l=c("MercurySyncClientPayloadTransformer").transform(k);if(!l)return;this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").GenieMessage:l=c("MercurySyncNewMessageTransformer").transform(this.$MercurySyncDispatcher1,k.deltaNewMessage);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").MontageMessage:m=k.newMessage.messageMetadata.actorFbId;if(m)c("MontageActions").requestUpdate(m);break;case c("MercurySyncDeltaTypes").RtcCallData:l=c("MercurySyncRtcCallDataTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").MarkFolderSeen:l=c("MercurySyncMarkFolderSeenTransformer").transform(k);this.$MercurySyncDispatcher5(l);break;case c("MercurySyncDeltaTypes").ThreadFolder:l=c("MercurySyncMarkFolderChangeTransformer").transform(k);this.$MercurySyncDispatcher6([l]);break;default:break}};i.prototype.$MercurySyncDispatcher4=function(k){var l=k.other_user_fbid||k.thread_fbid;this.$MercurySyncDispatcher2.handleUpdateWaitForThread({actions:[k],payload_source:c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE},l)};i.prototype.$MercurySyncDispatcher5=function(k){this.$MercurySyncDispatcher3.handleUpdate({global_actions:k,payload_source:c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE})};i.prototype.$MercurySyncDispatcher6=function(k){this.$MercurySyncDispatcher3.handleUpdate({actions:k,payload_source:c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE})};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("MercurySyncDataFetcherImpl",["errorCode","Promise","AsyncResponse","Bootloader","FBIDCheck","MercuryPayloadSource","MercuryThreadlistConstants","MessagingConfig","UserActivity","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MessagingConfig").syncFetchRequestTimeoutMs,j={limit:c("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT+1,folder:"inbox",tags:["INBOX"],timestamp:null,offset:c("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,filter:null,includeDeliveryReceipts:false,includeSeqID:true},k={};function l(r){return new(c("Promise"))(function(s,t){m(r,s,t,0)})}function m(r,s,t,u){__p&&__p();if(u>c("MessagingConfig").syncFetchRetries){clearTimeout(k[r]);t();return}var v=u===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,u);if(!c("UserActivity").isOnTab())v+=500*Math.random();clearTimeout(k[r]);k[r]=c("setTimeoutAcrossTransitions")(function(){__p&&__p();var w=false,x=function x(y){__p&&__p();var z;if(w)return;if(y.errors&&y.errors.length>0)(function(){var A=y.errors[0].message;if(A)c("Bootloader").loadModules(["MessengerWebGraphQLTypedLogger","MessengerWebGraphQLEvent"],function(B,C){new B().setErrorMessage(A).setEvent(C.DFF_FAILURE).log()},"MercurySyncDataFetcherImpl")})();w=true;m(r,s,t,u+1)};c("Bootloader").loadModules(["MessengerGraphQLThreadlistFetcher.bs"],function(y){return y.fetchAll(r,[j],!c("FBIDCheck").isUser_deprecated(r)).then(function(z){w=true;s(new(c("AsyncResponse"))(null,babelHelpers["extends"]({},z,{payload_source:c("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE})));clearTimeout(k[r])},x)},"MercurySyncDataFetcherImpl")},v)}function n(r,s,t){return new(c("Promise"))(function(u,v){o(r,s,t,u,v,0)})}function o(r,s,t,u,v,w){__p&&__p();if(w>c("MessagingConfig").syncFetchRetries){v();return}var x=w===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,w);c("setTimeoutAcrossTransitions")(function(){var y=false,z=function z(A){if(y)return;y=true;o(r,s,t,u,v,w+1)};c("Bootloader").loadModules(["MessengerThreadDFFFetcher.bs"],function(A){return A.fetch(r,{id:s,limit:t},!c("FBIDCheck").isUser_deprecated(r)).then(function(B){y=true;u(new(c("AsyncResponse"))(null,babelHelpers["extends"]({},B,{payload_source:c("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE})))},z)},"MercurySyncDataFetcherImpl")},x)}function p(r,s,t){return new(c("Promise"))(function(u,v){q(r,s,t,u,v,0)})}function q(r,s,t,u,v,w){__p&&__p();if(w>c("MessagingConfig").syncFetchRetries){v();return}var x=w===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,w);c("setTimeoutAcrossTransitions")(function(){var y=false,z=function z(A){if(y)return;y=true;q(r,s,t,u,v,w+1)};c("Bootloader").loadModules(["MessengerMessageDFFFetcher.bs"],function(A){return A.fetch(r,{thread_id:s,message_id:t},!c("FBIDCheck").isUser_deprecated(r)).then(function(B){y=true;u(new(c("AsyncResponse"))(null,babelHelpers["extends"]({},B)))},z)},"MercurySyncDataFetcherImpl")},x)}f.exports={fetchThreadlistFromGraphQL:l,fetchThreadFromGraphQL:n,fetchMessageFromGraphQL:p}}),null);
__d("MercurySyncDataFetcher",["Promise","LogHistory","MessagingConfig","MercurySyncDataFetcherImpl","WebGraphQLConfig","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("LogHistory").getInstance("mercury_sync_data_fetcher");function i(){var n=0;for(var o=0;o<c("MessagingConfig").syncFetchRetries;o++){var p=o===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,o);n+=p+c("MessagingConfig").syncFetchRequestTimeoutMs}return n}var j=i();function k(n){__p&&__p();var o=null;return new(c("Promise"))(function(p,q){var r=function r(s){h.error("fetch_threadlist_graphql_timeout",JSON.stringify({timeout:j}));clearTimeout(o);q(s)};o=c("setTimeoutAcrossTransitions")(r,Math.max(j,c("WebGraphQLConfig").timeout*c("MessagingConfig").syncFetchRetries));c("MercurySyncDataFetcherImpl").fetchThreadlistFromGraphQL(n).done(function(s){clearTimeout(o);p(s)},r)})}function l(n,o,p){return new(c("Promise"))(function(q,r){var s=function s(u){h.error("fetch_thread_graphql_timeout",JSON.stringify({timeout:j}));r(u)},t=c("setTimeoutAcrossTransitions")(s,j);c("MercurySyncDataFetcherImpl").fetchThreadFromGraphQL(n,o,p).done(function(u){clearTimeout(t);q(u)},s)})}function m(n,o,p){return new(c("Promise"))(function(q,r){var s=function s(u){h.error("fetch_message_graphql_timeout",JSON.stringify({timeout:j}));r(u)},t=c("setTimeoutAcrossTransitions")(s,j);c("MercurySyncDataFetcherImpl").fetchMessageFromGraphQL(n,o,p).done(function(u){clearTimeout(t);q(u)},s)})}f.exports={fetchThreadlistFromGraphQL:k,fetchThreadFromGraphQL:l,fetchMessageFromGraphQL:m,getMaxTimeoutMs:i}}),null);
__d("MercurySyncDFFDataFetcher",["Promise","CurrentUser","MercuryMessages","MercuryThreads","MercuryThreadIDMap","MercurySingletonProvider","MercurySyncDataFetcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){this.$MercurySyncDFFDataFetcher1=j;this.__messages=c("MercuryMessages").getForFBID(this.$MercurySyncDFFDataFetcher1);this.__threads=c("MercuryThreads").getForFBID(this.$MercurySyncDFFDataFetcher1);this.__threadIDMap=c("MercuryThreadIDMap").getForFBID(this.$MercurySyncDFFDataFetcher1)}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.fetchInvalidateGlobalStateForGraphQL=function(){if(this.$MercurySyncDFFDataFetcher1&&this.$MercurySyncDFFDataFetcher1!=="0"&&c("CurrentUser").isLoggedIn())return c("MercurySyncDataFetcher").fetchThreadlistFromGraphQL(this.$MercurySyncDFFDataFetcher1);return new(c("Promise"))(function(j,k){return k(true)})};h.prototype.fetchInvalidateThreadState=function(j,k){var l=11,m=3,n=j||k,o=this.__threadIDMap.getClientIDFromServerIDNow(n);if(!o)return c("Promise").resolve({getPayload:function q(){return{}}});var p=m+this.__messages.getCurrentlyLoadedMessages(o).length;if(!n)return c("Promise").resolve({getPayload:function q(){return{}}});return c("MercurySyncDataFetcher").fetchThreadFromGraphQL(this.$MercurySyncDFFDataFetcher1,n,Math.max(p,l))};h.prototype.fetchInvalidateMessage=function(j,k,l){var m=j||k;if(!m)return c("Promise").resolve({getPayload:function n(){return{}}});return c("MercurySyncDataFetcher").fetchMessageFromGraphQL(this.$MercurySyncDFFDataFetcher1,m,l)};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("MercurySyncForcedFetchHandler",["Promise","MercurySingletonProvider","MercurySyncDFFDataFetcher","MercuryMessages","MercuryThreadIDMap"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){return{getPayload:function l(){return{sequence_id:k}}}}i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};function i(k){this.$MercurySyncForcedFetchHandler1=k;this.$MercurySyncForcedFetchHandler2=c("MercuryMessages").getForFBID(this.$MercurySyncForcedFetchHandler1);this.$MercurySyncForcedFetchHandler3=c("MercuryThreadIDMap").getForFBID(this.$MercurySyncForcedFetchHandler1);this.$MercurySyncForcedFetchHandler4=c("MercurySyncDFFDataFetcher").getForFBID(this.$MercurySyncForcedFetchHandler1)}i.prototype.processMessageDFF=function(k,l,m,n){if(n){var o=l.otherUserFbId!==undefined?l.otherUserFbId.toString():l.threadFbId.toString(),p=this.$MercurySyncForcedFetchHandler3.getClientIDFromServerIDNow(o);if(p===undefined)return c("Promise").resolve(h(k));var q=this.$MercurySyncForcedFetchHandler2.getMessagesFromIDs([m]);if(q.length===0)return c("Promise").resolve(h(k))}return this.$MercurySyncForcedFetchHandler4.fetchInvalidateMessage(l.otherUserFbId,l.threadFbId,m)};i.prototype.processThreadDFF=function(k,l,m){if(m){var n=l.otherUserFbId!==undefined?l.otherUserFbId.toString():l.threadFbId.toString(),o=this.$MercurySyncForcedFetchHandler3.getClientIDFromServerIDNow(n);if(o===undefined)return c("Promise").resolve(h(k))}return this.$MercurySyncForcedFetchHandler4.fetchInvalidateThreadState(l.otherUserFbId,l.threadFbId)};i.prototype.processGlobalDFFForGraphQL=function(){return this.$MercurySyncForcedFetchHandler4.fetchInvalidateGlobalStateForGraphQL()};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("MercurySyncTopicType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DELTA:"delta",DELTAFLOW:"deltaflow",DELTAFLOWREJECT:"deltaflowreject"})}),null);
__d("MercurySyncDeltaHandler",["invariant","Arbiter","AsyncResponse","ChannelConstants","ChatReliabilityInstrumentation","CurrentUser","FBIDCheck","LogHistory","MercuryConfig","MessagingConfig","MercuryDelayedDispatcher","MercuryPayloadSource","MercurySyncChannelMonitor","MercurySyncConstants","MercurySyncDeltaHolder","MercurySyncDeltaTypes","MercurySyncDispatcher","MercurySyncForcedFetchHandler","MercurySyncHolesTypedLogger","MercuryServerPayloadPreprocessor","MercurySyncTopicType","MercurySingletonProvider","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("LogHistory").getInstance("mercury_sync_delta_handler"),j=c("MessagingConfig").syncFetchRetries||0;k.getForFBID=function(m){return l.getForFBID(m)};k.get=function(){return l.get()};function k(m){__p&&__p();this.$MercurySyncDeltaHandler1=m;this.$MercurySyncDeltaHandler2=c("MercurySyncDispatcher").getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler3=c("MercurySyncForcedFetchHandler").getForFBID(this.$MercurySyncDeltaHandler1);this.__payloadPreprocessor=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercurySyncDeltaHandler1);this.__delayedDispatcher=c("MercuryDelayedDispatcher").getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler4=c("MercurySyncDeltaHolder").getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler11=c("MercurySyncChannelMonitor").getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler6=[];this.$MercurySyncDeltaHandler13=0;i.debug("constructor",JSON.stringify({fbid:this.$MercurySyncDeltaHandler1}));c("Arbiter").subscribe("MercurySyncDeltaHandler/initSeqID",function(n,o){__p&&__p();i.debug("initSeqID",JSON.stringify(o));var p=o&&o.seqID,m=o&&o.fbid;if(!m)return;if(m!==this.$MercurySyncDeltaHandler1)return;if(p)this.$MercurySyncDeltaHandler4.updateLastSeqID(p);else this.$MercurySyncDeltaHandler4.updateLastSeqID(0);this.$MercurySyncDeltaHandler15();this.$MercurySyncDeltaHandler8=c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("deltaflow"),function(n,o){if(!this.$MercurySyncDeltaHandler14)this.$MercurySyncDeltaHandler15()}.bind(this))}.bind(this))}k.prototype.$MercurySyncDeltaHandler15=function(){__p&&__p();i.debug("setUpSubscriptionsToRealTimeUpdates",JSON.stringify({fbid:this.$MercurySyncDeltaHandler1}));this.$MercurySyncDeltaHandler7=c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("delta"),function(m,n){__p&&__p();var o=n&&n.obj&&n.obj.queue;if(o)if(o.toString()!==this.$MercurySyncDeltaHandler1)return;var p=n&&n.obj&&n.obj.delta,q=n&&n.obj&&n.obj.iseq;if(!p||!q)return;this.$MercurySyncDeltaHandler16(q,c("MercurySyncTopicType").DELTA);this.$MercurySyncDeltaHandler17(q,p);this.$MercurySyncDeltaHandler4.push(q,p);this.$MercurySyncDeltaHandler18()}.bind(this));this.$MercurySyncDeltaHandler12=c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("deltaflowreject"),function(m,n){var o=n&&n.obj&&n.obj.queue;if(o)if(o.toString()!==this.$MercurySyncDeltaHandler1)return;if(this.$MercurySyncDeltaHandler14)this.$MercurySyncDeltaHandler19()}.bind(this));this.$MercurySyncDeltaHandler9=c("Arbiter").subscribe(c("ChannelConstants").getArbiterType(c("ChannelConstants").FAKE_DFF),function(m,n){var o=n&&n.obj&&n.obj.queue;if(o&&o.toString()!==this.$MercurySyncDeltaHandler1)return;var p=n&&n.obj&&n.obj.delta;if(!p)return;this.$MercurySyncDeltaHandler6.push(p);this.$MercurySyncDeltaHandler18()}.bind(this));this.$MercurySyncDeltaHandler11.setupSubscriptions();this.$MercurySyncDeltaHandler14=true};k.prototype.$MercurySyncDeltaHandler18=function(){__p&&__p();if(this.$MercurySyncDeltaHandler5)return;if(this.$MercurySyncDeltaHandler6.length>0){var m=this.$MercurySyncDeltaHandler6.shift();this.$MercurySyncDeltaHandler20(this.$MercurySyncDeltaHandler4.getLastSeqID(),m);this.$MercurySyncDeltaHandler18()}var n=this.$MercurySyncDeltaHandler4.peek();if(!n)return;var o=n-this.$MercurySyncDeltaHandler4.getLastSeqID();if(o===1){var p=this.$MercurySyncDeltaHandler4.pop();if(!p)return;var q=p.seqID,r=p.delta;this.$MercurySyncDeltaHandler20(q,r);this.$MercurySyncDeltaHandler18()}else if(o>1)this.$MercurySyncDeltaHandler21();else{this.$MercurySyncDeltaHandler4.pop();this.$MercurySyncDeltaHandler18()}};k.prototype.$MercurySyncDeltaHandler20=function(m,n){__p&&__p();this.$MercurySyncDeltaHandler4.updateLastSeqID(m);if(n["class"]===c("MercurySyncDeltaTypes").ForcedFetch){i.debug("DFF",JSON.stringify(n));if(n.threadKey!==undefined&&n.messageId===undefined)this.$MercurySyncDeltaHandler22(m,n);else if(n.threadKey!==undefined&&n.messageId!==undefined)this.$MercurySyncDeltaHandler23(m,n);else{c("ChatReliabilityInstrumentation").logDFF_DELTA_INIT(JSON.stringify(n));this.$MercurySyncDeltaHandler24(m)}}else this.$MercurySyncDeltaHandler2.process(n)};k.prototype.$MercurySyncDeltaHandler21=function(){var m=JSON.stringify({$MercurySyncDeltaHandler25:this.$MercurySyncDeltaHandler4.getLastSeqID(),nextSeqID:this.$MercurySyncDeltaHandler4.peek()});i.warn("hole",m);var n=this.$MercurySyncDeltaHandler4.peek();!!n||h(0);var o=n-1;c("ChatReliabilityInstrumentation").logDFF_HOLE_INIT(m);this.$MercurySyncDeltaHandler24(o)};k.prototype.$MercurySyncDeltaHandler26=function(m,n,o,p){__p&&__p();!this.$MercurySyncDeltaHandler5||h(0);this.$MercurySyncDeltaHandler5=true;i.debug("_scheduleDataFetch:start",JSON.stringify({seqID:m}));n().done(function(q){i.debug("_scheduleDataFetch:success",JSON.stringify({seqID:m}));o(m,q);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler18()}.bind(this),function(q){i.error("_scheduleDataFetch:failure",JSON.stringify({seqID:m}));p(m,q);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler18()}.bind(this))};k.prototype.$MercurySyncDeltaHandler24=function(m){__p&&__p();if(!c("CurrentUser").isLoggedInNow())return;this.$MercurySyncDeltaHandler26(undefined,function(){return this.$MercurySyncDeltaHandler3.processGlobalDFFForGraphQL()}.bind(this),function(m,n){var o=n.getPayload();this.__payloadPreprocessor.handleUpdate(o);if(o.sequence_id){i.debug("_initiateGlobalDFF:success",JSON.stringify({seqID:o.sequence_id}));this.$MercurySyncDeltaHandler4.updateLastSeqID(o.sequence_id)}this.$MercurySyncDeltaHandler13=0;c("Arbiter").inform(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER)}.bind(this),function(n,o){__p&&__p();i.error("_initiateGlobalDFF:failure","");if(this.$MercurySyncDeltaHandler13>=j&&!c("gkx")("AT6272W7G37c2zZOpPDUPGXaehXUPvo7_ZqAqdSAoKzgP5DQ8Luz0w5hQkLZeaPa8UmuuAXTSUI8FctXnbHnbKTw")||o){if(this.$MercurySyncDeltaHandler14)this.$MercurySyncDeltaHandler19();if(c("gkx")("AT6T2zrYpHKRdiC2jWw79jSLuG2Ai8UAXBl4mf7UaSrzuZmkv1aboo5IByEaBzwrmKZ7i_TneQib5Fe9fVTNdQMv"))this.$MercurySyncDeltaHandler4.updateLastSeqID(m)}else{this.$MercurySyncDeltaHandler13++;c("Arbiter").inform(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY);i.debug("_initiateGlobalDFF:retry","");this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler24(m)}}.bind(this))};k.prototype.$MercurySyncDeltaHandler22=function(m,n){this.$MercurySyncDeltaHandler26(m,function(){return this.$MercurySyncDeltaHandler3.processThreadDFF(m,n.threadKey,n.isLazy)}.bind(this),function(m,o){this.__payloadPreprocessor.handleUpdate(o.getPayload());this.$MercurySyncDeltaHandler4.updateLastSeqID(m)}.bind(this),function(){i.error("_initiateThreadDFF:failure",JSON.stringify(n));var o=babelHelpers["extends"]({},n);delete o.threadKey;this.$MercurySyncDeltaHandler4.updateLastSeqID(m-1);this.$MercurySyncDeltaHandler4.push(m,o)}.bind(this))};k.prototype.$MercurySyncDeltaHandler23=function(m,n){__p&&__p();this.$MercurySyncDeltaHandler26(m,function(){return this.$MercurySyncDeltaHandler3.processMessageDFF(m,n.threadKey,n.messageId,n.isLazy)}.bind(this),function(m,o){var p=o.getPayload(),q=p.other_user_fbid?p.other_user_fbid:p.thread_fbid,r=[babelHelpers["extends"]({},p)],s=c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:r,payload_source:s},q);this.$MercurySyncDeltaHandler4.updateLastSeqID(m)}.bind(this),function(){i.error("_initiateMessageDFF:failure",JSON.stringify(n));var o=babelHelpers["extends"]({},n);delete o.messageId;this.$MercurySyncDeltaHandler4.updateLastSeqID(m-1);this.$MercurySyncDeltaHandler4.push(m,o)}.bind(this))};k.prototype.$MercurySyncDeltaHandler16=function(m,n){var o=m-this.$MercurySyncDeltaHandler4.getLastSeqID();if(o!==1&&o!==0){if(!c("MercuryConfig").WWWSyncHolesLogging)return;new(c("MercurySyncHolesTypedLogger"))().setSeqID(m).setDifference(o).setTopicType(n).log()}};k.prototype.$MercurySyncDeltaHandler17=function(m,n){switch(n["class"]){case c("MercurySyncDeltaTypes").NewMessage:i.debug("message_delta",JSON.stringify({seqID:m,threadKey:n.messageMetadata.threadKey,messageId:n.messageMetadata.messageId}));break;case c("MercurySyncDeltaTypes").ReadReceipt:i.debug("read_receipt_delta",JSON.stringify({seqID:m,threadKey:n.threadKey,actionTimestampMs:n.actionTimestampMs,watermarkTimestampMs:n.watermarkTimestampMs}));break;case c("MercurySyncDeltaTypes").DeliveryReceipt:i.debug("delivery_receipt_delta",JSON.stringify({seqID:m,deliveredWatermarkTimestampMs:n.deliveredWatermarkTimestampMs,messageIds:n.messageIds}));break}};k.prototype.$MercurySyncDeltaHandler19=function(){this.$MercurySyncDeltaHandler14=false;c("Arbiter").unsubscribe(this.$MercurySyncDeltaHandler7);c("Arbiter").unsubscribe(this.$MercurySyncDeltaHandler9);c("Arbiter").unsubscribe(this.$MercurySyncDeltaHandler12);this.$MercurySyncDeltaHandler11.killSubscriptions();c("Arbiter").inform(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE)};var l=new(c("MercurySingletonProvider"))(k);f.exports=k}),null);
__d("MercurySyncEnvironment",["Arbiter","ChannelInitialData","CurrentUser","MercurySyncDeltaHandler"],(function a(b,c,d,e,f,g){"use strict";function h(){if(!c("ChannelInitialData").channelConfig)return;c("MercurySyncDeltaHandler").get();c("Arbiter").inform("MercurySyncDeltaHandler/initSeqID",{fbid:c("CurrentUser").getAccountID(),seqID:c("ChannelInitialData").channelConfig.sequenceId})}f.exports={setUp:h}}),null);
__d("MercuryFolders",["MercuryFoldersConfig","MessagingTag"],(function a(b,c,d,e,f,g){__p&&__p();var h=[c("MessagingTag").INBOX,c("MessagingTag").PENDING,c("MessagingTag").OTHER,c("MessagingTag").ACTION_ARCHIVED],i={getSupportedFolders:function j(){return h.filter(function(k){if(k===c("MessagingTag").PENDING)return!c("MercuryFoldersConfig").hide_message_filtered;else if(k===c("MessagingTag").OTHER)return!c("MercuryFoldersConfig").hide_message_requests;return true}).concat()},getFromMeta:function j(k){var l=k.folder;if(k.is_archived)l=c("MessagingTag").ACTION_ARCHIVED;return l}};f.exports=i}),null);
__d("MercuryUnreadState",["invariant","MercuryFolders","LogHistory","KeyedCallbackManager","MercuryActionType","MercuryConfig","MercuryDispatcher","MercuryGlobalActionType","MercurySingletonProvider","MercuryThreadlistConstants","MercuryThreadIDMap","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","createObjectFrom"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=(c("MercuryFolders").getSupportedFolders()||[]).filter(function(p){return p!==c("MessagingTag").ACTION_ARCHIVED}),j="unread_thread_hash",k="unseen_thread_list",l=c("MercuryThreadlistConstants").MAX_UNREAD_COUNT,m=c("LogHistory").getInstance("mercury_unread_state");n.getForFBID=function(p){return o.getForFBID(p)};n.get=function(){return o.get()};function n(p){__p&&__p();this.$MercuryUnreadState1=p;this.$MercuryUnreadState2=c("MercuryServerRequests").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState3=c("MercuryThreadIDMap").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState4=c("MercuryThreadInformer").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState5=c("MercuryThreads").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState6=c("MercuryDispatcher").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState7={};this.$MercuryUnreadState8={};this.$MercuryUnreadState9={};this.$MercuryUnreadState10={};this.$MercuryUnreadState11={};i.forEach(function(q){this.$MercuryUnreadState9[q]=0;this.$MercuryUnreadState10[q]=false;this.$MercuryUnreadState11[q]=new(c("KeyedCallbackManager"))()}.bind(this));this.$MercuryUnreadState6.subscribe("update-unread",this.$MercuryUnreadState12.bind(this));this.$MercuryUnreadState6.subscribe("update-thread-ids",function(q,r){this.$MercuryUnreadState13(r)}.bind(this))}n.prototype.getUnreadCount=function(p){if(this.exceedsMaxCount(p)){m.error("unguarded_unread_count_fetch","{}");return 0}return this.$MercuryUnreadState14(p)};n.prototype.exceedsMaxCount=function(p){return this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>l};n.prototype.markFolderAsRead=function(p){if(this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>0)this.$MercuryUnreadState2.markFolderAsRead(p);if(c("MercuryConfig").MessengerInboxRequests&&p===c("MessagingTag").INBOX&&this.$MercuryUnreadState14(c("MessagingTag").PENDING)>0)this.$MercuryUnreadState2.markFolderAsRead(c("MessagingTag").PENDING)};n.prototype.getIsThreadUnread=function(p,q){var r=q||c("MessagingTag").INBOX,s=this.$MercuryUnreadState15(r);return!!(s&&s[p])};n.prototype.$MercuryUnreadState16=function(p,q){this.$MercuryUnreadState11[p].setResource(j,q);this.$MercuryUnreadState11[p].setResource(k,Object.keys(q))};n.prototype.$MercuryUnreadState17=function(p,q){var r=this.$MercuryUnreadState11[p].executeOrEnqueue(j,q),s=this.$MercuryUnreadState11[p].getUnavailableResources(r);if(s.length)this.$MercuryUnreadState2.fetchUnreadThreadIDs(p)};n.prototype.$MercuryUnreadState15=function(p){return this.$MercuryUnreadState11[p].getResource(j)};n.prototype.$MercuryUnreadState14=function(p){var q=this.$MercuryUnreadState11[p].getResource(k);if(q)return q.length;else return this.$MercuryUnreadState9[p]};n.prototype.$MercuryUnreadState12=function(p,q){__p&&__p();var r=void 0;(q.unread_thread_fbids||[]).forEach(function(s){__p&&__p();r=s.folder;if(!this.$MercuryUnreadState18(r))return;var t=s.thread_fbids||[];t=t.concat(s.other_user_fbids||[]);var u=this.$MercuryUnreadState19(t);this.$MercuryUnreadState16(r,c("createObjectFrom")(u,true));if(u.length>l)this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState4.updatedUnreadState()}.bind(this));(q.message_counts||[]).forEach(function(s){__p&&__p();if(s.unread_count===undefined)return;r=s.folder;if(s.unread_count>l){this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}else{this.$MercuryUnreadState9[r]=s.unread_count;if(this.$MercuryUnreadState9[r]===0)this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this));(q.global_actions||[]).forEach(function(s){if(s.action_type===c("MercuryGlobalActionType").MARK_ALL_READ)this.$MercuryUnreadState20(s.folder,s.timestamp)}.bind(this));(q.actions||[]).forEach(function(s){__p&&__p();var t=c("MercuryActionType"),u=s.other_user_fbid?s.other_user_fbid:s.thread_fbid,v=s.thread_id?s.thread_id:u;if(s.action_type==t.DELETE_THREAD)i.forEach(function(x){this.$MercuryUnreadState21(x,v)}.bind(this));else if(s.action_type==t.CHANGE_ARCHIVED_STATUS||s.action_type==t.CHANGE_FOLDER){var w=this.$MercuryUnreadState5.getThreadMetaNow(s.thread_id);!!w||h(0);r=c("MercuryFolders").getFromMeta(w);if(this.$MercuryUnreadState18(r)&&w.unread_count>0)this.$MercuryUnreadState22(r,v);i.forEach(function(x){if(x!=r)this.$MercuryUnreadState21(x,v)}.bind(this))}else{r=this.$MercuryUnreadState23(s);if(!this.$MercuryUnreadState18(r))return;if(s.action_type==t.CHANGE_READ_STATUS)if(s.mark_as_read)this.$MercuryUnreadState21(r,v,s.timestamp);else this.$MercuryUnreadState22(r,v,s.timestamp);else if(s.action_type==t.USER_GENERATED_MESSAGE||s.action_type==t.LOG_MESSAGE)if(s.is_unread)this.$MercuryUnreadState22(r,v,s.timestamp)}}.bind(this))};n.prototype.$MercuryUnreadState22=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){var t=this.$MercuryUnreadState7[p]||0,u=this.$MercuryUnreadState8[q]||0,v=r||Number.POSITIVE_INFINITY;if(v>=t&&v>=u&&!s[q]){s[q]=r||0;this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState21=function(p,q,r){__p&&__p();if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){__p&&__p();if(r){var t=this.$MercuryUnreadState8[q];if(!t||t<r)this.$MercuryUnreadState8[q]=r}var u=s[q];if(r&&typeof u=="number"&&r<u)return;if(q in s){delete s[q];this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState20=function(p,q){this.$MercuryUnreadState10[p]=false;this.$MercuryUnreadState16(p,{});this.$MercuryUnreadState7[p]=Math.max(this.$MercuryUnreadState7[p]||0,q||0);this.$MercuryUnreadState4.updatedUnreadState()};n.prototype.$MercuryUnreadState19=function(p){return p.map(this.$MercuryUnreadState3.convertThreadIDIfAvailable,this.$MercuryUnreadState3)};n.prototype.$MercuryUnreadState13=function(p){__p&&__p();i.forEach(function(q){__p&&__p();var r=this.$MercuryUnreadState15(q);if(!r)return;for(var s in p){var t=p[s];if(r[s]){r[t]=r[s];delete r[s]}}this.$MercuryUnreadState16(q,r)}.bind(this))};n.prototype.$MercuryUnreadState23=function(p){var q=p.thread_id?this.$MercuryUnreadState5.getThreadMetaNow(p.thread_id):null;return q?c("MercuryFolders").getFromMeta(q):p.folder?p.folder:""};n.prototype.$MercuryUnreadState18=function(p){return!!p&&i.includes(p)};var o=new(c("MercurySingletonProvider"))(n);f.exports=n}),null);
__d("MercuryUnseenState",["MercuryFolders","KeyedCallbackManager","LogHistory","MercuryActionType","MercuryDispatcher","MercuryGlobalActionType","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInfo","MercuryThreadlistConstants","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","createObjectFrom","isEmpty"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryThreadlistConstants").MAX_UNSEEN_COUNT,i="unseen_thread_hash",j="unseen_thread_list",k=c("LogHistory").getInstance("mercury_unseen_state");l.getForFBID=function(n){return m.getForFBID(n)};l.get=function(){return m.get()};function l(n){__p&&__p();this.$MercuryUnseenState2=n;this.$MercuryUnseenState7=c("MercuryServerRequests").getForFBID(this.$MercuryUnseenState2);this.$MercuryUnseenState8=c("MercuryThreadIDMap").getForFBID(this.$MercuryUnseenState2);this.$MercuryUnseenState10=c("MercuryThreads").getForFBID(this.$MercuryUnseenState2);this.$MercuryUnseenState9=c("MercuryThreadInformer").getForFBID(this.$MercuryUnseenState2);this.$MercuryUnseenState1=c("MercuryDispatcher").getForFBID(this.$MercuryUnseenState2);this.$MercuryUnseenState3=0;this.$MercuryUnseenState4=0;this.$MercuryUnseenState5=false;this.$MercuryUnseenState6=false;this.$MercuryUnseenState11=new(c("KeyedCallbackManager"))();this.$MercuryUnseenState1.subscribe("update-unseen",function(o,p){this.$MercuryUnseenState12(p)}.bind(this));this.$MercuryUnseenState1.subscribe("update-thread-ids",function(o,p){this.$MercuryUnseenState13(p)}.bind(this))}l.prototype.getUnseenCount=function(){if(this.exceedsMaxCount()){k.error("unguarded_unseen_count_fetch","{}");return 0}return this.$MercuryUnseenState14()};l.prototype.exceedsMaxCount=function(){return this.$MercuryUnseenState5||this.$MercuryUnseenState14()>h};l.prototype.markAsSeen=function(){var n=this.$MercuryUnseenState14();if(n===null)this.$MercuryUnseenState6=true;else if(n>0||this.$MercuryUnseenState5){this.$MercuryUnseenState7.markSeen();this.$MercuryUnseenState15(this.$MercuryUnseenState7.getLastActionTimestamp(),[])}};l.prototype.$MercuryUnseenState16=function(n,o){var p;this.$MercuryUnseenState17((p={},p[n]=0,p),o)};l.prototype.$MercuryUnseenState18=function(n){this.$MercuryUnseenState11.setResource(i,n);this.$MercuryUnseenState11.setResource(j,Object.keys(n))};l.prototype.$MercuryUnseenState19=function(n){var o=this.$MercuryUnseenState11.executeOrEnqueue(i,n),p=this.$MercuryUnseenState11.getUnavailableResources(o);if(p.length)this.$MercuryUnseenState7.fetchUnseenThreadIDs()};l.prototype.$MercuryUnseenState20=function(){return this.$MercuryUnseenState11.getResource(i)};l.prototype.$MercuryUnseenState14=function(){var n=this.$MercuryUnseenState11.getResource(j);if(n)return n.length;else return this.$MercuryUnseenState3};l.prototype.$MercuryUnseenState12=function(n){__p&&__p();var o,p=this,q=this.$MercuryUnseenState21(n);if(n.unseen_thread_fbids)n.unseen_thread_fbids.forEach(function(r){if(r.folder!=c("MessagingTag").INBOX)return;var s=(r.thread_fbids||[]).concat(r.other_user_fbids||[]),t=this.$MercuryUnseenState22(s),u=q.seen_timestamp?q.seen_timestamp:this.$MercuryUnseenState4;this.$MercuryUnseenState15(u,t);if(q.unseen_count>h)this.$MercuryUnseenState5=true}.bind(this));else if(q.seen_timestamp!==undefined){this.$MercuryUnseenState4=q.seen_timestamp;if(q.unseen_count>h){this.$MercuryUnseenState5=true;this.$MercuryUnseenState18({})}else{this.$MercuryUnseenState3=q.unseen_count;if(this.$MercuryUnseenState3===0)this.$MercuryUnseenState18({})}}else{var o=function(){__p&&__p();var r;(n.global_actions||[]).forEach(function(x){if(x.action_type===c("MercuryGlobalActionType").MARK_ALL_SEEN)this.$MercuryUnseenState15(x.timestamp,[])}.bind(p));if(p.$MercuryUnseenState5)return{v:void 0};var s=n.actions;if(!s||!s.length)return{v:void 0};var t={},u={},v=function v(w){__p&&__p();var x=s[w],y=x.action_type,z=x.other_user_fbid?x.other_user_fbid:x.thread_fbid,A=x.thread_id?x.thread_id:z;if(y===c("MercuryActionType").MARK_THREAD_SEEN){p.$MercuryUnseenState16(A,x.persistent);return"continue"}if(!p.$MercuryUnseenState23(x))return"continue";if(y===c("MercuryActionType").USER_GENERATED_MESSAGE||y===c("MercuryActionType").LOG_MESSAGE){var B=t[A]?x.timestamp>t[A]:false,C=B||!t[A];if(x.is_unread&&C)p.$MercuryUnseenState10.getThreadMeta(A,function(D){if(!c("MercuryThreadInfo").isMuted(D)&&!(D&&D.last_read_timestamp>=x.timestamp))t[A]=x.timestamp})}else if(y===c("MercuryActionType").CHANGE_READ_STATUS&&x.mark_as_read)u[A]=x.timestamp};for(var w=0;w<s.length;w++){var r=v(w);if(r==="continue")continue}p.$MercuryUnseenState24(t);p.$MercuryUnseenState17(u)}();if(typeof o==="object")return o.v}if(this.$MercuryUnseenState6){this.$MercuryUnseenState6=false;this.markAsSeen()}};l.prototype.$MercuryUnseenState15=function(n,o){__p&&__p();var p=this.$MercuryUnseenState20();if(p===undefined||n>this.$MercuryUnseenState4||this.$MercuryUnseenState5){this.$MercuryUnseenState4=n;o=o||[];if(o.length<=h)this.$MercuryUnseenState5=false;var q={},r=this.$MercuryUnseenState20();for(var s in r)if(r[s]!==true){var t=r[s];if(this.$MercuryUnseenState25(t))q[s]=t}var u=Object.assign(c("createObjectFrom")(o,true),q);this.$MercuryUnseenState18(u);this.$MercuryUnseenState9.updatedUnseenState()}};l.prototype.$MercuryUnseenState24=function(n){__p&&__p();if(this.$MercuryUnseenState5)return;var o={},p=false;for(var q in n){var r=n[q];if(this.$MercuryUnseenState25(r)){o[q]=r;p=true}}if(!p)return;this.$MercuryUnseenState19(function(s){for(var t in o){var u=o[t];if(!s[t]&&this.$MercuryUnseenState25(u))s[t]=o[t]}this.$MercuryUnseenState18(s);this.$MercuryUnseenState9.updatedUnseenState()}.bind(this))};l.prototype.$MercuryUnseenState17=function(n,o){__p&&__p();if(!c("isEmpty")(n))this.$MercuryUnseenState19(function(p){__p&&__p();var q=false;for(var r in n){var s=n[r],t=s>=p[r];if(p[r]&&(!s||t)){delete p[r];q=true}}if(q){this.$MercuryUnseenState18(p);this.$MercuryUnseenState9.updatedUnseenState();if(o&&this.$MercuryUnseenState14()===0)this.$MercuryUnseenState7.markSeen()}}.bind(this))};l.prototype.$MercuryUnseenState25=function(n){return n>this.$MercuryUnseenState4};l.prototype.$MercuryUnseenState22=function(n){return n.map(this.$MercuryUnseenState8.convertThreadIDIfAvailable,this.$MercuryUnseenState8)};l.prototype.$MercuryUnseenState13=function(n){__p&&__p();var o=this.$MercuryUnseenState20();if(!o)return;for(var p in n){var q=n[p];if(o[p]){o[q]=o[p];delete o[p]}}this.$MercuryUnseenState18(o)};l.prototype.$MercuryUnseenState23=function(n){var o=n.thread_id?this.$MercuryUnseenState10.getThreadMetaNow(n.thread_id):null,p=o?c("MercuryFolders").getFromMeta(o):n.folder;return p===c("MessagingTag").INBOX||p===undefined};l.prototype.$MercuryUnseenState21=function(n){var o=n.message_counts||[];for(var p=0;p<o.length;p++)if(o[p].folder===c("MessagingTag").INBOX)return o[p];return{}};var m=new(c("MercurySingletonProvider"))(l);f.exports=l}),null);
__d("P2PActionConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({CREDIT_CARDS_UPDATED:"credit_cards_updated",CREDIT_CARDS_UPDATED_ERROR:"credit_cards_updated_error",CHANNEL_EVENTS_ALLOWED:"channel_events_allowed",CHANNEL_EVENTS_IGNORED:"channel_events_ignored",CREDIT_CARD_SAVING:"credit_card_saving",CREDIT_CARD_ADDED:"credit_card_added",CREDIT_CARD_ADDED_ERROR:"credit_card_added_error",CREDIT_CARD_ADDED_ERROR_CLEARED:"credit_card_added_error_cleared",CREDIT_CARD_DELETED:"credit_card_deleted",CREDIT_CARD_DELETED_ERROR:"credit_card_deleted_error",CREDIT_CARD_UPDATED:"credit_card_updated",CREDIT_CARD_UPDATED_ERROR:"credit_card_updated_error",PRESET_CREDIT_CARD_UPDATED:"preset_credit_card_updated",PRESET_CREDIT_CARD_UPDATED_ERROR:"preset_credit_card_updated_error",CREDIT_CARD_VERIFIED:"credit_card_verified",CREDIT_CARD_VERIFIED_ERROR:"credit_card_verified_error",PAYMENT_METHODS_UPDATED:"payment_methods_updated",PAYMENT_METHODS_UPDATED_ERROR:"payment_methods_updated_error",TRANSFERS_UPDATED:"transfers_updated",TRANSFERS_UPDATED_ERROR:"transfers_updated_error",NUX_TRANSFERS_UPDATED:"nux_transfers_updated",TRANSFER_ADDED:"transfer_added",TRANSFER_ADDED_ERROR:"transfer_added_error",TRANSFER_UPDATED:"transfer_updated",TRANSFER_UPDATED_ERROR:"transfer_updated_error",TRANSFER_ACCEPTED:"transfer_accepted",TRANSFER_DECLINED:"transfer_declined",CHAT_SEND_VIEW_OPENED:"chat_send_view_opened",CHAT_SEND_VIEW_CLOSED:"chat_send_view_closed",BIN_NUMBER_VALIDATED:"bin_number_validated",BIN_NUMBER_VALIDATED_ERROR:"bin_number_validated_error",USER_ELIGIBILITY_UDPATED:"user_eligibility_updated",FRIENDS_LIST_UPDATED:"friends_list_updated",DIALOG_SHOWN:"dialog_shown",DIALOG_CLOSED:"dialog_closed",BANNER_STATES_UPDATED:"banner_states_updated",BANNER_DISMISSED:"banner_dismissed",BANNER_VIEWED:"banner_viewed",BANNER_COMPLETED:"banner_completed",MONEYPENNY_TRANSFER_CREATED:"moneypenny_transfer_created",MONEYPENNY_TRANSFER_CREATED_ERROR:"moneypenny_transfer_created_error",PLATFORM_CONTEXT_ADDED:"platform_context_added",PLATFORM_CONTEXT_ADDED_ERROR:"platform_context_added_error",PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED:"platform_context_save_errors_cleared",PLATFORM_CONTEXT_BANNER_DISMISSED:"platform_context_banner_dismissed",PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD:"platform_context_product_item_sold",PLATFORM_CONTEXT_CHANGED:"platform_context_changed",EXTENSIVE_TRANSFER_DETAILS_UPDATED:"extensive_transfer_details_updated",ADDRESS_SAVING:"address_saving",ADDRESSES_UPDATED:"addresses_updated",ADDRESS_ADDED:"address_added",ADDRESS_ADDED_ERROR:"address_added_error",ADDRESS_ADDED_ERROR_CLEARED:"address_added_error_cleared",CHECKOUT_CART_INITIATED:"checkout_cart_initiated",CHECKOUT_CART_CREATED:"checkout_cart_created",CHECKOUT_SHIPPING_OPTION_SELECTED:"checkout_shipping_option_selected",CHECKOUT_ADDRESS_SELECTED:"checkout_address_selected",CHECKOUT_CREDIT_CARD_SELECTED:"checkout_credit_card_selected",CHECKOUT_ADDRESS_FORM_TOGGLED:"checkout_address_form_toggled",CHECKOUT_CREDIT_CARD_FORM_TOGGLED:"checkout_credit_card_form_toggled",CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED:"checkout_address_options_toggled",CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED:"checkout_credit_card_edit_options_toggled",CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED:"checkout_payment_edit_options_toggled",CHECKOUT_PAYMENT_METHOD_SELECTED:"checkout_payment_method_selected",CHECKOUT_PAYMENT_METHOD_CONFIGURED:"checkout_payment_method_configured",CHECKOUT_PAYMENT_METHOD_CONFIRMED:"checkout_payment_method_confirmed",CHECKOUT_ADDRESS_FORM_VALIDATED:"checkout_address_form_validated",CHECKOUT_CREDIT_CARD_FORM_VALIDATED:"checkout_credit_card_form_validated",CHECKOUT_EDIT_COMPLETED:"checkout_completed",CHECKOUT_PROCESSING:"checkout_processing",CHECKOUT_BUYER_PROFILE_UPDATED:"checkout_buyer_profile_updated",CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED:"checkout_manual_payment_receipt_updated",PAYMENT_REQUEST_INITIATED:"payment_request_initiated",PAYMENT_REQUEST_INITIATED_COMPLETE:"payment_request_initiated_completed",PAYMENT_REQUEST_CREATED:"payment_request_created",PAYMENT_REQUEST_CREATED_ERROR:"payment_request_created_error",PAYMENT_REQUEST_UPDATED:"payment_request_updated",PAYMENT_REQUEST_DECLINE_INITIATED:"payment_request_decline_initiated",PAYMENT_REQUEST_DECLINED:"payment_request_declined",PAYMENT_REQUEST_DECLINE_ERROR:"payment_request_decline_error",PAYMENT_REQUESTS_FETCHED:"payment_requests_fetched",PAYMENT_REQUEST_CANCEL_INITIATED:"payment_request_cancel_initiated",PAYMENT_REQUEST_CANCELED:"payment_request_canceled",PAYMENT_REQUEST_CANCEL_ERROR:"payment_request_cancel_error"});f.exports=h}),null);
__d("P2PDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:false})}),null);
__d("P2PSendMoneyDialogStore",["P2PActionConstants","EventEmitter","Map","P2PDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=36,k=void 0,l=void 0;h=babelHelpers.inherits(m,c("EventEmitter"));i=h&&h.prototype;function m(){i.constructor.call(this);l=new(c("Map"))();k=c("P2PDispatcher").register(this.onEventDispatched.bind(this))}m.prototype.onEventDispatched=function(n){var o=n.data,p=n.type;switch(p){case c("P2PActionConstants").CHAT_SEND_VIEW_OPENED:this.handleChatSendViewOpened(o);this.emit("change");break;case c("P2PActionConstants").CHAT_SEND_VIEW_CLOSED:this.handleChatSendViewClosed(o);this.emit("change");break}};m.prototype.getStateByThreadID=function(n){return l.get(n)};m.prototype.handleChatSendViewOpened=function(n){l.set(n.threadID,{amount:n.amount,groupSendRecipientUserIDs:n.groupSendRecipientUserIDs,groupSendReceiptDetails:n.groupSendReceiptDetails,groupThreadFBID:n.groupThreadFBID,onCompletion:n.onCompletion,openRequestTab:n.openRequestTab,memoText:n.memoText&&n.memoText.substr(0,j),platformData:n.platformData,referrer:n.referrer,paymentRequestID:n.paymentRequestID,sendMoneyDialogShown:true,sendMoneyNUXDismissed:n.sendMoneyNUXDismissed,useModal:n.useModal})};m.prototype.handleChatSendViewClosed=function(n){l.set(n.threadID,{amount:"",groupSendRecipientUserIDs:[],groupSendReceiptDetails:null,groupThreadFBID:"",onCompletion:null,openRequestTab:false,memoText:null,platformData:null,referrer:null,paymentRequestID:null,sendMoneyDialogShown:false,sendMoneyNUXDismissed:false,useModal:false})};m.prototype.isAnyChatSendViewOpen=function(){__p&&__p();for(var n=l.values(),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;if(r.sendMoneyDialogShown)return true}return false};f.exports=new m()}),null);
__d("FantaTabsAppBase",["Bootloader","ChatAppActions","ChatAppStore","ChatPerfInstrumentation","CSS","JSLogger","Map"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.prototype.init=function(i,j,k){__p&&__p();if(this.isInitialized()){c("JSLogger").create("chat_app").error("repeated_init");return}this.$FantaTabsAppBase1=i;this.tabsElem=j;var l=c("ChatAppStore").addListener(function(){var m=c("ChatAppStore").getPreviousState(),n=c("ChatAppStore").getState();if(m.initialDisplayDone===false&&n.initialDisplayDone===true){c("ChatPerfInstrumentation").logDisplayDone();l.remove()}});c("ChatPerfInstrumentation").init();this.$FantaTabsAppBase2(k);this.initializeFantaData(k.interstitial_data);this.initializeFantaUI();this.$FantaTabsAppBase3();c("ChatAppActions").tti();c("ChatPerfInstrumentation").logTTI()};h.prototype.isInitialized=function(){return!!c("ChatAppStore").getState().isInitialized};h.prototype.isHidden=function(){var i=c("ChatAppStore").getState();return!!(!i.isInitialized||i.isHidden)};h.prototype.hide=function(){if(this.isHidden())return;c("CSS").hide(this.$FantaTabsAppBase1);c("ChatAppActions").hide()};h.prototype.unhide=function(){__p&&__p();var i=c("ChatAppStore").getState();if(i.isInitialized){if(i.isHidden){c("CSS").show(this.$FantaTabsAppBase1);e(["Dock"],function(j){j.resizeAllFlyouts()});c("ChatAppActions").unhide()}}else if(!i.isLoaded){e(["UIPagelet"],function(j){j.loadFromEndpoint("ChatTabsPagelet","ChatTabsPagelet");j.loadFromEndpoint("BuddylistPagelet","BuddylistPagelet")});c("ChatAppActions").load()}};h.prototype.initializeFantaData=function(i){};h.prototype.initializeFantaUI=function(){};h.prototype.$FantaTabsAppBase2=function(i){__p&&__p();e(["MercuryBlockedParticipants.bs","MercuryDelayedRoger","MercuryDeliveryState","MercuryParticipants","MercuryServerPayloadPreprocessor","MercuryThreads","MercuryUnreadState","MercuryUnseenState","MercurySyncEnvironment","P2PSendMoneyDialogStore"],function(j,k,l,m,n,o,p,q,r,s){__p&&__p();j.get();k.get();l.get();m;o.get();q.get();p.get();r.setUp();c("ChatPerfInstrumentation").logInitStores();if(i.graphql_payload)c("Bootloader").loadModules(["ChatInitialDataTransformer.bs"],function(t){var u=i.graphql_payload,v=t.transform(u);v.message_blocked_ids=u.message_blocked_ids;v.message_ignored_ids=u.message_ignored_ids;v.payload_source=u.payload_source;n.get().handleUpdate(v)},"FantaTabsAppBase");else n.get().handleUpdate(i.initial_data)})};h.prototype.$FantaTabsAppBase3=function(){e(["HotLikeSound","ChatOptions"],function(i,j){i.setCheckSoundEnabledFunc(function(){return j.getSetting("sound")});c("ChatPerfInstrumentation").logInitSound()})};function h(){}f.exports=h}),null);
__d("FBRTCStruct",[],(function a(b,c,d,e,f,g){__p&&__p();var h=function h(j,k,l){__p&&__p();var m=void 0,n=void 0;if(typeof j=="string"||j instanceof String){n=j;m=j}else for(var o in j)if(Object.prototype.hasOwnProperty.call(j,o))if(o==="index")l=j[o];else{n=o;m=j[o]}k[n]=l;k.strNames[l]=m};function i(j){"use strict";this.strNames=[];for(var k=0;k<j.length;k++)h(j[k],this,k)}f.exports=i}),null);
__d("FBRTCConstants",["FBRTCStruct","keyMirror"],(function a(b,c,d,e,f,g){__p&&__p();var h=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",PING:"ping",PING_ACK:"ping_ack",HANGUP:"hang_up",OTHER_DISMISS:"other_dismiss",MSG_ACK:"msg_ack",PRANSWER:"pranswer",ICERESTART_OFFER:"icerestart_offer",ICERESTART_ANSWER:"icerestart_answer",PCRESTART_OFFER:"pcrestart_offer",PCRESTART_ANSWER:"pcrestart_answer",SDP_UPDATE:"sdp_update",OFFER_ACK:"offer_ack",OFFER_NACK:"offer_nack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",VIDEO_REQUEST:"video_request",ACK:"ack",SWITCH_TO_MULTIWAY:"switch_to_multiway"}),i=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",CHILD_WINDOW_START_CALL:"rtc_child_window_start_call",CHILD_WINDOW_MESSAGE:"rtc_child_window_message"}),j=Object.freeze({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",VOIP:"voip"}),k=Object.freeze({LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5}),l=Object.freeze({AUDIO_ONLY:"audio_only",AUDIO_VIDEO:"audio_video",SCREEN_CONTENT:"screen"}),m=Object.freeze({CUSTOM_VIDEO_STREAM_SIZE:"CUSTOM_VIDEO_STREAM_SIZE",CUSTOM_VIDEO:"CUSTOM_VIDEO",FHD_VIDEO:"FHD_VIDEO",HD_VIDEO:"HD_VIDEO",LQ_VIDEO:"LQ_VIDEO",NO_VIDEO:"NO_VIDEO",SD_VIDEO:"SD_VIDEO"}),n=Object.freeze({BALL_IS_LIFE:"BallIsLifeEffect",TRIANGLE_FRAME:"TriangleFrameEffect",SNOW_FALLING:"SnowFallingEffect"}),o=Object.freeze({FHD_HEIGHT:1080,HD_HEIGHT:720,LQ_HEIGHT:180,SD_HEIGHT:480,FHD_WIDTH:1920,HD_WIDTH:1280,LQ_WIDTH:320,SD_WIDTH:848,VLQ_FRAME_RATE:5,LQ_FRAME_RATE:15,FRAME_RATE:30}),p=new(c("FBRTCStruct"))([{IGNORE_CALL:"IgnoreCall"},{HANGUP_CALL:"HangupCall"},{IN_ANOTHER_CALL:"InAnotherCall"},{ACCEPT_AFTER_HANGUP:"CallEndAcceptAfterHangUp"},{NO_ANSWER_TIMEOUT:"NoAnswerTimeout"},{INCOMING_TIMEOUT:"IncomingTimeout"},{OTHER_INSTANCE_HANDLED:"OtherInstanceHandled"},{SIGNALING_MESSAGE_FAILED:"SignalingMessageFailed"},{CONNECTION_DROPPED:"ConnectionDropped"},{CLIENT_INTERRUPTED:"ClientInterrupted"},{WEBRTC_ERROR:"WebRTCError"},{CLIENT_ERROR:"ClientError"},{NO_PERMISSION:"NoPermission"},{OTHER_NOT_CAPABLE:"OtherNotCapable"},{NO_UI_ERROR:"NoUIShown"},{UNSUPPORTED_VERSION:"VersionUnsupported"},{CALLER_NOT_VISIBLE:"CallerNotVisible"},{CARRIER_BLOCKED:"CarrierBlocked"},{OTHER_CARRIER_BLOCKED:"OtherCarrierBlocked"}]),q=Object.freeze({REMOTE_PEER_HANGUP:"CollabRemotePeerHangup",REMOTE_PEER_REJECT:"CollabRemotePeerReject",CLOSED_BY_MCU:"CollabClosedByMcu",CLOSED_AS_STALE:"CollabClosedAsStale",CALL_INITIALIZATION_FAILED:"CollabCallInitializationFailed",SIP_CONNECTION_INITIALIZATION_FAILED:"CollabSipConnectionInitializationFailed",LOST_MCU_CONNECTION:"CollabLostMcuConnection",MCU_NO_AUDIO_STREAM:"CollabMcuNoAudioStream",MCU_INVALID_STREAM_CONFIGURATION:"CollabMcuInvalidStreamConfiguration",LOST_MCU_THRIFT_CONNECTION:"CollabLostMcuThriftConnection",LOST_SIP_ADAPTER_CONNECTION:"CollabLostSipAdapterConnection",UNKNOWN:"CollabUnknown"}),r=Object.freeze({TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10}),s=Object.freeze({ONE_HOUR:"1hour",UNTIL_EIGHT_AM:"8am",ALWAYS:"always"}),t=c("keyMirror")({AUDIO:null,VIDEO:null}),u=Object.freeze({CUSTOM:"custom",MULTIWAY:"multiway",P2P:"p2p"}),v=Object.freeze({NEW:"new",CHECKING:"checking",CONNECTED:"connected",COMPLETED:"completed",FAILED:"failed",DISCONNECTED:"disconnected",CLOSED:"closed"}),w=Object.freeze({DOMINANT_SPEAKER:"DOMINANT_SPEAKER",GRID:"GRID"}),x={CallBlockingConstants:s,CallEndReason:p,CallType:j,ChildWindowMessageType:i,CollabCallEndSubreason:q,GroupVideoViewLayout:w,IceConnectionState:v,IncomingCallDialogTypes:t,PayloadType:h,RTCConstraints:o,SignalingProtocol:u,StreamType:l,UIEventType:r,UploadLogLevel:k,VideoFilterEffect:n,VideoQuality:m,convertFromUploadLogLevel:function y(z){switch(z){case k.LL_DEBUG:return"d";case k.LL_BASIC:return"b";case k.LL_WARNING:return"w";case k.LL_INFO:return"i";case k.LL_VERBOSE:return"v";case k.LL_NONE:default:return null}},convertToUploadLogLevel:function y(z){switch(z){case"d":return k.LL_DEBUG;case"b":return k.LL_BASIC;case"w":return k.LL_WARNING;case"i":return k.LL_INFO;case"v":return k.LL_VERBOSE;default:return k.LL_NONE}},uploadLogLevelString:function y(z){switch(z){case k.LL_BASIC:return"basic";case k.LL_DEBUG:return"debug";case k.LL_WARNING:return"warning";case k.LL_INFO:return"info";case k.LL_VERBOSE:return"verbose";default:return""}},endCallReasonFromString:function y(z){return p.strNames.indexOf(z)},callEndReasonString:function y(z){if(z<0||z>p.strNames.length)return"Unknown";return p.strNames[z]},fullCallEndReasonString:function y(z,A){return this.callEndReasonString(z)+"_"+(A?"remote":"local")}};f.exports=x}),null);
__d("FBRTCLogger",["Log","LogHistory","MarauderLogger","RTCConfig","VideoCallTypedLogger","formatDate","pageID"],(function a(b,c,d,e,f,g){__p&&__p();var h="webrtc",i="sent_message",j="received_message",k="send_succeeded",l="send_failed",m="info",n="call_action",o="client_event",p="client_error",q="type",r="msg_id",s="ack_msg_id",t="call_id",u="from",v="to",w="content",x="tag",y="peer_id",z="error_code",A="trigger",B="endcallstats",C=null;D.getInstance=function(){"use strict";if(!C)C=new D();return C};function D(){"use strict";this.$FBRTCLogger1=c("LogHistory").getInstance(h)}D.prototype.logToConsole=function(E){"use strict";var F="Console";this.$FBRTCLogger2(null,null,F,E);this.$FBRTCLogger1.log(F,E)};D.prototype.logReceivedMessage=function(E,F,G){"use strict";__p&&__p();var H={};H[u]=E;H[t]=F;H[q]=G.type;H[r]=G.msg_id;if(G.sdp)H[w]=G.sdp;if(G.ack_id)H[s]=G.ack_id;if(c("RTCConfig").rtc_message_logging){var I=G.type||G.msgType;new(c("VideoCallTypedLogger"))().setIsClient(true).setEvent("p2p_message_receive").setMessageType(I).setPeerID(E).setCallID(F?F.toString():null).log()}this.$FBRTCLogger3(j,H);this.$FBRTCLogger2(E,F,"Received",G.type+", "+G.msg_id)};D.prototype.logSentMessage=function(E,F,G){"use strict";__p&&__p();var H={};H[v]=E;H[t]=F;H[q]=G.type;H[r]=G.msg_id;if(G.sdp)H[w]=G.sdp;if(G.ack_id)H[s]=G.ack_id;this.$FBRTCLogger3(i,H);this.$FBRTCLogger2(E,F,"Sent",G.type+", "+G.msg_id)};D.prototype.logSentMessageSuccess=function(E,F,G,H){"use strict";var I={};I[y]=E;I[t]=F;I[q]=G;I[r]=H;this.$FBRTCLogger3(k,I)};D.prototype.logSentMessageFailure=function(E,F,G,H,I){"use strict";var J={};J[y]=E;J[t]=F;J[q]=G;J[r]=H;J[z]=I;this.$FBRTCLogger3(l,J);this.$FBRTCLogger2(E,F,"Send Failed",G+", "+I)};D.prototype.logCallAction=function(E,F,G,H,I){"use strict";__p&&__p();var J={};J[y]=E;J[t]=F;J[n]=G;J[w]=H;if(I)J[A]=I;this.$FBRTCLogger3(n,J);this.$FBRTCLogger2(E,F,"CallAction",G+", "+JSON.stringify(H))};D.prototype.logEvent=function(E,F,event){"use strict";var G={};G[y]=E;G[t]=F;G[w]=event;this.$FBRTCLogger3(o,G);this.$FBRTCLogger2(E,F,"Event",event)};D.prototype.logInfo=function(E,F,G){"use strict";var H={};H[y]=E;H[t]=F;H[w]=G;this.$FBRTCLogger3(m,H);this.$FBRTCLogger2(E,F,"Info",G)};D.prototype.logError=function(E,F,G){"use strict";var H={};H[y]=E;H[t]=F;H[w]=G;this.$FBRTCLogger3(p,H);this.$FBRTCLogger2(E,F,"Error",G)};D.prototype.logErrorWithoutID=function(E){"use strict";this.logError(null,null,E)};D.prototype.logEndCallSummary=function(E){"use strict";__p&&__p();if(!E)return;var F={};F[y]=E.peerID;F[t]=E.callID;F[x]=B;F[w]=E.toString();var G=E.getExtraInfo();for(var H in G)if(Object.prototype.hasOwnProperty.call(G,H))F[H]=G[H];this.$FBRTCLogger3(m,F);this.$FBRTCLogger2(E.peerID,E.callID,"Call Summary",F)};D.prototype.$FBRTCLogger3=function(E,F){"use strict";F.page_id=c("pageID");this.$FBRTCLogger1.log(E,F);c("MarauderLogger").log(E,h,F)};D.prototype.$FBRTCLogger2=function(E,F,G,H){"use strict"};D.CallAction={START_CALL:"start_call",RECEIVED_CALL:"received_call",ANSWER_CALL:"answer_call",END_CALL:"end_call",DENIED_PERMISSION:"denied_permission",SET_MUTE:"set_mute",SET_VIDEO_ON:"set_video_on",SET_SELF_VIEW_ON:"set_self_view_on",SET_FULLSCREEN_ON:"set_fullscreen_on",START_SKYPE:"start_skype",TRY_NEW:"try_new",OPEN_POPUP:"open_popup",POPUP_OPENED:"popup_opened",AUTO_DISABLE_VIDEO:"auto_disable_video",FAILED_GETTING_URI:"failed_getting_uri",OLD_URI:"old_uri",USER_SETTINGS_CHANGED:"user_settings_changed"};D.Trigger={ADMIN_MESSAGE:"admin_message",CHAT_TAB_ICON:"chat_tab_icon",CHAT_TAB_ICON_TOUR:"chat_tab_icon_tour",CHAT_TAB_VOICE_ICON:"chat_tab_voice_icon",SKYPE_DEPRECATION_DIALOG:"skype_deprecation_dialog",REDIAL_BUTTON:"redial_button",RETURN_CALL:"return_call",WEB_MESSENGER:"web_messenger",POPUP_CALL_START_BUTTON:"popup_start_call_button",TIMELINE_PROFILE:"timeline_profile",UNKNOWN:"unknown",RESET_CALL:"install_screen_sharing_ext_dialog",MULTIWAY_CHAT_TAB_SHEET_JOIN_CALL_BUTTON:"multiway_chat_tab_sheet_join_call_button",MULTIWAY_POPUP_START_CALL_BUTTON:"multiway_popup_start_call_button",MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:"multiway_thread_header_audio_button",MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:"multiway_thread_header_video_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_audio_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_audio_call_video_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_video_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_video_call_video_button",MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON:"multiway_thread_list_join_call_button"};D.Key={DEVICE_INFO:"device_info",RATING:"rating5",RATING_SHOWN:"rating_shown",SURVEY_CHOICE:"survey_choice",SURVEY_DETAILS:"survey_details",SURVEY_SHOWN:"survey_shown",INITIATED_BY_PAGE_ID:"initiated_by_page_id",PEER_IS_MOBILE:"peer_is_mobile",SCREEN_DURATION:"screen_duration"};f.exports=D}),null);
__d("FBRTCLocalMessageQueue",["CacheStorage","FBRTCLogger","Map","RTCConfig"],(function a(b,c,d,e,f,g){__p&&__p();var h="localstorage",i="RTC_",j="offer",k="offer_msg",l="data_",m=30*1e3,n=15*1e3,o=500,p=new(c("Map"))();function q(){"use strict";this.$FBRTCLocalMessageQueue1=c("FBRTCLogger").getInstance()}q.prototype.enqueueOffer=function(r,s){"use strict";var t=this.$FBRTCLocalMessageQueue2(r,k);this.$FBRTCLocalMessageQueue3(t,j,s)};q.prototype.getOffer=function(r){"use strict";var s=this.$FBRTCLocalMessageQueue2(r,k);return this.$FBRTCLocalMessageQueue4(s,j)};q.prototype.removeOffer=function(r){"use strict";var s=this.$FBRTCLocalMessageQueue2(r,k);s.remove(j)};q.prototype.enqueueMessage=function(r,s,t,u){"use strict";var v=l+t.toString(),w=p.get(r)||new(c("Map"))();w.set(v,u);p.set(r,w);this.$FBRTCLocalMessageQueue1.logToConsole("Queued "+v)};q.prototype.drainQueue=function(r,s){"use strict";__p&&__p();var t=p.get(r)||new(c("Map"))(),u=void 0,v=void 0;for(var w=t,x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{y=w.next();if(y.done)break;z=y.value}var A=z,u=A[0],v=A[1];void u;s(v)}p.set(r,new(c("Map"))())};q.prototype.enableDequeuing=function(r,s,t,u){"use strict";if(u===undefined)u=n;this.$FBRTCLocalMessageQueue5(r,s,t,u)};q.prototype.$FBRTCLocalMessageQueue5=function(r,s,t,u){"use strict";__p&&__p();var v=this.$FBRTCLocalMessageQueue2(r,s),w=v.keys(),x=w.length;for(var y=0;y<x;y++){var z=this.$FBRTCLocalMessageQueue6(v,w[y]);if(z&&t)t(z)}this.$FBRTCLocalMessageQueue1.logToConsole("Dequeued "+x+" ("+r+") with "+u+" left)");if(u>0){u-=o;setTimeout(function(){this.$FBRTCLocalMessageQueue5(r,s,t,u)}.bind(this),o)}};q.prototype.$FBRTCLocalMessageQueue3=function(r,s,t){"use strict";var u={__t:Date.now(),__d:t};r.set(s,u)};q.prototype.$FBRTCLocalMessageQueue4=function(r,s){"use strict";var t=r.get(s);if(t&&this.$FBRTCLocalMessageQueue7(t))return t.__d;else if(t)r.remove(s);return null};q.prototype.$FBRTCLocalMessageQueue6=function(r,s){"use strict";var t=this.$FBRTCLocalMessageQueue4(r,s);if(t!==null){r.remove(s);return t}return null};q.prototype.$FBRTCLocalMessageQueue7=function(r){"use strict";return Date.now()-r.__t<m};q.prototype.$FBRTCLocalMessageQueue2=function(r,s){"use strict";return new(c("CacheStorage"))(h,""+i+r+"_"+s+"_")};f.exports=q}),null);
__d("FBRTCCallControlActions",["FBRTCDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({ACCEPT_ESCALATION:null,HANG_UP:null,PARENT_WINDOW_START_CALL:null,TOGGLE_FULL_SCREEN:null,TOGGLE_MUTE_AUDIO:null,TOGGLE_MUTE_VIDEO:null,TOGGLE_SCREEN_SHARING:null,TOGGLE_SELF_VIEW:null,SHOW_SETTINGS:null,START_CALL:null,DECLINE_ESCALATION:null,RECEIVED_SIGNALING_MESSAGE:null,RESET_CALL:null,OPEN_SCREEN_IN_NEW:null,CLOSE_STANDALONE_SCREEN:null,REDIAL_CALL:null}),i={Types:h,hangUp:function j(){c("FBRTCDispatcher").dispatch({type:h.HANG_UP})},toggleMuteAudio:function j(){c("FBRTCDispatcher").dispatch({type:h.TOGGLE_MUTE_AUDIO})},toggleMuteVideo:function j(){c("FBRTCDispatcher").dispatch({type:h.TOGGLE_MUTE_VIDEO})},toggleFullScreen:function j(){c("FBRTCDispatcher").dispatch({type:h.TOGGLE_FULL_SCREEN})},toggleSelfView:function j(){c("FBRTCDispatcher").dispatch({type:h.TOGGLE_SELF_VIEW})},showSettings:function j(){c("FBRTCDispatcher").dispatch({type:h.SHOW_SETTINGS})},toggleScreenSharing:function j(){c("FBRTCDispatcher").dispatch({type:h.TOGGLE_SCREEN_SHARING})},startCall:function j(){c("FBRTCDispatcher").dispatch({type:h.START_CALL})},openScreenInNewWindow:function j(){c("FBRTCDispatcher").dispatch({type:h.OPEN_SCREEN_IN_NEW})},receivedSignalingMessage:function j(k){c("FBRTCDispatcher").dispatch({type:h.RECEIVED_SIGNALING_MESSAGE,message_type:k.msgType,message:k})},acceptEscalation:function j(){c("FBRTCDispatcher").dispatch({type:h.ACCEPT_ESCALATION})},declineEscalation:function j(){c("FBRTCDispatcher").dispatch({type:h.DECLINE_ESCALATION})},resetCall:function j(k){c("FBRTCDispatcher").dispatch({type:h.RESET_CALL,trigger:k})},redialCall:function j(){c("FBRTCDispatcher").dispatch({type:h.REDIAL_CALL})},parentWindowStartCall:function j(){c("FBRTCDispatcher").dispatch({type:h.PARENT_WINDOW_START_CALL})}};f.exports=i}),null);
__d("FBRTCMessageListener",["invariant","Arbiter","ChannelConstants","FBRTCCallControlActions","FBRTCConstants","FBRTCLocalMessageQueue","FBRTCSupport","RTCConfig","guid","mixInEventEmitter"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("FBRTCConstants").ChildWindowMessageType,j=45*1e3,k=[],l=null,m=null,n=null,o=null,p=null,q=false,r=null,s=void 0,t={init:function u(v,w){__p&&__p();if(q)return;q=true;c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("webrtc"),function(y,z){this._onMessage(z.obj)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("webrtc_offer"),function(y,z){this._onMessage(z.obj)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("webrtc_offerack"),function(y,z){this._onMessage(z.obj)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("rtc_multi_json"),function(y,z){this._onMultiwayMessage(z.obj)}.bind(this));this._localMessageQueue=new(c("FBRTCLocalMessageQueue"))();if(c("RTCConfig").PassMessagesBetweenWindowsGK){if(c("FBRTCSupport").isWebrtcSupported()&&window.addEventListener){var x=v?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener("message",x,false)}if(v)this._connectToParentWindow(w)}},setParentWindowNonce:function u(v){o=v},generateNewNonce:function u(){p=c("guid")();return p},setMultiwayMessageHandler:function u(v,w){!r||h(0);r=w?v.bind(w):v},_onMultiwayMessage:function u(v){this.emit("multiwayMessageReceived",v);if(r)r(v)},setMessageHandler:function u(v,w){!l||h(0);l=w?v.bind(w):v;while(k.length)l(k.shift())},removeMessageHandler:function u(){l=null},setParentWindowStartCallHandler:function u(v){s=v;return function(){return s=null}},_onMessage:function u(v){if(v.from)v.from=v.from.toString();this.emit("messageReceived",v);if(l)l(v);else k.push(v);this._passMessageToChildWindow(v)},_connectToParentWindow:function u(v){if(window.opener&&window.opener.postMessage){var w={type:i.CHILD_WINDOW_READY,nonce:o,childNonce:this.generateNewNonce(),peerID:v};window.opener.postMessage(w,window.location.origin)}},_verifyWindowMessage:function u(event){return event.origin===window.location.origin&&event.data&&p&&event.data.nonce===p},_handleWindowMessageToParent:function u(event){if(!this._verifyWindowMessage(event))return;if(event.data.type===i.CHILD_WINDOW_READY){this.setParentWindowNonce(event.data.childNonce);this._setChildWindow(event.source);this._replayQueuedMessagesToChild(event.data.peerID,m)}},_handleWindowMessageToChild:function u(event){if(!this._verifyWindowMessage(event))return;if(event.data.type===i.CHILD_WINDOW_MESSAGE)this._onMessage(event.data.message);if(event.data.type===i.CHILD_WINDOW_START_CALL)if(s)s();else c("FBRTCCallControlActions").parentWindowStartCall()},_replayQueuedMessagesToChild:function u(v,w){this._localMessageQueue.drainQueue(v,function(x){var y={type:i.CHILD_WINDOW_MESSAGE,nonce:o,message:x};w.postMessage(y,window.location.origin)})},_setChildWindow:function u(v){m=v;clearTimeout(n);n=setTimeout(function(){m=null},j);this._startCallInChildWindow();this.generateNewNonce()},_passMessageToChildWindow:function u(v){if(m){var w={type:i.CHILD_WINDOW_MESSAGE,nonce:o,message:v};m.postMessage(w,window.location.origin)}},_startCallInChildWindow:function u(){if(m){var v={type:i.CHILD_WINDOW_START_CALL,nonce:o};m.postMessage(v,window.location.origin)}}};c("mixInEventEmitter")(t,{messageReceived:true,multiwayMessageReceived:true});f.exports=t}),null);
__d("FBRTCMessageHandler",["Bootloader","FBRTCMessageListener","FBRTCSupport"],(function a(b,c,d,e,f,g){__p&&__p();var h=null,i=false,j=null,k={init:function n(){if(!i&&c("FBRTCSupport").isReceiveWebrtcSupported()){i=true;c("FBRTCMessageListener").init(false);c("FBRTCMessageListener").once("messageReceived",function(o){l()});c("FBRTCMessageListener").once("multiwayMessageReceived",function(o){m(o)})}}};function l(){if(!h)c("Bootloader").loadModules(["FBRTCIncomingCallController","FBRTCIncomingCallDialog","FBRTCMissedVideoCallHandler","FBRTCUnsupportedBrowserMessage"],function(n,o,p,q){h=new n(o,q,new p());c("FBRTCMessageListener").setMessageHandler(h.onMessageReceived,h)},"FBRTCMessageHandler")}function m(n){if(!j)c("Bootloader").loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(o,p){j=new o(p);c("FBRTCMessageListener").setMultiwayMessageHandler(j.onMessageReceived,j);j.onMessageReceived(n)},"FBRTCMessageHandler")}f.exports=k}),null);
__d("MercuryShareAttachmentRenderLocations",[],(function a(b,c,d,e,f,g){"use strict";var h={CHAT:"chat",CHAT_PREVIEW:"chat_preview",COMPOSER:"ufi_composer",MESSENGER:"messenger",PAGES_INBOX:"pages_inbox",getValues:function i(){return[h.CHAT,h.CHAT_PREVIEW,h.COMPOSER,h.MESSENGER,h.PAGES_INBOX]},isPreview:function i(j){return j===h.CHAT_PREVIEW}};f.exports=h}),null);
__d("MercuryAudienceRestrictedTypeaheadDataSource",["CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("DataSource"));i=h&&h.prototype;function j(k){"use strict";__p&&__p();k=k||{};k.kanaNormalization=true;k.maxResults=c("MercuryTypeaheadConstants").COMPOSER_CHATTAB_MAX;k.minQueryLength=2;i.constructor.call(this,k);this.$MercuryAudienceRestrictedTypeaheadDataSource1=false;this.$MercuryAudienceRestrictedTypeaheadDataSource2=false;this.$MercuryAudienceRestrictedTypeaheadDataSource3={};this.$MercuryAudienceRestrictedTypeaheadDataSource4=true;this.queryCache={};this.localCache={};this.queryIDs={}}j.prototype.dirty=function(){"use strict";return this};j.prototype.buildData=function(k){"use strict";return i.buildData.call(this,k)};j.prototype.query=function(k,l,m,n){"use strict";var o=l||k.length===1;return i.query.call(this,k,o,m,n)};j.prototype.getQueryData=function(k,l){"use strict";return babelHelpers["extends"]({},i.getQueryData.call(this,k,l))};j.prototype.setEntry=function(k,l){"use strict";this.$MercuryAudienceRestrictedTypeaheadDataSource3[k]=l};j.prototype.getEntry=function(k){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource3[k]||null};j.prototype.getCachedShortProfileIDs=function(){"use strict";var k=c("ShortProfiles").getCachedProfileIDs(),l=k.filter(function(m){var n=c("ShortProfiles").getNow(m);return m==c("CurrentUser").getID()||n&&(n.type===c("MercuryParticipantTypes").FRIEND||n.type===c("MercuryParticipantTypes").FB4C)});return l};j.prototype.isBootstrapped=function(){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource1};j.prototype.isBootstrapping=function(){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource2};j.prototype.processEntries=function(k,l){"use strict";k=k&&k.map(function(m){if(m.index==null&&(m.render_type===c("MercuryParticipantTypes").FRIEND||m.render_type===c("MercuryParticipantTypes").FB4C))m.index=c("OrderedFriendsList").getActiveRank(m.uid);return m});return i.processEntries.call(this,k)};j.prototype.mergeUids=function(k,l,m,n){"use strict";var o=l.sort(function(p,q){var r=this.getEntry(p),s=this.getEntry(q);return r&&r.index&&s&&s.index?r.index-s.index:0}.bind(this));return i.mergeUids.call(this,k,o,m,n)};j.prototype.setQueryData=function(k,l){"use strict";return i.setQueryData.call(this,k)};j.prototype.respond=function(k,l,m){"use strict";return i.respond.call(this,k,l,m)};j.prototype.setShowThreads=function(k){"use strict";this.$MercuryAudienceRestrictedTypeaheadDataSource4=k};f.exports=j}),null);
__d("PhotoStoreCore",[],(function a(b,c,d,e,f,g){__p&&__p();var h={actions:{UPDATE:"update"},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function i(j){if(!this._photoCache[j])throw new Error("Photo cache requested for unknown set ID");return this._photoCache[j]},hasBeenCreated:function i(j){return!!this._photoCache[j]},clearSetCache:function i(j){delete this._photoCache[j];delete this._postCreateCallbacks[j]},getByIndex:function i(j,k,l){this.getPhotoCache(j).getItemAtIndex(k,l)},getByIndexImmediate:function i(j,k){if(this._photoCache[j])return this._photoCache[j].getItemAtIndexImmediate(k);return undefined},getItemsInAvailableRange:function i(j){var k=this.getAvailableRange(j),l=[];for(var m=k.offset;m<k.length;m++)l.push(this.getByIndexImmediate(j,m));return l},getItemsAfterIndex:function i(j,k,l,m){var n=this.getCursorByIndexImmediate(j,k);this.fetchForward(j,n,l,m)},getAllByIDImmediate:function i(j){var k=Object.keys(this._photoCache);return k.map(function(l){return this.getByIndexImmediate(l,this.getIndexForID(l,j))}.bind(this)).filter(function(l){return!!l})},getIndexForID:function i(j,k){if(this._photoCache[j])return this._photoCache[j].getIndexForID(k);return undefined},getEndIndex:function i(j){var k=this.getAvailableRange(j);return k.offset+k.length-1},getCursorByIndexImmediate:function i(j,k){var l=this.getByIndexImmediate(j,k);if(l)return this._photoCache[j].getCursorForID(l.id);return undefined},hasNextPage:function i(j){var k=this.getCursorByIndexImmediate(j,this.getEndIndex(j));return this.getPhotoCache(j).hasNextPage(k)},getAvailableRange:function i(j){return this.getPhotoCache(j).getAvailableRange()},hasLooped:function i(j){return this.getPhotoCache(j).hasLooped()},fetchForward:function i(j,k,l,m){this.getPhotoCache(j).getItemsAfterCursor(k,l,m)},fetchBackward:function i(j,k,l,m){this.getPhotoCache(j).getItemsBeforeCursor(k,l,m)},executePostCreate:function i(j,k){if(this._photoCache[j])k&&k();else this._postCreateCallbacks[j]=k},runPostCreateCallback:function i(j){var k=this._postCreateCallbacks[j];if(k){k();delete this._postCreateCallbacks[j]}},setPreFetchCallback:function i(j,k){this.getPhotoCache(j).setPreFetchCallback(k)},updateData:function i(j){var k=j.set_id;if(!this._photoCache[k]){this._photoCache[k]=new j.cache_class(j);this.runPostCreateCallback(k)}else if(j.query_metadata.action==h.actions.UPDATE)this._photoCache[k].updateData(j);else this._photoCache[k].addData(j)},updateFeedbackData:function i(j){var k=Object.keys(j);k.forEach(function(l){return h.getAllByIDImmediate(l).forEach(function(m){m.feedback=j[l].feedback})})},reset:function i(){Object.keys(this._photoCache).forEach(function(j){return this.clearSetCache(j)}.bind(this))}};f.exports=h}),null);
__d("PhotoStore",["Arbiter","PhotoStoreCore"],(function a(b,c,d,e,f,g){c("Arbiter").subscribe("update-photos",function(h,i){c("PhotoStoreCore").updateData(i)});f.exports=c("PhotoStoreCore")}),null);
__d("DraftEditorTextNode.react",["invariant","React","ReactDOM","UserAgent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("UserAgent").isBrowser("IE <= 11");function l(p){return k?p.textContent==="\n":p.tagName==="BR"}var m=k?c("React").createElement("span",{key:"A","data-text":"true"},"\n"):c("React").createElement("br",{key:"A","data-text":"true"}),n=k?c("React").createElement("span",{key:"B","data-text":"true"},"\n"):c("React").createElement("br",{key:"B","data-text":"true"});i=babelHelpers.inherits(o,c("React").Component);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.$DraftEditorTextNode1=false}o.prototype.shouldComponentUpdate=function(p){var q=c("ReactDOM").findDOMNode(this),r=p.children==="";q instanceof Element||h(0);if(r)return!l(q);return q.textContent!==p.children};o.prototype.componentDidMount=function(){this.$DraftEditorTextNode1=!this.$DraftEditorTextNode1};o.prototype.componentDidUpdate=function(){this.$DraftEditorTextNode1=!this.$DraftEditorTextNode1};o.prototype.render=function(){if(this.props.children==="")return this.$DraftEditorTextNode1?m:n;return c("React").createElement("span",{key:this.$DraftEditorTextNode1?"A":"B","data-text":"true"},this.props.children)};f.exports=o}),null);
__d("DraftJsDebugLogging",["CurrentUser","DraftJsEventsTypedLogger","ScriptPath"],(function a(b,c,d,e,f,g){"use strict";f.exports={logBlockedSelectionEvent:function h(i){var j=i.anonymizedDom,k=i.extraParams,l=i.selectionState;new(c("DraftJsEventsTypedLogger"))().setEvent("blocked_selection_event").setAnonymizedDom(j).setExtraParams(k).setScriptPath(c("ScriptPath").getScriptPath()).setSelectionState(l).log()},logSelectionStateFailure:function h(i){var j=i.anonymizedDom,k=i.extraParams,l=i.selectionState;if(c("CurrentUser").isEmployee())new(c("DraftJsEventsTypedLogger"))().setEvent("selection_state_failure").setAnonymizedDom(j).setExtraParams(k).setScriptPath(c("ScriptPath").getScriptPath()).setSelectionState(l).log()}}}),null);
__d("setDraftEditorSelection",["invariant","DraftJsDebugLogging","containsNode","getActiveElement"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(p,q){if(!p)return"[empty]";var r=j(p,q);if(r.nodeType===Node.TEXT_NODE)return r.textContent;r instanceof Element||h(0);return r.outerHTML}function j(p,q){__p&&__p();var r=q!==undefined?q(p):[];if(p.nodeType===Node.TEXT_NODE){var s=p.textContent.length;return document.createTextNode("[text "+s+(r.length?" | "+r.join(", "):"")+"]")}var t=p.cloneNode();if(t.nodeType===1&&r.length)t.setAttribute("data-labels",r.join(", "));var u=p.childNodes;for(var v=0;v<u.length;v++)t.appendChild(j(u[v],q));return t}function k(p,q){var r=p;while(r)if(r instanceof Element&&r.hasAttribute("contenteditable"))return i(r,q);else r=r.parentNode;return"Could not find contentEditable parent of node"}function l(p){return p.nodeValue===null?p.childNodes.length:p.nodeValue.length}function m(p,q,r,s,t){__p&&__p();if(!c("containsNode")(document.documentElement,q))return;var u=b.getSelection(),v=p.getAnchorKey(),w=p.getAnchorOffset(),x=p.getFocusKey(),y=p.getFocusOffset(),z=p.getIsBackward();if(!u.extend&&z){var A=v,B=w;v=x;w=y;x=A;y=B;z=false}var C=v===r&&s<=w&&t>=w,D=x===r&&s<=y&&t>=y;if(C&&D){u.removeAllRanges();o(u,q,w-s,p);n(u,q,y-s,p);return}if(!z){if(C){u.removeAllRanges();o(u,q,w-s,p)}if(D)n(u,q,y-s,p)}else{if(D){u.removeAllRanges();o(u,q,y-s,p)}if(C){var E=u.focusNode,F=u.focusOffset;u.removeAllRanges();o(u,q,w-s,p);n(u,E,F,p)}}}function n(p,q,r,s){__p&&__p();var t=c("getActiveElement")();if(p.extend&&c("containsNode")(t,q)){if(r>l(q))c("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:k(q),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(s.toJS())});var u=q===p.focusNode;try{p.extend(q,r)}catch(v){c("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:k(q,function(x){var y=[];if(x===t)y.push("active element");if(x===p.anchorNode)y.push("selection anchor node");if(x===p.focusNode)y.push("selection focus node");return y}),extraParams:JSON.stringify({activeElementName:t?t.nodeName:null,nodeIsFocus:q===p.focusNode,nodeWasFocus:u,selectionRangeCount:p.rangeCount,selectionAnchorNodeName:p.anchorNode?p.anchorNode.nodeName:null,selectionAnchorOffset:p.anchorOffset,selectionFocusNodeName:p.focusNode?p.focusNode.nodeName:null,selectionFocusOffset:p.focusOffset,message:v?""+v:null,offset:r},null,2),selectionState:JSON.stringify(s.toJS(),null,2)});throw v}}else{var w=p.getRangeAt(0);w.setEnd(q,r);p.addRange(w.cloneRange())}}function o(p,q,r,s){var t=document.createRange();if(r>l(q))c("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:k(q),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(s.toJS())});t.setStart(q,r);p.addRange(t)}f.exports=m}),null);
__d("DraftEditorLeaf.react",["invariant","DraftEditorTextNode.react","React","ReactDOM","setDraftEditorSelection"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.$DraftEditorLeaf1=function(){__p&&__p();var l=this.props.selection;if(l==null||!l.getHasFocus())return;var m=this.props,n=m.block,o=m.start,p=m.text,q=n.getKey(),r=o+p.length;if(!l.hasEdgeWithin(q,o,r))return;var s=c("ReactDOM").findDOMNode(this);s||h(0);var t=s.firstChild;t||h(0);var u=void 0;if(t.nodeType===Node.TEXT_NODE)u=t;else if(t.tagName==="BR")u=s;else{u=t.firstChild;u||h(0)}c("setDraftEditorSelection")(l,u,q,o,r)};k.prototype.shouldComponentUpdate=function(l){var m=c("ReactDOM").findDOMNode(this.leaf);m||h(0);var n=m.textContent!==l.text||l.styleSet!==this.props.styleSet||l.forceSelection;return n};k.prototype.componentDidUpdate=function(){this.$DraftEditorLeaf1()};k.prototype.componentDidMount=function(){this.$DraftEditorLeaf1()};k.prototype.render=function(){__p&&__p();var l=this.props.block,m=this.props.text;if(m.endsWith("\n")&&this.props.isLast)m+="\n";var n=this.props,o=n.customStyleMap,p=n.customStyleFn,q=n.offsetKey,r=n.styleSet,s=r.reduce(function(u,v){var w={},x=o[v];if(x!==undefined&&u.textDecoration!==x.textDecoration)w.textDecoration=[u.textDecoration,x.textDecoration].join(" ").trim();return Object.assign(u,x,w)},{});if(p){var t=p(r,l);s=Object.assign(s,t)}return c("React").createElement("span",{"data-offset-key":q,ref:function(u){return this.leaf=u}.bind(this),style:s},c("React").createElement(c("DraftEditorTextNode.react"),null,m))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("DraftOffsetKey",[],(function a(b,c,d,e,f,g){"use strict";var h="-",i={encode:function j(k,l,m){return k+h+l+h+m},decode:function j(k){var l=k.split(h),m=l[0],n=l[1],o=l[2];return{blockKey:m,decoratorKey:parseInt(n,10),leafKey:parseInt(o,10)}}};f.exports=i}),null);
__d("DraftEditorBlock.react",["cx","invariant","DraftEditorLeaf.react","DraftOffsetKey","React","ReactDOM","Scroll","Style","UnicodeBidi","UnicodeBidiDirection","getElementPosition","getScrollPosition","getViewportDimensions","nullthrows"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=10,m=function m(o,p){return o.getAnchorKey()===p||o.getFocusKey()===p};j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.shouldComponentUpdate=function(o){return this.props.block!==o.block||this.props.tree!==o.tree||this.props.direction!==o.direction||m(o.selection,o.block.getKey())&&o.forceSelection};n.prototype.componentDidMount=function(){__p&&__p();var o=this.props.selection,p=o.getEndKey();if(!o.getHasFocus()||p!==this.props.block.getKey())return;var q=c("ReactDOM").findDOMNode(this),r=c("Style").getScrollParent(q),s=c("getScrollPosition")(r),t=void 0;if(r===window){var u=c("getElementPosition")(q),v=u.y+u.height,w=c("getViewportDimensions")().height;t=v-w;if(t>0)window.scrollTo(s.x,s.y+t+l)}else{q instanceof HTMLElement||i(0);var x=q.offsetHeight+q.offsetTop,y=r.offsetHeight+s.y;t=x-y;if(t>0)c("Scroll").setTop(r,c("Scroll").getTop(r)+t+l)}};n.prototype.$DraftEditorBlock1=function(){__p&&__p();var o=this.props.block,p=o.getKey(),q=o.getText(),r=this.props.tree.size-1,s=m(this.props.selection,p);return this.props.tree.map(function(t,u){__p&&__p();var v=t.get("leaves"),w=v.size-1,x=v.map(function(H,I){var J=c("DraftOffsetKey").encode(p,u,I),D=H.get("start"),E=H.get("end");return c("React").createElement(c("DraftEditorLeaf.react"),{key:J,offsetKey:J,block:o,start:D,selection:s?this.props.selection:null,forceSelection:this.props.forceSelection,text:q.slice(D,E),styleSet:o.getInlineStyleAt(D),customStyleMap:this.props.customStyleMap,customStyleFn:this.props.customStyleFn,isLast:u===r&&I===w})}.bind(this)).toArray(),y=t.get("decoratorKey");if(y==null)return x;if(!this.props.decorator)return x;var z=c("nullthrows")(this.props.decorator),A=z.getComponentForKey(y);if(!A)return x;var B=z.getPropsForKey(y),C=c("DraftOffsetKey").encode(p,u,0),D=v.first().get("start"),E=v.last().get("end"),F=q.slice(D,E),G=c("UnicodeBidiDirection").getHTMLDirIfDifferent(c("UnicodeBidi").getDirection(F),this.props.direction);return c("React").createElement(A,babelHelpers["extends"]({},B,{contentState:this.props.contentState,decoratedText:F,dir:G,key:C,start:D,end:E,blockKey:p,entityKey:o.getEntityAt(t.get("start")),offsetKey:C}),x)}.bind(this)).toArray()};n.prototype.render=function(){var o=this.props,p=o.direction,q=o.offsetKey,r="_1mf"+(p==="LTR"?" _1mj":"")+(p==="RTL"?" _1mk":"");return c("React").createElement("div",{"data-offset-key":q,className:r},this.$DraftEditorBlock1())};function n(){j.apply(this,arguments)}f.exports=n}),null);
__d("DraftEditorContents-core.react",["cx","DraftEditorBlock.react","DraftOffsetKey","EditorState","React","joinClasses","nullthrows"],(function a(b,c,d,e,f,aa,ba){"use strict";__p&&__p();var g,h,i=function i(k,l,m,n){return(k==="unordered-list-item"?"_3kpz":"")+(k==="ordered-list-item"?" _3kp_":"")+(m?" _3kq0":"")+(l===0?" _3kq1":"")+(l===1?" _3kq2":"")+(l===2?" _3kq3":"")+(l===3?" _3kq4":"")+(l===4?" _3kq5":"")+(n==="LTR"?" _3kq6":"")+(n==="RTL"?" _3kq7":"")};g=babelHelpers.inherits(j,c("React").Component);h=g&&g.prototype;j.prototype.shouldComponentUpdate=function(k){__p&&__p();var l=this.props.editorState,m=k.editorState,n=l.getDirectionMap(),o=m.getDirectionMap();if(n!==o)return true;var p=l.getSelection().getHasFocus(),q=m.getSelection().getHasFocus();if(p!==q)return true;var r=m.getNativelyRenderedContent(),s=l.isInCompositionMode(),t=m.isInCompositionMode();if(l===m||r!==null&&m.getCurrentContent()===r||s&&t)return false;var u=l.getCurrentContent(),v=m.getCurrentContent(),w=l.getDecorator(),x=m.getDecorator();return s!==t||u!==v||w!==x||m.mustForceSelection()};j.prototype.render=function(){__p&&__p();var k=this.props,l=k.blockRenderMap,m=k.blockRendererFn,n=k.blockStyleFn,o=k.customStyleMap,p=k.customStyleFn,q=k.editorState,r=k.editorKey,s=k.textDirectionality,t=q.getCurrentContent(),u=q.getSelection(),v=q.mustForceSelection(),w=q.getDecorator(),x=c("nullthrows")(q.getDirectionMap()),y=t.getBlocksAsArray(),z=[],A=null,B=null;for(var C=0;C<y.length;C++){var D=y[C],E=D.getKey(),F=D.getType(),G=m(D),H=void 0,I=void 0,J=void 0;if(G){H=G.component;I=G.props;J=G.editable}var K=s?s:x.get(E),L=c("DraftOffsetKey").encode(E,0,0),M={contentState:t,block:D,blockProps:I,blockStyleFn:n,customStyleMap:o,customStyleFn:p,decorator:w,direction:K,forceSelection:v,key:E,offsetKey:L,selection:u,tree:q.getBlockTree(E)},N=l.get(F)||l.get("unstyled"),O=N.wrapper,P=N.element||l.get("unstyled").element,Q=D.getDepth(),R="";if(n)R=n(D);if(P==="li"){var S=B!==O||A===null||Q>A;R=c("joinClasses")(R,i(F,Q,S,K))}var T=H||c("DraftEditorBlock.react"),U={className:R,"data-block":true,"data-editor":r,"data-offset-key":L,key:E};if(J!==undefined)U=babelHelpers["extends"]({},U,{contentEditable:J,suppressContentEditableWarning:true});var V=c("React").createElement(P,U,c("React").createElement(T,M));z.push({block:V,wrapperTemplate:O,key:E,offsetKey:L});if(O)A=D.getDepth();else A=null;B=O}var W=[];for(var X=0;X<z.length;){var Y=z[X];if(Y.wrapperTemplate){var Z=[];do{Z.push(z[X].block);X++}while(X<z.length&&z[X].wrapperTemplate===Y.wrapperTemplate);var $=c("React").cloneElement(Y.wrapperTemplate,{key:Y.key+"-wrap","data-offset-key":Y.offsetKey},Z);W.push($)}else{W.push(Y.block);X++}}return c("React").createElement("div",{"data-contents":"true"},W)};function j(){g.apply(this,arguments)}f.exports=j}),null);
__d("DraftEditorDecoratedLeaves.react",["DraftOffsetKey","React","UnicodeBidi","UnicodeBidiDirection"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){var k=this.props,l=k.block,m=k.children,n=k.contentState,o=k.decorator,p=k.decoratorKey,q=k.direction,r=k.leafSet,s=k.text,t=l.getKey(),u=r.get("leaves"),v=o.getComponentForKey(p),w=o.getPropsForKey(p),x=c("DraftOffsetKey").encode(t,parseInt(p,10),0),y=s.slice(u.first().get("start"),u.last().get("end")),z=c("UnicodeBidiDirection").getHTMLDirIfDifferent(c("UnicodeBidi").getDirection(y),q);return c("React").createElement(v,babelHelpers["extends"]({},w,{contentState:n,decoratedText:y,dir:z,key:x,entityKey:l.getEntityAt(r.get("start")),offsetKey:x}),m)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("DraftEditorNode.react",["cx","DraftEditorDecoratedLeaves.react","DraftEditorLeaf.react","DraftOffsetKey","immutable","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("immutable").List;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.block,o=m.contentState,p=m.customStyleFn,q=m.customStyleMap,r=m.decorator,s=m.direction,t=m.forceSelection,u=m.hasSelection,v=m.selection,w=m.tree,x=n.getKey(),y=n.getText(),z=w.size-1,A=this.props.children||w.map(function(B,C){var D=B.get("decoratorKey"),E=B.get("leaves"),F=E.size-1,G=E.map(function(H,I){var J=c("DraftOffsetKey").encode(x,C,I),K=H.get("start"),L=H.get("end");return c("React").createElement(c("DraftEditorLeaf.react"),{key:J,offsetKey:J,block:n,start:K,selection:u?v:null,forceSelection:t,text:y.slice(K,L),styleSet:n.getInlineStyleAt(K),customStyleMap:q,customStyleFn:p,isLast:D===z&&I===F})}).toArray();if(!D||!r)return G;return c("React").createElement(c("DraftEditorDecoratedLeaves.react"),{block:n,children:G,contentState:o,decorator:r,decoratorKey:D,direction:s,leafSet:B,text:y,key:C})}).toArray();return c("React").createElement("div",{"data-offset-key":c("DraftOffsetKey").encode(x,0,0),className:"_1mf"+(s==="LTR"?" _1mj":"")+(s==="RTL"?" _1mk":"")},A)};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d("DraftEditorBlockNode.react",["invariant","DraftEditorNode.react","DraftOffsetKey","EditorState","immutable","React","ReactDOM","Scroll","Style","getElementPosition","getScrollPosition","getViewportDimensions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=10,l=c("immutable").List,m=function m(t,u){return t.getAnchorKey()===u||t.getFocusKey()===u},n=function n(t,u){var v=t.getNextSiblingKey();return v?u.getBlockForKey(v).getType()===t.getType():false},o=function o(t,u,v){__p&&__p();var w=[];for(var x=v.reverse(),y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{z=x.next();if(z.done)break;A=z.value}var B=A;if(B.type!==u)break;w.push(B)}v.splice(v.indexOf(w[0]),w.length+1);var C=w.reverse(),D=C[0].key;v.push(c("React").cloneElement(t,{key:D+"-wrap","data-offset-key":c("DraftOffsetKey").encode(D,0,0)},C));return v},p=function p(t,u){var v=u.get(t.getType())||u.get("unstyled"),w=v.wrapper,x=v.element||u.get("unstyled").element;return{Element:x,wrapperTemplate:w}},q=function q(t,u){var v=u(t);if(!v)return{};var w=v.component,x=v.props,y=v.editable;return{CustomComponent:w,customProps:x,customEditable:y}},r=function r(t,u,v,w,x){var y={"data-block":true,"data-editor":u,"data-offset-key":v,key:t.getKey()},z=w(t);if(z)y.className=z;if(x.customEditable!==undefined)y=babelHelpers["extends"]({},y,{contentEditable:x.customEditable,suppressContentEditableWarning:true});return y};i=babelHelpers.inherits(s,c("React").Component);j=i&&i.prototype;s.prototype.shouldComponentUpdate=function(t){var u=this.props,v=u.block,w=u.direction,x=u.tree,y=!v.getChildKeys().isEmpty(),z=v!==t.block||x!==t.tree||w!==t.direction||m(t.selection,t.block.getKey())&&t.forceSelection;return y||z};s.prototype.componentDidMount=function(){__p&&__p();var t=this.props.selection,u=t.getEndKey();if(!t.getHasFocus()||u!==this.props.block.getKey())return;var v=c("ReactDOM").findDOMNode(this),w=c("Style").getScrollParent(v),x=c("getScrollPosition")(w),y=void 0;if(w===window){var z=c("getElementPosition")(v),A=z.y+z.height,B=c("getViewportDimensions")().height;y=A-B;if(y>0)window.scrollTo(x.x,x.y+y+k)}else{v instanceof HTMLElement||h(0);var C=v.offsetHeight+v.offsetTop,D=w.offsetHeight+x.y;y=C-D;if(y>0)c("Scroll").setTop(w,c("Scroll").getTop(w)+y+k)}};s.prototype.render=function(){__p&&__p();var t=this.props,u=t.block,v=t.blockRenderMap,w=t.blockRendererFn,x=t.blockStyleFn,y=t.contentState,z=t.decorator,A=t.editorKey,B=t.editorState,C=t.customStyleFn,D=t.customStyleMap,E=t.direction,F=t.forceSelection,G=t.selection,H=t.tree,I=null;if(u.children.size)I=u.children.reduce(function(P,Q){var K=c("DraftOffsetKey").encode(Q,0,0),R=y.getBlockForKey(Q),S=q(R,w),T=S.CustomComponent||s,U=p(R,v),N=U.Element,V=U.wrapperTemplate,O=r(R,A,K,x,S),W=babelHelpers["extends"]({},this.props,{tree:B.getBlockTree(Q),blockProps:S.customProps,offsetKey:K,block:R});P.push(c("React").createElement(N,O,c("React").createElement(T,W)));if(!V||n(R,y))return P;o(V,N,P);return P}.bind(this),[]);var J=u.getKey(),K=c("DraftOffsetKey").encode(J,0,0),L=c("React").createElement(c("DraftEditorNode.react"),{block:u,children:I,contentState:y,customStyleFn:C,customStyleMap:D,decorator:z,direction:E,forceSelection:F,hasSelection:m(G,J),selection:G,tree:H});if(u.getParentKey())return L;var M=p(u,v),N=M.Element,O=r(u,A,K,x,q(u,w));return c("React").createElement(N,O,L)};function s(){i.apply(this,arguments)}f.exports=s}),null);
__d("DraftEditorContentsExperimental.react",["DraftEditorBlockNode.react","DraftOffsetKey","EditorState","React","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.shouldComponentUpdate=function(k){__p&&__p();var l=this.props.editorState,m=k.editorState,n=l.getDirectionMap(),o=m.getDirectionMap();if(n!==o)return true;var p=l.getSelection().getHasFocus(),q=m.getSelection().getHasFocus();if(p!==q)return true;var r=m.getNativelyRenderedContent(),s=l.isInCompositionMode(),t=m.isInCompositionMode();if(l===m||r!==null&&m.getCurrentContent()===r||s&&t)return false;var u=l.getCurrentContent(),v=m.getCurrentContent(),w=l.getDecorator(),x=m.getDecorator();return s!==t||u!==v||w!==x||m.mustForceSelection()};j.prototype.render=function(){__p&&__p();var k=this.props,l=k.blockRenderMap,m=k.blockRendererFn,n=k.blockStyleFn,o=k.customStyleMap,p=k.customStyleFn,q=k.editorState,r=k.editorKey,s=k.textDirectionality,t=q.getCurrentContent(),u=q.getSelection(),v=q.mustForceSelection(),w=q.getDecorator(),x=c("nullthrows")(q.getDirectionMap()),y=t.getBlocksAsArray(),z=y[0],A=[],B=z;while(B){var C=B.getKey(),D={blockRenderMap:l,blockRendererFn:m,blockStyleFn:n,contentState:t,customStyleFn:p,customStyleMap:o,decorator:w,editorKey:r,editorState:q,forceSelection:v,selection:u,block:B,direction:s?s:x.get(C),tree:q.getBlockTree(C)},E=l.get(B.getType())||l.get("unstyled"),F=E.wrapper;A.push({block:c("React").createElement(c("DraftEditorBlockNode.react"),babelHelpers["extends"]({key:C},D)),wrapperTemplate:F,key:C,offsetKey:c("DraftOffsetKey").encode(C,0,0)});var G=B.getNextSiblingKey();B=G?t.getBlockForKey(G):null}var H=[];for(var I=0;I<A.length;){var J=A[I];if(J.wrapperTemplate){var K=[];do{K.push(A[I].block);I++}while(I<A.length&&A[I].wrapperTemplate===J.wrapperTemplate);var L=c("React").cloneElement(J.wrapperTemplate,{key:J.key+"-wrap","data-offset-key":J.offsetKey},K);H.push(L)}else{H.push(J.block);I++}}return c("React").createElement("div",{"data-contents":"true"},H)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("DraftEditorContents.react",["gkx","DraftEditorContentsExperimental.react","DraftEditorContents-core.react"],(function a(b,c,d,e,f,g){"use strict";var h=c("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN");f.exports=h?c("DraftEditorContentsExperimental.react"):c("DraftEditorContents-core.react")}),null);
__d("DraftODS",["cx","BanzaiODS","CurrentUser","fbjs/lib/CSSCore"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("CurrentUser").isEmployee()?".employee":"",j={init:function k(){document.addEventListener("input",function(l){if(l.target.nodeType===1&&c("fbjs/lib/CSSCore").hasClass(l.target,"_5rpu"))c("BanzaiODS").bumpEntityKey("draft_js","input_events"+i)})}};f.exports=j}),null);
__d("DefaultDraftBlockRenderMap",["cx","immutable","React"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("immutable").Map,j=c("React").createElement("ul",{className:"_1bv0"}),k=c("React").createElement("ol",{className:"_1bv1"}),l=c("React").createElement("pre",{className:"_1bv2"}),m=i({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:j},"ordered-list-item":{element:"li",wrapper:k},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:l},unstyled:{element:"div",aliasedElements:["p"]}});f.exports=m}),null);
__d("DefaultDraftInlineStyle",[],(function a(b,c,d,e,f,g){"use strict";f.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}}),null);
__d("getEntityKeyForSelection",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j,k){__p&&__p();var l;if(k.isCollapsed()){var m=k.getAnchorKey(),n=k.getAnchorOffset();if(n>0){l=j.getBlockForKey(m).getEntityAt(n-1);if(l!==j.getBlockForKey(m).getEntityAt(n))return null;return i(j.getEntityMap(),l)}return null}var o=k.getStartKey(),p=k.getStartOffset(),q=j.getBlockForKey(o);l=p===q.getLength()?null:q.getEntityAt(p);return i(j.getEntityMap(),l)}function i(j,k){if(k){var l=j.__get(k);return l.getMutability()==="MUTABLE"?k:null}return null}f.exports=h}),null);
__d("isEventHandled",[],(function a(b,c,d,e,f,g){"use strict";function h(i){return i==="handled"||i===true}f.exports=h}),null);
__d("isSelectionAtLeafStart",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=i.getSelection(),k=j.getAnchorKey(),l=i.getBlockTree(k),m=j.getStartOffset(),n=false;l.some(function(o){__p&&__p();if(m===o.get("start")){n=true;return true}if(m<o.get("end"))return o.get("leaves").some(function(p){var q=p.get("start");if(m===q){n=true;return true}return false});return false});return n}f.exports=h}),null);
__d("DraftEditorCompositionHandler",["DraftModifier","EditorState","Keys","getEntityKeyForSelection","gkx","isEventHandled","isSelectionAtLeafStart"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=20,i=false,j=false,k="",l={onBeforeInput:function m(n,o){k=(k||"")+o.data},onCompositionStart:function m(n){j=true},onCompositionEnd:function m(n){i=false;j=false;setTimeout(function(){if(!i)l.resolveComposition(n)},h)},onKeyDown:function m(n,o){if(!j){l.resolveComposition(n);n._onKeyDown(o);return}if(o.which===c("Keys").RIGHT||o.which===c("Keys").LEFT)o.preventDefault()},onKeyPress:function m(n,o){if(o.which===c("Keys").RETURN)o.preventDefault()},resolveComposition:function m(n){__p&&__p();if(j)return;i=true;var o=k;k="";var p=c("EditorState").set(n._latestEditorState,{inCompositionMode:false}),q=p.getCurrentInlineStyle(),r=c("getEntityKeyForSelection")(p.getCurrentContent(),p.getSelection()),s=!o||c("isSelectionAtLeafStart")(p)||q.size>0||r!==null;if(s)n.restoreEditorDOM();n.exitCurrentMode();if(o){if(c("gkx")("AT4jBaTBzRYWAA8oybsDztxwiWb9Je6Ni1Zs7j6Be7i903PJcYxWjBm6VmCRmSERiUtQwjG1NtMNd-IjzhQ-KM-ZjR33VQC_LUaQqKcsVkKJAw")&&n.props.handleBeforeInput&&c("isEventHandled")(n.props.handleBeforeInput(o,p)))return;var t=c("DraftModifier").replaceText(p.getCurrentContent(),p.getSelection(),o,q,r);n.update(c("EditorState").push(p,t,"insert-characters"));return}if(s)n.update(c("EditorState").set(p,{nativelyRenderedContent:null,forceSelection:true}))}};f.exports=l}),null);
__d("getSelectionOffsetKeyForNode",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();if(i instanceof Element){var j=i.getAttribute("data-offset-key");if(j)return j;for(var k=0;k<i.childNodes.length;k++){var l=h(i.childNodes[k]);if(l)return l}}return null}f.exports=h}),null);
__d("findAncestorOffsetKey",["getSelectionOffsetKeyForNode"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){var j=i;while(j&&j!==document.documentElement){var k=c("getSelectionOffsetKeyForNode")(j);if(k!=null)return k;j=j.parentNode}return null}f.exports=h}),null);
__d("getTextContentFromFiles",["invariant"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=/\.textClipping$/,j={"text/plain":true,"text/html":true,"text/rtf":true},k=5e3;function l(n,o){var p=0,q=[];n.forEach(function(r){m(r,function(s){p++;s&&q.push(s.slice(0,k));if(p==n.length)o(q.join("\r"))})})}function m(n,o){__p&&__p();if(!b.FileReader||n.type&&!(n.type in j)){o("");return}if(n.type===""){var p="";if(i.test(n.name))p=n.name.replace(i,"");o(p);return}var q=new FileReader();q.onload=function(){var r=q.result;typeof r==="string"||h(0);o(r)};q.onerror=function(){o("")};q.readAsText(n)}f.exports=l}),null);
__d("getUpdatedSelectionState",["DraftOffsetKey","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k,l,m){__p&&__p();var n=c("nullthrows")(i.getSelection()),o=c("DraftOffsetKey").decode(j),p=o.blockKey,q=i.getBlockTree(p).getIn([o.decoratorKey,"leaves",o.leafKey]),r=c("DraftOffsetKey").decode(l),s=r.blockKey,t=i.getBlockTree(s).getIn([r.decoratorKey,"leaves",r.leafKey]),u=q.get("start"),v=t.get("start"),w=q?u+k:null,x=t?v+m:null,y=n.getAnchorKey()===p&&n.getAnchorOffset()===w&&n.getFocusKey()===s&&n.getFocusOffset()===x;if(y)return n;var z=false;if(p===s){var A=q.get("end"),B=t.get("end");if(v===u&&B===A)z=m<k;else z=v<u}else{var C=i.getCurrentContent().getBlockMap().keySeq().skipUntil(function(D){return D===p||D===s}).first();z=C===s}return n.merge({anchorKey:p,anchorOffset:w,focusKey:s,focusOffset:x,isBackward:z})}f.exports=h}),null);
__d("DraftEditorDragHandler",["DataTransfer","DraftModifier","EditorState","findAncestorOffsetKey","getTextContentFromFiles","getUpdatedSelectionState","isEventHandled","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(event,l){__p&&__p();var m=null,n=null;if(typeof document.caretRangeFromPoint==="function"){var o=document.caretRangeFromPoint(event.x,event.y);m=o.startContainer;n=o.startOffset}else if(event.rangeParent){m=event.rangeParent;n=event.rangeOffset}else return null;m=c("nullthrows")(m);n=c("nullthrows")(n);var p=c("nullthrows")(c("findAncestorOffsetKey")(m));return c("getUpdatedSelectionState")(l,p,n,p,n)}var i={onDragEnd:function l(m){m.exitCurrentMode()},onDrop:function l(m,n){__p&&__p();var o=new(c("DataTransfer"))(n.nativeEvent.dataTransfer),p=m._latestEditorState,q=h(n.nativeEvent,p);n.preventDefault();m.exitCurrentMode();if(q==null)return;var r=o.getFiles();if(r.length>0){if(m.props.handleDroppedFiles&&c("isEventHandled")(m.props.handleDroppedFiles(q,r)))return;c("getTextContentFromFiles")(r,function(t){t&&m.update(k(p,q,t))});return}var s=m._internalDrag?"internal":"external";if(m.props.handleDrop&&c("isEventHandled")(m.props.handleDrop(q,o,s)))return;if(m._internalDrag){m.update(j(p,q));return}m.update(k(p,q,o.getText()))}};function j(l,m){var n=c("DraftModifier").moveText(l.getCurrentContent(),l.getSelection(),m);return c("EditorState").push(l,n,"insert-fragment")}function k(l,m,n){var o=c("DraftModifier").insertText(l.getCurrentContent(),m,n,l.getCurrentInlineStyle());return c("EditorState").push(l,o,"insert-fragment")}f.exports=i}),null);
__d("editOnBeforeInput",["BlockTree","DraftModifier","EditorState","UserAgent","getEntityKeyForSelection","isEventHandled","isSelectionAtLeafStart","nullthrows","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="'",i="/",j=c("UserAgent").isBrowser("Firefox");function k(n){return j&&(n==h||n==i)}function l(n,o,p,q){var r=c("DraftModifier").replaceText(n.getCurrentContent(),n.getSelection(),o,p,q);return c("EditorState").push(n,r,"insert-characters")}function m(n,o){__p&&__p();if(n._pendingStateFromBeforeInput!==undefined){n.update(n._pendingStateFromBeforeInput);n._pendingStateFromBeforeInput=undefined}var p=n._latestEditorState,q=o.data;if(!q)return;if(n.props.handleBeforeInput&&c("isEventHandled")(n.props.handleBeforeInput(q,p))){o.preventDefault();return}var r=p.getSelection(),s=r.getStartOffset(),t=r.getEndOffset(),u=r.getAnchorKey();if(!r.isCollapsed()){o.preventDefault();var v=p.getCurrentContent().getPlainText().slice(s,t);if(q===v)n.update(c("EditorState").forceSelection(p,r.merge({anchorOffset:t,focusOffset:t})));else n.update(l(p,q,p.getCurrentInlineStyle(),c("getEntityKeyForSelection")(p.getCurrentContent(),p.getSelection())));return}var w=l(p,q,p.getCurrentInlineStyle(),c("getEntityKeyForSelection")(p.getCurrentContent(),p.getSelection())),x=false;if(!x)x=c("isSelectionAtLeafStart")(n._latestCommittedEditorState);if(!x){var y=b.getSelection();if(y.anchorNode&&y.anchorNode.nodeType===Node.TEXT_NODE){var z=y.anchorNode.parentNode;x=z.nodeName==="SPAN"&&z.firstChild.nodeType===Node.TEXT_NODE&&z.firstChild.nodeValue.indexOf("\t")!==-1}}if(!x){var A=c("BlockTree").getFingerprint(p.getBlockTree(u)),B=c("BlockTree").getFingerprint(w.getBlockTree(u));x=A!==B}if(!x)x=k(q);if(!x)x=c("nullthrows")(w.getDirectionMap()).get(u)!==c("nullthrows")(p.getDirectionMap()).get(u);if(x){o.preventDefault();n.update(w);return}w=c("EditorState").set(w,{nativelyRenderedContent:w.getCurrentContent()});n._pendingStateFromBeforeInput=w;c("setImmediate")(function(){if(n._pendingStateFromBeforeInput!==undefined){n.update(n._pendingStateFromBeforeInput);n._pendingStateFromBeforeInput=undefined}})}f.exports=m}),null);
__d("editOnBlur",["EditorState","containsNode","getActiveElement"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){__p&&__p();if(c("getActiveElement")()===document.body){var k=b.getSelection(),l=i.editor;if(k.rangeCount===1&&c("containsNode")(l,k.anchorNode)&&c("containsNode")(l,k.focusNode))k.removeAllRanges()}var m=i._latestEditorState,n=m.getSelection();if(!n.getHasFocus())return;var o=n.set("hasFocus",false);i.props.onBlur&&i.props.onBlur(j);i.update(c("EditorState").acceptSelection(m,o))}f.exports=h}),null);
__d("editOnCompositionStart",["EditorState"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){i.setMode("composite");i.update(c("EditorState").set(i._latestEditorState,{inCompositionMode:true}));i._onCompositionStart(j)}f.exports=h}),null);
__d("getFragmentFromSelection",["getContentStateFragment"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.getSelection();if(j.isCollapsed())return null;return c("getContentStateFragment")(i.getCurrentContent(),j)}f.exports=h}),null);
__d("editOnCopy",["getFragmentFromSelection"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=i._latestEditorState,l=k.getSelection();if(l.isCollapsed()){j.preventDefault();return}i.setClipboard(c("getFragmentFromSelection")(i._latestEditorState))}f.exports=h}),null);
__d("editOnCut",["DraftModifier","EditorState","Style","getFragmentFromSelection","getScrollPosition"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j,k){__p&&__p();var l=j._latestEditorState,m=l.getSelection(),n=k.target,o=void 0;if(m.isCollapsed()){k.preventDefault();return}if(n instanceof Node)o=c("getScrollPosition")(c("Style").getScrollParent(n));var p=c("getFragmentFromSelection")(l);j.setClipboard(p);j.setMode("cut");setTimeout(function(){j.restoreEditorDOM(o);j.exitCurrentMode();j.update(i(l))},0)}function i(j){var k=c("DraftModifier").removeRange(j.getCurrentContent(),j.getSelection(),"forward");return c("EditorState").push(j,k,"remove-range")}f.exports=h}),null);
__d("editOnDragOver",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){i._internalDrag=false;i.setMode("drag");j.preventDefault()}f.exports=h}),null);
__d("editOnDragStart",[],(function a(b,c,d,e,f,g){"use strict";function h(i){i._internalDrag=true;i.setMode("drag")}f.exports=h}),null);
__d("editOnFocus",["EditorState","UserAgent"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=i._latestEditorState,l=k.getSelection();if(l.getHasFocus())return;var m=l.set("hasFocus",true);i.props.onFocus&&i.props.onFocus(j);if(c("UserAgent").isBrowser("Chrome < 60.0.3081.0"))i.update(c("EditorState").forceSelection(k,m));else i.update(c("EditorState").acceptSelection(k,m))}f.exports=h}),null);
__d("editOnInput",["DraftModifier","DraftOffsetKey","EditorState","UserAgent","findAncestorOffsetKey","gkx","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("UserAgent").isEngine("Gecko"),i="\n\n";function j(k){__p&&__p();if(k._pendingStateFromBeforeInput!==undefined){k.update(k._pendingStateFromBeforeInput);k._pendingStateFromBeforeInput=undefined}var l=b.getSelection(),m=l.anchorNode,n=l.isCollapsed,o=m.nodeType!==Node.TEXT_NODE,p=m.nodeType!==Node.TEXT_NODE&&m.nodeType!==Node.ELEMENT_NODE;if(c("gkx")("AT5-KQB0Xj_CDLWUIMILzoGYzlpu0hwpg4CPaxfzm51RfcOYLYkvJCug0it-P2OAOdRH1lNv4lP4oODRvdq9nXftShx8XbKClVLq-dwF7Ip31Q")){if(o)return}else if(p)return;if(m.nodeType===Node.TEXT_NODE&&(m.previousSibling!==null||m.nextSibling!==null)){var q=m.parentNode;m.nodeValue=q.textContent;for(var r=q.firstChild;r!==null;r=r.nextSibling)if(r!==m)q.removeChild(r)}var s=m.textContent,t=k._latestEditorState,u=c("nullthrows")(c("findAncestorOffsetKey")(m)),v=c("DraftOffsetKey").decode(u),w=v.blockKey,x=v.decoratorKey,y=v.leafKey,z=t.getBlockTree(w).getIn([x,"leaves",y]),A=z.start,B=z.end,C=t.getCurrentContent(),D=C.getBlockForKey(w),E=D.getText().slice(A,B);if(s.endsWith(i))s=s.slice(0,-1);if(s===E)return;var F=t.getSelection(),G=F.merge({anchorOffset:A,focusOffset:B,isBackward:false}),H=D.getEntityAt(A),I=H&&C.getEntity(H),J=I&&I.getMutability(),K=J==="MUTABLE",L=K?"spellcheck-change":"apply-entity",M=c("DraftModifier").replaceText(C,G,s,D.getInlineStyleAt(A),K?D.getEntityAt(A):null),N,O,P,Q;if(h){N=l.anchorOffset;O=l.focusOffset;P=A+Math.min(N,O);Q=P+Math.abs(N-O);N=P;O=Q}else{var R=s.length-E.length;P=F.getStartOffset();Q=F.getEndOffset();N=n?Q+R:P;O=Q+R}var S=M.merge({selectionBefore:C.getSelectionAfter(),selectionAfter:F.merge({anchorOffset:N,focusOffset:O})});k.update(c("EditorState").push(t,S,L))}f.exports=j}),null);
__d("KeyBindingUtil",["UserAgent"],(function a(b,c,d,e,f,g){"use strict";var h=c("UserAgent").isPlatform("Mac OS X"),i={isCtrlKeyCommand:function j(k){return!!k.ctrlKey&&!k.altKey},isOptionKeyCommand:function j(k){return h&&k.altKey},hasCommandModifier:function j(k){return h?!!k.metaKey&&!k.altKey:i.isCtrlKeyCommand(k)}};f.exports=i}),null);
__d("SecondaryClipboard",["DraftModifier","EditorState","getContentStateFragment","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i={cut:function j(k){__p&&__p();var l=k.getCurrentContent(),m=k.getSelection(),n=null;if(m.isCollapsed()){var o=m.getAnchorKey(),p=l.getBlockForKey(o).getLength();if(p===m.getAnchorOffset())return k;n=m.set("focusOffset",p)}else n=m;n=c("nullthrows")(n);h=c("getContentStateFragment")(l,n);var q=c("DraftModifier").removeRange(l,n,"forward");if(q===l)return k;return c("EditorState").push(k,q,"remove-range")},paste:function j(k){if(!h)return k;var l=c("DraftModifier").replaceWithFragment(k.getCurrentContent(),k.getSelection(),h);return c("EditorState").push(k,l,"insert-fragment")}};f.exports=i}),null);
__d("getRangeClientRects",["invariant","UserAgent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("UserAgent").isBrowser("Chrome");function j(l){__p&&__p();var m=l.cloneRange(),n=[];for(var o=l.endContainer;o!=null;o=o.parentNode){var p=o===l.commonAncestorContainer;if(p)m.setStart(l.startContainer,l.startOffset);else m.setStart(m.endContainer,0);var q=Array.from(m.getClientRects());n.push(q);if(p){var r;n.reverse();return(r=[]).concat.apply(r,n)}m.setEndBefore(o)}h(0)}var k=i?j:function(l){return Array.from(l.getClientRects())};f.exports=k}),null);
__d("expandRangeToStartOfLine",["invariant","UnicodeUtils","getRangeClientRects"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(m){__p&&__p();var n=getComputedStyle(m),o=document.createElement("div");o.style.fontFamily=n.fontFamily;o.style.fontSize=n.fontSize;o.style.fontStyle=n.fontStyle;o.style.fontWeight=n.fontWeight;o.style.lineHeight=n.lineHeight;o.style.position="absolute";o.textContent="M";var p=document.body;p||h(0);p.appendChild(o);var q=o.getBoundingClientRect();p.removeChild(o);return q.height}function j(m,n){__p&&__p();var o=Infinity,p=Infinity,q=-Infinity,r=-Infinity;for(var s=0;s<m.length;s++){var t=m[s];if(t.width===0||t.width===1)continue;o=Math.min(o,t.top);p=Math.min(p,t.bottom);q=Math.max(q,t.top);r=Math.max(r,t.bottom)}return q<=p&&q-o<n&&r-p<n}function k(m){switch(m.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return m.length;default:return m.childNodes.length}}function l(m){__p&&__p();m.collapsed||h(0);m=m.cloneRange();var n=m.startContainer;if(n.nodeType!==1)n=n.parentNode;var o=i(n),p=m.endContainer,q=m.endOffset;m.setStart(m.startContainer,0);while(j(c("getRangeClientRects")(m),o)){p=m.startContainer;q=m.startOffset;p.parentNode||h(0);m.setStartBefore(p);if(p.nodeType===1&&getComputedStyle(p).display!=="inline")break}var r=p,s=q-1;do{var t=r.nodeValue;for(var u=s;u>=0;u--){if(t!=null&&u>0&&c("UnicodeUtils").isSurrogatePair(t,u-1))continue;m.setStart(r,u);if(j(c("getRangeClientRects")(m),o)){p=r;q=u}else break}if(u===-1||r.childNodes.length===0)break;r=r.childNodes[u];s=k(r)}while(true);m.setStart(p,q);return m}f.exports=l}),null);
__d("getDraftEditorSelectionWithNodes",["invariant","findAncestorOffsetKey","getSelectionOffsetKeyForNode","getUpdatedSelectionState","nullthrows"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(n,o,p,q,r,s){__p&&__p();var t=p.nodeType===Node.TEXT_NODE,u=r.nodeType===Node.TEXT_NODE;if(t&&u)return{selectionState:c("getUpdatedSelectionState")(n,c("nullthrows")(c("findAncestorOffsetKey")(p)),q,c("nullthrows")(c("findAncestorOffsetKey")(r)),s),needsRecovery:false};var v=null,w=null,x=true;if(t){v={key:c("nullthrows")(c("findAncestorOffsetKey")(p)),offset:q};w=l(o,r,s)}else if(u){w={key:c("nullthrows")(c("findAncestorOffsetKey")(r)),offset:s};v=l(o,p,q)}else{v=l(o,p,q);w=l(o,r,s);if(p===r&&q===s)x=!!p.firstChild&&p.firstChild.nodeName!=="BR"}return{selectionState:c("getUpdatedSelectionState")(n,v.key,v.offset,w.key,w.offset),needsRecovery:x}}function j(n){while(n.firstChild&&(n.firstChild instanceof Element&&n.firstChild.getAttribute("data-blocks")==="true"||c("getSelectionOffsetKeyForNode")(n.firstChild)))n=n.firstChild;return n}function k(n){while(n.lastChild&&(n.lastChild instanceof Element&&n.lastChild.getAttribute("data-blocks")==="true"||c("getSelectionOffsetKeyForNode")(n.lastChild)))n=n.lastChild;return n}function l(n,o,p){__p&&__p();var q=o,r=c("findAncestorOffsetKey")(q);r!=null||n&&(n===q||n.firstChild===q)||h(0);if(n===q){q=q.firstChild;q instanceof Element&&q.getAttribute("data-contents")==="true"||h(0);if(p>0)p=q.childNodes.length}if(p===0){var s=null;if(r!=null)s=r;else{var t=j(q);s=c("nullthrows")(c("getSelectionOffsetKeyForNode")(t))}return{key:s,offset:0}}var u=q.childNodes[p-1],v=null,w=null;if(!c("getSelectionOffsetKeyForNode")(u)){v=c("nullthrows")(r);w=m(u)}else{var x=k(u);v=c("nullthrows")(c("getSelectionOffsetKeyForNode")(x));w=m(x)}return{key:v,offset:w}}function m(n){var o=n.textContent;return o==="\n"?0:o.length}f.exports=i}),null);
__d("moveSelectionBackward",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){__p&&__p();var k=i.getSelection(),l=i.getCurrentContent(),m=k.getStartKey(),n=k.getStartOffset(),o=m,p=0;if(j>n){var q=l.getKeyBefore(m);if(q==null)o=m;else{o=q;var r=l.getBlockForKey(q);p=r.getText().length}}else p=n-j;return k.merge({focusKey:o,focusOffset:p,isBackward:true})}f.exports=h}),null);
__d("removeTextWithStrategy",["DraftModifier"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k){__p&&__p();var l=i.getSelection(),m=i.getCurrentContent(),n=l;if(l.isCollapsed()){if(k==="forward"){if(i.isSelectionAtEndOfContent())return m}else if(i.isSelectionAtStartOfContent())return m;n=j(i);if(n===l)return m}return c("DraftModifier").removeRange(m,n,k)}f.exports=h}),null);
__d("keyCommandBackspaceToStartOfLine",["EditorState","expandRangeToStartOfLine","getDraftEditorSelectionWithNodes","moveSelectionBackward","removeTextWithStrategy"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=c("removeTextWithStrategy")(i,function(k){var l=k.getSelection();if(l.isCollapsed()&&l.getAnchorOffset()===0)return c("moveSelectionBackward")(k,1);var m=b.getSelection(),n=m.getRangeAt(0);n=c("expandRangeToStartOfLine")(n);return c("getDraftEditorSelectionWithNodes")(k,null,n.endContainer,n.endOffset,n.startContainer,n.startOffset).selectionState},"backward");if(j===i.getCurrentContent())return i;return c("EditorState").push(i,j,"remove-range")}f.exports=h}),null);
__d("DraftRemovableWord",["TokenizeUtil"],(function a(b,c,d,e,f,g){"use strict";var h=c("TokenizeUtil").getPunctuation(),i="['\u2018\u2019]",j="\\s|(?![_])"+h,k="^(?:"+j+")*(?:"+i+"|(?!"+j+").)*(?:(?!"+j+").)",l=new RegExp(k),m="(?:(?!"+j+").)(?:"+i+"|(?!"+j+").)*(?:"+j+")*$",n=new RegExp(m);function o(q,r){var s=r?n.exec(q):l.exec(q);return s?s[0]:q}var p={getBackward:function q(r){return o(r,true)},getForward:function q(r){return o(r,false)}};f.exports=p}),null);
__d("keyCommandBackspaceWord",["DraftRemovableWord","EditorState","moveSelectionBackward","removeTextWithStrategy"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){var j=c("removeTextWithStrategy")(i,function(k){var l=k.getSelection(),m=l.getStartOffset();if(m===0)return c("moveSelectionBackward")(k,1);var n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(0,m),q=c("DraftRemovableWord").getBackward(p);return c("moveSelectionBackward")(k,q.length||1)},"backward");if(j===i.getCurrentContent())return i;return c("EditorState").push(i,j,"remove-range")}f.exports=h}),null);
__d("moveSelectionForward",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=i.getSelection(),l=k.getStartKey(),m=k.getStartOffset(),n=i.getCurrentContent(),o=l,p,q=n.getBlockForKey(l);if(j>q.getText().length-m){o=n.getKeyAfter(l);p=0}else p=m+j;return k.merge({focusKey:o,focusOffset:p})}f.exports=h}),null);
__d("keyCommandDeleteWord",["DraftRemovableWord","EditorState","moveSelectionForward","removeTextWithStrategy"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=c("removeTextWithStrategy")(i,function(k){var l=k.getSelection(),m=l.getStartOffset(),n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(m),q=c("DraftRemovableWord").getForward(p);return c("moveSelectionForward")(k,q.length||1)},"forward");if(j===i.getCurrentContent())return i;return c("EditorState").push(i,j,"remove-range")}f.exports=h}),null);
__d("keyCommandInsertNewline",["DraftModifier","EditorState"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=c("DraftModifier").splitBlock(i.getCurrentContent(),i.getSelection());return c("EditorState").push(i,j,"split-block")}f.exports=h}),null);
__d("keyCommandMoveSelectionToEndOfBlock",["EditorState"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.getSelection(),k=j.getEndKey(),l=i.getCurrentContent(),m=l.getBlockForKey(k).getLength();return c("EditorState").set(i,{selection:j.merge({anchorKey:k,anchorOffset:m,focusKey:k,focusOffset:m,isBackward:false}),forceSelection:true})}f.exports=h}),null);
__d("keyCommandMoveSelectionToStartOfBlock",["EditorState"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.getSelection(),k=j.getStartKey();return c("EditorState").set(i,{selection:j.merge({anchorKey:k,anchorOffset:0,focusKey:k,focusOffset:0,isBackward:false}),forceSelection:true})}f.exports=h}),null);
__d("keyCommandPlainBackspace",["EditorState","UnicodeUtils","moveSelectionBackward","removeTextWithStrategy"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){var j=c("removeTextWithStrategy")(i,function(l){var k=l.getSelection(),m=l.getCurrentContent(),n=k.getAnchorKey(),o=k.getAnchorOffset(),p=m.getBlockForKey(n).getText()[o-1];return c("moveSelectionBackward")(l,p?c("UnicodeUtils").getUTF16Length(p,0):1)},"backward");if(j===i.getCurrentContent())return i;var k=i.getSelection();return c("EditorState").push(i,j.set("selectionBefore",k),k.isCollapsed()?"backspace-character":"remove-range")}f.exports=h}),null);
__d("keyCommandPlainDelete",["EditorState","UnicodeUtils","moveSelectionForward","removeTextWithStrategy"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){var j=c("removeTextWithStrategy")(i,function(l){var k=l.getSelection(),m=l.getCurrentContent(),n=k.getAnchorKey(),o=k.getAnchorOffset(),p=m.getBlockForKey(n).getText()[o];return c("moveSelectionForward")(l,p?c("UnicodeUtils").getUTF16Length(p,0):1)},"forward");if(j===i.getCurrentContent())return i;var k=i.getSelection();return c("EditorState").push(i,j.set("selectionBefore",k),k.isCollapsed()?"delete-character":"remove-range")}f.exports=h}),null);
__d("keyCommandTransposeCharacters",["DraftModifier","EditorState","getContentStateFragment"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=i.getSelection();if(!j.isCollapsed())return i;var k=j.getAnchorOffset();if(k===0)return i;var l=j.getAnchorKey(),m=i.getCurrentContent(),n=m.getBlockForKey(l),o=n.getLength();if(o<=1)return i;var p,q;if(k===o){p=j.set("anchorOffset",k-1);q=j}else{p=j.set("focusOffset",k+1);q=p.set("anchorOffset",k+1)}var r=c("getContentStateFragment")(m,p),s=c("DraftModifier").removeRange(m,p,"backward"),t=s.getSelectionAfter(),u=t.getAnchorOffset()-1,v=t.merge({anchorOffset:u,focusOffset:u}),w=c("DraftModifier").replaceWithFragment(s,v,r),x=c("EditorState").push(i,w,"insert-fragment");return c("EditorState").acceptSelection(x,q)}f.exports=h}),null);
__d("keyCommandUndo",["EditorState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k){__p&&__p();var l=c("EditorState").undo(j);if(j.getLastChangeType()==="spellcheck-change"){var m=l.getCurrentContent();k(c("EditorState").set(l,{nativelyRenderedContent:m}));return}i.preventDefault();if(!j.getNativelyRenderedContent()){k(l);return}k(c("EditorState").set(j,{nativelyRenderedContent:null}));setTimeout(function(){k(l)},0)}f.exports=h}),null);
__d("editOnKeyDown",["DraftModifier","EditorState","KeyBindingUtil","Keys","SecondaryClipboard","UserAgent","isEventHandled","keyCommandBackspaceToStartOfLine","keyCommandBackspaceWord","keyCommandDeleteWord","keyCommandInsertNewline","keyCommandMoveSelectionToEndOfBlock","keyCommandMoveSelectionToStartOfBlock","keyCommandPlainBackspace","keyCommandPlainDelete","keyCommandTransposeCharacters","keyCommandUndo"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("KeyBindingUtil").isOptionKeyCommand,i=c("UserAgent").isBrowser("Chrome");function j(l,m){__p&&__p();switch(l){case"redo":return c("EditorState").redo(m);case"delete":return c("keyCommandPlainDelete")(m);case"delete-word":return c("keyCommandDeleteWord")(m);case"backspace":return c("keyCommandPlainBackspace")(m);case"backspace-word":return c("keyCommandBackspaceWord")(m);case"backspace-to-start-of-line":return c("keyCommandBackspaceToStartOfLine")(m);case"split-block":return c("keyCommandInsertNewline")(m);case"transpose-characters":return c("keyCommandTransposeCharacters")(m);case"move-selection-to-start-of-block":return c("keyCommandMoveSelectionToStartOfBlock")(m);case"move-selection-to-end-of-block":return c("keyCommandMoveSelectionToEndOfBlock")(m);case"secondary-cut":return c("SecondaryClipboard").cut(m);case"secondary-paste":return c("SecondaryClipboard").paste(m);default:return m}}function k(l,m){__p&&__p();var n=m.which,o=l._latestEditorState;function p(t){var u=l.props[t];if(u){u(m);return true}else return false}switch(n){case c("Keys").RETURN:m.preventDefault();if(l.props.handleReturn&&c("isEventHandled")(l.props.handleReturn(m,o)))return;break;case c("Keys").ESC:m.preventDefault();if(p("onEscape"))return;break;case c("Keys").TAB:if(p("onTab"))return;break;case c("Keys").UP:if(p("onUpArrow"))return;break;case c("Keys").RIGHT:if(p("onRightArrow"))return;break;case c("Keys").DOWN:if(p("onDownArrow"))return;break;case c("Keys").LEFT:if(p("onLeftArrow"))return;break;case c("Keys").SPACE:if(i&&h(m)){m.preventDefault();var q=c("DraftModifier").replaceText(o.getCurrentContent(),o.getSelection(),"\xa0");l.update(c("EditorState").push(o,q,"insert-characters"));return}}var r=l.props.keyBindingFn(m);if(!r)return;if(r==="undo"){c("keyCommandUndo")(m,o,l.update);return}m.preventDefault();if(l.props.handleKeyCommand&&c("isEventHandled")(l.props.handleKeyCommand(r,o)))return;var s=j(r,o);if(s!==o)l.update(s)}f.exports=k}),null);
__d("getSafeBodyFromHTML",["invariant","UserAgent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("UserAgent").isBrowser("IE <= 9");function j(k){var l,m=null;if(!i&&document.implementation&&document.implementation.createHTMLDocument){l=document.implementation.createHTMLDocument("foo");l.documentElement||h(0);l.documentElement.innerHTML=k;m=l.getElementsByTagName("body")[0]}return m}f.exports=j}),null);
__d("convertFromHTMLToContentBlocks",["cx","invariant","CharacterMetadata","ContentBlock","ContentBlockNode","DefaultDraftBlockRenderMap","DraftEntity","immutable","URI","generateRandomKey","getSafeBodyFromHTML","gkx","sanitizeDraftText"],(function aa(ba,a,ca,da,ea,fa,ga,ha){"use strict";__p&&__p();var b,ia=a("immutable").Set,c=a("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN"),d=a("immutable").List,e=a("immutable").OrderedSet,ja="&nbsp;",f=" ",ka=4,la=new RegExp("\r","g"),ma=new RegExp("\n","g"),na=new RegExp(ja,"g"),oa=new RegExp("&#13;?","g"),pa=new RegExp("&#8203;?","g"),qa=["bold","bolder","500","600","700","800","900"],ra=["light","lighter","100","200","300","400"],sa={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},g=(b={},b._3kq1=0,b._3kq2=1,b._3kq3=2,b._3kq4=3,b._3kq5=4,b),ta=["className","href","rel","target","title"],ua=["alt","className","height","src","width"],h=void 0,i={text:"",inlines:[],entities:[],blocks:[]},va={children:d(),depth:0,key:"",type:""},j=function j(u,v){if(u==="li")return v==="ol"?"ordered-list-item":"unordered-list-item";return null},k=function k(u){var v=u.get("unstyled").element,w=ia([]);u.forEach(function(x){if(x.aliasedElements)x.aliasedElements.forEach(function(y){w=w.add(y)});w=w.add(x.element)});return w.filter(function(x){return x&&x!==v}).toArray().sort()},l=function l(u,v,w){for(var x=0;x<w.length;x++){var y=w[x](u,v);if(y)return y}return null},m=function m(u,v,w){var x=w.filter(function(y){return y.element===u||y.wrapper===u||y.aliasedElements&&y.aliasedElements.some(function(z){return z===u})}).keySeq().toSet().toArray().sort();switch(x.length){case 0:return"unstyled";case 1:return x[0];default:return l(u,v,[j])||"unstyled"}},n=function n(u,v,w){__p&&__p();var x,y=sa[u];if(y)w=w.add(y).toOrderedSet();else if(v instanceof HTMLElement)(function(){__p&&__p();var z=v;w=w.withMutations(function(A){__p&&__p();var B=z.style.fontWeight,C=z.style.fontStyle,D=z.style.textDecoration;if(qa.indexOf(B)>=0)A.add("BOLD");else if(ra.indexOf(B)>=0)A.remove("BOLD");if(C==="italic")A.add("ITALIC");else if(C==="normal")A.remove("ITALIC");if(D==="underline")A.add("UNDERLINE");if(D==="line-through")A.add("STRIKETHROUGH");if(D==="none"){A.remove("UNDERLINE");A.remove("STRIKETHROUGH")}}).toOrderedSet()})();return w},o=function o(u,v,w){__p&&__p();var x=u.text.slice(-1),y=v.text.slice(0,1);if(x==="\r"&&y==="\r"&&!w){u.text=u.text.slice(0,-1);u.inlines.pop();u.entities.pop();u.blocks.pop()}if(x==="\r")if(v.text===f||v.text==="\n")return u;else if(y===f||y==="\n"){v.text=v.text.slice(1);v.inlines.shift();v.entities.shift()}return{text:u.text+v.text,inlines:u.inlines.concat(v.inlines),entities:u.entities.concat(v.entities),blocks:u.blocks.concat(v.blocks)}},p=function p(u,v){return v.some(function(w){return u.indexOf("<"+w)!==-1})},q=function q(u){u instanceof HTMLAnchorElement||ha(0);var v=u.protocol;return v==="http:"||v==="https:"||v==="mailto:"},wa=function wa(u){var v=new Array(1);if(u)v[0]=u;return babelHelpers["extends"]({},i,{text:f,inlines:[e()],entities:v})},r=function r(){return babelHelpers["extends"]({},i,{text:"\n",inlines:[e()],entities:new Array(1)})},xa=function xa(){var u=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return babelHelpers["extends"]({},va,u)},s=function s(u,v){var w=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return{text:"\r",inlines:[e()],entities:new Array(1),blocks:[xa({parent:w,key:a("generateRandomKey")(),type:u,depth:Math.max(0,Math.min(ka,v))})]}},ya=function ya(u){var v=arguments.length<=1||arguments[1]===undefined?0:arguments[1];Object.keys(g).some(function(w){if(u.classList.contains(w))v=g[w]});return v},t=function t(u,v,w,x,y,z,A,B,C,D){__p&&__p();var Ca,E,F=h,G=v.nodeName.toLowerCase(),H=u,I="unstyled",J=false,K=y&&m(y,x,B),L=babelHelpers["extends"]({},i),M=null,N=void 0;if(G==="#text"){var O=v.textContent,P=O.trim();if(x&&P===""&&v.parentElement){var Q=v.parentElement.nodeName.toLowerCase();if(Q==="ol"||Q==="ul")return{chunk:babelHelpers["extends"]({},i),entityMap:u}}if(P===""&&y!=="pre")return{chunk:wa(C),entityMap:u};if(y!=="pre")O=O.replace(ma,f);h=G;return{chunk:{text:O,inlines:Array(O.length).fill(w),entities:Array(O.length).fill(C),blocks:[]},entityMap:u}}h=G;if(G==="br"){if(F==="br"&&(!y||K==="unstyled"))return{chunk:s("unstyled",A,D),entityMap:u};return{chunk:r(),entityMap:u}}if(G==="img"&&v instanceof HTMLImageElement&&v.attributes.getNamedItem("src")&&v.attributes.getNamedItem("src").value)(function(){var X=v,Y={};ua.forEach(function(Z){var $=X.getAttribute(Z);if($)Y[Z]=$});v.textContent="\ud83d\udcf7";C=a("DraftEntity").__create("IMAGE","MUTABLE",Y||{})})();w=n(G,v,w);if(G==="ul"||G==="ol"){if(x)A+=1;x=G}if(!c&&G==="li"&&v instanceof HTMLElement)A=ya(v,A);var R=m(G,x,B),S=x&&y==="li"&&G==="li",T=(!y||c)&&z.indexOf(G)!==-1;if(S||T){L=s(R,A,D);N=L.blocks[0].key;y=G;J=!c}if(S)I=x==="ul"?"unordered-list-item":"ordered-list-item";var U=v.firstChild;if(U!=null)G=U.nodeName.toLowerCase();var V=null;while(U){if(U instanceof HTMLAnchorElement&&U.href&&q(U))(function(){var X=U,Y={};ta.forEach(function(Z){var $=X.getAttribute(Z);if($)Y[Z]=$});Y.url=new(a("URI"))(X.href).toString();V=a("DraftEntity").__create("LINK","MUTABLE",Y||{})})();else V=undefined;var Da=t(H,U,w,x,y,z,A,B,V||C,c?N:null),Ea=Da.chunk,Fa=Da.entityMap;M=Ea;H=Fa;L=o(L,M,c);var W=U.nextSibling;if(!D&&W&&z.indexOf(G)>=0&&y)L=o(L,r());if(W)G=W.nodeName.toLowerCase();U=W}if(J)L=o(L,s(I,A,D));return{chunk:L,entityMap:H}},za=function za(u,v,w,x){__p&&__p();u=u.trim().replace(la,"").replace(na,f).replace(oa,"").replace(pa,"");var y=k(w),z=v(u);if(!z)return null;h=null;var A=p(u,y)?y:["div"],B=t(x,z,e(),"ul",null,A,-1,w),C=B.chunk,D=B.entityMap;if(C.text.indexOf("\r")===0)C={text:C.text.slice(1),inlines:C.inlines.slice(1),entities:C.entities.slice(1),blocks:C.blocks};if(C.text.slice(-1)==="\r"){C.text=C.text.slice(0,-1);C.inlines=C.inlines.slice(0,-1);C.entities=C.entities.slice(0,-1);C.blocks.pop()}if(C.blocks.length===0)C.blocks.push(babelHelpers["extends"]({},i,{type:"unstyled",depth:0}));if(C.text.split("\r").length===C.blocks.length+1)C.blocks.unshift({type:"unstyled",depth:0});return{chunk:C,entityMap:D}},Aa=function Aa(u){__p&&__p();if(!u||!u.text||!Array.isArray(u.blocks))return null;var v={cacheRef:{},contentBlocks:[]},w=0,x=u.blocks,y=u.inlines,z=u.entities,A=c?a("ContentBlockNode"):a("ContentBlock");return u.text.split("\r").reduce(function(B,C,D){__p&&__p();var Ca;C=a("sanitizeDraftText")(C);var E=x[D],F=w+C.length,G=y.slice(w,F),H=z.slice(w,F),I=d(G.map(function(P,D){var Q={style:P,entity:null};if(H[D])Q.entity=H[D];return a("CharacterMetadata").create(Q)}));w=F+1;var J=E.depth,K=E.type,L=E.parent,M=E.key||a("generateRandomKey")(),N=null;if(L)(function(){__p&&__p();var P,Q=B.cacheRef[L],R=B.contentBlocks[Q];if(R.getChildKeys().isEmpty()&&R.getText())(function(){var S=R.getCharacterList(),T=R.getText();N=a("generateRandomKey")();var U=new(a("ContentBlockNode"))({key:N,text:T,characterList:S,parent:L,nextSibling:M});B.contentBlocks.push(U);R=R.withMutations(function(E){E.set("characterList",d()).set("text","").set("children",R.children.push(U.getKey()))})})();B.contentBlocks[Q]=R.set("children",R.children.push(M))})();var O=new A({key:M,parent:L,type:K,depth:J,text:C,characterList:I,prevSibling:N||(D===0||x[D-1].parent!==L?null:x[D-1].key),nextSibling:D===x.length-1||x[D+1].parent!==L?null:x[D+1].key});B.contentBlocks.push(O);B.cacheRef[O.key]=D;return B},v).contentBlocks},Ba=function Ba(u){var v=arguments.length<=1||arguments[1]===undefined?a("getSafeBodyFromHTML"):arguments[1],w=arguments.length<=2||arguments[2]===undefined?a("DefaultDraftBlockRenderMap"):arguments[2],x=za(u,v,w,a("DraftEntity"));if(x==null)return null;var y=x.chunk,z=x.entityMap,A=Aa(y);return{contentBlocks:A,entityMap:z}};ea.exports=Ba}),null);
__d("DraftPasteProcessor",["CharacterMetadata","ContentBlock","ContentBlockNode","immutable","convertFromHTMLToContentBlocks","generateRandomKey","getSafeBodyFromHTML","gkx","sanitizeDraftText"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").List,i=c("immutable").Repeat,j=c("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN"),k=j?c("ContentBlockNode"):c("ContentBlock"),l={processHTML:function m(n,o){return c("convertFromHTMLToContentBlocks")(n,c("getSafeBodyFromHTML"),o)},processText:function m(n,o,p){return n.reduce(function(q,r,s){r=c("sanitizeDraftText")(r);var t=c("generateRandomKey")(),u={key:t,type:p,text:r,characterList:h(i(o,r.length))};if(j&&s!==0){var v=s-1,w=q[v]=q[v].merge({nextSibling:t});u=babelHelpers["extends"]({},u,{prevSibling:w.getKey()})}q.push(new k(u));return q},[])}};f.exports=l}),null);
__d("adjustBlockDepthForContentState",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k,l){var m=j.getStartKey(),n=j.getEndKey(),o=i.getBlockMap(),p=o.toSeq().skipUntil(function(q,r){return r===m}).takeUntil(function(q,r){return r===n}).concat([[n,o.get(n)]]).map(function(q){var r=q.getDepth()+k;r=Math.max(0,Math.min(r,l));return q.set("depth",r)});o=o.merge(p);return i.merge({blockMap:o,selectionBefore:j,selectionAfter:j})}f.exports=h}),null);
__d("RichTextEditorUtil",["DraftModifier","EditorState","SelectionState","adjustBlockDepthForContentState","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={currentBlockContainsLink:function i(j){var k=j.getSelection(),l=j.getCurrentContent(),m=l.getEntityMap();return l.getBlockForKey(k.getAnchorKey()).getCharacterList().slice(k.getStartOffset(),k.getEndOffset()).some(function(n){var o=n.getEntity();return!!o&&m.__get(o).getType()==="LINK"})},getCurrentBlockType:function i(j){var k=j.getSelection();return j.getCurrentContent().getBlockForKey(k.getStartKey()).getType()},getDataObjectForLinkURL:function i(j){return{url:j.toString()}},handleKeyCommand:function i(j,k){switch(k){case"bold":return h.toggleInlineStyle(j,"BOLD");case"italic":return h.toggleInlineStyle(j,"ITALIC");case"underline":return h.toggleInlineStyle(j,"UNDERLINE");case"code":return h.toggleCode(j);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return h.onBackspace(j);case"delete":case"delete-word":case"delete-to-end-of-block":return h.onDelete(j);default:return null}},insertSoftNewline:function i(j){var k=c("DraftModifier").insertText(j.getCurrentContent(),j.getSelection(),"\n",j.getCurrentInlineStyle(),null),l=c("EditorState").push(j,k,"insert-characters");return c("EditorState").forceSelection(l,k.getSelectionAfter())},onBackspace:function i(j){__p&&__p();var k=j.getSelection();if(!k.isCollapsed()||k.getAnchorOffset()||k.getFocusOffset())return null;var l=j.getCurrentContent(),m=k.getStartKey(),n=l.getBlockBefore(m);if(n&&n.getType()==="atomic"){var o=l.getBlockMap()["delete"](n.getKey()),p=l.merge({blockMap:o,selectionAfter:k});if(p!==l)return c("EditorState").push(j,p,"remove-range")}var q=h.tryToRemoveBlockStyle(j);if(q)return c("EditorState").push(j,q,"change-block-type");return null},onDelete:function i(j){__p&&__p();var k=j.getSelection();if(!k.isCollapsed())return null;var l=j.getCurrentContent(),m=k.getStartKey(),n=l.getBlockForKey(m),o=n.getLength();if(k.getStartOffset()<o)return null;var p=l.getBlockAfter(m);if(!p||p.getType()!=="atomic")return null;var q=k.merge({focusKey:p.getKey(),focusOffset:p.getLength()}),r=c("DraftModifier").removeRange(l,q,"forward");if(r!==l)return c("EditorState").push(j,r,"remove-range");return null},onTab:function i(event,j,k){__p&&__p();var l=j.getSelection(),m=l.getAnchorKey();if(m!==l.getFocusKey())return j;var n=j.getCurrentContent(),o=n.getBlockForKey(m),p=o.getType();if(p!=="unordered-list-item"&&p!=="ordered-list-item")return j;event.preventDefault();var q=n.getBlockBefore(m);if(!q)return j;var r=q.getType();if(r!=="unordered-list-item"&&r!=="ordered-list-item")return j;var s=o.getDepth();if(!event.shiftKey&&s===k)return j;k=Math.min(q.getDepth()+1,k);var t=c("adjustBlockDepthForContentState")(n,l,event.shiftKey?-1:1,k);return c("EditorState").push(j,t,"adjust-depth")},toggleBlockType:function i(j,k){__p&&__p();var l=j.getSelection(),m=l.getStartKey(),n=l.getEndKey(),o=j.getCurrentContent(),p=l;if(m!==n&&l.getEndOffset()===0){var q=c("nullthrows")(o.getBlockBefore(n));n=q.getKey();p=p.merge({anchorKey:m,anchorOffset:l.getStartOffset(),focusKey:n,focusOffset:q.getLength(),isBackward:false})}var r=o.getBlockMap().skipWhile(function(t,u){return u!==m}).reverse().skipWhile(function(t,u){return u!==n}).some(function(t){return t.getType()==="atomic"});if(r)return j;var s=o.getBlockForKey(m).getType()===k?"unstyled":k;return c("EditorState").push(j,c("DraftModifier").setBlockType(o,p,s),"change-block-type")},toggleCode:function i(j){var k=j.getSelection(),l=k.getAnchorKey(),m=k.getFocusKey();if(k.isCollapsed()||l!==m)return h.toggleBlockType(j,"code-block");return h.toggleInlineStyle(j,"CODE")},toggleInlineStyle:function i(j,k){var l=j.getSelection(),m=j.getCurrentInlineStyle();if(l.isCollapsed())return c("EditorState").setInlineStyleOverride(j,m.has(k)?m.remove(k):m.add(k));var n=j.getCurrentContent(),o;if(m.has(k))o=c("DraftModifier").removeInlineStyle(n,l,k);else o=c("DraftModifier").applyInlineStyle(n,l,k);return c("EditorState").push(j,o,"change-inline-style")},toggleLink:function i(j,k,l){var m=c("DraftModifier").applyEntity(j.getCurrentContent(),k,l);return c("EditorState").push(j,m,"apply-entity")},tryToRemoveBlockStyle:function i(j){__p&&__p();var k=j.getSelection(),l=k.getAnchorOffset();if(k.isCollapsed()&&l===0){var m=k.getAnchorKey(),n=j.getCurrentContent(),o=n.getBlockForKey(m),p=n.getFirstBlock();if(o.getLength()>0&&o!==p)return null;var q=o.getType(),r=n.getBlockBefore(m);if(q==="code-block"&&r&&r.getType()==="code-block"&&r.getLength()!==0)return null;if(q!=="unstyled")return c("DraftModifier").setBlockType(n,k,"unstyled")}return null}};f.exports=h}),null);
__d("editOnPaste",["BlockMapBuilder","CharacterMetadata","DataTransfer","DraftModifier","DraftPasteProcessor","EditorState","RichTextEditorUtil","getEntityKeyForSelection","getTextContentFromFiles","isEventHandled","splitTextIntoTextBlocks"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k,l){__p&&__p();l.preventDefault();var m=new(c("DataTransfer"))(l.clipboardData);if(!m.isRichText()){var n=m.getFiles(),o=m.getText();if(n.length>0){if(k.props.handlePastedFiles&&c("isEventHandled")(k.props.handlePastedFiles(n)))return;c("getTextContentFromFiles")(n,function(C){C=C||o;if(!C)return;var s=k._latestEditorState,D=c("splitTextIntoTextBlocks")(C),y=c("CharacterMetadata").create({style:s.getCurrentInlineStyle(),entity:c("getEntityKeyForSelection")(s.getCurrentContent(),s.getSelection())}),z=c("RichTextEditorUtil").getCurrentBlockType(s),q=c("DraftPasteProcessor").processText(D,y,z),E=c("BlockMapBuilder").createFromArray(q),F=c("DraftModifier").replaceWithFragment(s.getCurrentContent(),s.getSelection(),E);k.update(c("EditorState").push(s,F,"insert-fragment"))});return}}var p=[],q=m.getText(),r=m.getHTML(),s=k._latestEditorState;if(k.props.handlePastedText&&c("isEventHandled")(k.props.handlePastedText(q,r,s)))return;if(q)p=c("splitTextIntoTextBlocks")(q);if(!k.props.stripPastedStyles){var t=k.getClipboard();if(m.isRichText()&&t){if(r.indexOf(k.getEditorKey())!==-1||p.length===1&&t.size===1&&t.first().getText()===q){k.update(i(k._latestEditorState,t));return}}else if(t&&m.types.includes("com.apple.webarchive")&&!m.types.includes("text/html")&&j(p,t)){k.update(i(k._latestEditorState,t));return}if(r){var u=c("DraftPasteProcessor").processHTML(r,k.props.blockRenderMap);if(u){var v=u.contentBlocks,w=u.entityMap;if(v){var x=c("BlockMapBuilder").createFromArray(v);k.update(i(k._latestEditorState,x,w));return}}}k.setClipboard(null)}if(p.length){var y=c("CharacterMetadata").create({style:s.getCurrentInlineStyle(),entity:c("getEntityKeyForSelection")(s.getCurrentContent(),s.getSelection())}),z=c("RichTextEditorUtil").getCurrentBlockType(s),A=c("DraftPasteProcessor").processText(p,y,z),B=c("BlockMapBuilder").createFromArray(A);k.update(i(k._latestEditorState,B))}}function i(k,l,m){var n=c("DraftModifier").replaceWithFragment(k.getCurrentContent(),k.getSelection(),l);return c("EditorState").push(k,n.set("entityMap",m),"insert-fragment")}function j(k,l){return k.length===l.size&&l.valueSeq().every(function(m,n){return m.getText()===k[n]})}f.exports=h}),null);
__d("getDraftEditorSelection",["getDraftEditorSelectionWithNodes"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=b.getSelection();if(k.rangeCount===0)return{selectionState:i.getSelection().set("hasFocus",false),needsRecovery:false};return c("getDraftEditorSelectionWithNodes")(i,j,k.anchorNode,k.anchorOffset,k.focusNode,k.focusOffset)}f.exports=h}),null);
__d("editOnSelect",["invariant","DraftJsDebugLogging","EditorState","ReactDOM","getDraftEditorSelection"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(j){__p&&__p();if(j._blockSelectEvents||j._latestEditorState!==j.props.editorState){if(j._blockSelectEvents){var k=j.props.editorState,l=k.getSelection();c("DraftJsDebugLogging").logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:new Error().stack}),selectionState:JSON.stringify(l.toJS())})}return}var m=j.props.editorState,n=c("ReactDOM").findDOMNode(j.editorContainer);n||h(0);n.firstChild instanceof HTMLElement||h(0);var o=c("getDraftEditorSelection")(m,n.firstChild),p=o.selectionState;if(p!==m.getSelection()){if(o.needsRecovery)m=c("EditorState").forceSelection(m,p);else m=c("EditorState").acceptSelection(m,p);j.update(m)}}f.exports=i}),null);
__d("DraftEditorEditHandler",["editOnBeforeInput","editOnBlur","editOnCompositionStart","editOnCopy","editOnCut","editOnDragOver","editOnDragStart","editOnFocus","editOnInput","editOnKeyDown","editOnPaste","editOnSelect"],(function a(b,c,d,e,f,g){"use strict";var h={onBeforeInput:c("editOnBeforeInput"),onBlur:c("editOnBlur"),onCompositionStart:c("editOnCompositionStart"),onCopy:c("editOnCopy"),onCut:c("editOnCut"),onDragOver:c("editOnDragOver"),onDragStart:c("editOnDragStart"),onFocus:c("editOnFocus"),onInput:c("editOnInput"),onKeyDown:c("editOnKeyDown"),onPaste:c("editOnPaste"),onSelect:c("editOnSelect")};f.exports=h}),null);
__d("DraftEditorPlaceholder.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.shouldComponentUpdate=function(l){return this.props.text!==l.text||this.props.editorState.getSelection().getHasFocus()!==l.editorState.getSelection().getHasFocus()};k.prototype.render=function(){var l=this.props.editorState.getSelection().getHasFocus(),m="_1p1t"+(l?" _1p1u":""),n={whiteSpace:"pre-wrap"};return c("React").createElement("div",{className:m},c("React").createElement("div",{className:"_1p1v",id:this.props.accessibilityID,style:n},this.props.text))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("getDefaultKeyBinding",["KeyBindingUtil","Keys","UserAgent"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("UserAgent").isPlatform("Mac OS X"),i=h&&c("UserAgent").isBrowser("Firefox < 29"),j=c("KeyBindingUtil").hasCommandModifier,k=c("KeyBindingUtil").isCtrlKeyCommand;function l(q){return h&&q.altKey||k(q)}function m(q){if(!j(q))return null;return q.shiftKey?"redo":"undo"}function n(q){if(!h&&q.shiftKey)return null;return l(q)?"delete-word":"delete"}function o(q){if(j(q)&&h)return"backspace-to-start-of-line";return l(q)?"backspace-word":"backspace"}function p(q){__p&&__p();switch(q.keyCode){case 66:return j(q)?"bold":null;case 68:return k(q)?"delete":null;case 72:return k(q)?"backspace":null;case 73:return j(q)?"italic":null;case 74:return j(q)?"code":null;case 75:return h&&k(q)?"secondary-cut":null;case 77:return k(q)?"split-block":null;case 79:return k(q)?"split-block":null;case 84:return h&&k(q)?"transpose-characters":null;case 85:return j(q)?"underline":null;case 87:return h&&k(q)?"backspace-word":null;case 89:if(k(q))return h?"secondary-paste":"redo";return null;case 90:return m(q)||null;case c("Keys").RETURN:return"split-block";case c("Keys").DELETE:return n(q);case c("Keys").BACKSPACE:return o(q);case c("Keys").LEFT:return i&&j(q)?"move-selection-to-start-of-block":null;case c("Keys").RIGHT:return i&&j(q)?"move-selection-to-end-of-block":null;default:return null}}f.exports=p}),null);
__d("DraftEditor.react",["cx","invariant","DefaultDraftBlockRenderMap","DefaultDraftInlineStyle","DraftEditorCompositionHandler","DraftEditorContents.react","DraftEditorDragHandler","DraftEditorEditHandler","DraftEditorPlaceholder.react","DraftODS","EditorState","React","ReactDOM","Scroll","Style","UserAgent","emptyFunction","generateRandomKey","getDefaultKeyBinding","getScrollPosition","gkx","nullthrows"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l,m,n=c("UserAgent").isBrowser("IE"),o=!n,p={edit:c("DraftEditorEditHandler"),composite:c("DraftEditorCompositionHandler"),drag:c("DraftEditorDragHandler"),cut:null,render:null},q=false;j=babelHelpers.inherits(r,c("React").Component);k=j&&j.prototype;r.prototype.render=function(){return null};r.prototype.componentDidMount=function(){this._update()};r.prototype.componentDidUpdate=function(){this._update()};r.prototype._update=function(){if(c("gkx")("AT4hk7mlYaWKM8pBCdyuAzV0Q-LUV-hg-gkoKQzB0pTifavhF1IMwccVR4Bbwn4tAM2TK5eJhBMZC_vsqKpRmkQyUyCBEYnNpisO4sFi92e8zg")){var t=this.props.editor;t._latestEditorState=this.props.editorState}};function r(){j.apply(this,arguments)}l=babelHelpers.inherits(s,c("React").Component);m=l&&l.prototype;function s(t){__p&&__p();m.constructor.call(this,t);this.focus=function(u){__p&&__p();var v=this.props.editorState,w=v.getSelection().getHasFocus(),x=c("ReactDOM").findDOMNode(this.editor);if(!x)return;var y=c("Style").getScrollParent(x),z=u||c("getScrollPosition")(y),A=z.x,B=z.y;x instanceof HTMLElement||i(0);x.focus();if(y===window)window.scrollTo(A,B);else c("Scroll").setTop(y,B);if(!w)this.update(c("EditorState").forceSelection(v,v.getSelection()))}.bind(this);this.blur=function(){var u=c("ReactDOM").findDOMNode(this.editor);u instanceof HTMLElement||i(0);u.blur()}.bind(this);this.setMode=function(u){this._handler=p[u]}.bind(this);this.exitCurrentMode=function(){this.setMode("edit")}.bind(this);this.restoreEditorDOM=function(u){this.setState({contentsKey:this.state.contentsKey+1},function(){this.focus(u)}.bind(this))}.bind(this);this.setClipboard=function(u){this._clipboard=u}.bind(this);this.getClipboard=function(){return this._clipboard}.bind(this);this.update=function(u){this._latestEditorState=u;this.props.onChange(u)}.bind(this);this.onDragEnter=function(){this._dragCount++}.bind(this);this.onDragLeave=function(){this._dragCount--;if(this._dragCount===0)this.exitCurrentMode()}.bind(this);this._blockSelectEvents=false;this._clipboard=null;this._handler=null;this._dragCount=0;this._editorKey=t.editorKey||c("generateRandomKey")();this._placeholderAccessibilityID="placeholder-"+this._editorKey;this._latestEditorState=t.editorState;this._latestCommittedEditorState=t.editorState;this._onBeforeInput=this._buildHandler("onBeforeInput");this._onBlur=this._buildHandler("onBlur");this._onCharacterData=this._buildHandler("onCharacterData");this._onCompositionEnd=this._buildHandler("onCompositionEnd");this._onCompositionStart=this._buildHandler("onCompositionStart");this._onCopy=this._buildHandler("onCopy");this._onCut=this._buildHandler("onCut");this._onDragEnd=this._buildHandler("onDragEnd");this._onDragOver=this._buildHandler("onDragOver");this._onDragStart=this._buildHandler("onDragStart");this._onDrop=this._buildHandler("onDrop");this._onInput=this._buildHandler("onInput");this._onFocus=this._buildHandler("onFocus");this._onKeyDown=this._buildHandler("onKeyDown");this._onKeyPress=this._buildHandler("onKeyPress");this._onKeyUp=this._buildHandler("onKeyUp");this._onMouseDown=this._buildHandler("onMouseDown");this._onMouseUp=this._buildHandler("onMouseUp");this._onPaste=this._buildHandler("onPaste");this._onSelect=this._buildHandler("onSelect");this.getEditorKey=function(){return this._editorKey}.bind(this);this.state={contentsKey:0}}s.prototype._buildHandler=function(t){__p&&__p();var u=c("ReactDOM").unstable_flushControlled;return function(v){var w,x=this;if(!this.props.readOnly)(function(){var y=x._handler&&x._handler[t];if(y)if(u&&c("gkx")("AT4saWbUVNNP0xfVrGFK4Od7asqAk6KYaZ-OXTpPRONiG7_7sK-oz8vKP6N655DcRvOu63kZiUbSNUB61u9ZSfYK"))u(function(){return y(this,v)}.bind(x));else y(x,v)})()}.bind(this)};s.prototype._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()};s.prototype._renderPlaceholder=function(){if(this._showPlaceholder()){var t={text:c("nullthrows")(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return c("React").createElement(c("DraftEditorPlaceholder.react"),t)}return null};s.prototype.render=function(){var t=this.props,u=t.blockRenderMap,v=t.blockRendererFn,w=t.blockStyleFn,x=t.customStyleFn,y=t.customStyleMap,z=t.editorState,A=t.readOnly,B=t.textAlignment,C=t.textDirectionality,D="_5rp7"+(B==="left"?" _5rp8":"")+(B==="right"?" _5rp9":"")+(B==="center"?" _5rpa":""),E={outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},F=this.props.role||"textbox",G=F==="combobox"?!!this.props.ariaExpanded:null,H={blockRenderMap:u,blockRendererFn:v,blockStyleFn:w,customStyleMap:babelHelpers["extends"]({},c("DefaultDraftInlineStyle"),y),customStyleFn:x,editorKey:this._editorKey,editorState:z,key:"contents"+this.state.contentsKey,textDirectionality:C};return c("React").createElement("div",{className:D},this._renderPlaceholder(),c("React").createElement("div",{className:"_5rpb",ref:function(I){return this.editorContainer=I}.bind(this)},c("React").createElement("div",{"aria-activedescendant":A?null:this.props.ariaActiveDescendantID,"aria-autocomplete":A?null:this.props.ariaAutoComplete,"aria-controls":A?null:this.props.ariaControls,"aria-describedby":this.props.ariaDescribedBy||this._placeholderAccessibilityID,"aria-expanded":A?null:G,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:(!A?"notranslate":"")+" _5rpu",contentEditable:!A,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:function(I){return this.editor=I}.bind(this),role:A?null:F,spellCheck:o&&this.props.spellCheck,style:E,suppressContentEditableWarning:true,tabIndex:this.props.tabIndex},c("React").createElement(r,{editor:this,editorState:z}),c("React").createElement(c("DraftEditorContents.react"),H))))};s.prototype.componentDidMount=function(){if(!q&&c("gkx")("AT60Qhny9fC3BpbI8ZQSvDSWTGcUliA-72QFfXtmX6zOJHm8k3Eh1sQgzLifAxrJandLHat-LCVV6kN9-xliHn1Q")){q=true;c("DraftODS").init()}this.setMode("edit");if(n)document.execCommand("AutoUrlDetect",false,false)};s.prototype.componentWillUpdate=function(t){if(!c("gkx")("AT7kJDh3qMpAVURnrBTGB3It2hSkwed3ZJbqSbs7ruoyMC1RlDVvS6mcotyrcbhrxOCKv_udHJXgS0eRFeHKUbY8MvYwF2yCnj6gG2kQSsIGGg"))this._blockSelectEvents=true;if(!c("gkx")("AT4hk7mlYaWKM8pBCdyuAzV0Q-LUV-hg-gkoKQzB0pTifavhF1IMwccVR4Bbwn4tAM2TK5eJhBMZC_vsqKpRmkQyUyCBEYnNpisO4sFi92e8zg"))this._latestEditorState=t.editorState};s.prototype.componentDidUpdate=function(){this._blockSelectEvents=false;if(c("gkx")("AT4hk7mlYaWKM8pBCdyuAzV0Q-LUV-hg-gkoKQzB0pTifavhF1IMwccVR4Bbwn4tAM2TK5eJhBMZC_vsqKpRmkQyUyCBEYnNpisO4sFi92e8zg"))this._latestEditorState=this.props.editorState;this._latestCommittedEditorState=this.props.editorState};s.defaultProps={blockRenderMap:c("DefaultDraftBlockRenderMap"),blockRendererFn:c("emptyFunction").thatReturnsNull,blockStyleFn:c("emptyFunction").thatReturns(""),keyBindingFn:c("getDefaultKeyBinding"),readOnly:false,spellCheck:false,stripPastedStyles:false};f.exports=s}),null);
__d("GroupTypeaheadTypeEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({USER:"user",PAGE:"page",APP:"app",GROUP:"group",EVENT:"event",PLACE:"place",GROUP_RULE:"group_rule"})}),null);
__d("insertMentionIntoEditorState",["DraftModifier","EditorState","GroupTypeaheadTypeEnum","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="@\uff20\ufe68";function i(l,m,n,o){var p=m.getSelection(),q=m.getCurrentContent(),r=p.getAnchorKey(),s=p.getAnchorOffset(),t=q.getBlockMap().get(r),u=p.getStartOffset(),v=t.getText().substr(u-n,n),w=j(l,v),x=s-k(t.getText().substr(0,s),w,n);q=o(q,l);var y=q.getLastCreatedEntityKey(),z=c("DraftModifier").replaceText(q,p.set("anchorOffset",x),w,m.getCurrentInlineStyle(),y);return c("EditorState").push(m,z,"insert-fragment")}function j(l,m){__p&&__p();if(l.getType()===c("GroupTypeaheadTypeEnum").GROUP_RULE)return l.getSubtitle();if(!c("gkx")("AT4eVhAyXs5l-SdU2eMzGAtYZHW_8azbWQtRzBkQx-hxEYvZmrk9VzKrNwtfnQLv-dOZuBnZ683myig4JsVLktUm"))return l.getTitle();m=m.toLowerCase();if(h.includes(m.substring(0,1)))m=m.substring(1,m.length);if(l.getTitle().toLowerCase().startsWith(m))return l.getTitle();else if(l.getSubtitle().toLowerCase().startsWith(m))return"@"+l.getSubtitle();else if(l.getTitle().toLowerCase().includes(m))return l.getTitle();else if(l.getSubtitle().toLowerCase().includes(m))return"@"+l.getSubtitle();return l.getTitle()}function k(l,m,n){for(var o=n;o<=m.length;o++)if(l.substr(-o)==m.substr(0,o))n=o;return n}f.exports=i}),null);
__d("AbstractMentionsTextEditor.react",["DraftEditor.react","React","SearchableEntry","TypeaheadNavigation","clearImmediate","getOrCreateDOMID","insertMentionIntoEditorState","setImmediate","uniqueID"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes,k=5,l="handled",m="not-handled";h=babelHelpers.inherits(n,c("React").Component);i=h&&h.prototype;function n(o,p){"use strict";__p&&__p();i.constructor.call(this,o,p);this.__onShowMentions=function(q,r){__p&&__p();if(!this.$AbstractMentionsTextEditor2)return;var s=r||0;if(!q||!q.length){this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return}var t=q.slice(0,this.props.maxResults),u=this.props.typeaheadViewProps;if(u&&u.mentionSortFn)t.sort(u.mentionSortFn);var v=null;if(this.props.autoHighlight||this.state.highlightedMentionable!==null)v=q[0];this.setState({highlightedMentionable:v,mentionableEntries:t,characterOffset:s});if(this.props.onShowMentions)this.props.onShowMentions(t,s)}.bind(this);this.$AbstractMentionsTextEditor8=function(q){this.setState(this.$AbstractMentionsTextEditor12());this.props.onBlur&&this.props.onBlur(q)}.bind(this);this.$AbstractMentionsTextEditor7=function(q){this.props.mentionsSource&&this.props.mentionsSource.bootstrap();this.props.onFocus&&this.props.onFocus(q)}.bind(this);this.$AbstractMentionsTextEditor13=function(q,r){if(this.state.highlightedMentionable){this.$AbstractMentionsTextEditor10(this.state.highlightedMentionable,q);return l}else if(this.props.handleContentReturn&&this.props.handleContentReturn(q,r))return l;return m}.bind(this);this.$AbstractMentionsTextEditor6=function(q){var r=this.state.highlightedMentionable;if(r){q.preventDefault();this.$AbstractMentionsTextEditor10(r,q)}else if(this.props.onTab)this.props.onTab(q)}.bind(this);this.$AbstractMentionsTextEditor5=function(q){if(this.props.onEscape)this.props.onEscape(q);if(this.state.mentionableEntries){q.stopPropagation();q.nativeEvent.isPropagationStopped=true;this.setState(this.$AbstractMentionsTextEditor12())}}.bind(this);this.$AbstractMentionsTextEditor11=function(q){var r=this.state.mentionableEntries;if(r){q.preventDefault();c("TypeaheadNavigation").moveUp(r,this.state.highlightedMentionable,this.$AbstractMentionsTextEditor9)}else this.props.onUpArrow&&this.props.onUpArrow(q)}.bind(this);this.$AbstractMentionsTextEditor4=function(q){var r=this.state.mentionableEntries;if(r){q.preventDefault();c("TypeaheadNavigation").moveDown(r,this.state.highlightedMentionable,this.$AbstractMentionsTextEditor9)}else this.props.onDownArrow&&this.props.onDownArrow(q)}.bind(this);this.$AbstractMentionsTextEditor9=function(q){this.setState({highlightedMentionable:q})}.bind(this);this.$AbstractMentionsTextEditor14=function(q){var r=c("getOrCreateDOMID")(q);this.setState({ariaActiveDescendantID:r})}.bind(this);this.$AbstractMentionsTextEditor10=function(q,r){var s=c("insertMentionIntoEditorState")(q,this.props.editorState,this.state.characterOffset,this.props.mentionCreationForContentStateFn);this.props.onChange(s);this.setState(this.$AbstractMentionsTextEditor12());var t=this.props.onAddMention,u=this.state.mentionableEntries;if(t&&u){var v=u.indexOf(q);t(q,v,r)}}.bind(this);this.__onShowMentions=this.__onShowMentions.bind(this);this.$AbstractMentionsTextEditor4=this.$AbstractMentionsTextEditor4.bind(this);this.$AbstractMentionsTextEditor5=this.$AbstractMentionsTextEditor5.bind(this);this.$AbstractMentionsTextEditor6=this.$AbstractMentionsTextEditor6.bind(this);this.$AbstractMentionsTextEditor7=this.$AbstractMentionsTextEditor7.bind(this);this.$AbstractMentionsTextEditor8=this.$AbstractMentionsTextEditor8.bind(this);this.$AbstractMentionsTextEditor9=this.$AbstractMentionsTextEditor9.bind(this);this.$AbstractMentionsTextEditor10=this.$AbstractMentionsTextEditor10.bind(this);this.$AbstractMentionsTextEditor11=this.$AbstractMentionsTextEditor11.bind(this);this.state=this.$AbstractMentionsTextEditor12()}n.prototype.componentWillMount=function(){"use strict";this.$AbstractMentionsTextEditor2=true;this.$AbstractMentionsTextEditor1=c("uniqueID")();this.$AbstractMentionsTextEditor3=[]};n.prototype.componentWillUnmount=function(){"use strict";this.$AbstractMentionsTextEditor2=false;this.$AbstractMentionsTextEditor3.forEach(function(o){return c("clearImmediate")(o)});this.$AbstractMentionsTextEditor3=[]};n.prototype.$AbstractMentionsTextEditor12=function(){"use strict";return{highlightedMentionable:null,mentionableEntries:null,characterOffset:0}};n.prototype.shouldComponentUpdate=function(o,p){"use strict";return this.props.editorState!==o.editorState||this.props.placeholder!==o.placeholder||this.props.readOnly!==o.readOnly||this.state.mentionableEntries!==p.mentionableEntries||this.state.highlightedMentionable!==p.highlightedMentionable||this.state.ariaActiveDescendantID!==p.ariaActiveDescendantID};n.prototype.componentDidUpdate=function(o){__p&&__p();var p,q=this;"use strict";var r=this.props.editorState;if(r===o.editorState)return;var s=r.getSelection();if(s.getHasFocus()&&s.isCollapsed()){var t;(function(){t=r.getCurrentContent();var u=q.props.mentionsSource;if(u)q.$AbstractMentionsTextEditor3.push(c("setImmediate")(function(){u.search(t,s,this.__onShowMentions)}.bind(q)))})()}};n.prototype.blur=function(){"use strict";this.refs.abstractTextEditor.blur()};n.prototype.focus=function(){"use strict";this.refs.abstractTextEditor.focus()};n.prototype.$AbstractMentionsTextEditor15=function(){"use strict";var o=this.state.mentionableEntries;if(!o||!o.length)return null;var p=this.props.mentionResultsComponent;return c("React").createElement(p,babelHelpers["extends"]({},this.props.mentionResultsProps,{viewID:this.$AbstractMentionsTextEditor1,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:o||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this.$AbstractMentionsTextEditor10,onMentionHighlight:this.$AbstractMentionsTextEditor9,onMentionRenderHighlight:this.$AbstractMentionsTextEditor14}))};n.prototype.exitCurrentMode=function(){"use strict";this.refs.abstractTextEditor&&this.refs.abstractTextEditor.exitCurrentMode()};n.prototype.render=function(){"use strict";var o=this.state.mentionableEntries,p=!!(o&&o.length),q=this.props.readOnly?null:"-1",r=this.props.role||"combobox",s=this.props.ariaAutoComplete||"list";return c("React").createElement("div",{ref:"container",className:this.props.className,tabIndex:q},c("React").createElement(c("DraftEditor.react"),babelHelpers["extends"]({},this.props,{ref:"abstractTextEditor",role:r,ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:s,ariaControls:this.$AbstractMentionsTextEditor1,ariaExpanded:p,ariaHasPopup:p,editorState:this.props.editorState,onBlur:this.$AbstractMentionsTextEditor8,onChange:this.props.onChange,onFocus:this.$AbstractMentionsTextEditor7,onTab:this.$AbstractMentionsTextEditor6,onEscape:this.$AbstractMentionsTextEditor5,onDownArrow:this.$AbstractMentionsTextEditor4,onUpArrow:this.$AbstractMentionsTextEditor11,handleReturn:this.$AbstractMentionsTextEditor13})),this.$AbstractMentionsTextEditor15())};n.prototype.isShowingMentionables=function(){"use strict";return!!this.state.mentionableEntries};n.defaultProps=babelHelpers["extends"]({},c("DraftEditor.react").defaultProps,{autoHighlight:true,maxResults:k});n.propTypes={mentionsSource:j.object,mentionCreationForContentStateFn:j.func.isRequired,mentionResultsComponent:j.func.isRequired,mentionResultsProps:j.object,excludedEntries:j.object,handleContentReturn:j.func,onAddMention:j.func,onShowMentions:j.func,autoHighlight:j.bool,maxResults:j.number,webDriverTestID:j.string};f.exports=n}),null);