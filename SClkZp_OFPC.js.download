if (self.CavalryLogger) { CavalryLogger.start_js(["IlyHI"]); }

__d("MessengerPlatformBubbleAspectRatio",[],(function a(b,c,d,e,f,g){f.exports={IMAGE_ASPECT_RATIO_HORIZONTAL:1.91,IMAGE_ASPECT_RATIO_SQUARE:1}}),null);
__d("PageProductTransactionPaymentTypeDataKey",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACCOUNT_NAME:"account_name",ACCOUNT_NO:"account_no"})}),null);
__d("XOmnipickerPhotoUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/omnipicker/upload/file/photo/",{source:{type:"Enum",required:true,enumType:0},waterfall_id:{type:"String"},vault_fbid:{type:"String"}})}),null);
__d("CommerceContactMerchantManualPaymentSection.react",["cx","fbt","FBPaymentsStringHelper","FileInput.react","FileInputUploader","Image.react","PageProductTransactionPaymentTypeDataKey","React","ReactDOM","XOmnipickerPhotoUploadController","XUIButton.react","XUIGrayText.react","XUISpinner.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=29,n=120;j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(p){__p&&__p();k.constructor.call(this,p);this.$CommerceContactMerchantManualPaymentSection6=function(event,q){var r=q.response.getPayload()[0];this.setState({photoUploading:false,receiptPhotoID:r.fbid,receiptPhotoURL:r.src});this.props.onReceiptUpdated(r.fbid,r.src)}.bind(this);this.$CommerceContactMerchantManualPaymentSection2=function(q){var r=c("XOmnipickerPhotoUploadController").getURIBuilder().setEnum("source",m).getURI(),s=this.refs.fileInput,t=new(c("FileInputUploader"))(c("ReactDOM").findDOMNode(s)).setURI(r);t.subscribe("failure",this.$CommerceContactMerchantManualPaymentSection5);t.subscribe("success",this.$CommerceContactMerchantManualPaymentSection6);t.send();s.getFileInput().clear();this.setState({photoUploading:true})}.bind(this);this.state={receiptPhotoID:null,receiptPhotoURL:null,photoUploading:false}}o.prototype.render=function(){var p=this.props.paymentOptionDetails,q=p[c("PageProductTransactionPaymentTypeDataKey").ACCOUNT_NAME],r=p[c("PageProductTransactionPaymentTypeDataKey").ACCOUNT_NO],s=c("FBPaymentsStringHelper").stringToMarkup(p.description),t=r==null?null:c("React").createElement(c("XUIGrayText.react"),{display:"block",shade:"dark",size:"meta1",className:"_3-8m"},i._("Account Number"),": ",r),u=q==null?null:c("React").createElement(c("XUIGrayText.react"),{display:"block",shade:"dark",size:"meta1",className:"_3-8m"},i._("Name on Account"),": ",q);return c("React").createElement("div",{className:"_2ph-"},c("React").createElement(c("XUIGrayText.react"),{display:"block",shade:"light",size:"meta1"},this.$CommerceContactMerchantManualPaymentSection1()),c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold",size:"meta1",className:"_3-8m"},this.props.paymentOptionDetails.name),t,u,c("React").createElement(c("XUIGrayText.react"),{display:"block",shade:"dark",size:"meta1",className:"_3-8m"},s),c("React").createElement(c("XUIGrayText.react"),{className:"_3-97",display:"block",size:"meta1"},i._("Order #{order_number}",[i.param("order_number",this.props.invoiceID)])),c("React").createElement("div",null,c("React").createElement(c("XUISpinner.react"),{className:"_3-9c"+(!this.state.photoUploading?" hidden_elem":"")}),c("React").createElement("div",{className:(this.state.photoUploading?"hidden_elem":"")+" _3-96"},c("React").createElement(c("FileInput.react"),{name:"file",multiple:false,ref:"fileInput",accept:"image/*",onChange:this.$CommerceContactMerchantManualPaymentSection2},c("React").createElement(c("XUIButton.react"),{href:{url:"#"},label:this.$CommerceContactMerchantManualPaymentSection3()})))),this.$CommerceContactMerchantManualPaymentSection4())};o.prototype.$CommerceContactMerchantManualPaymentSection4=function(){if(!this.state.receiptPhotoURL)return null;return c("React").createElement(c("Image.react"),{src:this.state.receiptPhotoURL,height:n,width:n})};o.prototype.$CommerceContactMerchantManualPaymentSection3=function(){return this.state.receiptPhotoID?i._("Attach Different Receipt"):i._("Attach Receipt")};o.prototype.$CommerceContactMerchantManualPaymentSection1=function(){return i._("Payment instructions from seller")};o.prototype.$CommerceContactMerchantManualPaymentSection5=function(p){};o.propTypes={paymentOptionDetails:l.object.isRequired,invoiceID:l.string.isRequired,onReceiptUpdated:l.func.isRequired};f.exports=o}),null);
__d("FBAccordion.react",["cx","invariant","React","joinClasses"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){__p&&__p();var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$FBAccordion1=function(r){__p&&__p();var s=0,t=this.state?this.state.expandedSectionKey:null,u=null;c("React").Children.forEach(r.children,function(v,w){var x=v.props.expanded;u=t===w?t:u;if(x&&t===null){s===0||i(0);s++;u=w}else if(u===null)u=w});return u}.bind(this),this.$FBAccordion2=function(r){if(this.state.expandedSectionKey!==r)this.setState({expandedSectionKey:r})}.bind(this),this.state={expandedSectionKey:this.$FBAccordion1(this.props)},n}l.prototype.componentWillReceiveProps=function(m){"use strict";var n=this.$FBAccordion1(m);if(this.state.expandedSectionKey!==n)this.setState({expandedSectionKey:n})};l.prototype.render=function(){"use strict";var m=c("React").Children.map(this.props.children,function(n,o){return c("React").cloneElement(n,{isExpanded:this.state.expandedSectionKey===o,onSectionClick:this.$FBAccordion2,sectionKey:o})}.bind(this));return c("React").createElement("div",babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,"_5ygd")}),m)};f.exports=l}),null);
__d("FBAccordionSection.react",["cx","React","ShimButton.react","emptyFunction"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onClick=function(){this.props.onSectionClick(this.props.sectionKey);this.props.onClick(this.props.sectionKey)}.bind(this),n}l.prototype.render=function(){"use strict";var m=this.props.maxHeight||"100%";return c("React").createElement("div",{className:"_4r-a"+(this.props.isExpanded?" _3uxn":"")},c("React").createElement(c("ShimButton.react"),{className:"_5yg8",onClick:this.onClick},this.props.header),c("React").createElement("div",{className:"_1flr",style:{maxHeight:this.props.isExpanded?m:0}},this.props.children))};l.propTypes={expanded:k.bool,header:k.node.isRequired,maxHeight:k.number,onClick:k.func};l.defaultProps={expanded:false,onClick:c("emptyFunction")};f.exports=l}),null);
__d("FBPaymentsPaymentMethodShape_DEPRECATED",["FBPaymentsMethodType","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=h.shape({title:h.string,type:h.oneOf(Object.values(c("FBPaymentsMethodType"))).isRequired});f.exports=i}),null);
__d("FBPaymentsChoosePaymentMethodForm_DEPRECATED.react",["cx","fbt","FBAccordion.react","FBAccordionSection.react","FBPaymentsBankSelector_DEPRECATED.react","FBPaymentsCreditCardForm_DEPRECATED.react","FBPaymentsMethodType","FBPaymentsPaymentMethodShape_DEPRECATED","Link.react","P2PCreditCardDetails.react","P2PLinkConstants","P2PText.react","React","XUIRadioList.react","emptyFunction","setImmediate"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("XUIRadioList.react").Item,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){__p&&__p();k.constructor.call(this,o);this.handleBankSelected=function(p){this.props.onPaymentMethodConfigured({bank:p,isValid:!!p,type:c("FBPaymentsMethodType").NET_BANKING})}.bind(this);this.handleCreditCardFormValidation=function(p,q){this.props.onPaymentMethodConfigured({isValid:p,formData:q,type:c("FBPaymentsMethodType").NEW_CREDIT_CARD})}.bind(this);this.renderPaymentMethodItem=function(p,q){__p&&__p();var r=null,s=null;switch(p.type){case c("FBPaymentsMethodType").GENERIC_CARD:r=c("React").createElement(c("P2PCreditCardDetails.react"),{creditCard:p.creditCard});break;case c("FBPaymentsMethodType").NEW_CREDIT_CARD:r=i._("Credit or Debit Card");s=this.renderCreditCardFormSection(q);break;case c("FBPaymentsMethodType").NET_BANKING:r=i._("Online Banking");s=this.renderBankSelectorSection(p);break;case c("FBPaymentsMethodType").PAY_OVER_COUNTER:r=i._("Payment at Store Counter");break;case c("FBPaymentsMethodType").MANUAL_TRANSFER:r=p.title;break;default:r=p.title?p.title:p.type;s=c("React").createElement(c("P2PText.react"),{type:"primary"},"Expanded content for ",r);break}s=s?c("React").createElement("div",{className:"_51c-"},s):null;var t=c("React").createElement(l,{className:"_51c_",selectedValue:this.state.selectedKey,value:q},c("React").createElement(c("P2PText.react"),{type:"primary"},r));return c("React").createElement(c("FBAccordionSection.react"),{header:t,key:q,onClick:this.onSectionClick.bind(this)},s)}.bind(this);this.state={selectedKey:0}}n.prototype.componentWillMount=function(){c("setImmediate")(function(){return this.onSectionClick(this.state.selectedKey)}.bind(this))};n.prototype.onSectionClick=function(o){__p&&__p();this.setState({selectedKey:o});var p=this.props.paymentMethods[o];this.props.onPaymentMethodSelected(p);switch(p.type){case c("FBPaymentsMethodType").PAY_OVER_COUNTER:this.props.onPaymentMethodConfigured({isValid:true,type:p.type});break;case c("FBPaymentsMethodType").MANUAL_TRANSFER:var q=p.manual_transfer_info&&p.manual_transfer_info.id;this.props.onPaymentMethodConfigured({isValid:true,type:p.type,optionId:q});break;case c("FBPaymentsMethodType").GENERIC_CARD:this.props.onPaymentMethodConfigured({isValid:true,creditCard:p.creditCard,type:p.type});break}};n.prototype.getSections=function(){return this.props.paymentMethods.map(this.renderPaymentMethodItem,this)};n.prototype.renderCreditCardFormSection=function(o){if(o!==this.state.selectedKey)return null;return c("React").createElement("div",null,c("React").createElement(c("FBPaymentsCreditCardForm_DEPRECATED.react"),{onValidation:this.handleCreditCardFormValidation,saveErrors:this.props.saveErrors,showIcons:false,showSecondaryIcons:true,showZipCodeField:false,useGutters:true}),c("React").createElement(c("P2PText.react"),{className:"_3-8y",type:"secondary"},i._("Your payment info is stored securely. {Link with text that goes to learn more page}",[i.param("Link with text that goes to learn more page",c("React").createElement(c("Link.react"),{href:c("P2PLinkConstants").securePayInfoLearnMoreURI,target:"_blank"},i._("Learn More")))])))};n.prototype.renderBankSelectorSection=function(o){return c("React").createElement(c("FBPaymentsBankSelector_DEPRECATED.react"),{banks:o.banks,onBankSelected:this.handleBankSelected})};n.prototype.render=function(){return c("React").createElement("ul",{className:"_51d0"},c("React").createElement(c("FBAccordion.react"),null,this.getSections()))};n.propTypes={onPaymentMethodConfigured:m.func.isRequired,onPaymentMethodSelected:m.func.isRequired,paymentMethods:m.arrayOf(c("FBPaymentsPaymentMethodShape_DEPRECATED")).isRequired,saveErrors:m.object};n.defaultProps={onPaymentMethodConfigured:c("emptyFunction")};f.exports=n}),null);
__d("FBPaymentsLegalDisclaimer_DEPRECATED.react",["fbt","FBPaymentsLinkHelper","FBPaymentsMethodType","Link.react","P2PText.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m)}l.prototype.getLegalDisclaimerText=function(){var m=c("FBPaymentsLinkHelper").getPayTermsAndPoliciesURI(this.props.paymentType),n=h._("By clicking Complete Purchase, you agree to Facebook's {=terms and policies}",[h.param("=terms and policies",c("React").createElement(c("Link.react"),{href:m,target:"_blank"},"terms and policies"))]),o=h._("By clicking Pay, you agree to Facebook's and 2C2P's {=terms and policies}",[h.param("=terms and policies",c("React").createElement(c("Link.react"),{href:m,target:"_blank"},"terms and policies"))]),p=h._("By clicking Log In and Pay, you agree to Facebook's and 2C2P's {=terms and policies}",[h.param("=terms and policies",c("React").createElement(c("Link.react"),{href:m,target:"_blank"},"terms and policies"))]),q=h._("By clicking Continue to Pay, you agree to Facebook's and 2C2P's {=terms and policies}",[h.param("=terms and policies",c("React").createElement(c("Link.react"),{href:m,target:"_blank"},"terms and policies"))]);switch(this.props.paymentMethodType){case c("FBPaymentsMethodType").GENERIC_CARD:return o;case c("FBPaymentsMethodType").NET_BANKING:return p;case c("FBPaymentsMethodType").PAY_OVER_COUNTER:return q;case c("FBPaymentsMethodType").MANUAL_TRANSFER:return n;default:return null}};l.prototype.render=function(){return c("React").createElement(c("P2PText.react"),{type:"secondary"},this.getLegalDisclaimerText())};l.propTypes={paymentMethodType:k.string.isRequired,paymentType:k.string.isRequired};l.defaultProps={paymentType:""};f.exports=l}),null);
__d("FBPaymentsCreditCardVerificationDialog_DEPRECATED.react",["cx","fbt","CreditCardFormParam","FBPaymentsCreditCardVerificationForm_DEPRECATED.react","P2PButton.react","P2PCreditCard","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLoadingMask.react","P2PText.react","PaymentMethodUtils","React","emptyFunction"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={cscInput:null,isValid:false},this.handleValidation=function(s,t){this.setState({cscInput:t[c("CreditCardFormParam").CSC],isValid:s})}.bind(this),this.handleConfirmClick=function(){this.props.onConfirm(this.state.cscInput)}.bind(this),this.getMaxCSCLength=function(){var s=this.props.creditCard.getCardType();return c("PaymentMethodUtils").getCardTypeFromCode(s).cscDigits}.bind(this),this.getMessage=function(){if(this.getMaxCSCLength()===3)return i._("Please re-enter your card's three-digit security code.");else return i._("Please re-enter your card's four-digit security code.")}.bind(this),this.renderFooter=function(){var s=i._("Cancel"),t=this.props.showCancelButton?c("React").createElement(c("P2PButton.react"),{label:s,onClick:this.props.onCancel,use:"default"}):null;return c("React").createElement(c("P2PDialogFooter.react"),{className:"_3-8-",leftContent:this.props.leftContent},t,c("React").createElement(c("P2PButton.react"),{disabled:!this.state.isValid,label:this.props.primaryButtonText,onClick:this.handleConfirmClick,use:"confirm"}))}.bind(this),o}m.prototype.render=function(){var n={};n[c("CreditCardFormParam").CARD_NUMBER]=this.props.creditCard.getCreditCardNumberMask();n[c("CreditCardFormParam").CARD_EXPIRATION]=this.props.creditCard.getExpFormattedShort();return c("React").createElement(c("P2PDialog.react"),{layerHideOnBlur:false,repositionOnUpdate:true,shown:true},c("React").createElement(c("P2PDialogTitle.react"),null,i._("Enter Security Code")),c("React").createElement(c("P2PDialogBody.react"),null,c("React").createElement(c("FBPaymentsCreditCardVerificationForm_DEPRECATED.react"),{cscMaxLength:this.getMaxCSCLength(),onValidation:this.handleValidation,prefilledFormData:n}),c("React").createElement(c("P2PText.react"),{className:"_3-8y",type:"secondary"},this.getMessage())),this.renderFooter(),c("React").createElement(c("P2PLoadingMask.react"),{visible:this.props.loading}))};m.propTypes={creditCard:l.instanceOf(c("P2PCreditCard")).isRequired,leftContent:l.node,loading:l.bool,onCancel:l.func,onConfirm:l.func.isRequired,primaryButtonText:l.node,showCancelButton:l.bool};m.defaultProps={loading:false,onCancel:c("emptyFunction"),onConfirm:c("emptyFunction"),primaryButtonText:i._("Confirm"),showCancelButton:true};f.exports=m}),null);
__d("MNContentSubscriptionMessageUserEngagementTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MNContentSubscriptionMessageUserEngagementLoggerConfig",this.$MNContentSubscriptionMessageUserEngagementTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MNContentSubscriptionMessageUserEngagementLoggerConfig",this.$MNContentSubscriptionMessageUserEngagementTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1=babelHelpers["extends"]({},this.$MNContentSubscriptionMessageUserEngagementTypedLogger1,j);return this};h.prototype.setAppID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.appversion=j;return this};h.prototype.setBroadcastUnitID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.broadcast_unit_id=j;return this};h.prototype.setClientUserID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.client_userid=j;return this};h.prototype.setClienttime=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.clienttime=j;return this};h.prototype.setCommerceItemID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.commerce_item_id=j;return this};h.prototype.setCommerceMessageType=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.commerce_message_type=j;return this};h.prototype.setCountry=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.country=j;return this};h.prototype.setDeviceid=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.deviceid=j;return this};h.prototype.setInterface=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1["interface"]=j;return this};h.prototype.setMessageID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.message_id=j;return this};h.prototype.setMessageTs=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.message_ts=j;return this};h.prototype.setName=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.name=j;return this};h.prototype.setPageID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.page_id=j;return this};var i={appid:true,appversion:true,broadcast_unit_id:true,client_userid:true,clienttime:true,commerce_item_id:true,commerce_message_type:true,country:true,deviceid:true,"interface":true,message_id:true,message_ts:true,name:true,page_id:true};f.exports=h}),null);
__d("MNPlatformMessageUserEngagementTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MNPlatformMessageUserEngagementLoggerConfig",this.$MNPlatformMessageUserEngagementTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MNPlatformMessageUserEngagementLoggerConfig",this.$MNPlatformMessageUserEngagementTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MNPlatformMessageUserEngagementTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1=babelHelpers["extends"]({},this.$MNPlatformMessageUserEngagementTypedLogger1,j);return this};h.prototype.setAppID=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.appversion=j;return this};h.prototype.setClientUserID=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.client_userid=j;return this};h.prototype.setClienttime=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.clienttime=j;return this};h.prototype.setCommerceItemID=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.commerce_item_id=j;return this};h.prototype.setCommerceMessageType=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.commerce_message_type=j;return this};h.prototype.setCountry=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.country=j;return this};h.prototype.setDeviceid=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.deviceid=j;return this};h.prototype.setInterface=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1["interface"]=j;return this};h.prototype.setMessageID=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.message_id=j;return this};h.prototype.setMessageTs=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.message_ts=j;return this};h.prototype.setName=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.name=j;return this};h.prototype.setPageID=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.page_id=j;return this};var i={appid:true,appversion:true,client_userid:true,clienttime:true,commerce_item_id:true,commerce_message_type:true,country:true,deviceid:true,"interface":true,message_id:true,message_ts:true,name:true,page_id:true};f.exports=h}),null);
__d("MNCommerceOrderConfigActions",["MessengerDispatcher","MNCommerceActionTypes"],(function a(b,c,d,e,f,g){"use strict";var h={itemLoaded:function i(j){c("MessengerDispatcher").dispatch({type:c("MNCommerceActionTypes").RETAIL_ITEM.LOADED,item:j})},itemLoadError:function i(j){c("MessengerDispatcher").dispatch({type:c("MNCommerceActionTypes").RETAIL_ITEM.LOAD_ERROR,itemID:j})},itemReload:function i(j){c("MessengerDispatcher").dispatch({type:c("MNCommerceActionTypes").RETAIL_ITEM.RELOAD,itemID:j})}};f.exports=h}),null);
__d("MNCommerceBubbleImage.react",["cx","React","cssURL","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:c("joinClasses")("_4y9n"+(this.props.isSquare?" _2j_n":"")+(!this.props.isSquare?" _2j_r":""),this.props.className),style:{backgroundImage:c("cssURL")(this.props.source)}})};function l(){i.apply(this,arguments)}l.propTypes={location:k.string,source:k.string.isRequired,width:k.number,isSquare:k.bool};f.exports=l}),null);
__d("MNCommerceCheckoutButton.react",["cx","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l="medium";i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.getButtonSize=function(n){return l};m.prototype.render=function(){var n="_48a0"+(this.props.disabled?" _48a1":"")+(this.props.use==="default"?" _48a2":"")+(this.props.use==="confirm"&&!this.props.disabled?" _48a3":"");return c("React").createElement("span",{className:c("joinClasses")(this.props.className,n),use:"default"},this.props.children)};function m(){i.apply(this,arguments)}m.propTypes={disabled:k.bool,use:k.oneOf(["default","confirm"])};f.exports=m}),null);
__d("MNCommerceCheckoutOrderConfigReactShape",["React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=h.shape({allVariantOptions:h.object,id:h.string,initialVariantOptions:h.object,itemIDToItem:h.object,logo:h.string,name:h.string,optionToItems:h.object,ordered_product_items:h.array,product_item_id:h.string,variant_labels:h.array});f.exports=i}),null);
__d("MNCommerceCheckoutOrderConfigUtils",["Map","Set"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={DELIMITER:"!@*",addVariantOptions:function i(j){var k=j,l=this._buildItemMaps(k),m=l.optionToItems,n=l.itemIDToItem,o=l.variantToItemID,p=this._getVariantOptionsAndEligibleItems(k,m,n),q=p.allVariantOptions,r=p.initialVariantOptions;k.itemIDToItem=n;k.optionToItems=m;k.variantToItemID=o;k.allVariantOptions=q;k.initialVariantOptions=r;return k},_buildItemMaps:function i(j){__p&&__p();var k=new(c("Map"))(),l=new(c("Map"))(),m=new(c("Map"))();j.ordered_product_items.forEach(function(n){__p&&__p();var o=n.variant_values,p=[];Object.keys(o).forEach(function(q){p.push(o[q])});var q=p.join(h.DELIMITER);m.set(q,n.item_id);k.set(n.item_id,n);for(var r=0;r<p.length;r++){if(!l.has(r))l.set(r,new(c("Map"))());var s=p[r],t=l.get(r);if(!t.has(s))t.set(s,new(c("Set"))([n.item_id]));else t.get(s).add(n.item_id)}});return{itemIDToItem:k,optionToItems:l,variantToItemID:m}},_getVariantOptionsAndEligibleItems:function i(j,k,l){__p&&__p();var m={},n={};for(var o=0;o<j.variant_labels.length;o++){m[o]={};var p=[];k.get(o).forEach(function(q,r){__p&&__p();var s=new(c("Map"))();p.push({label:r,available:true});for(var t=0;t<j.variant_labels.length;t++){if(o===t)continue;var u=[];k.get(t).forEach(function(v,w){var x=this._getIntersection(v,k.get(o).get(r)),y=false;if(x.size>0)y=this._isInStock(x,l);u.push({label:w,available:y})}.bind(this),this);s.set(t,u)}m[o][r]=s;n[o]=p}.bind(this),this)}return{allVariantOptions:m,initialVariantOptions:n}},_getIntersection:function i(j,k){var l=new(c("Set"))([]);j.forEach(function(m){if(k.has(m))l.add(m)});return l},_isInStock:function i(j,k){var l=false;j.forEach(function(m){var n=k.get(m);if(n.commerce_inventory>0)l=true});return l}};f.exports=h}),null);
__d("MNCommerceLogoHeaderReact.bs",["cx","React","ImageReact.bs","ReasonReact.bs","bs_js_primitive"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i="24px",j="12px",k=c("ReasonReact.bs").statelessComponent("MNCommerceLogoHeader");function l(p,q,r,s){__p&&__p();var t=function t(){if(p){var v=p[0],w=v.src;if(w==null)return null;else{var x=v.width/v.height,y=Math.abs(3-x)<=.75?j:i;return c("React").createElement("div",{key:"logo",className:"_b0-"},c("React").createElement("div",{className:"_fz0"},c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make(["_56rs"],0,[w],[v.height],0,[v.width],[{maxHeight:y}],[]))))}}else return null},u=k.slice();u[9]=function(){__p&&__p();var v=t(0);if(s.length!==0){var w=c("React").createElement("div",{key:"children",className:"_fy-"+((q!==0?0:1)?" _fy_":"")},c("React").createElement("div",{className:"_56rv"},s)),x;if(p){var y=p[0].src;x=y==null?[1,[w]]:q!==0?[0,[w,v]]:[0,[v,w]]}else x=[1,[w]];return c("React").createElement("div",{className:(x[0]&&(r!==0?1:0)?"_fy_":"")+" _56rt"},x[1])}else return v};return u}var m=c("ReasonReact.bs").wrapReasonForJs(k,function(p){var q=p.children;return l(c("bs_js_primitive").null_undefined_to_opt(p.logo),p.logoPosition==="right"?1:0,p.childPosition==="right"?1:0,q==null?[]:[].concat(q))}),n=3,o=.75;g.defaultMaxHeight=i;g.defaultHalfMaxHeight=j;g.defaultAspectRatio=n;g.aspectRatioMargin=o;g.component=k;g.make=l;g.jsComponent=m}),null);
__d("MNCommerceItemTextReact.bs",["cx","fbt","React","Utils.bs","ReasonReact.bs","joinClasses","MNCommerceOrderItemsStatus"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact.bs").statelessComponent("MNCommerceItemText");function k(l,m,n,o,p,q,r,s){__p&&__p();var t=function t(x){if(p!==0)return null;else{var y=x?x[0]:null;if(q&&q[0]===c("MNCommerceOrderItemsStatus").CANCELED)return c("React").createElement("div",undefined,c("React").createElement("span",{className:"__hz"},i._("Canceled")," \xb7"),y);else return c("React").createElement("div",undefined,y)}},u=function u(x){if(x)return c("React").createElement("div",undefined,x[0]);else return null},v=function v(){if(n){var x=n[0];return c("React").createElement("div",undefined,u(x[0]),u(x[1]),t(x[2]))}else return null},w=j.slice();w[9]=function(){return c("React").createElement("div",{className:c("joinClasses")(c("Utils.bs").$pipe$unknown(l,""),"_swr"+((p!==0?true:false)?" _sws":"")),style:{left:m,paddingLeft:o},title:c("Utils.bs").$pipe$unknown(r,"")},c("React").createElement("div",{className:"_51fw"},r?r[0]:null),c("React").createElement("div",{className:"_2y0f"},v(0)))};return w}g.component=j;g.make=k}),null);
__d("MNCommerceSingleListItemReact.bs",["cx","React","Utils.bs","ImageReact.bs","bs_pervasives","ReasonReact.bs","joinClasses","bs_js_primitive","MNCommerceItemTextReact.bs"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact.bs").statelessComponent("MNCommerceSingleListItem");function j(l,m,n,o,p,q,r,s,t){var u=function u(){if(m)return c("React").createElement("div",{className:"_1fld"},c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make(["_1fle"],0,[m[0]],[n],0,[n],0,[])));else return null},v=i.slice();v[9]=function(){return c("React").createElement("div",{className:c("joinClasses")(c("Utils.bs").$pipe$unknown(l,""),"_39q_"),style:{height:c("bs_pervasives").string_of_int(n)+"px",width:c("Utils.bs").$pipe$unknown(q,"auto")}},u(0),c("ReasonReact.bs").element(0,0,c("MNCommerceItemTextReact.bs").make(["_1flf"],m?c("bs_pervasives").string_of_int(n)+"px":"auto",r,m?"6px":"auto",o,p,s,[])))};return v}var k=c("ReasonReact.bs").wrapReasonForJs(i,function(l){var m=l.width,n=l.metalines;return j(c("bs_js_primitive").null_undefined_to_opt(l.className),c("bs_js_primitive").null_undefined_to_opt(l.thumbURL),l.imageDimension,l.size==="large"?0:1,c("bs_js_primitive").null_undefined_to_opt(l.statusType),m==null?0:[c("bs_pervasives").string_of_int(m)+"px"],n==null?0:[[c("bs_js_primitive").null_undefined_to_opt(n.metaline_1),c("bs_js_primitive").null_undefined_to_opt(n.metaline_2),c("bs_js_primitive").null_undefined_to_opt(n.metaline_3)]],c("bs_js_primitive").null_undefined_to_opt(l.title),[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("MNCommerceCheckoutOrderConfigDialog.react",["cx","fbt","MessengerEnvironment","MNCommerceButton.react","MNCommerceCheckoutButton.react","MNCommerceCheckoutOrderConfigReactShape","MNCommerceCheckoutOrderConfigUtils","MNCommerceDetailsDialog.react","MNCommerceDialogFooter.react","MNCommerceDialogBody.react","MNCommerceLogoHeaderReact.bs","MNCommerceSingleListItemReact.bs","React","Set","XUIRadioButtonGroup.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MNCommerceLogoHeaderReact.bs").jsComponent,m=c("MNCommerceSingleListItemReact.bs").jsComponent,n=c("React").PropTypes,o=18,p="\xb7";j=babelHelpers.inherits(q,c("React").Component);k=j&&j.prototype;function q(s,t){k.constructor.call(this,s,t);r.call(this);this.state=this.$MNCommerceCheckoutOrderConfigDialog1()}q.prototype.componentWillReceiveProps=function(s){this.setState(this.$MNCommerceCheckoutOrderConfigDialog1(s))};q.prototype.render=function(){var s=i._("Your item couldn't be shown.");return c("React").createElement(c("MNCommerceDetailsDialog.react"),babelHelpers["extends"]({errorMessage:s},this.props),this.$MNCommerceCheckoutOrderConfigDialog2())};q.prototype.$MNCommerceCheckoutOrderConfigDialog2=function(){__p&&__p();if(this.props.error||this.props.loading)return null;var s=i._("Continue"),t=i._("Cancel"),u=this.props.checkoutOrderConfig,v=null,w=this.$MNCommerceCheckoutOrderConfigDialog3(),x=u&&u.ordered_product_items;if(w&&w.size){var y=w.values().next().value,z=u&&u.itemIDToItem.get(y);v=z&&z.images}else if(x&&x.length)v=x[0].images;var A=this.state.variants.filter(function(I){return I}).join(" "+p+" "),B=A?{metaline_1:A}:null,C=this.state.variants,D=u&&u.variant_labels,E=u&&(!D||D.length===0||C.length>0&&C.every(function(I){return I})),F={src:u?u.logo:"",width:o,height:o},G=c("React").createElement(c("MNCommerceButton.react"),{className:"_23qd",label:t,onClick:this.$MNCommerceCheckoutOrderConfigDialog4,use:"default"});G=!c("MessengerEnvironment").messengerui?G:null;var H=u&&D&&D.length>0;return c("React").createElement("div",{className:"_vg4"},c("React").createElement(c("MNCommerceDialogBody.react"),null,c("React").createElement("div",{className:H?"_vg5":""},c("React").createElement(l,{className:"_vg6",logo:F,logoPosition:"left"}),c("React").createElement("div",{className:"_vg7"},c("React").createElement(m,{imageDimension:60,metalines:B,size:"large",thumbURL:v,title:u&&u.name}))),this.$MNCommerceCheckoutOrderConfigDialog5()),c("React").createElement(c("MNCommerceDialogFooter.react"),null,G,c("React").createElement(c("MNCommerceButton.react"),{className:"_23qe",disabled:!E,label:s,onClick:this.$MNCommerceCheckoutOrderConfigDialog6,use:"default"})))};q.prototype.$MNCommerceCheckoutOrderConfigDialog3=function(s){__p&&__p();var t=this.props.checkoutOrderConfig;if(!t)return null;var u=s||this.state.variants,v=t.optionToItems,w=null;for(var x=0;x<u.length;x++){var y=u[x];if(y){var z=v.get(x),A=z&&z.get(y);if(!w)w=A;else w=c("MNCommerceCheckoutOrderConfigUtils").$MNCommerceCheckoutOrderConfigDialog7(w,A)}}return w};q.prototype.$MNCommerceCheckoutOrderConfigDialog8=function(s,t){this.setState(this.$MNCommerceCheckoutOrderConfigDialog9(s,t))};q.prototype.$MNCommerceCheckoutOrderConfigDialog10=function(s,t,u){__p&&__p();var v=this.props.checkoutOrderConfig;if(!v)return null;var w=this.state.variants.slice();if(this.state.variants[s]!==t){w[s]=t;w[u]=null}var x=this.$MNCommerceCheckoutOrderConfigDialog3(w),y=[],z=v.optionToItems,A=v.itemIDToItem;z.get(u).forEach(function(B,C){var D=c("MNCommerceCheckoutOrderConfigUtils").$MNCommerceCheckoutOrderConfigDialog7(B,x?x:new(c("Set"))()),E=false;if(D.size>0)E=c("MNCommerceCheckoutOrderConfigUtils").$MNCommerceCheckoutOrderConfigDialog11(D,A);y.push({label:C,available:E})},this);return y};q.prototype.$MNCommerceCheckoutOrderConfigDialog5=function(){var s=this.props.checkoutOrderConfig;if(!s)return null;var t=i._("Select"),u=s.variant_labels.map(function(v,w){return c("React").createElement("div",{key:w},c("React").createElement("div",{className:"_vg8"},t+" "+v),c("React").createElement("div",{className:"_vg9"},this.$MNCommerceCheckoutOrderConfigDialog12(this.state.variantOptions[w],this.$MNCommerceCheckoutOrderConfigDialog8.bind(this,w),this.state.variants[w])))}.bind(this));return u};q.propTypes={error:n.object,checkoutOrderConfig:c("MNCommerceCheckoutOrderConfigReactShape"),loading:n.bool.isRequired,onContinue:n.func.isRequired,onTryAgain:n.func,shown:n.bool.isRequired,statusType:n.number};q.defaultProps={shown:false};var r=function r(){__p&&__p();this.$MNCommerceCheckoutOrderConfigDialog1=function(s){var t=s||this.props,u=t.checkoutOrderConfig;if(!u)return{};return{variantOptions:u.initialVariantOptions,variants:[]}}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog9=function(s,t){__p&&__p();var u=this.props.checkoutOrderConfig;if(!u)return null;var v=[],w=[],x=u.allVariantOptions[s][t];for(var y=0;y<u.variant_labels.length;y++)if(y===s){v.push(t);w.push(this.state.variantOptions[y])}else{var z=this.state.variants.filter(function(B){return B}),A=null;if(u.variant_labels.length<=2||z.length<2)A=x.get(y);else A=this.$MNCommerceCheckoutOrderConfigDialog10(s,t,y);w.push(A);v.push(this.state.variants[y])}return{variants:v,variantOptions:w}}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog6=function(s){var t=this.props.checkoutOrderConfig;if(!t||this.state.variants.some(function(x){return!x}))return;var u=t.seller_id,v=this.state.variants.join(c("MNCommerceCheckoutOrderConfigUtils").DELIMITER),w=t.variantToItemID.get(v);this.props.onContinue(w,u,this.state.variants.join(" "+p+" "));this.props.onToggle(false)}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog4=function(s){this.props.onToggle(false)}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog12=function(s,t,u){var v=s.map(function(w,x){return c("React").createElement(c("MNCommerceCheckoutButton.react"),{key:x,disabled:w.available===false,use:"default",value:w.label},w.label)});return c("React").createElement(c("XUIRadioButtonGroup.react"),{onValueChange:t,selectedValue:u,selectedUse:"confirm"},v)}};f.exports=q}),null);
__d("XMNCommerceCheckoutOrderConfigController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/commerce/checkout_order_config/",{item_id:{type:"String",required:true},owner_id:{type:"String",required:true}})}),null);
__d("MNCommerceOrderConfigDataManager",["AsyncRequest","MNCommerceOrderConfigActions","XMNCommerceCheckoutOrderConfigController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.prototype.fetchItem=function(i,j){var k=c("XMNCommerceCheckoutOrderConfigController").getURIBuilder().setString("item_id",i).setString("owner_id",j).getURI();new(c("AsyncRequest"))().setURI(k).setHandler(this.$MNCommerceOrderConfigDataManager1).setErrorHandler(this.$MNCommerceOrderConfigDataManager2).send()};h.prototype.$MNCommerceOrderConfigDataManager1=function(i){c("MNCommerceOrderConfigActions").itemLoaded(i.payload)};h.prototype.$MNCommerceOrderConfigDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.item_id;c("MNCommerceOrderConfigActions").itemLoadError(k)};function h(){}f.exports=new h()}),null);
__d("MNCommerceOrderConfigStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits","MNCommerceCheckoutOrderConfigUtils","MNCommerceOrderConfigDataManager"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("MessengerDispatcher"));this.$MNCommerceOrderConfigStore1=new(c("Cache"))()}j.prototype.__onDispatch=function(k){__p&&__p();var l=k.type,m=k.item?k.item.id:k.itemID;switch(l){case c("MNCommerceActionTypes").RETAIL_ITEM.LOADED:var n=k.item;n=c("MNCommerceCheckoutOrderConfigUtils").addVariantOptions(n);this.$MNCommerceOrderConfigStore1.set(m,c("LoadObject").empty().setValue(n),null,c("MNCommerceCacheTimeoutLimits").SUCCESS_TIMEOUT);this.__emitChange();break;case c("MNCommerceActionTypes").RETAIL_ITEM.LOAD_ERROR:this.$MNCommerceOrderConfigStore1.set(m,c("LoadObject").empty().setError(new Error("Unable to load item: "+m)),null,c("MNCommerceCacheTimeoutLimits").ERROR_TIMEOUT);this.__emitChange();break;case c("MNCommerceActionTypes").RETAIL_ITEM.RELOAD:if(m){this.$MNCommerceOrderConfigStore1.set(m,c("LoadObject").loading());c("MNCommerceOrderConfigDataManager").fetchItem(m)}this.__emitChange();break}};j.prototype.getItem=function(k,l){if(k&&!this.$MNCommerceOrderConfigStore1.has(k)){this.$MNCommerceOrderConfigStore1.set(k,c("LoadObject").loading().setValue({itemID:k}));c("MNCommerceOrderConfigDataManager").fetchItem(k,l)}return this.$MNCommerceOrderConfigStore1.get(k)||c("LoadObject").empty()};f.exports=new j()}),null);
__d("MNCommerceCheckoutOrderConfigDialogContainer.react",["BanzaiLogger","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggingConstants","MNCommerceLoggerEvents","MNCommerceCheckoutOrderConfigDialog.react","MNCommerceOrderConfigActions","MNCommerceOrderConfigStore","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").createClass({displayName:"MNCommerceCheckoutOrderConfigDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("MNCommerceOrderConfigStore"))],statics:{calculateState:function i(){__p&&__p();var j=c("MNCommerceDialogStateStore").getState(),k=null,l=null,m=null;if(j){k=j.itemID;l=j.ownerID;m=j.onContinue}var n=c("MNCommerceOrderConfigStore").getItem(k,l);if(!n.isLoading())c("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:n.hasError()?c("MNCommerceLoggerEvents").DIALOG_LOAD_ERROR:c("MNCommerceLoggerEvents").DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:c("MNCommerceLoggingConstants").DIALOG_SURFACE.CHECKOUT_ORDER_CONFIG,item_id:k})});return{shown:!!j,loading:n.isLoading(),itemID:k,checkoutOrderConfig:n.getValue(),onContinue:m,error:n.getError()}}},render:function i(){return c("React").createElement(c("MNCommerceCheckoutOrderConfigDialog.react"),{error:this.state.error,checkoutOrderConfig:this.state.loading?null:this.state.checkoutOrderConfig,loading:this.state.loading,onContinue:this.state.onContinue,onToggle:this._onToggle,onTryAgain:this._onTryAgainClick,shown:this.state.shown})},_onToggle:function i(j){if(!j){c("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:c("MNCommerceLoggerEvents").DIALOG_CLOSED,debug_data:JSON.stringify({dialog_surface:c("MNCommerceLoggingConstants").DIALOG_SURFACE.CHECKOUT_ORDER_CONFIG,item_id:this.state.itemID})});c("MNCommerceDialogStateActions").hideDialog()}},_onTryAgainClick:function i(){c("MNCommerceOrderConfigActions").itemReload(this.state.itemID)}});f.exports=h}),null);
__d("MessengerPlatformGenericItemMercuryAttachment.react",["cx","fbt","invariant","AsyncDialog","AsyncRequest","Banzai","Bootloader","BrowserExtensionsDialog","CurrentUser","MercuryAttachmentViewer","MessengerEnvironment","FBConfirmDialog.react","FBPaymentsCheckoutFlowContainer.react","FBPaymentsSerializableCheckoutConfigurationParser","Image.react","Link.react","LazyComponent.react","LoadOnRender.react","MercuryIDs","MessageShareType","MessagingForwardAttachmentDialog.react","MessengerAdsWebTypedLogger","MessengerForwardAttachmentDialogReact.bs","MessengerPhotoViewCloseLink.react","MessengerPlatformBubbleAspectRatio","MessengerVideoPlayer.react","MNAdsLoggerEventEnum","MNCommerceCallToActionHandlerMap","MNCommerceCallToActionType","MNCommerceCTAProcessor","MNCommerceBubbleImage.react","MNCommerceMessageType","MNCommercePostbackCTADataManager","MNCommercePromotionReactShapes","MNContentSubscriptionMessageUserEngagementTypedLogger","React","MercuryShareAttachmentRenderLocations","SpotlightMessengerSharedMediaViewer.react","SpotlightViewer","SpotlightViewerImage","SpotlightViewport","Tooltip","URI","Vector","idx","joinClasses","nullthrows"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("MessengerForwardAttachmentDialogReact.bs").jsComponent,n=181,o="_4-og",p=c("React").PropTypes,q=function q(t){c("Bootloader").loadModules(["MessengerPreviewDialogReact.bs"],function(u){var v=u.jsComponent;return t(v)},"MessengerPlatformGenericItemMercuryAttachment.react")};function r(t){if(t!==undefined){var u=t.match(/\d+/);if(u!==undefined&&u!==null)return u[0]}return null}k=babelHelpers.inherits(s,c("React").PureComponent);l=k&&k.prototype;function s(){__p&&__p();var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=l.constructor).call.apply(t,[this].concat(w)),this.state={showDialog:false,showShare:false,showPaymentCheckoutDialog:false,showImageFullScreen:false},this.$MessengerPlatformGenericItemMercuryAttachment12=function(){var y,z=this.props,A=z.pageID,B=z.retailItem,C=(y=B)!=null?(y=y.media_blob_attachments)!=null?y[0]:y:y;if(!C)return;var D=C.legacy_attachment_id?C.legacy_attachment_id:C.id,E=C.__typename==="MessageVideo"?new(c("Vector"))(C.original_dimensions.x,C.original_dimensions.y):new(c("Vector"))(C.width,C.height),F=C.playable_url;c("MercuryAttachmentViewer").renderVideo({pageID:parseInt(A,10),videoID:D,videoSize:E,videoURI:F})}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment8=function(y,event){if(event&&event.target instanceof HTMLElement&&event.target.className===o)this.$MessengerPlatformGenericItemMercuryAttachment6()}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment25=function(){this.setState({showShare:true})}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment24=function(){this.setState({showShare:false})}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment10=function(){this.setState({showImageFullScreen:true})}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment6=function(){this.setState({showImageFullScreen:false})}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment23=function(){this.setState({showPaymentCheckoutDialog:true})}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment26=function(){this.setState({showPaymentCheckoutDialog:false})}.bind(this),this.onConfirm=function(){this.setState({showDialog:true})}.bind(this),this.onCancel=function(){this.setState({showDialog:false})}.bind(this),u}s.prototype.render=function(){var t={},u=this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT;if(u&&this.props.width)t.width=this.props.width;if(this.props.isButtonList)return c("React").createElement("div",{className:"_3cn0",style:t},c("React").createElement("div",{className:(u?"_4id8":"")+(!u?" _4ida":"")},this.$MessengerPlatformGenericItemMercuryAttachment1()));return c("React").createElement("div",{className:"_3cn0",style:t},this.$MessengerPlatformGenericItemMercuryAttachment2(),c("React").createElement("div",{className:(u?"_4id8":"")+(!u?" _4ida":"")},this.$MessengerPlatformGenericItemMercuryAttachment3(),this.$MessengerPlatformGenericItemMercuryAttachment1()))};s.prototype.$MessengerPlatformGenericItemMercuryAttachment2=function(){if(this.props.isMediaAttachment)return this.$MessengerPlatformGenericItemMercuryAttachment4();else return this.$MessengerPlatformGenericItemMercuryAttachment5()};s.prototype.$MessengerPlatformGenericItemMercuryAttachment4=function(){__p&&__p();var t,u,v=this.props.retailItem;if(!v)return null;var w=(t=v)!=null?(t=t.media_blob_attachments)!=null?(t=t[0])!=null?t.large_preview:t:t:t;if(w)if(this.state.showImageFullScreen)return c("React").createElement(c("SpotlightViewer"),{className:"_53vs",onHide:this.$MessengerPlatformGenericItemMercuryAttachment6,open:true,ref:"spotlightViewer"},c("React").createElement(c("SpotlightViewport"),{active:false,fadeInNOut:true,media:this.$MessengerPlatformGenericItemMercuryAttachment7(w),onClick:this.$MessengerPlatformGenericItemMercuryAttachment8,ref:"viewport",showLoadingIndicator:true,stageDimensions:this.$MessengerPlatformGenericItemMercuryAttachment9(),useWidth:true}),c("React").createElement(c("MessengerPhotoViewCloseLink.react"),{onClick:this.$MessengerPlatformGenericItemMercuryAttachment6}));else return c("React").createElement(c("Image.react"),{className:"_4idc _urh",src:w.uri,onClick:this.$MessengerPlatformGenericItemMercuryAttachment10});var x=(u=v)!=null?(u=u.media_blob_attachments)!=null?(u=u[0])!=null?u.playable_url:u:u:u;if(x){var y,z=c("nullthrows")((y=v)!=null?(y=y.media_blob_attachments)!=null?y[0]:y:y),A=z.legacy_attachment_id?z.legacy_attachment_id:z.id,B={};B.legacy_attachment_id=A;if(z.__typename==="MessageVideo")B.original_dimensions=this.$MessengerPlatformGenericItemMercuryAttachment11({width:z.original_dimensions.x,height:z.original_dimensions.y});else{B.original_dimensions=this.$MessengerPlatformGenericItemMercuryAttachment11({width:z.width,height:z.height});B.is_share=true}B.start_muted=true;B.no_fullscreen=!c("MessengerEnvironment").messengerui;B.hide_controls_on_finish=true;B.url=z.playable_url;if(this.props.location===c("MercuryShareAttachmentRenderLocations").MESSENGER)return c("React").createElement(c("MessengerVideoPlayer.react"),{attachment:z,videoData:B,isInThread:true,isVisible:true,className:"_ccq _4tsk _3o67"});else return c("React").createElement(c("MessengerVideoPlayer.react"),{attachment:z,videoData:B,isInThread:true,isVisible:true,onClick:this.$MessengerPlatformGenericItemMercuryAttachment12,className:"_n4o _3_om _1wno"})}return null};s.prototype.$MessengerPlatformGenericItemMercuryAttachment11=function(t){__p&&__p();if(this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT){var u=n;if(t.width<=u)return t;else{var v=u/t.width;return{x:Math.round(t.width*v),y:Math.round(t.height*v)}}}var w=window.screen.width>1800,x=w?640:450,y=window.innerWidth*.4,z=t.width,A=t.height;if(z>y){var B=y/z;z=Math.round(z*B);A=Math.round(A*B)}if(A>x){var C=x/A;z=Math.round(z*C);A=Math.round(A*C)}return{x:z,y:A}};s.prototype.$MessengerPlatformGenericItemMercuryAttachment7=function(t){var u=c("SpotlightMessengerSharedMediaViewer.react").getImageDimensionsForStage(new(c("Vector"))(t.width,t.height),this.$MessengerPlatformGenericItemMercuryAttachment9());return c("React").createElement(c("SpotlightViewerImage"),{dimensions:u,ref:"image",src:t.uri})};s.prototype.$MessengerPlatformGenericItemMercuryAttachment9=function(){return new(c("Vector"))(c("Vector").getViewportDimensions().x,c("Vector").getViewportDimensions().y)};s.prototype.$MessengerPlatformGenericItemMercuryAttachment5=function(){__p&&__p();var t,u=this.props,v=u.isSubattachment,w=u.retailItem;if(!w)return null;var x=w.thumb_url?w.thumb_url:(t=w)!=null?(t=t.media_blob_attachments)!=null?(t=t[0])!=null?(t=t.image)!=null?t.uri:t:t:t:t;if(!x)return null;var y=c("React").createElement(c("MNCommerceBubbleImage.react"),{className:(!v?"_3_om":"")+(!v?" _4j39":""),location:this.props.location,source:x,width:this.props.width,isSquare:w.image_aspect_ratio===c("MessengerPlatformBubbleAspectRatio").IMAGE_ASPECT_RATIO_SQUARE}),z=null,A=w.default_action;if(A){var B,C=(B=A)!=null?(B=B.webview_metadata)!=null?B.messenger_extensions:B:B;if(C)z=c("React").createElement(c("Link.react"),{onClick:function(){this.$MessengerPlatformGenericItemMercuryAttachment13();this.$MessengerPlatformGenericItemMercuryAttachment14(A)}.bind(this)},y);else z=c("React").createElement(c("Link.react"),{href:A.action_link,onClick:function(){this.$MessengerPlatformGenericItemMercuryAttachment13()}.bind(this),target:"_blank"},y)}else z=y;var D=c("React").createElement("div",{className:"_3cn2",key:"image"},z);return D};s.prototype.$MessengerPlatformGenericItemMercuryAttachment13=function(){if(this.props.mnMessageType==c("MNCommerceMessageType").CONTENT_SUBSCRIPTION){var t=r(this.props.pageID),u=this.props.retailItem&&this.props.retailItem.id;new(c("MNContentSubscriptionMessageUserEngagementTypedLogger"))().setPageID(t).setMessageID(this.props.messageID).setCommerceItemID(u).setName("mn_platform_msg_click").log();c("Banzai").post("mn_platform_message_click_setsuna",{page_id:t,item_id:u})}};s.prototype.$MessengerPlatformGenericItemMercuryAttachment3=function(){var t=this.props.retailItem;if(!t||!t.name)return null;return c("React").createElement("div",{className:"_3cne"},c("React").createElement("div",{className:"_3cnf"},c("React").createElement("div",{className:"_3cng"},c("React").createElement("div",{className:"_3cnh"},this.props.longestName),c("React").createElement("div",{className:this.props.longestName?"_3cni":""},t.name)),this.$MessengerPlatformGenericItemMercuryAttachment15(),this.$MessengerPlatformGenericItemMercuryAttachment16()))};s.prototype.$MessengerPlatformGenericItemMercuryAttachment17=function(){if(this.props.isSponsored)return null;return c("React").createElement("div",{className:"_3cnj"},c("React").createElement("span",{className:"_3cnk"}),this.$MessengerPlatformGenericItemMercuryAttachment18())};s.prototype.$MessengerPlatformGenericItemMercuryAttachment18=function(){var t=this.props.label;if(t===0)return i._("Promoted");else if(t===1)return i._("Sponsored");return null};s.prototype.$MessengerPlatformGenericItemMercuryAttachment15=function(){var t=this.props.retailItem&&this.props.retailItem.metalines;if(!t)return null;t=Object.keys(t).filter(function(u){return t&&t[u]}).map(function(u,v){var w=t&&t[u];return c("React").createElement("div",{className:"_3cnl",key:u},c("React").createElement("div",{className:"_3cnh"},this.props.longestMetaline),c("React").createElement("div",{className:this.props.longestMetaline?"_3cni":""},w))}.bind(this));return t};s.prototype.$MessengerPlatformGenericItemMercuryAttachment16=function(){__p&&__p();var t=this.props.retailItem&&this.props.retailItem.item_url;if(!this.props.isSponsored&&t){var u=document.createElement("a");u.href=t;var v=u.hostname;if(this.props.retailItem&&this.props.retailItem.source)v=this.props.retailItem.source;return c("React").createElement("div",{className:"_3cnn"},c("React").createElement("a",{href:t,target:"_blank"},v))}else return null};s.prototype.$MessengerPlatformGenericItemMercuryAttachment1=function(){__p&&__p();var t=this.props.retailItem,u=this.props.callToActions,v=this.props.threadID;if(!u||!u.length)return null;var w=function w(E,F){var G=i._("The feature has been disabled.");return y(E,F,G)},x=function x(E,F){var G=i._("To use this feature, use the Messenger app.");return y(E,F,G)},y=function y(E,F,G){return c("React").createElement("div",babelHelpers["extends"]({className:c("joinClasses")(F,"_3cno"),"data-tooltip-alignh":"center","data-tooltip-position":"above",key:E.title},c("Tooltip").propsFor(G)),E.translated_title||E.title)},z=function(E,F){return c("React").createElement("div",{key:E.id},c("React").createElement(c("Link.react"),{className:F,onClick:function(){this.$MessengerPlatformGenericItemMercuryAttachment14(E)}.bind(this)},E.title))}.bind(this);u=u.filter(function(E){return E.action_link}).map(function(E,F){__p&&__p();var G,H="_3cnp"+(F===0&&!t?" _3cnq":"");if(E.is_disabled)return w(E,H);switch(E.action_type){case c("MNCommerceCallToActionType").POSTBACK:var I=function(U){this.onCancel();this.$MessengerPlatformGenericItemMercuryAttachment19(E.id);if(E.is_mutable_by_server)c("MNCommercePostbackCTADataManager").send(E.id,null,null,this.props.messageID);else c("MNCommercePostbackCTADataManager").sendAndConfirm(E.id,E.title,v,null,null,null,[],this.props.messageID)}.bind(this),J=null;if(this.state.showDialog&&E.should_show_user_confirmation)J=c("React").createElement(c("FBConfirmDialog.react"),{title:E.confirmation_title,shown:true,onConfirm:I,onCancel:this.onCancel,confirmButtonText:E.confirmation_continue_label,cancelButtonText:E.confirmation_cancel_label,content:E.confirmation_message});var K=E.should_show_user_confirmation?this.onConfirm:I;return c("React").createElement("div",{key:F},c("React").createElement(c("Link.react"),{className:H,onClick:K},E.translated_title||E.title),J);case c("MNCommerceCallToActionType").OPEN_URL:return c("MNCommerceCallToActionHandlerMap").getHandler(E.action_link).setFallbackOnClick(this.$MessengerPlatformGenericItemMercuryAttachment20.bind(this,E.id)).setThreadID(v).renderForWebLink(E,H);case c("MNCommerceCallToActionType").OPEN_CANCEL_RIDE_MUTATION:return x(E,H);case c("MNCommerceCallToActionType").OPEN_NATIVE:var L=(G=E)!=null?(G=G.webview_metadata)!=null?G.messenger_extensions:G:G;if(L)return z(E,H);return c("MNCommerceCallToActionHandlerMap").getHandler(E.action_link).setFallbackOnClick(this.$MessengerPlatformGenericItemMercuryAttachment20.bind(this,E.id)).setThreadID(v).renderForNativeLink(E,H);case c("MNCommerceCallToActionType").PAYMENT:var M="_idv",N="_idw";return c("React").createElement("div",{key:F},this.$MessengerPlatformGenericItemMercuryAttachment21(E),c("React").createElement(c("Link.react"),{className:H,onClick:function(){this.$MessengerPlatformGenericItemMercuryAttachment22(E);this.$MessengerPlatformGenericItemMercuryAttachment23()}.bind(this)},c("React").createElement("div",{className:M},E.payment_metadata.total_price),c("React").createElement("div",{className:N},E.translated_title||E.title)));case c("MNCommerceCallToActionType").SHARE:var O=c("MessengerEnvironment").messengerui?m:c("MessagingForwardAttachmentDialog.react"),P=i._("Share in Separate messages"),Q=c("React").createElement(O,{attachmentID:E.id,messageID:this.props.messageID,onClose:this.$MessengerPlatformGenericItemMercuryAttachment24,shown:this.state.showShare,title:P,shareType:c("MessageShareType").PLATFORM_SHARE_CTA});return c("React").createElement("div",{key:F},c("React").createElement(c("Link.react"),{className:H,onClick:this.$MessengerPlatformGenericItemMercuryAttachment25},E.title),Q);case c("MNCommerceCallToActionType").EXTENSIBLE_SHARE:var R=i._("Share in Separate messages");return c("React").createElement("div",{key:F},c("React").createElement(c("Link.react"),{className:H,onClick:this.$MessengerPlatformGenericItemMercuryAttachment25},E.title),c("React").createElement(c("LoadOnRender.react"),{key:"dialog",component:c("React").createElement(c("LazyComponent.react"),{attachmentID:E.id,image_url:E.action_objects[0].image_url,messageID:this.props.messageID,onClose:this.$MessengerPlatformGenericItemMercuryAttachment24,pageID:this.props.pageID,preview_title:E.action_objects[0].preview_title,preview_subtitle:E.action_objects[0].preview_subtitle,shown:this.state.showShare,target_display:E.action_objects[0].target_display,title:R,threadID:this.props.threadID}),loader:q,placeholder:c("React").createElement("span",null)}));case c("MNCommerceCallToActionType").ACCOUNT_LINK:var S=function(U){c("MNCommerceCTAProcessor").process(E.id,this.props.messageID)}.bind(this);return c("React").createElement(c("Link.react"),{className:H,key:F,onClick:S},E.translated_title||E.title);case c("MNCommerceCallToActionType").FACEBOOK_REPORT_A_PROBLEM:var T=function T(U){c("AsyncDialog").send(new(c("AsyncRequest"))("/ajax/bugs/report"))};return c("React").createElement(c("Link.react"),{className:H,key:F,onClick:T},E.translated_title||E.title);default:return x(E,H)}}.bind(this));var A=this.props.longestCTAs,B=[];if(A&&A>u.length){for(var C=0;C<A-u.length;C++)B.push(c("React").createElement("div",{className:"_3cnh _3cnp",key:"placeholder"+C},"CTA placeHolder"));var D=B.concat(u);return c("React").createElement("div",{className:"_3cnr"},D)}return c("React").createElement("div",{className:"_3cnr"},u)};s.prototype.$MessengerPlatformGenericItemMercuryAttachment20=function(t,event){this.$MessengerPlatformGenericItemMercuryAttachment19(t)};s.prototype.$MessengerPlatformGenericItemMercuryAttachment19=function(t){if(this.props.isSponsored)new(c("MessengerAdsWebTypedLogger"))().setActionID(t).setEvent(c("MNAdsLoggerEventEnum").LINK_CLICK_CTA).setIsSponsored(this.props.isSponsored).setItemID(this.props.retailItem&&this.props.retailItem.id).setMessageID(this.props.messageID).setPageID(this.props.pageID).log()};s.prototype.$MessengerPlatformGenericItemMercuryAttachment21=function(t){if(this.state.showPaymentCheckoutDialog){var u=c("FBPaymentsSerializableCheckoutConfigurationParser").parse(this.$MessengerPlatformGenericItemMercuryAttachment27(t.payment_metadata.payment_module_config)),v=u.contentConfiguration.confirmationConfiguration||{};u.contentConfiguration.confirmationConfiguration=v;return c("React").createElement(c("FBPaymentsCheckoutFlowContainer.react"),{configuration:u,onCheckoutClosed:this.$MessengerPlatformGenericItemMercuryAttachment26,onConfirmationClosed:this.$MessengerPlatformGenericItemMercuryAttachment26})}return null};s.prototype.$MessengerPlatformGenericItemMercuryAttachment27=function(t){var u="";try{u=JSON.parse(t)}catch(v){return t}if(u.checkout_configuration&&u.checkout_configuration.payment_info&&u.checkout_configuration.payment_info.extra_data)u.checkout_configuration.payment_info.extra_data.message_id=this.props.messageID;return JSON.stringify(u)};s.prototype.$MessengerPlatformGenericItemMercuryAttachment14=function(t){c("BrowserExtensionsDialog").show(new(c("URI"))(t.action_link),c("MercuryIDs").getThreadFBIDFromThreadID(this.props.pageID),c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),c("CurrentUser").getID());this.$MessengerPlatformGenericItemMercuryAttachment22(t)};s.prototype.$MessengerPlatformGenericItemMercuryAttachment22=function(t){c("MNCommerceCTAProcessor").postHandle(t.id,this.props.messageID)};s.propTypes={callToActions:c("MNCommercePromotionReactShapes").CallToActions,isMediaAttachment:p.bool,isSponsored:p.bool,isSubattachment:p.bool,label:p.number,logo:p.object,location:p.oneOf(c("MercuryShareAttachmentRenderLocations").getValues()),longestCTAs:p.number,longestMetaline:p.string,longestName:p.string,messageID:p.string,mnMessageType:p.string,pageID:p.string,retailItem:c("MNCommercePromotionReactShapes").RetailItem,url:p.string,width:p.number,threadID:p.string};f.exports=s}),null);
__d("P2PAddressStore",["P2PActionConstants","EventEmitter","ImmutableObject","P2PAPI","P2PDispatcher","immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").List,k=j(),l=false,m=false,n={},o=void 0,p=null,q=false;function r(u,v){if(u)n[u]=new(c("ImmutableObject"))(v)}function s(u,v){p=v;if(u)n[u]={error:v}}h=babelHelpers.inherits(t,c("EventEmitter"));i=h&&h.prototype;function t(){i.constructor.call(this);l=false;m=false;k=j();n={};o=c("P2PDispatcher").register(this.onEventDispatched.bind(this))}t.prototype.onEventDispatched=function(u){__p&&__p();var v=u.data,w=u.type;switch(w){case c("P2PActionConstants").ADDRESS_SAVING:this.handleAddressSaving(v);this.emit("change");break;case c("P2PActionConstants").ADDRESSES_UPDATED:this.handleAddressesUpdated(v);this.emit("change");break;case c("P2PActionConstants").ADDRESS_ADDED:this.handleAddressAdded(v);this.emit("change");break;case c("P2PActionConstants").ADDRESS_ADDED_ERROR:this.handleAddressAddedError(v);this.emit("change");break;case c("P2PActionConstants").ADDRESS_ADDED_ERROR_CLEARED:this.handleAddressAddedErrorCleared();this.emit("change");break}};t.prototype.getAsyncRequestState=function(){return n};t.prototype.isAddressesFetchComplete=function(){return l};t.prototype.handleAddressSaving=function(){q=true;p=null};t.prototype.handleAddressesUpdated=function(u){l=true;u=u.map(function(v){return new(c("ImmutableObject"))(v)});k=j(u)};t.prototype.handleAddressAdded=function(u){q=false;r(u.requestID,u);if(!this.getAddressByID(u.id))k=k.push(new(c("ImmutableObject"))(u))};t.prototype.handleAddressAddedError=function(u){q=false;s(u.requestID,u.errors)};t.prototype.handleAddressAddedErrorCleared=function(){p=null};t.prototype.getAll=function(u){if(!m){m=true;c("P2PAPI").getAddresses()}if(u)return k.filter(function(v){return v.isVerified});return k};t.prototype.getAddressByID=function(u){return k.find(function(v){return v.id===u})};t.prototype.getDispatchToken=function(){return o};t.prototype.getSaveErrors=function(){return p};t.prototype.isSaving=function(){return q};f.exports=new t()}),null);
__d("P2PAddressShape",["React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=h.shape({label:h.string,care_of:h.string,city:h.string,id:h.string,state:h.string,street1:h.string,street2:h.string,zip:h.string});f.exports=i}),null);
__d("P2PAddressDetails.react",["P2PAddressShape","P2PText.react","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){var k=this.props.address,l=[k.city,k.state],m=void 0,n=void 0,o=void 0,p={display:"block",type:"primary"},q=k.zip?" "+k.zip:"",r=k.country?" "+k.country:"";l=l.join(", ")+q+r;if(k.streeet2)m=c("React").createElement(c("P2PText.react"),p,k.street2);if(k.label)n=c("React").createElement(c("P2PText.react"),p,k.label);if(k.care_of)o=c("React").createElement(c("P2PText.react"),p,k.care_of);return c("React").createElement("div",null,n,o,c("React").createElement(c("P2PText.react"),p,k.street1),m,c("React").createElement(c("P2PText.react"),p,l))};function j(){h.apply(this,arguments)}j.propTypes={address:c("P2PAddressShape").isRequired};f.exports=j}),null);
__d("P2PAddressForm.react",["cx","fbt","FBPaymentsAddressLabelFormField_DEPRECATED.react","FBPaymentsForm_DEPRECATED.react","FBPaymentsFormField_DEPRECATED.react","FBPaymentsFormFieldUtils_DEPRECATED","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={formData:{},isValid:false},this.handleValidation=function(s,t){this.setState({formData:t,isValid:s});this.props.onValidation(s,t)}.bind(this),o}m.prototype.render=function(){var n=!!(this.props.prefilledFormData&&this.props.prefilledFormData.care_of);return c("React").createElement(c("FBPaymentsForm_DEPRECATED.react"),{errorTitle:i._("Problem Saving Address"),prefilledFormData:this.props.prefilledFormData,onValidation:this.handleValidation,saveErrors:this.props.saveErrors},c("React").createElement(c("FBPaymentsAddressLabelFormField_DEPRECATED.react"),{className:"_3-96",name:"label",ignoreStyling:true,required:true}),c("React").createElement(c("FBPaymentsFormField_DEPRECATED.react"),{name:"care_of",initiallyFocused:!n,placeholder:i._("Name"),required:true,width:100}),c("React").createElement(c("FBPaymentsFormField_DEPRECATED.react"),{name:"street1",initiallyFocused:n,placeholder:i._("Street"),required:true,width:100}),c("React").createElement(c("FBPaymentsFormField_DEPRECATED.react"),{name:"street2",placeholder:i._("Street 2"),width:100}),c("React").createElement(c("FBPaymentsFormField_DEPRECATED.react"),{name:"city",placeholder:i._("City"),required:true,width:50}),c("React").createElement(c("FBPaymentsFormField_DEPRECATED.react"),{formatValue:function o(p){p=c("FBPaymentsFormFieldUtils_DEPRECATED").stripNonAlpha(p);return p.toUpperCase()},limit:2,name:"state",placeholder:i._("State"),required:true,width:25}),c("React").createElement(c("FBPaymentsFormField_DEPRECATED.react"),{formatValue:c("FBPaymentsFormFieldUtils_DEPRECATED").stripNonDigits,limit:5,name:"zip",placeholder:i._("ZIP"),required:true,width:25}))};m.propTypes={onValidation:l.func.isRequired,prefilledFormData:l.object,saveErrors:l.object};m.defaultProps={editMode:false,prefilledFormData:{},saveErrors:null};f.exports=m}),null);
__d("P2PCheckoutConfigSection.react",["cx","fbt","LeftRight.react","Link.react","React","emptyFunction"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.renderChangeLink=function(){if(this.props.showEditOptions||!this.props.hasOptions)return null;return c("React").createElement(c("Link.react"),{className:"_nb2",href:"#",onClick:this.props.onChangeClicked},i._("Change"))}.bind(this),this.renderContent=function(){var s=this.props,t=void 0,u=void 0;if(s.showEditOptions)t=this.renderSelector();else if(s.hasOptions)t=this.renderCurrentItem();if(s.showForm)u=this.renderForm();return c("React").createElement("div",null,t,u)}.bind(this),this.renderForm=function(){var s=void 0;if(!this.props.renderFormComponent)return null;if(this.props.renderFormFooterMessage)s=c("React").createElement("div",{className:"_nb4"},this.props.renderFormFooterMessage());return c("React").createElement("div",{className:"_nb3",key:"form"},this.props.renderFormComponent(),s)}.bind(this),this.renderSelector=function(){return c("React").createElement("div",{className:"_nb5",key:"selector"},this.props.renderSelectorComponent())}.bind(this),this.renderCurrentItem=function(){if(!this.props.renderSelectedRow)return null;return c("React").createElement("div",{className:"_nb6",key:"currentItem"},this.props.renderSelectedRow())}.bind(this),o}m.prototype.render=function(){return c("React").createElement("div",{className:"_nb7"},c("React").createElement(c("LeftRight.react"),{className:"_nb8"},c("React").createElement("div",{className:"_nb9"},this.props.title),this.renderChangeLink()),c("React").createElement("div",{className:"_nba"},this.renderContent()))};m.propTypes={onChangeClicked:l.func,hasOptions:l.bool,showEditOptions:l.bool,showForm:l.bool,renderFormComponent:l.func,renderFormFooterMessage:l.func,renderSelectedRow:l.func,renderSelectorComponent:l.func.isRequired,title:l.string.isRequired};m.defaultProps={onChangeClicked:c("emptyFunction"),renderFormFooterMessage:c("emptyFunction"),renderFormComponent:c("emptyFunction"),renderSelectedRow:c("emptyFunction")};f.exports=m}),null);
__d("P2PChooseAddressForm.react",["cx","fbt","immutable","P2PAddressShape","P2PAddressDetails.react","P2PText.react","React","XUIRadioList.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("immutable").List,m=c("XUIRadioList.react").Item,n=c("React").PropTypes,o="add_address";j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={selectedValue:this.props.selectedAddress.id},this.getselectedAddress=function(){return this.props.addresses.filter(function(v){return v.id===this.state.selectedValue}.bind(this)).first()}.bind(this),this.handleChange=function(v){__p&&__p();var w=void 0;if(v===o){this.props.onNewAddressOptionSelected();this.setState({selectedValue:v})}else{w=this.props.addresses.filter(function(w){return w.id===v}).first();this.setState({selectedValue:w.id});this.props.onChange(w)}}.bind(this),this.renderAddressItem=function(v){return c("React").createElement(m,{className:"_54sy",key:v.id,value:v.id},c("React").createElement(c("P2PAddressDetails.react"),{address:v}))},this.renderAddNewAddressItem=function(){return c("React").createElement(m,{className:"_54sy",key:o,value:o},c("React").createElement(c("P2PText.react"),{type:"primary"},i._("Add New Address")))},this.getRadioListItems=function(){var v=this.props.addresses,w=v.map(this.renderAddressItem).concat(this.renderAddNewAddressItem());return w}.bind(this),r}p.prototype.render=function(){return c("React").createElement(c("XUIRadioList.react"),{className:"_1ck2",onValueChange:this.handleChange,selectedValue:this.state.selectedValue},this.getRadioListItems())};p.propTypes={addresses:n.instanceOf(l),onChange:n.func.isRequired,onNewAddressOptionSelected:n.func.isRequired,selectedAddress:c("P2PAddressShape")};f.exports=p}),null);
__d("P2PAddressConfigSection.react",["fbt","MessengerEnvironment","FBPaymentsAddressForm_DEPRECATED.react","P2PAddressDetails.react","P2PAddressForm.react","P2PAddressShape","P2PCheckoutConfigSection.react","P2PChooseAddressForm.react","P2PText.react","React","immutable"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l="P2PAddressConfigSection_learnMoreSentenceID";i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.renderFormComponent=function(){var s=this.props;if(s.acceptInternational)return c("React").createElement(c("FBPaymentsAddressForm_DEPRECATED.react"),{onValidation:s.onValidation,prefilledFormData:{care_of:this.props.buyerName},saveErrors:s.saveErrors});return c("React").createElement(c("P2PAddressForm.react"),{onValidation:s.onValidation,prefilledFormData:{care_of:this.props.buyerName},saveErrors:s.saveErrors})}.bind(this),this.renderSelectedRow=function(){var s=this.props.selectedAddress;if(!s)return null;return c("React").createElement(c("P2PAddressDetails.react"),{address:s})}.bind(this),this.renderSelectorComponent=function(){var s=this.props;return c("React").createElement(c("P2PChooseAddressForm.react"),{addresses:s.addresses,onChange:this.props.onAddressSelected,onNewAddressOptionSelected:this.props.onNewAddressSelected,selectedAddress:s.selectedAddress})}.bind(this),this.renderFormFooterMessage=function(){return c("React").createElement(c("P2PText.react"),{id:l,type:"secondary"},h._("Your shipping address will be stored securely for future purchases on Facebook."))},this.getTitle=function(){if(c("MessengerEnvironment").messengerui)return h._("Shipping Address");return h._("SHIPPING ADDRESS")},o}m.prototype.render=function(){var n=this.props;return c("React").createElement(c("P2PCheckoutConfigSection.react"),{hasOptions:n.addresses.count()!==0,showEditOptions:n.showEditOptions,showForm:n.showForm,onChangeClicked:n.onChangeClicked,renderFormComponent:this.renderFormComponent,renderFormFooterMessage:this.renderFormFooterMessage,renderSelectedRow:this.renderSelectedRow,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()})};m.propTypes={acceptInternational:k.bool,addresses:k.instanceOf(c("immutable").List).isRequired,buyerName:k.string,showEditOptions:k.bool,showForm:k.bool,onAddressSelected:k.func.isRequired,onChangeClicked:k.func.isRequired,onNewAddressSelected:k.func.isRequired,onValidation:k.func.isRequired,selectedAddress:c("P2PAddressShape"),saveErrors:k.object};f.exports=m}),null);
__d("P2PCreditCardConfigSection.react",["fbt","MessengerEnvironment","Link.react","MessengerPaymentProductType","P2PChooseCreditCardForm.react","P2PCreditCard","P2PCreditCardDetails.react","P2PCreditCardForm.react","P2PCheckoutConfigSection.react","P2PLinkConstants","P2PText.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l="P2PCreditCardConfigSection_learnMoreSentenceID";i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.renderFormComponent=function(){var s=this.props;return c("React").createElement(c("P2PCreditCardForm.react"),{onValidation:s.onValidation,saveErrors:s.saveErrors,productType:c("MessengerPaymentProductType").MESSENGER_COMMERCE})}.bind(this),this.renderSelectedRow=function(){var s=this.props.selectedCreditCard;if(!s)return null;return c("React").createElement(c("P2PCreditCardDetails.react"),{creditCard:s})}.bind(this),this.renderSelectorComponent=function(){var s=this.props;return c("React").createElement(c("P2PChooseCreditCardForm.react"),{addCardOptionText:h._("Add New Card"),creditCards:s.creditCards,onAddDebitCardOptionSelected:this.props.onNewCreditCardSelected,onChange:this.props.onCreditCardSelected,selectedCard:s.selectedCreditCard,showAddDebitCardOption:true})}.bind(this),this.renderFormFooterMessage=function(){return c("React").createElement(c("P2PText.react"),{id:l,type:"secondary"},h._("Your payment info is stored securely."),c("React").createElement("div",null,c("React").createElement(c("Link.react"),{"aria-describedby":l,href:c("P2PLinkConstants").addDebitCardHelpURI,target:"_blank"},h._("Learn More"))))},this.getTitle=function(){if(c("MessengerEnvironment").messengerui)return h._("Payment Information");return h._("PAYMENT INFORMATION")},o}m.prototype.render=function(){var n=this.props;return c("React").createElement(c("P2PCheckoutConfigSection.react"),{hasOptions:n.creditCards.length!==0,showEditOptions:n.showEditOptions,showForm:n.showForm,onChangeClicked:n.onChangeClicked,renderFormComponent:this.renderFormComponent,renderFormFooterMessage:this.renderFormFooterMessage,renderSelectedRow:this.renderSelectedRow,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()})};m.propTypes={creditCards:k.arrayOf(k.instanceOf(c("P2PCreditCard"))).isRequired,showEditOptions:k.bool,showForm:k.bool,onCreditCardSelected:k.func.isRequired,onChangeClicked:k.func.isRequired,onNewCreditCardSelected:k.func.isRequired,onValidation:k.func.isRequired,selectedCreditCard:k.instanceOf(c("P2PCreditCard")),saveErrors:k.object};f.exports=m}),null);
__d("P2PPaymentMethodConfigSection.react",["fbt","MessengerEnvironment","P2PCheckoutConfigSection.react","P2PCreditCardDetails.react","P2PText.react","FBPaymentsChoosePaymentMethodForm_DEPRECATED.react","FBPaymentsPaymentMethodShape_DEPRECATED","FBPaymentsMethodType","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderFormComponent=function(){return c("React").createElement(c("FBPaymentsChoosePaymentMethodForm_DEPRECATED.react"),{onPaymentMethodConfigured:this.props.onPaymentMethodConfigured,onPaymentMethodSelected:this.props.onPaymentMethodSelected,paymentMethods:this.props.paymentMethods})}.bind(this),this.renderSelectedRow=function(){__p&&__p();var r=this.props.confirmedPaymentMethod;if(!r)return null;switch(r.type){case c("FBPaymentsMethodType").GENERIC_CARD:return c("React").createElement(c("P2PCreditCardDetails.react"),{creditCard:r.creditCard});case c("FBPaymentsMethodType").MANUAL_TRANSFER:return c("React").createElement(c("P2PText.react"),{type:"primary"},h._("Transfer at ATM or Bank"));case c("FBPaymentsMethodType").NET_BANKING:var s=r.bank.name;return c("React").createElement(c("P2PText.react"),{type:"primary"},h._("{bank_name} (Online Banking)",[h.param("bank_name",s)]));case c("FBPaymentsMethodType").PAY_OVER_COUNTER:return c("React").createElement(c("P2PText.react"),{type:"primary"},h._("Payment at Store Counter"));default:return c("React").createElement("div",null,r?r.toString():"")}}.bind(this),this.renderSelectorComponent=function(){return this.renderFormComponent()}.bind(this),n}l.prototype.getTitle=function(){if(c("MessengerEnvironment").messengerui)return h._("Payment Method");return h._("PAYMENT METHOD")};l.prototype.render=function(){var m=this.props;return c("React").createElement(c("P2PCheckoutConfigSection.react"),{hasOptions:!!m.confirmedPaymentMethod,showEditOptions:m.showEditOptions,showForm:m.showForm,onChangeClicked:m.onChangeClicked,renderFormComponent:this.renderFormComponent,renderSelectedRow:this.renderSelectedRow,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()})};l.propTypes={confirmedPaymentMethod:k.shape(c("FBPaymentsPaymentMethodShape_DEPRECATED")),onChangeClicked:k.func.isRequired,onPaymentMethodConfigured:k.func.isRequired,onPaymentMethodSelected:k.func.isRequired,paymentMethods:k.arrayOf(c("FBPaymentsPaymentMethodShape_DEPRECATED")).isRequired,showEditOptions:k.bool,showForm:k.bool};f.exports=l}),null);
__d("P2PChooseShippingOptionForm.react",["cx","P2PPlatformContextShippingOptionShape","React","P2PText.react","XUIRadioList.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("XUIRadioList.react").Item,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={selectedValue:this.props.selectedShippingOption.id},this.handleChange=function(s){var t=this.props.shippingOptions.filter(function(t){return t.id===s})[0];this.setState({selectedValue:t.id});this.props.onChange(t)}.bind(this),this.renderShippingOptionItem=function(s){return c("React").createElement(k,{className:"_2i8o",key:s.id,value:s.id},c("React").createElement(c("P2PText.react"),{type:"primary"},s.title))},this.getRadioListItems=function(){return this.props.shippingOptions.map(this.renderShippingOptionItem)}.bind(this),o}m.prototype.render=function(){return c("React").createElement(c("XUIRadioList.react"),{className:"_2i8p",onValueChange:this.handleChange,selectedValue:this.state.selectedValue},this.getRadioListItems())};m.propTypes={shippingOptions:l.arrayOf(c("P2PPlatformContextShippingOptionShape")).isRequired,onChange:l.func.isRequired,selectedShippingOption:c("P2PPlatformContextShippingOptionShape")};f.exports=m}),null);
__d("P2PShippingOptionsConfigSection.react",["fbt","MessengerEnvironment","P2PChooseShippingOptionForm.react","P2PPlatformContextShippingOptionShape","P2PCheckoutConfigSection.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderSelectorComponent=function(){var r=this.props;return c("React").createElement(c("P2PChooseShippingOptionForm.react"),{shippingOptions:r.shippingOptions,onChange:this.props.onShippingOptionSelected,selectedShippingOption:r.selectedShippingOption})}.bind(this),this.getTitle=function(){if(c("MessengerEnvironment").messengerui)return h._("Shipping Options");return h._("SHIPPING OPTIONS")},n}l.prototype.render=function(){return c("React").createElement(c("P2PCheckoutConfigSection.react"),{hasOptions:true,showEditOptions:true,showForm:false,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()})};l.propTypes={onShippingOptionSelected:k.func.isRequired,selectedShippingOption:c("P2PPlatformContextShippingOptionShape"),shippingOptions:k.arrayOf(c("P2PPlatformContextShippingOptionShape"))};f.exports=l}),null);
__d("P2PCheckoutDialog.react",["cx","csx","fbt","CommerceContactMerchantManualPaymentSection.react","MessengerEnvironment","CSS","DOMQuery","FBPaymentsLegalDisclaimer_DEPRECATED.react","FBPaymentsMethodType","P2PActions","P2PAddressConfigSection.react","P2PAddressShape","P2PButton.react","P2PCheckoutPriceDetails.react","P2PCreditCardConfigSection.react","P2PCreditCard","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLoadingMask.react","P2PPaymentMethodConfigSection.react","P2PPlatformContextShape","P2PPlatformContextShippingOptionShape","P2PPlatformProductItemDetails.react","P2PShippingOptionsConfigSection.react","React","immutable"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("React").PropTypes,l=c("React").createClass({displayName:"P2PCheckoutDialog",propTypes:{acceptInternationalAddresses:k.bool,addresses:k.instanceOf(c("immutable").List).isRequired,addressFormData:k.object,addressFormValid:k.bool,addressSaveErrors:k.object,asyncPaymentDetails:k.object,buyer:k.object,configuredPaymentMethod:k.object,confirmedPaymentMethod:k.object,creditCardFormData:k.object,creditCardFormValid:k.bool,creditCardSaveErrors:k.object,creditCards:k.arrayOf(k.instanceOf(c("P2PCreditCard"))).isRequired,customCheckoutDetails:k.node,editingPaymentMethod:k.bool,paymentMethods:k.array,paymentProductType:k.string,initialDataLoaded:k.bool,onClose:k.func.isRequired,onCompleteManualPayment:k.func.isRequired,onConfirmSelectedPaymentMethod:k.func.isRequired,onPlaceOrder:k.func.isRequired,onSaveAddress:k.func.isRequired,onSaveCreditCard:k.func.isRequired,onSetAddress:k.func.isRequired,orderID:k.string,platformContext:c("P2PPlatformContextShape"),receiptAttached:k.bool,saving:k.bool,selectedAddress:c("P2PAddressShape"),selectedCreditCard:k.instanceOf(c("P2PCreditCard")),selectedPaymentMethod:k.object,selectedShippingOption:c("P2PPlatformContextShippingOptionShape"),showAddressEditOptions:k.bool,showAsyncPaymentDetails:k.bool,showCreditCardEditOptions:k.bool,showPaymentMethodEditOptions:k.bool,showAddressForm:k.bool,showCreditCardForm:k.bool,showPaymentMethodForm:k.bool,showTaxField:k.bool,shippingOptions:k.arrayOf(c("P2PPlatformContextShippingOptionShape")),usePaymentMethods:k.bool},_toggledCreditCard:null,_toggledAddress:null,handleToggle:function m(n){if(!n)this.props.onClose();this.cleanup()},handleCloseDialog:function m(){this.props.onClose();this.cleanup()},componentDidMount:function m(){setTimeout(function(){if(this.isMounted()){var n=c("DOMQuery").find(document,"div._ugr");if(n)c("CSS").addClass(n,"_225w")}}.bind(this),200)},getProductFromPlatformContext:function m(){var n=this.props.platformContext;return n?n.product:null},renderPriceDetails:function m(){__p&&__p();var n=this.getProductFromPlatformContext(),o=this.props.selectedShippingOption,p=void 0,q=void 0,r=void 0,s=void 0;if(n){p=n.formattedAmount;s=p}if(o){p=o.formattedSubtotal;r=o.formattedShippingPrice;q=o.formattedTax;s=o.formattedTotal}return c("React").createElement(c("P2PCheckoutPriceDetails.react"),{shipping:r,subtotal:p,tax:q,total:s,showShippingField:!this.props.showAsyncPaymentDetails,showSubtotalField:!this.props.showAsyncPaymentDetails,showTaxField:this.props.showTaxField&&!this.props.showAsyncPaymentDetails})},renderItemSection:function m(){var n=this.getProductFromPlatformContext();if(!n)return null;var o=void 0;if(this.props.customCheckoutDetails)o=c("React").createElement("div",{className:"_145w"},this.props.customCheckoutDetails);return c("React").createElement("div",null,c("React").createElement("div",{className:"_4oyy"},c("React").createElement(c("P2PPlatformProductItemDetails.react"),{configSelections:this.props.configSelections,item:n,size:"medium"})),o,c("React").createElement("div",{className:"_4oz5"},this.renderPriceDetails()))},renderRightPanel:function m(){var n=!this.props.showAsyncPaymentDetails;return c("React").createElement("div",{className:(n?"_4oz9":"")+(!n?" _334":"")},n?this.renderConfigSection():this.renderAsyncPaymentDetailsSection(),this.renderDialogFooter())},renderConfigSection:function m(){__p&&__p();if(!this.props.initialDataLoaded)return null;var n=void 0,o=c("React").createElement("div",{className:"_4gf2",key:"addressConigSection"},c("React").createElement(c("P2PAddressConfigSection.react"),{acceptInternational:this.props.acceptInternationalAddresses,addresses:this.props.addresses,buyerName:this.props.buyer&&this.props.buyer.name,onAddressSelected:this.handleAddressSelected,onChangeClicked:this.handleAddressChangeClicked,onNewAddressSelected:this.handleNewAddressSelected,onValidation:this.handleAddressFormValidation,saveErrors:this.props.addressSaveErrors,selectedAddress:this.props.selectedAddress,showEditOptions:this.props.showAddressEditOptions,showForm:this.props.showAddressForm})),p=this.props.usePaymentMethods?c("React").createElement("div",{className:"_4gf2",key:"paymentMethodConfigSection"},c("React").createElement(c("P2PPaymentMethodConfigSection.react"),{confirmedPaymentMethod:this.props.confirmedPaymentMethod,onPaymentMethodConfigured:this.handlePaymentMethodConfigured,onPaymentMethodSelected:this.handlePaymentMethodSelected,onChangeClicked:this.handlePaymentMethodChangeClicked,paymentMethods:this.props.paymentMethods,showEditOptions:this.props.showPaymentMethodEditOptions,showForm:this.props.showPaymentMethodForm})):c("React").createElement("div",{className:"_4gf2",key:"creditCardConfigSection"},c("React").createElement(c("P2PCreditCardConfigSection.react"),{creditCards:this.props.creditCards,onCreditCardSelected:this.handleCreditCardSelected,onChangeClicked:this.handleCreditCardChangeClicked,onNewCreditCardSelected:this.handleNewCreditCardSelected,onValidation:this.handleCreditCardFormValidation,saveErrors:this.props.creditCardSaveErrors,selectedCreditCard:this.props.selectedCreditCard,showEditOptions:this.props.showCreditCardEditOptions,showForm:this.props.showCreditCardForm}));if(this.props.shippingOptions&&this.props.shippingOptions.length&&this.props.selectedShippingOption)n=c("React").createElement("div",{className:"_4gf2",key:"shippingConfigSection"},c("React").createElement(c("P2PShippingOptionsConfigSection.react"),{onShippingOptionSelected:this.handleShippingOptionSelected,shippingOptions:this.props.shippingOptions,selectedShippingOption:this.props.selectedShippingOption}));if(this.props.showAddressEditOptions||this.props.showAddressForm){p=null;n=null}if(this.props.showPaymentMethodEditOptions||this.props.showCreditCardEditOptions){o=null;n=null}return c("React").createElement("div",null,o,n,p)},renderAsyncPaymentDetailsSection:function m(){var n=this.props.asyncPaymentDetails,o=this.props.orderID;if(!n||!o)return null;return c("React").createElement(c("CommerceContactMerchantManualPaymentSection.react"),{paymentOptionDetails:n,invoiceID:o,onReceiptUpdated:function p(q,r){c("P2PActions").checkoutManualPaymentReceiptUpdated({receiptFbid:q})}})},renderDialogFooter:function m(){__p&&__p();if(!this.props.initialDataLoaded)return null;var n=void 0,o=void 0,p=j._("Cancel"),q=j._("Continue"),r=void 0;if(c("MessengerEnvironment").messengerui)r=c("React").createElement(c("P2PButton.react"),{label:p,onClick:this.props.onClose});var s=this.props.editingPaymentMethod;if(s&&this.props.selectedPaymentMethod)switch(this.props.selectedPaymentMethod.type){case c("FBPaymentsMethodType").NEW_CREDIT_CARD:q=j._("Add Card");break;case c("FBPaymentsMethodType").NET_BANKING:q=j._("Confirm Bank");break}var t=this.props.showCreditCardEditOptions||s||this.props.showAddressEditOptions||this.props.showAddressForm;if(t)n=c("React").createElement("div",null,c("React").createElement(c("P2PButton.react"),{label:p,onClick:this.handleEditCancelClicked}),c("React").createElement(c("P2PButton.react"),{disabled:this.isSaveDisabled(),label:q,onClick:this.handleContinueClicked,use:"confirm"}));else if(this.props.showAsyncPaymentDetails)n=c("React").createElement("div",null,c("React").createElement(c("P2PButton.react"),{disabled:!this.props.receiptAttached,label:j._("Complete Purchase"),onClick:this.handleCompleteManualPaymentClicked,use:"confirm"}));else{o=this.getLegalDisclaimerSection();n=c("React").createElement("div",{className:"_35cu"},r,c("React").createElement(c("P2PButton.react"),{className:this.props.usePaymentMethods?"_35cv":"",disabled:this.isSaveDisabled(),label:this.getCheckoutButtonLabel(),onClick:this.handlePlaceOrderClicked,use:"confirm"}))}return c("React").createElement("div",{className:"_35cw"},c("React").createElement(c("P2PDialogFooter.react"),{className:"_ugq"+(t?" _35cx":"")},o,n))},isSaveDisabled:function m(){var n=this.props.configuredPaymentMethod&&this.props.configuredPaymentMethod.isValid&&this.isConfiguredPaymentMethodSelected();return!!this.props.showCreditCardForm&&!this.props.creditCardFormValid||!!this.props.editingPaymentMethod&&!n||!!this.props.showAddressForm&&!this.props.addressFormValid},isConfiguredPaymentMethodSelected:function m(){return!!this.props.configuredPaymentMethod&&!!this.props.selectedPaymentMethod&&this.props.configuredPaymentMethod.type===this.props.selectedPaymentMethod.type},getCheckoutButtonLabel:function m(){__p&&__p();if(!this.props.usePaymentMethods)return j._("Place Order");var n=this.props.confirmedPaymentMethod,o=j._("Complete Purchase");if(!n)return o;switch(n.type){case c("FBPaymentsMethodType").NET_BANKING:return j._("Log In and Pay");case c("FBPaymentsMethodType").GENERIC_CARD:return j._("Pay");case c("FBPaymentsMethodType").PAY_OVER_COUNTER:return j._("Continue to Pay");default:return o}},getLegalDisclaimerSection:function m(){if(!this.props.usePaymentMethods||!this.props.confirmedPaymentMethod)return null;return c("React").createElement("div",{className:"_35d1"},c("React").createElement(c("FBPaymentsLegalDisclaimer_DEPRECATED.react"),{paymentMethodType:this.props.confirmedPaymentMethod.type,paymentType:this.props.paymentProductType}))},handleShippingOptionSelected:function m(n){c("P2PActions").checkoutShippingOptionSelected(n.id)},handleCreditCardFormValidation:function m(n,o){c("P2PActions").checkoutCreditCardFormValidated(n,o)},handleCreditCardChangeClicked:function m(){c("P2PActions").checkoutCreditCardEditOptionsToggled(true)},handlePaymentMethodChangeClicked:function m(){c("P2PActions").checkoutPaymentMethodEditOptionsToggled(true)},handleCreditCardSelected:function m(n){this._toggledCreditCard=n;c("P2PActions").checkoutCreditCardFormToggled(false)},handleNewCreditCardSelected:function m(){c("P2PActions").addCreditCardErrorCleared();c("P2PActions").checkoutCreditCardFormToggled(true)},saveCreditCard:function m(){this.props.onSaveCreditCard()},handlePaymentMethodSelected:function m(n){c("P2PActions").checkoutPaymentMethodSelected(n)},handlePaymentMethodConfigured:function m(n){c("P2PActions").checkoutPaymentMethodConfigured(n)},handleAddressFormValidation:function m(n,o){c("P2PActions").checkoutAddressFormValidated(n,o)},handleAddressChangeClicked:function m(){c("P2PActions").checkoutAddressEditOptionsToggled(true)},handleAddressSelected:function m(n){this._toggledAddress=n;c("P2PActions").checkoutAddressFormToggled(false)},handleNewAddressSelected:function m(){c("P2PActions").addAddressErrorCleared();c("P2PActions").checkoutAddressFormToggled(true)},saveAddress:function m(){this.props.onSaveAddress()},handleEditCancelClicked:function m(){if(!this.props.addresses.count()||this.props.showPaymentMethodForm)this.props.onClose();this.cleanup()},cleanup:function m(){c("P2PActions").addCreditCardErrorCleared();c("P2PActions").addAddressErrorCleared();c("P2PActions").checkoutEditCompleted()},handleContinueClicked:function m(){__p&&__p();var n=this._toggledAddress;if(this.props.showCreditCardForm)this.saveCreditCard();else if(this.props.showAddressForm)this.saveAddress();else if(this.props.showCreditCardEditOptions)if(this._toggledCreditCard){c("P2PActions").checkoutCreditCardSelected(this._toggledCreditCard.getCredentialId());this._toggledCreditCard=null}else this.handleEditCancelClicked();else if(this.props.editingPaymentMethod){if(this.isConfiguredPaymentMethodSelected())this.props.onConfirmSelectedPaymentMethod()}else if(this.props.showAddressEditOptions)if(n){c("P2PActions").checkoutAddressSelected(n.id);if(this.props.platformContext)this.props.onSetAddress(n.id);this._toggledAddress=null}else this.handleEditCancelClicked()},handleCompleteManualPaymentClicked:function m(){this.props.onCompleteManualPayment()},handlePlaceOrderClicked:function m(){this.props.onPlaceOrder()},render:function m(){var n=void 0,o=c("MessengerEnvironment").messengerui,p=o?720:680;if(!o)n=c("React").createElement(c("P2PDialogTitle.react"),null,j._("Checkout"));return c("React").createElement(c("P2PDialog.react"),{className:"_ugr",hideOnEscape:true,layerHideOnBlur:o,onToggle:this.handleToggle,repositionOnUpdate:true,shown:true,width:p},n,c("React").createElement(c("P2PDialogBody.react"),{className:"_4oz6"+(this.props.initialDataLoaded?" _3t72":"")},c("React").createElement("div",{className:"_4oz7"},c("React").createElement("div",{className:"_4oz8"},this.renderItemSection()),this.renderRightPanel()),c("React").createElement(c("P2PLoadingMask.react"),{visible:!this.props.initialDataLoaded||this.props.saving})))}});f.exports=l}),null);
__d("P2PPaymentMethodStore",["P2PActionConstants","CreditCardFormParam","EventEmitter","FBPaymentsMethodType","Map","P2PCreditCard","P2PDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("EventEmitter"));i=h&&h.prototype;function j(){i.constructor.call(this);this.$P2PPaymentMethodStore1=c("P2PDispatcher").register(this.onEventDispatched.bind(this));this.$P2PPaymentMethodStore2=new(c("Map"))();this.$P2PPaymentMethodStore3=new(c("Map"))();this.$P2PPaymentMethodStore4=new(c("Map"))()}j.prototype.onEventDispatched=function(k){var l=k.data,m=k.type;switch(m){case c("P2PActionConstants").PAYMENT_METHODS_UPDATED:this.handlePaymentMethodsUpdated(l);this.emit("change");break;case c("P2PActionConstants").PAYMENT_METHODS_UPDATED_ERROR:this.handlePaymentMethodsUpdatedError(l);this.emit("change")}};j.prototype.handlePaymentMethodsUpdated=function(k){__p&&__p();var l=k.id,m=k.paymentMethodsData,n=m.available_payment_methods_details,o=m.existing_payment_methods;if(o){o=o.map(function(p){var q=p.data;q[c("CreditCardFormParam").CARD_NUMBER]=p.data.ccNumber;q[c("CreditCardFormParam").CREDENTIAL_ID]=p.id;return{creditCard:new(c("P2PCreditCard"))(q),type:c("FBPaymentsMethodType").GENERIC_CARD}});n=o.concat(n)}this.$P2PPaymentMethodStore3["delete"](l);this.$P2PPaymentMethodStore2.set(l,n);this.$P2PPaymentMethodStore4.set(l,o[0])};j.prototype.handlePaymentMethodsUpdatedError=function(k){this.$P2PPaymentMethodStore3.set(k.id,k.error)};j.prototype.getPreviousPaymentMethod=function(k){if(k&&this.$P2PPaymentMethodStore4.has(k))return this.$P2PPaymentMethodStore4.get(k);return null};j.prototype.getDispatchToken=function(){return this.$P2PPaymentMethodStore1};j.prototype.failedPaymentMethodsFetch=function(k){return this.$P2PPaymentMethodStore3.has(k)};j.prototype.getPaymentMethodsFetchError=function(k){return this.$P2PPaymentMethodStore3.get(k)};f.exports=new j()}),null);
__d("P2PCheckoutStore",["P2PActionConstants","CreditCardFormParam","EventEmitter","MessengerPaymentProductType","P2PAddressStore","P2PAPI","P2PCreditCardStore","P2PDispatcher","P2PPaymentMethodStore","P2PPlatformContextStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=null,k=null,l=false,m=false,n=false,o=false,p=false,q=false,r=false,s=null,t=false,u=null,v=false,w=null,x=null,y=false,z=null,A=null,B=null,C=null,D=null,E=false,F=null;h=babelHelpers.inherits(G,c("EventEmitter"));i=h&&h.prototype;function G(){i.constructor.call(this);this.$P2PCheckoutStore1=c("P2PDispatcher").register(this.onEventDispatched.bind(this))}G.prototype.getDispatchToken=function(){return this.$P2PCheckoutStore1};G.prototype.onEventDispatched=function(H){__p&&__p();var I=H.data,J=H.type;c("P2PDispatcher").waitFor([c("P2PAddressStore").getDispatchToken(),c("P2PCreditCardStore").getDispatchToken(),c("P2PPlatformContextStore").getDispatchToken()]);switch(J){case c("P2PActionConstants").CREDIT_CARD_UPDATED:case c("P2PActionConstants").CREDIT_CARD_VERIFIED:this.handleCreditCardUpdated(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_CART_INITIATED:this.handleCheckoutCartInitiated();this.emit("change");break;case c("P2PActionConstants").CHECKOUT_CART_CREATED:this.handleCheckoutCartCreated(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_ADDRESS_SELECTED:this.handleAddressSelected(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_SHIPPING_OPTION_SELECTED:this.handleShippingOptionSelected(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_CREDIT_CARD_SELECTED:this.handleCreditCardSelected(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_ADDRESS_FORM_TOGGLED:this.handleAddressFormToggled(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_CREDIT_CARD_FORM_TOGGLED:this.handleCreditCardFormToggled(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED:this.handleAddressEditOptionsToggled(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED:this.handleCreditCardEditOptionsToggled(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED:this.handlePaymentMethodEditOptionsToggled(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_CONFIGURED:this.handlePaymentMethodConfigured(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_CONFIRMED:this.handlePaymentMethodConfirmed(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_SELECTED:this.handlePaymentMethodSelected(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_ADDRESS_FORM_VALIDATED:this.handleAddressFormValidated(I.isValid,I.formData);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_CREDIT_CARD_FORM_VALIDATED:this.handleCreditCardFormValidated(I.isValid,I.formData);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_EDIT_COMPLETED:this.handleCheckoutEditCompleted();this.emit("change");break;case c("P2PActionConstants").CHECKOUT_PROCESSING:this.handleCheckoutProcessing(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_BUYER_PROFILE_UPDATED:this.handleCheckoutBuyerProfileUpdated(I);this.emit("change");break;case c("P2PActionConstants").CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED:this.handleManualPaymentReceiptUpdated(I);this.emit("change");break}};G.prototype.handleCreditCardUpdated=function(H){var I=this.getSelectedCreditCard();if(I&&I.getCredentialId()===H[c("CreditCardFormParam").CREDENTIAL_ID])k=c("P2PCreditCardStore").getCreditCardByCredentialID(I.getCredentialId())};G.prototype.handleCheckoutCartInitiated=function(){w=null;D=null;B=null;j=null;x=null;F=null;E=false};G.prototype.handleCheckoutCartCreated=function(H){w=H.sellerID;D=H.invoiceID;E=!!H.acceptInternationalAddresses};G.prototype.handleCheckoutProcessing=function(H){v=H};G.prototype.handleAddressSelected=function(H){var I=c("P2PAddressStore").getAll(!E),J=I.find(function(J){return J.id===H});j=J;x=null;this.handleCheckoutEditCompleted()};G.prototype.handleShippingOptionSelected=function(H){var I=this.getPlatformContext(),J=I&&I.shipping&&I.shipping.shippingOptions,K=void 0;if(J)K=J.filter(function(K){return K.id===H})[0];x=K};G.prototype.handleCreditCardSelected=function(H){var I=c("P2PCreditCardStore").getAll(c("MessengerPaymentProductType").MESSENGER_COMMERCE),J=I.filter(function(J){return J.getCredentialId()===H})[0];k=J;this.handleCheckoutEditCompleted()};G.prototype.handleAddressFormToggled=function(H){l=H;this.handleAddressFormValidated(false,null)};G.prototype.handleCreditCardFormToggled=function(H){m=H;this.handleCreditCardFormValidated(false,null)};G.prototype.handlePaymentMethodFormToggled=function(H){n=H};G.prototype.handleAddressEditOptionsToggled=function(H){o=H};G.prototype.handleAddressFormValidated=function(H,I){r=H;s=I};G.prototype.handleCreditCardFormValidated=function(H,I){t=H;u=I};G.prototype.handleCheckoutEditCompleted=function(){__p&&__p();this.handleAddressFormValidated(false,null);this.handleAddressEditOptionsToggled(false);this.handleAddressFormToggled(false);this.handleCreditCardFormValidated(false,null);this.handleCreditCardEditOptionsToggled(false);this.handleCreditCardFormToggled(false);this.handlePaymentMethodSelected(null);this.handlePaymentMethodConfigured(null);this.handlePaymentMethodFormToggled(false);this.handlePaymentMethodEditOptionsToggled(false)};G.prototype.handleCreditCardEditOptionsToggled=function(H){p=H};G.prototype.handlePaymentMethodEditOptionsToggled=function(H){q=H};G.prototype.handleCheckoutBuyerProfileUpdated=function(H){z=H;y=true};G.prototype.handleManualPaymentReceiptUpdated=function(H){F=H.receiptFbid};G.prototype.handlePaymentMethodConfigured=function(H){A=H};G.prototype.handlePaymentMethodConfirmed=function(H){B=H;this.handleCheckoutEditCompleted()};G.prototype.handlePaymentMethodSelected=function(H){C=H};G.prototype.isAddressFormShown=function(){return!c("P2PAddressStore").getAll(!E).count()||l};G.prototype.isCreditCardFormShown=function(){var H=c("P2PCreditCardStore").getAll(c("MessengerPaymentProductType").MESSENGER_COMMERCE);return!this.isAddressFormShown()&&(!H.length||m)};G.prototype.isPaymentMethodFormShown=function(){var H=!this.isAddressFormShown()&&(!this.getConfirmedPaymentMethod()||n);return H};G.prototype.isAddressEditOptionsShown=function(){return o};G.prototype.isCreditCardEditOptionsShown=function(){return p};G.prototype.isPaymentMethodEditOptionsShown=function(){return q};G.prototype.isEditingPaymentMethod=function(){return this.isPaymentMethodFormShown()||this.isPaymentMethodEditOptionsShown()};G.prototype.getConfirmedPaymentMethod=function(){return B||c("P2PPaymentMethodStore").getPreviousPaymentMethod(this.getInvoiceID())};G.prototype.getConfiguredPaymentMethod=function(){return A};G.prototype.getSelectedPaymentMethod=function(){return C};G.prototype.getAttachedReceiptFbid=function(){return F};G.prototype.getSelectedAddress=function(){__p&&__p();var H=this.getPlatformContext(),I=c("P2PAddressStore").getAll(!E),J=void 0;if(j)return j;if(H&&H.shipping&&H.shipping.selectedShippingAddressID){J=I.find(function(J){return H&&J.id===H.shipping.selectedShippingAddressID});if(J)return J}return I.first()};G.prototype.getSelectedShippingOption=function(){__p&&__p();var H=this.getPlatformContext(),I=H&&H.shipping,J=I&&I.selectedShippingOptionID,K=I&&I.shippingOptions,L=void 0;if(x)return x;if(K&&K.length){L=K.filter(function(L){return L.id===J})[0];if(L)return L}return K&&K[0]};G.prototype.getSelectedCreditCard=function(){var H=c("P2PCreditCardStore").getAll(c("MessengerPaymentProductType").MESSENGER_COMMERCE);return k||H[0]};G.prototype.isAddressFormValid=function(){return r};G.prototype.getAddressFormData=function(){return s};G.prototype.isCreditCardFormValid=function(){return t};G.prototype.getCreditCardFormData=function(){return u};G.prototype.isProcessing=function(){return v};G.prototype.isBuyerProfileFetchComplete=function(){return y};G.prototype.getPlatformContext=function(){if(w)return c("P2PPlatformContextStore").getPlatformContextByOtherUserID(w)};G.prototype.getInvoiceID=function(){return D};G.prototype.getPlaceOrderFormData=function(){var H=this.getPlatformContext(),I=this.getSelectedShippingOption(),J=this.getSelectedAddress(),K=this.getSelectedCreditCard(),L=c("CreditCardFormParam").CREDENTIAL_ID,M={};M[L]=K&&K.getCredentialId();M=babelHelpers["extends"]({},M,{amount:I&&I.rawTotal,platform_context_id:H&&H.id,receiverId:H&&H.sellerID,shippingAddressID:J&&J.id,shippingOptionID:I&&I.id});return M};G.prototype.getBuyerProfileData=function(){if(z)return z;z={};c("P2PAPI").getCurrentUserProfileData()};f.exports=new G()}),null);
__d("P2PCheckoutDialogContainer.react",["fbt","invariant","Arbiter","FBPaymentsCreditCardVerificationDialog_DEPRECATED.react","FBPaymentsMethodType","Link.react","P2PActions","P2PAPI","P2PAPIUtils","P2PAddressStore","P2PCreditCardStore","P2PCheckoutDialog.react","P2PCheckoutStore","P2PDispatcher","P2PEditCreditCardDialog.react","P2PErrorDialog.react","P2PLogger","P2PPasswordProtectionNUXDialog.react","P2PPasswordProtectionStatusTypes","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPlatformContextShape","P2PSuccessDialog.react","P2PText.react","P2PVerifyCreditCardDialog.react","React","ReactLayeredComponentMixin_DEPRECATED","StoreAndPropBasedStateMixin"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k="fbpay_login_and_pay",l="about:blank",m=c("React").createClass({displayName:"P2PCheckoutDialogContainer",mixins:[c("ReactLayeredComponentMixin_DEPRECATED"),c("StoreAndPropBasedStateMixin")(c("P2PAddressStore"),c("P2PCheckoutStore"),c("P2PCreditCardStore"))],propTypes:{acceptInternationalAddresses:j.bool,asyncPaymentDetails:j.object,onCheckoutSuccess:j.func,onClose:j.func.isRequired,onSeeReceiptClick:j.func,configSelections:j.string,customCheckoutDetails:j.node,paymentMethods:j.array,paymentMethodsFetchError:j.object,paymentProductType:j.string,platformContext:c("P2PPlatformContextShape"),platformContextSaveError:j.object,productItemID:j.string,showAsyncPaymentDetails:j.bool,showTaxField:j.bool,usePaymentMethods:j.bool},getInitialState:function n(){return{creditCardVerificationDialogShown:false,editCreditCardDialogShown:false,openedWindow:null,passwordProtectionNUXShown:false,successDialogShown:false,transferError:null,verifyCreditCardDialogShown:false}},statics:{calculateState:function n(o){return{addresses:c("P2PAddressStore").getAll(!o.acceptInternationalAddresses),addressFormData:c("P2PCheckoutStore").getAddressFormData(),addressFormValid:c("P2PCheckoutStore").isAddressFormValid(),addressSaveErrors:c("P2PAddressStore").getSaveErrors(),buyer:c("P2PCheckoutStore").getBuyerProfileData(),configuredPaymentMethod:c("P2PCheckoutStore").getConfiguredPaymentMethod(),confirmedPaymentMethod:c("P2PCheckoutStore").getConfirmedPaymentMethod(),creditCardAsyncRequestState:c("P2PCreditCardStore").getAsyncRequestState(),creditCardFormData:c("P2PCheckoutStore").getCreditCardFormData(),creditCardFormValid:c("P2PCheckoutStore").isCreditCardFormValid(),creditCards:c("P2PCreditCardStore").getAll(o.paymentProductType),creditCardSaveErrors:c("P2PCreditCardStore").getSaveErrors(),editingPaymentMethod:c("P2PCheckoutStore").isEditingPaymentMethod()&&o.usePaymentMethods,initialDataLoaded:o.platformContext&&(!!o.asyncPaymentDetails||c("P2PAddressStore").isAddressesFetchComplete()&&c("P2PCreditCardStore").isCreditCardsFetchComplete()&&c("P2PCheckoutStore").isBuyerProfileFetchComplete()&&(!o.usePaymentMethods||!!o.paymentMethods)),orderID:c("P2PCheckoutStore").getInvoiceID(),receiptAttached:!!c("P2PCheckoutStore").getAttachedReceiptFbid(),saving:c("P2PCheckoutStore").isProcessing()||c("P2PCreditCardStore").isSaving()||c("P2PAddressStore").isSaving(),selectedAddress:c("P2PCheckoutStore").getSelectedAddress(),selectedCreditCard:c("P2PCheckoutStore").getSelectedCreditCard(),selectedPaymentMethod:c("P2PCheckoutStore").getSelectedPaymentMethod(),selectedShippingOption:c("P2PCheckoutStore").getSelectedShippingOption(),shippingOptions:o.platformContext&&o.platformContext.shipping?o.platformContext.shipping.shippingOptions:null,showAddressForm:c("P2PCheckoutStore").isAddressFormShown(),showCreditCardForm:c("P2PCheckoutStore").isCreditCardFormShown()&&!o.usePaymentMethods,showAddressEditOptions:c("P2PCheckoutStore").isAddressEditOptionsShown(),showCreditCardEditOptions:c("P2PCheckoutStore").isCreditCardEditOptionsShown()&&!o.usePaymentMethods,showPaymentMethodEditOptions:c("P2PCheckoutStore").isPaymentMethodEditOptionsShown()&&o.usePaymentMethods,showPaymentMethodForm:c("P2PCheckoutStore").isPaymentMethodFormShown()&&o.usePaymentMethods}}},_paymentMethodAddCardRequestId:"",componentWillMount:function n(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_CHECKOUT);c("P2PDispatcher").explicitlyRegisterStores([c("P2PCheckoutStore")])},componentWillUnmount:function n(){if(this._passwordCancelSubscribeToken!==null){c("Arbiter").unsubscribe(this._passwordCancelSubscribeToken);this._passwordCancelSubscribeToken=null}},componentDidUpdate:function n(o,p){this._trackEvents(o,p)},log:function n(o,p){var q=this.props.platformContext,r={};if(q)r=q.product.rawAmount;c("P2PLogger").log(o,babelHelpers["extends"]({www_event_flow:c("P2PPaymentLoggerEventFlow").UI_FLOW_CHECKOUT,raw_amount:r.amount,currency:r.currency,object_id:this.props.productItemID},p))},_placeOrderPending:false,_passwordCancelSubscribeToken:null,_passwordProtectionNUXPending:false,handleCancel:function n(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_CANCEL);this.props.onClose()},handleSuccess:function n(){var o=arguments.length<=0||arguments[0]===undefined?true:arguments[0];this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_SUCCESS);o&&this.props.onClose()},handleSaveAddress:function n(){this.saveAddress()},closeOpenedWindow:function n(){this.state.openedWindow&&this.state.openedWindow.close()},saveAddress:function n(){c("P2PAPI").addAddress(babelHelpers["extends"]({},this.state.addressFormData,{platformContext:this.props.platformContext,onSuccess:this.handleSaveAddressSuccess,onError:this.handleSaveAddressError}));this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_ADDRESS_DETAILS)},handleSaveAddressSuccess:function n(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_ADD_ADDRESS_SUCCESS)},handleSaveAddressError:function n(o){o=o.errors;this.log(c("P2PPaymentLoggerEvent").UI_ACTN_ADD_ADDRESS_FAIL,{message:o&&o.general?o.general.message:""})},handleSaveCreditCard:function n(){this.saveCreditCard()},saveCreditCard:function n(){c("P2PAPI").addCreditCard(babelHelpers["extends"]({product_type:this.props.paymentProductType},this.state.creditCardFormData,{hasPlatformContext:!!this.props.platformContext,onSuccess:this.handleSaveCreditCardSuccess,onError:this.handleSaveCreditCardError}));this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_CARD_DETAILS)},handleSaveCreditCardSuccess:function n(){if(this._placeOrderPending){this._placeOrderPending=false;this.placeOrder()}this.log(c("P2PPaymentLoggerEvent").UI_ACTN_ADD_CARD_SUCCESS)},handleSaveCreditCardError:function n(o){o=o.errors;this.log(c("P2PPaymentLoggerEvent").UI_ACTN_ADD_CARD_FAIL,{message:o&&o.general?o.general.message:""})},handleConfirmPaymentMethod:function n(){var o=this.state.configuredPaymentMethod;switch(o.type){case c("FBPaymentsMethodType").NEW_CREDIT_CARD:var p=c("P2PAPIUtils").genRequestID();this._paymentMethodAddCardRequestId=p;c("P2PAPI").addCreditCard(babelHelpers["extends"]({product_type:this.props.paymentProductType,requestID:p},o.formData,{hasPlatformContext:!!this.props.platformContext,onSuccess:this.handleConfirmPaymentMethodSuccess}));break;case c("FBPaymentsMethodType").GENERIC_CARD:case c("FBPaymentsMethodType").PAY_OVER_COUNTER:case c("FBPaymentsMethodType").MANUAL_TRANSFER:case c("FBPaymentsMethodType").NET_BANKING:this.handleConfirmPaymentMethodSuccess();break}},handleConfirmPaymentMethodSuccess:function n(){var o=this.state.configuredPaymentMethod;switch(o.type){case c("FBPaymentsMethodType").NEW_CREDIT_CARD:this.handleConfirmPaymentMethodAddCardSuccess();break;default:c("P2PActions").checkoutPaymentMethodConfirmed(o)}},handleConfirmPaymentMethodAddCardSuccess:function n(){var o=c("P2PCreditCardStore").getAsyncRequestState(),p=o[this._paymentMethodAddCardRequestId];if(!p)return;var q=c("P2PCreditCardStore").getCreditCardByCredentialID(p.credential_id),r={creditCard:q,type:c("FBPaymentsMethodType").GENERIC_CARD};this._paymentMethodAddCardRequestId="";c("P2PActions").checkoutPaymentMethodConfirmed(r)},handlePlaceOrder:function n(){if(this.props.usePaymentMethods){this.completePaymentMethodCheckout();return}if(this.state.showCreditCardForm){this._placeOrderPending=true;this.saveCreditCard()}else this.placeOrderWithExistingCard()},handleCompleteManualPayment:function n(){var o=this.state.orderID,p=this.props.asyncPaymentDetails&&this.props.asyncPaymentDetails.id;o&&p||i(0);c("P2PAPI").completeReceiptUploadCheckout({onSuccess:function(){this.setState({successDialogShown:true})}.bind(this),onError:function(q){this.setState({transferError:q})}.bind(this),receiptImageID:c("P2PCheckoutStore").getAttachedReceiptFbid(),invoiceID:o,selectedPaymentOptionID:p})},placeOrderWithExistingCard:function n(){__p&&__p();var o=c("P2PCheckoutStore").getSelectedCreditCard();o||i(0);if(!o.getIsVerified()){this.setState({verifyCreditCardDialogShown:true});return}else if(o.isExpired()){this.setState({editCreditCardDialogShown:true});return}this.placeOrder()},placeOrder:function n(){c("P2PActions").checkoutProcessing(true);this.setState({transferError:null});this._passwordCancelSubscribeToken=c("Arbiter").subscribeOnce("PasswordReauthDialogCancelClick",function(){this._passwordCancelSubscribeToken=null;c("P2PActions").checkoutProcessing(false)}.bind(this));c("P2PAPI").createTransaction({error:this.handlePlaceOrderError,formData:c("P2PCheckoutStore").getPlaceOrderFormData(),success:this.handlePlaceOrderSuccess});this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_CONFIRM)},handlePlaceOrderError:function n(o){c("P2PActions").checkoutProcessing(false);this.setState({transferError:o})},handlePlaceOrderSuccess:function n(o){c("P2PActions").checkoutProcessing(false);var p=o.passwordProtection===c("P2PPasswordProtectionStatusTypes").NOT_SET;if(p)this.setState({passwordProtectionNUXShown:true});else this.handleSuccess()},completePaymentMethodCheckout:function n(){__p&&__p();var o=this.state.confirmedPaymentMethod;switch(o.type){case c("FBPaymentsMethodType").NET_BANKING:case c("FBPaymentsMethodType").PAY_OVER_COUNTER:var p=window.open(l,k);this.setState({openedWindow:p});break;case c("FBPaymentsMethodType").GENERIC_CARD:if(o.creditCard.getCSC())this.completeNMORCheckout({securityCode:o.creditCard.getCSC()});else this.setState({creditCardVerificationDialogShown:true});return}this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_CONFIRM);this.completeNMORCheckout()},completeNMORCheckout:function n(o){__p&&__p();var p=this.props.platformContext;p||i(0);var q=this.state.confirmedPaymentMethod;q||i(0);var r=q.type,s=null,t=null;switch(r){case c("FBPaymentsMethodType").GENERIC_CARD:r="cc";t=q.creditCard.getCredentialId();o&&o.securityCode||i(0);break;case c("FBPaymentsMethodType").NET_BANKING:s={bank_code:q.bank.code};break;case c("FBPaymentsMethodType").MANUAL_TRANSFER:s={receipt_image_id:q.receiptFbid,transfer_option_id:q.optionId};break}var u=babelHelpers["extends"]({amount:this.state.selectedShippingOption.rawTotal,currency:p.product.rawAmount.currency,nmorOrderType:this.props.paymentProductType,receiverID:p.sellerID,orderID:this.state.orderID,paymentMethodType:r,paymentMethodData:s,credentialId:t,shippingAddressID:this.state.selectedAddress.id,shippingOptionID:this.state.selectedShippingOption.id,error:this.handleCompletePaymentMethodCheckoutError,success:this.handleCompletePaymentMethodCheckoutSuccess},o);c("P2PActions").checkoutProcessing(true);c("P2PAPI").completeNMORCheckout(u)},handleCreditCardVerificationCancel:function n(){this.setState({creditCardVerificationDialogShown:false})},handleVerifyCreditCardAndCompleteCheckout:function n(o){this.completeNMORCheckout({securityCode:o})},handleCompletePaymentMethodCheckoutError:function n(o){c("P2PActions").checkoutProcessing(false);this.setState({transferError:o});this.closeOpenedWindow()},handleCompletePaymentMethodCheckoutSuccess:function n(o,p){__p&&__p();c("P2PActions").checkoutProcessing(false);this.setState({creditCardVerificationDialogShown:false});var q=this.props.onCheckoutSuccess;q&&q(o,p);var r=this.state.confirmedPaymentMethod;switch(r.type){case c("FBPaymentsMethodType").NET_BANKING:p&&p.net_banking_info||i(0);var s=p.net_banking_info.redirect_url;window.open(s,k);this.handleSuccess();break;case c("FBPaymentsMethodType").PAY_OVER_COUNTER:p&&p.pay_over_counter_info||i(0);var t=p.pay_over_counter_info.instructions_url;window.open(t,k);this.handleSuccess();break;case c("FBPaymentsMethodType").MANUAL_TRANSFER:this.handleSuccess(false);break;default:this.handleSuccess(false);this.setState({successDialogShown:true})}},handleSetAddress:function n(o){var p=this.props.platformContext;p||i(0);c("P2PAPI").setPlatformContextShippingAddress({platformContextID:p.id,shippingAddressID:o})},renderLayers:function n(){__p&&__p();var o={};if(this.props.platformContextSaveError)o.error=c("React").createElement(c("P2PErrorDialog.react"),{title:h._("Problem with purchase"),onOKClick:this.handleCancel,error:this.props.platformContextSaveError});else if(this.props.paymentMethodsFetchError)o.error=c("React").createElement(c("P2PErrorDialog.react"),{title:h._("Sorry, Something Went Wrong"),onOKClick:this.handleCancel,error:h._("We can't load the available payment methods at this time. Please try again later.")});else if(this.state.transferError)o.error=c("React").createElement(c("P2PErrorDialog.react"),{title:h._("Problem with purchase"),onOKClick:this.handleCancel,error:this.state.transferError});else if(this.state.verifyCreditCardDialogShown)o.verificationDialog=c("React").createElement(c("P2PVerifyCreditCardDialog.react"),{creditCard:this.state.selectedCreditCard,asyncRequestState:this.state.creditCardAsyncRequestState,isSending:true,onCancel:function(){this.setState({verifyCreditCardDialogShown:false});c("P2PActions").checkoutProcessing(false)}.bind(this),onSuccess:function(){this.setState({verifyCreditCardDialogShown:false});this.placeOrderWithExistingCard()}.bind(this)});else if(this.state.editCreditCardDialogShown)o.editCreditCardDialog=c("React").createElement(c("P2PEditCreditCardDialog.react"),{asyncRequestState:this.state.creditCardAsyncRequestState,creditCard:this.state.selectedCreditCard,onCancel:function(){this.setState({editCreditCardDialogShown:false});c("P2PActions").checkoutProcessing(false)}.bind(this),onSuccess:function(){this.setState({editCreditCardDialogShown:false});this.placeOrderWithExistingCard()}.bind(this)});return o},render:function n(){__p&&__p();if(this.state.passwordProtectionNUXShown)return c("React").createElement(c("P2PPasswordProtectionNUXDialog.react"),{onComplete:this.handleSuccess});else if(this.state.creditCardVerificationDialogShown){var o=this.state.confirmedPaymentMethod.creditCard,p=c("React").createElement(c("P2PText.react"),{size:"small",type:"secondary"},c("React").createElement(c("Link.react"),{onClick:this.handleCreditCardVerificationCancel,size:"small"},h._("Use Different Payment Method"))),q=h._("Pay");return c("React").createElement(c("FBPaymentsCreditCardVerificationDialog_DEPRECATED.react"),{creditCard:o,leftContent:p,loading:this.state.saving,onConfirm:this.handleVerifyCreditCardAndCompleteCheckout,primaryButtonText:q,showCancelButton:false})}else if(this.state.successDialogShown){var r=h._("Your purchase is complete. You'll receive a confirmation email soon.");if(this.props.asyncPaymentDetails)r=h._("Your proof of payment has been sent. The seller will verify your payment soon.");return c("React").createElement(c("P2PSuccessDialog.react"),{buttonLabel:h._("See Receipt"),buttonUse:"confirm",onOKClick:this.props.onSeeReceiptClick||this.handleSuccess,onToggle:function(){this.handleSuccess()}.bind(this),showCloseButton:true,title:h._("Confirmation")},c("React").createElement(c("P2PText.react"),{type:"secondary",style:{textAlign:"center"}},r))}return c("React").createElement(c("P2PCheckoutDialog.react"),babelHelpers["extends"]({},this.props,this.state,{onClose:this.handleCancel,onCompleteManualPayment:this.handleCompleteManualPayment,onConfirmSelectedPaymentMethod:this.handleConfirmPaymentMethod,onPlaceOrder:this.handlePlaceOrder,onSaveAddress:this.handleSaveAddress,onSaveCreditCard:this.handleSaveCreditCard,onSetAddress:this.handleSetAddress}))},_trackEvents:function n(o,p){__p&&__p();if(!o.platformContextSaveError&&this.props.platformContextSaveError)this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_CART_CREATION_FAIL);if(!this.state.initialDataLoaded)return;if(!p.initialDataLoaded&&this.state.initialDataLoaded)this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_CART_CREATION_SUCCESS);if(!p.showCreditCardForm&&this.state.showCreditCardForm)this.log(c("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_ADD_CARD);if(p.showCreditCardForm&&!this.state.showCreditCardForm)this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_ADD_CARD);if(!p.showCreditCardEditOptions&&this.state.showCreditCardEditOptions)this.log(c("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_CHOOSE_CARD);if(!p.showAddressForm&&this.state.showAddressForm)this.log(c("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_ADD_ADDRESS);if(p.showAddressForm&&!this.state.showAddressForm)this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_ADD_ADDRESS);if(!p.showAddressEditOptions&&this.state.showAddressEditOptions)this.log(c("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_CHOOSE_ADDRESS);if(!p.verifyCreditCardDialogShown&&this.state.verifyCreditCardDialogShown)this.log(c("P2PPaymentLoggerEvent").UI_ACTN_VERIFY_CSC);if(!p.editCreditCardDialogShown&&this.state.editCreditCardDialogShown)this.log(c("P2PPaymentLoggerEvent").UI_ACTN_EDIT_CARD);if(!p.transferError&&this.state.transferError)this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CHECKOUT_FAIL)}});f.exports=m}),null);
__d("P2PMCCartCreationDialogContainer.react",["MessengerPaymentProductType","P2PActions","P2PAPI","P2PCheckoutDialogContainer.react","P2PCheckoutStore","P2PPlatformContextStore","React","StoreAndPropBasedStateMixin"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=c("React").createClass({displayName:"P2PMCCartCreationDialogContainer",mixins:[c("StoreAndPropBasedStateMixin")(c("P2PCheckoutStore"),c("P2PPlatformContextStore"))],propTypes:{configSelections:h.string,productItemID:h.string.isRequired,sellerID:h.string.isRequired},statics:{calculateState:function j(k){return{platformContext:c("P2PCheckoutStore").getPlatformContext(),platformContextSaveError:c("P2PPlatformContextStore").getSaveError(k.productItemID)}}},componentWillMount:function j(){c("P2PAPI").createMCCart({productItemID:this.props.productItemID,sellerID:this.props.sellerID})},handleClose:function j(){c("P2PActions").clearPlatformContextSaveErrors(this.props.productItemID);c("P2PActions").hideDialog()},render:function j(){return c("React").createElement(c("P2PCheckoutDialogContainer.react"),{onClose:this.handleClose,configSelections:this.props.configSelections,paymentProductType:c("MessengerPaymentProductType").MESSENGER_COMMERCE,platformContext:this.state.platformContext,platformContextSaveError:this.state.platformContextSaveError,productItemID:this.props.productItemID})}});f.exports=i}),null);
__d("MNCommercePromotionMercuryShareAttachment.react",["Banzai","MercuryFallbackShareAttachment.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MessengerAdsWebTypedLogger","MNAdsLoggerEventEnum","MNCommerceCheckoutOrderConfigDialogContainer.react","MNCommerceDialogStateActions","MNCommerceMessageType","MessengerPlatformGenericItemMercuryAttachment.react","MNContentSubscriptionMessageUserEngagementTypedLogger","MNPlatformMessageUserEngagementTypedLogger","P2PActions","P2PMCCartCreationDialogContainer.react","React","StoryAttachmentStyle","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;function k(n){if(n!==undefined){var o=n.match(/\d+/);if(o!==undefined&&o!==null)return o[0]}return null}function l(n,event){__p&&__p();var o=k(n.props.pageID),p=n.getRetailItem(n.props.attachment.target),q=p&&p.id;if(n.props.mnMessageType==c("MNCommerceMessageType").CONTENT_SUBSCRIPTION){new(c("MNContentSubscriptionMessageUserEngagementTypedLogger"))().setPageID(o).setMessageID(n.props.messageID).setCommerceItemID(q).setName(event).log();switch(event){case"mn_platform_msg_imp":c("Banzai").post("mn_platform_message_imp_setsuna",{page_id:o,item_id:q});break;case"mn_platform_msg_click":c("Banzai").post("mn_platform_message_click_setsuna",{page_id:o,item_id:q});break;default:break}}new(c("MNPlatformMessageUserEngagementTypedLogger"))().setPageID(o).setMessageID(n.props.messageID).setCommerceItemID(q).setName(event).log()}h=babelHelpers.inherits(m,c("React").Component);i=h&&h.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MNCommercePromotionMercuryShareAttachment4=function(){__p&&__p();var s=this.props.attachment&&this.props.attachment.target;if(!s)return;var t=this.getRetailItem(s),u=t&&t.id;if(this.props.isSponsored)new(c("MessengerAdsWebTypedLogger"))().setEvent(c("MNAdsLoggerEventEnum").LINK_CLICK_CTA).setIsSponsored(this.props.isSponsored).setItemID(u).setMessageID(this.props.messageID).setPageID(this.props.pageID).log();l(this,"mn_platform_msg_click");var v=this.props.pageID,w=function w(x,y,z){return c("P2PActions").showDialog(c("P2PMCCartCreationDialogContainer.react"),{productItemID:x,sellerID:y,configSelections:z})};c("MNCommerceDialogStateActions").showDialog(c("MNCommerceCheckoutOrderConfigDialogContainer.react"),{onContinue:w,itemID:u,ownerID:v})}.bind(this),o}m.prototype.componentDidMount=function(){l(this,"mn_platform_msg_imp")};m.prototype.render=function(){var n=this.props.attachment&&this.props.attachment.target;if(!n)return c("React").createElement(c("MercuryFallbackShareAttachment.react"),this.props);var o=this.props.attachment&&this.props.attachment.uri,p=this.props.attachment&&this.props.attachment.label,q=this.$MNCommercePromotionMercuryShareAttachment1(),r=this.getRetailItem(n),s=void 0;if(r&&r.call_to_actions&&r.call_to_actions.length>0)s=r.call_to_actions;else s=n.call_to_actions;return c("React").createElement(c("MessengerPlatformGenericItemMercuryAttachment.react"),{callToActions:this.$MNCommercePromotionMercuryShareAttachment2(s),isMediaAttachment:this.$MNCommercePromotionMercuryShareAttachment3(),isSponsored:this.props.isSponsored,isSubattachment:this.props.isSubattachment,itemID:r&&r.id,label:p,location:this.props.location,longestCTAs:this.props.longestCTAs,longestMetaline:this.props.longestMetaline,longestName:this.props.longestName,messageID:this.props.messageID,mnMessageType:this.props.mnMessageType,pageID:this.props.pageID,threadID:this.props.threadID,retailItem:r,url:o,width:this.props.maxWidth,isButtonList:q})};m.prototype.$MNCommercePromotionMercuryShareAttachment2=function(n){__p&&__p();var o=n||[],p=o.map(function(q){var r=q.action_link&&(q.action_link.startsWith("fb-messenger://payments/buy/mc?")||q.action_link.startsWith("fb-messenger://business/commerce/"));if(r){if(c("gkx")("AT4VcZ2n8GFrD7MjVVAjcX0NmvwopB7f803i8mNRrJiQunF1FwYQ1kl6EgxABUzgu-ERWV--QUw6PQC9d4CFCek0"))return babelHelpers["extends"]({onClick:this.$MNCommercePromotionMercuryShareAttachment4},q);return null}else return q}.bind(this));return p.filter(function(q){return q})};m.prototype.$MNCommercePromotionMercuryShareAttachment1=function(){var n=this.props.attachment,o=n&&n.style_list;if(o&&o.length&&o[0]===c("StoryAttachmentStyle").MESSENGER_PLATFORM_BUTTON_LIST)return true;return false};m.prototype.$MNCommercePromotionMercuryShareAttachment3=function(){var n=this.props.attachment,o=n&&n.style_list;if(o&&o.length&&o[0]===c("StoryAttachmentStyle").MESSENGER_PLATFORM_MEDIA_ATTACHMENT)return true;return false};m.prototype.getRetailItem=function(n){var o=this.$MNCommercePromotionMercuryShareAttachment1();if(o)return n;if(n&&n.items)if(n.items.length)return n.items[0];else return null;return n};m.propTypes={attachment:c("MercuryShareAttachmentReactShape"),isSponsored:j.bool,isSubattachment:j.bool,location:j.oneOf(c("MercuryShareAttachmentRenderLocations").getValues()),maxWidth:j.number,messageID:j.string,mnMessageType:j.string,pageID:j.string,threadID:j.string,longestCTAs:j.number,longestMetaline:j.string,longestName:j.string};f.exports=m}),null);