if (self.CavalryLogger) { CavalryLogger.start_js(["9LCV4"]); }

__d("FBRTCDismissReason",[],(function a(b,c,d,e,f,g){f.exports={CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,JOIN_APPROVAL_DENIED:8}}),null);
__d("FBRTCHangupReason",[],(function a(b,c,d,e,f,g){f.exports={IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6}}),null);
__d("FBRTCRtcResponseStatusCode",[],(function a(b,c,d,e,f,g){f.exports={OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONDITIONAL_REQUEST_FAILED:412,BUSY_HERE:486,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503,PRECONDITION_FAILURE:580}}),null);
__d("CollabRTCChromeScreenSharingExtension",["invariant","Promise","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i="CHROME_WEBSTORE_UNDEFINED",j="DIALOG_USER_CANCEL",k="EXTENSION_NOT_FOUND",l="REQUEST_ID_UNDEFINED",m="UNEXPECTED_ERROR",n="degmgkchmbgaognjjlhggmhbcpicdifm",o="data-fb-screensharing-extension-available";function p(){this.CHROME_WEBSTORE_UNDEFINED=i;this.DIALOG_USER_CANCEL=j;this.EXTENSION_NOT_FOUND=k;this.EXTENSION_PRESENCE_ATTR=o;this.REQUEST_ID_UNDEFINED=l;this.UNEXPECTED_ERROR=m}p.prototype.isInstalled=function(){var v=document,w=v.documentElement;return w!=null&&w.hasAttribute(o)&&w.getAttribute(o)==="true"};p.prototype.install=function(){__p&&__p();var v;q(this.getExtensionURL());var w=(v=window)!=null?(v=v.chrome)!=null?v.webstore:v:v;if(w==null)return c("Promise").reject(new Error(i));return new(c("Promise"))(function(x,y){w.install(this.getExtensionURL(),function(){var z=document,A=z.documentElement;if(A!=null)A.setAttribute(o,"true");x()},function(z,A){return y(new Error(A))})}.bind(this)).then(function(){return this.$CollabRTCChromeScreenSharingExtension2(5)}.bind(this))};p.prototype.getSourceID=function(){__p&&__p();var v=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(!this.isInstalled()){if(v)return c("Promise").reject(new Error(k));return this.install().then(function(){return this.getSourceID(true)}.bind(this))}return s().then(function(w){switch(w.type){case"streamID":this.$CollabRTCChromeScreenSharingExtension1=w.requestID;return w.streamID;case"canceledGetStreamID":throw new Error(j);default:throw new Error(m)}}.bind(this))};p.prototype.getExtensionID=function(){return n};p.prototype.getExtensionURL=function(){return"https://chrome.google.com/webstore/detail/"+n};p.prototype.stop=function(){return t(this.$CollabRTCChromeScreenSharingExtension1).then(function(){this.$CollabRTCChromeScreenSharingExtension1=null}.bind(this))};p.prototype.$CollabRTCChromeScreenSharingExtension2=function(v){return u({type:"ping"})["catch"](function(w){if(v<1)throw w;return r(100).then(function(){return this.$CollabRTCChromeScreenSharingExtension2(v-1)}.bind(this))}.bind(this))};function q(v){var w="chrome-webstore-item";if(!document.querySelector('link[href="'+v+'"][rel="'+w+'"]')){var x=document.createElement("link");x.setAttribute("href",v);x.setAttribute("rel",w);document.head!=null||h(0);document.head.appendChild(x)}}function r(v){return new(c("Promise"))(function(w){return setTimeout(w,v)})}function s(){return u({type:"getStreamID",sources:["screen","window","tab"]})}function t(v){return u({type:"cancel",requestID:v})}function u(v){return new(c("Promise"))(function(w,x){window.chrome.runtime.sendMessage(n,v,function(y){if(y!=null)w(y);else{var z=window.chrome.runtime.lastError.message;x(new Error(z))}})})}f.exports=new p()}),null);
__d("CollabRTCChromeScreenSharing",["CollabRTCChromeScreenSharingExtension"],(function a(b,c,d,e,f,g){"use strict";var h={getSourceID:function i(){return c("CollabRTCChromeScreenSharingExtension").getSourceID()},stop:function i(){return c("CollabRTCChromeScreenSharingExtension").stop()}};f.exports=h}),null);
__d("RTCEndCallReason",["fbt","FBRTCConstants","FBRTCDismissReason","FBRTCHangupReason","FBRTCRtcResponseStatusCode"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("FBRTCConstants").CallEndReason,j=c("FBRTCConstants").CollabCallEndSubreason;function k(l){this.$RTCEndCallReason1=-1;this.$RTCEndCallReason3="local";this.$RTCEndCallReason4=false;if(typeof l==="string"||l instanceof String)this.$RTCEndCallReason1=i.strNames.indexOf(l);else this.$RTCEndCallReason1=l}k.prototype.setSubreason=function(l){this.$RTCEndCallReason2=l;return this};k.prototype.getSubreason=function(){return this.$RTCEndCallReason2};k.prototype.setRemoteEnded=function(l){this.$RTCEndCallReason3=l?"remote":"local";return this};k.prototype.toStrName=function(){var l=arguments.length<=0||arguments[0]===undefined?true:arguments[0];return l?this.$RTCEndCallReason5()+"_"+this.$RTCEndCallReason3:this.$RTCEndCallReason5()};k.prototype.$RTCEndCallReason5=function(){if(this.$RTCEndCallReason1<0||this.$RTCEndCallReason1>i.strNames.length)return"Unknown";return i.strNames[this.$RTCEndCallReason1]};k.prototype.getReasonID=function(){return this.$RTCEndCallReason1};k.prototype.toString=function(){var l=arguments.length<=0||arguments[0]===undefined?false:arguments[0],m=(this.$RTCEndCallReason6()||"").toString();return l?m+" "+this.$RTCEndCallReason7():m};k.prototype.$RTCEndCallReason6=function(){__p&&__p();switch(this.$RTCEndCallReason1){case i.NO_ANSWER_TIMEOUT:case i.IGNORE_CALL:return h._("No Answer");case i.OTHER_NOT_CAPABLE:if(this.$RTCEndCallReason2===j.MCU_INVALID_STREAM_CONFIGURATION)return h._("Too many clients connected to the room");case i.INCOMING_TIMEOUT:case i.NO_PERMISSION:case i.OTHER_CARRIER_BLOCKED:return h._("Not Reachable");case i.SIGNALING_MESSAGE_FAILED:case i.WEBRTC_ERROR:case i.NO_UI_ERROR:case i.CALLER_NOT_VISIBLE:case i.CLIENT_ERROR:return h._("Call Failed");case i.UNSUPPORTED_VERSION:return h._("Can't Connect Call");case i.IN_ANOTHER_CALL:return h._("In Another Call");case i.CARRIER_BLOCKED:return h._("Switch to Wi-Fi to complete your call");case i.CLIENT_INTERRUPTED:return h._("Call Interrupted");case i.HANGUP_CALL:case i.ACCEPT_AFTER_HANGUP:return h._("Call Ended");case i.CONNECTION_DROPPED:return h._("Connection Lost");case i.OTHER_INSTANCE_HANDLED:return null;default:return null}};k.prototype.$RTCEndCallReason7=function(){__p&&__p();if(this.$RTCEndCallReason1!==i.OTHER_NOT_CAPABLE&&this.$RTCEndCallReason1!==i.SIGNALING_MESSAGE_FAILED)return"";switch(this.$RTCEndCallReason2){case j.REMOTE_PEER_HANGUP:case j.REMOTE_PEER_REJECT:return"";case j.CLOSED_BY_MCU:return"- Call expired";case j.CLOSED_AS_STALE:return"- Server failed, call is stale";case j.CALL_INITIALIZATION_FAILED:return"- Call initialization to room failed";case j.SIP_CONNECTION_INITIALIZATION_FAILED:return"or No Answer";case j.LOST_MCU_CONNECTION:return"- MCU Media connection failed";case j.LOST_MCU_THRIFT_CONNECTION:return"- MCU infrastructure dropped connection";case j.LOST_SIP_ADAPTER_CONNECTION:return"- SIP infrastructure dropped connection";case j.MCU_NO_AUDIO_STREAM:return"- Invalid audio stream";case j.MCU_INVALID_STREAM_CONFIGURATION:return"- Invalid stream configuration";case j.UNKNOWN:default:return"- Unexpected call failure: "+(this.$RTCEndCallReason2||"null")}};k.fromHangupReason=function(l){switch(l){case c("FBRTCHangupReason").IGNORE_CALL:return new k(i.IGNORE_CALL);case c("FBRTCHangupReason").NO_ANSWER_TIMEOUT:return new k(i.NO_ANSWER_TIMEOUT);case c("FBRTCHangupReason").HANGUP_CALL:return new k(i.HANGUP_CALL);case c("FBRTCHangupReason").CLIENT_ERROR:return new k(i.CLIENT_ERROR);case c("FBRTCHangupReason").IN_ANOTHER_CALL:return new k(i.IN_ANOTHER_CALL);case c("FBRTCHangupReason").CLIENT_INTERRUPTED:return new k(i.CLIENT_INTERRUPTED);default:return new k(i.HANGUP_CALL)}};k.fromDismissRequest=function(l){__p&&__p();if(!l)return new k(i.HANGUP_CALL);switch(l.reason){case c("FBRTCDismissReason").ANSWERED_ON_ANOTHER_DEVICE:case c("FBRTCDismissReason").REJECTED_ON_ANOTHER_DEVICE:return new k(i.OTHER_INSTANCE_HANDLED);case c("FBRTCDismissReason").CALL_ENDED:return new k(i.HANGUP_CALL);case c("FBRTCDismissReason").IN_ANOTHER_CALL:return new k(i.IN_ANOTHER_CALL);case c("FBRTCDismissReason").CONNECTION_DROPPED:return new k(i.CONNECTION_DROPPED);case c("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return new k(i.HANGUP_CALL);case c("FBRTCDismissReason").REJECTED_BY_CALLEE:return new k(i.IGNORE_CALL);case c("FBRTCDismissReason").INTERNAL_ERROR:return new k(i.SIGNALING_MESSAGE_FAILED);default:return new k(i.HANGUP_CALL)}};k.fromResponseStatusCode=function(l){switch(l){case c("FBRTCRtcResponseStatusCode").PRECONDITION_FAILURE:case c("FBRTCRtcResponseStatusCode").METHOD_NOT_ALLOWED:case c("FBRTCRtcResponseStatusCode").UNAUTHORIZED:return new k(i.NO_PERMISSION);case c("FBRTCRtcResponseStatusCode").SERVICE_UNAVAILABLE:return new k(i.SIGNALING_MESSAGE_FAILED);case c("FBRTCRtcResponseStatusCode").SERVER_INTERNAL_ERROR:case c("FBRTCRtcResponseStatusCode").BAD_REQUEST:case c("FBRTCRtcResponseStatusCode").BUSY_HERE:case c("FBRTCRtcResponseStatusCode").CONDITIONAL_REQUEST_FAILED:case c("FBRTCRtcResponseStatusCode").NOT_FOUND:return new k(i.CLIENT_ERROR);default:return new k(i.HANGUP_CALL)}};f.exports=k}),null);
__d("RTCUserMediaConstraints",["FBRTCConstants","RTCConfig"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FBRTCConstants").RTCConstraints,i=c("FBRTCConstants").VideoQuality,j={width:h.FHD_WIDTH,height:h.FHD_HEIGHT,frameRate:h.FRAME_RATE},k={width:h.HD_WIDTH,height:h.HD_HEIGHT,frameRate:h.FRAME_RATE},l={width:h.SD_WIDTH,height:h.SD_HEIGHT,frameRate:h.FRAME_RATE},m={width:h.LQ_WIDTH,height:h.LQ_HEIGHT,frameRate:h.LQ_FRAME_RATE},n={audio:function u(v){return v?{deviceId:v}:true},video:function u(v,w){var x=arguments.length<=2||arguments[2]===undefined?c("RTCConfig").CollaborationCallQuality.videoToRoom:arguments[2];if(v===i.NO_VIDEO)return false;var y=w?{deviceId:w}:null;if(v===i.CUSTOM_VIDEO)return babelHelpers["extends"]({},x,y);var z=o(v);return babelHelpers["extends"]({width:p(z,"width"),height:p(z,"height"),frameRate:p(z,"frameRate",{frameRate:10})},y)},chromeMediaSource:function u(v,w){var x=v.video,y=n.chromify(x);if(typeof y!=="object")return{audio:false,video:Boolean(y)};var z=y.mandatory,A=y.optional,B=A===undefined?[]:A;return{audio:false,video:{mandatory:babelHelpers["extends"]({},z,{chromeMediaSource:"desktop",chromeMediaSourceId:w}),optional:[{googTemporalLayeredScreencast:true}].concat(B)}}},chromify:function u(v){__p&&__p();if(!v||typeof v!=="object")return Boolean(v);if(!t(v))return v;var w=v.mandatory,x=w===undefined?{}:w,y=v.optional,z=y===undefined?[]:y;for(var A=Object.entries(v),B=Array.isArray(A),C=0,A=B?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(B){if(C>=A.length)break;D=A[C++]}else{C=A.next();if(C.done)break;D=C.value}var E=D,F=E[0],G=E[1];if(F==="require"||F==="advanced"||F==="mediaSource")continue;var H=G&&typeof G==="object"?G:{ideal:G};if(Number.isFinite(H.exact)){H.min=H.exact;H.max=H.exact}var I=H.ideal,J=H.exact;if(I!==undefined)if(Number.isFinite(I)){var K,L;z.push((K={},K[s(F,"min")]=I,K),(L={},L[s(F,"max")]=I,L))}else{var M;z.push((M={},M[s(F)]=I,M))}if(J!==undefined&&!Number.isFinite(J))x[s(F)]=J;else{var N=["min","max"];for(var O=0;O<N.length;O++){var P=N[O];if(Number.isFinite(H[P]))x[s(F,P)]=H[P]}}}if(v.advanced)z.push.apply(z,v.advanced);var Q={};if(Object.keys(x).length>0)Q.mandatory=x;if(z.length>0)Q.optional=z;return Q}};function o(u){switch(u){case i.FHD_VIDEO:return j;case i.HD_VIDEO:return k;case i.LQ_VIDEO:return m;case i.SD_VIDEO:return l;default:return k}}function p(u,v){var w=arguments.length<=2||arguments[2]===undefined?q(u):arguments[2],x=u[v];return{min:Math.min(w[v],x),max:Math.max(r(u)[v],x),ideal:x}}function q(u){switch(u){case j:return k;case k:return l;case l:case m:default:return m}}function r(u){switch(u){case m:return l;case l:return k;case k:case j:default:return j}}function s(u,s){if(s)return""+s+u.charAt(0).toUpperCase()+u.slice(1);return u==="deviceId"?"sourceId":u}function t(u){return Object.keys(u).some(function(v){return v!=="mandatory"&&v!=="optional"})}f.exports=n}),null);
__d("MediaStream",[],(function a(b,c,d,e,f,g){f.exports=window.MediaStream||window.webkitMediaStream}),null);
__d("RTCAudioTrackNoiseDetector",["invariant","Promise","MediaStream"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i="audio track with absolute silence",j="audio track data timeout",k='wrong track type, expected "audio"',l=100,m={ABSOLUTE_SILENCE_ERROR:i,DATA_TIMEOUT_ERROR:j,WRONG_TRACK_TYPE_ERROR:k,detect:function n(o,p){__p&&__p();if("kind"in o&&o.kind!=="audio")return c("Promise").reject(new Error(k));var q=new(c("MediaStream"))();q.addTrack(o);var r=new AudioContext(),s=r.createMediaStreamSource(q),t=r.createScriptProcessor(0,1,1),u=l,v=function v(){__p&&__p();t!=null||h(0);t.onaudioprocess=null;t.disconnect();t=null;s!=null||h(0);s.disconnect();s=null;q!=null||h(0);q.removeTrack(o);q=null;r!=null||h(0);return c("Promise").resolve(r.close())["catch"](function(){return c("Promise").resolve()}).then(function(){r=null})};return c("Promise").race([new(c("Promise"))(function(w,x){__p&&__p();t!=null||h(0);t.onaudioprocess=function(y){__p&&__p();var z=y.inputBuffer;for(var A=z.getChannelData(0),B=Array.isArray(A),C=0,A=B?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(B){if(C>=A.length)break;D=A[C++]}else{C=A.next();if(C.done)break;D=C.value}var E=D;if(E!==0){w();return}}if(u>0)u--;else x(new Error(i))};s!=null||h(0);s.connect(t);r!=null||h(0);t.connect(r.destination)}),new(c("Promise"))(function(w){return setTimeout(w,p)}).then(function(){throw new Error(j)})]).then(function(){return v()})["catch"](function(w){return v().then(function(){throw w})})}};f.exports=m}),null);
__d("RTCVideoTrackActivityDetector",["invariant","Promise","MediaStream"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=window.URL||window.webkitURL,j=HTMLMediaElement&&"srcObject"in HTMLMediaElement.prototype,k="video track playback timeout",l="unexpected video track ready state",m='wrong track type, expected "video"',n={PLAYBACK_TIMEOUT_ERROR:k,WRONG_READY_STATE_ERROR:l,WRONG_TRACK_TYPE_ERROR:m,detect:function o(p,q){__p&&__p();if("kind"in p&&p.kind!=="video")return c("Promise").reject(new Error(m));var r=document.createElement("video");r.muted=true;var s=new(c("MediaStream"))();s.addTrack(p);var t=void 0,u=null,v=function v(){__p&&__p();clearInterval(u);if(r){r.pause();if(j)r.srcObject=null;else if(r.src){i.revokeObjectURL(r.src);r.src=""}r.removeEventListener("timeupdate",t);r=null}if(s){s.removeTrack(p);s=null}};return c("Promise").race([new(c("Promise"))(function(w,x){__p&&__p();r!=null||h(0);if(j)r.srcObject=s;else r.src=i.createObjectURL(s);t=function t(y){r!=null||h(0);if(r.currentTime>0)if(p.readyState==="live"){w();v()}else x(new Error(l))};c("Promise").resolve(r.pause()).then(function(){r!=null||h(0);return r.play()}).then(function(){t();r!=null||h(0);r.addEventListener("timeupdate",t);u=setInterval(t,50)})["catch"](function(y){return x(y)})}),new(c("Promise"))(function(w){return setTimeout(w,q)}).then(function(){throw new Error(k)})])["catch"](function(w){v();throw w})}};f.exports=n}),null);
__d("RTCMediaStreamValidator",["Promise","RTCAudioTrackNoiseDetector","RTCVideoTrackActivityDetector"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="no audio tracks",i="no video tracks",j="too many audio tracks",k="too many video tracks",l="unexpected audio track(s)",m="unexpected video track(s)",n={NO_AUDIO_TRACKS_ERROR:h,NO_VIDEO_TRACKS_ERROR:i,TOO_MANY_AUDIO_TRACKS_ERROR:j,TOO_MANY_VIDEO_TRACKS_ERROR:k,UNEXPECTED_AUDIO_TRACKS_ERROR:l,UNEXPECTED_VIDEO_TRACKS_ERROR:m,validate:function q(r,s){var t=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],u=arguments.length<=3||arguments[3]===undefined?{}:arguments[3],v=t.audio,w=v===undefined?true:v,x=t.video,y=x===undefined?true:x,z=u.audio,A=z===undefined?1e3:z,B=u.video,C=B===undefined?1e3:B;return c("Promise").all([o(r,s,w,A),p(r,s,y,C)]).then(function(){return r})}};function o(q,r,s,t){var u=q.getAudioTracks();if(!r.audio)return u.length>0?c("Promise").reject(new Error(l)):c("Promise").resolve(q);if(u.length<1)return c("Promise").reject(new Error(h));else if(u.length>1)return c("Promise").reject(new Error(j));return!s?c("Promise").resolve(q):c("RTCAudioTrackNoiseDetector").detect(u[0],t).then(function(){return q})}function p(q,r,s,t){var u=q.getVideoTracks();if(!r.video)return u.length>0?c("Promise").reject(new Error(m)):c("Promise").resolve(q);if(u.length<1)return c("Promise").reject(new Error(i));else if(u.length>1)return c("Promise").reject(new Error(k));return!s?c("Promise").resolve(q):c("RTCVideoTrackActivityDetector").detect(u[0],t).then(function(){return q})}f.exports=n}),null);
__d("UserMediaRequestError",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,Error);i=h&&h.prototype;function j(m,n,o){i.constructor.call(this,n);this.$UserMediaRequestError1=o;this.$UserMediaRequestError2=n;this.$UserMediaRequestError3=m}j.createFromNative=function(m){var n=m.message,o=m.name,p=m.constraint;return new j(o,n,p||"")};j.prototype.getNativeErrorName=function(){return this.$UserMediaRequestError3};j.prototype.getName=function(){return l(this.$UserMediaRequestError3)};j.prototype.getMessage=function(){return k(this.$UserMediaRequestError2)};j.prototype.isRecoverableError=function(){if(this.$UserMediaRequestError3==="InvalidStateError")return true;return false};j.prototype.getEndCallSubReason=function(){return"MediaFailed: "+this.getName()+", "+this.$UserMediaRequestError1};function k(m){switch(m){case"The operation is insecure.":return"The request is not allowed by the user agent or the platform in the current context.";default:return m}}function l(m){switch(m){case"ConstraintNotSatisfiedError":return"OverconstrainedError";case"NO_DEVICES_FOUND":case"DevicesNotFoundError":return"NotFoundError";case"MediaDeviceFailedDueToShutdown":case"MediaDeviceKillSwitchOn":case"TrackStartError":return"NotReadableError";case"PermissionDeniedError":case"PERMISSION_DENIED":case"PermissionDismissedError":return"NotAllowedError";default:return m}}f.exports=j}),null);
__d("RTCUtils",["invariant","Promise","CurrentUser","FBRTCConstants","FBRTCUtils","FBRTCStreamTester","RTCAudioTrackNoiseDetector","RTCConfig","RTCMediaDevices","RTCEndCallReason","RTCMediaStreamValidator","RTCScreenSharing","RTCUser","RTCUserMediaConstraints","RTCVideoTrackActivityDetector","URI","UserAgent","UserMediaRequestError","randomInt"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("FBRTCConstants").VideoQuality,j=c("RTCAudioTrackNoiseDetector").DATA_TIMEOUT_ERROR,k=c("RTCVideoTrackActivityDetector").PLAYBACK_TIMEOUT_ERROR,l={generateRandomInt:function m(){return c("randomInt")(0,4294967294)+1},isGroupCall:function m(n){return n.split(":")[0]==="GROUP"},isMessengerCall:function m(n){return n.split(":")[0]==="MESSENGER"},isPartiesCall:function m(n){return n.split(":")[0]==="BONFIRE"},getPeerID:function m(n){if(l.isGroupCall(n))throw new Error("Not a P2P call: "+n);var o=n.split(":"),p=o.slice(1);return p[0]===c("CurrentUser").getID()?p[1]:p[0]},getMessengerCallID:function m(n){if(!l.isMessengerCall(n))throw new Error("Not a Messenger call: "+n);return Number(n.split(":")[1])},createRequestHeader:function m(n,o,p,q){var r={type:n,transactionId:l.generateRandomInt().toString(),retryCount:0,conferenceName:o};if(p)r.serverInfoData=p;if(q)r.extensions={esc_p2p_call_id:q};return r},createResponseHeader:function m(n,o){var p={type:n.type,transactionId:n.transactionId,retryCount:0,conferenceName:n.conferenceName,responseStatusCode:o};if(n.serverInfoData)p.serverInfoData=n.serverInfoData;return p},testUserMediaStream:function m(n){if(!c("RTCConfig").www_video_call_v2_stream_tester)return c("Promise").resolve(n);var o=new(c("FBRTCStreamTester"))();return new(c("Promise"))(function(p,q){o.addListener("streamWorking",function(){p(n)});o.addListener("streamBroken",function(){q(new(c("UserMediaRequestError"))("StreamFailedToStart","",""))});o.testStream(n)})},maybeRemoveVideoConstraint:function m(n){return c("RTCMediaDevices").enumerateDevices().then(function(o){if(o.some(function(p){return p.kind==="videoinput"}))return n;return babelHelpers["extends"]({},n,{video:false})})["catch"](function(){return c("Promise").resolve(n)})},getUserMediaWithAudioFallback:function m(n){return l.maybeRemoveVideoConstraint(n).then(l.getUserMedia).then(l.testUserMediaStream)["catch"](function(o){if(n.video&&typeof o.getName==="function"&&(o.getName()==="NotFoundError"||o.getName()==="StreamFailedToStart"||o.getName()==="OverconstrainedError"))return l.getUserMedia({video:false,audio:n.audio});throw o})},getUserMedia:function m(n){__p&&__p();var o=navigator,p=o.mediaDevices;if(typeof n.video==="object"&&n.video.mediaSource)return c("RTCScreenSharing").getUserMedia(n);var q=l._parseConstraints(n);return new(c("Promise"))(function(r,s){__p&&__p();if(p&&typeof p.getUserMedia==="function")r(p.getUserMedia(q));else if(navigator.getUserMedia)navigator.getUserMedia(q,r,s);else if(navigator.webkitGetUserMedia)navigator.webkitGetUserMedia(q,r,s);else if(navigator.mozGetUserMedia)navigator.mozGetUserMedia(q,r,s);else if(navigator.msGetUserMedia)navigator.msGetUserMedia(q,r,s);else s("getUserMedia not supported")})["catch"](function(r){throw c("UserMediaRequestError").createFromNative(r)})},_parseConstraints:function m(n){if(c("UserAgent").isBrowser("Chrome")||c("UserAgent").isBrowser("Opera")){var o=n.audio,p=n.video,q={};if(o!=undefined)q.audio=c("RTCUserMediaConstraints").chromify(o);if(p!=undefined)q.video=c("RTCUserMediaConstraints").chromify(p);return q}return n},getUserMediaWithValidation:function m(n){__p&&__p();var o=arguments.length<=1||arguments[1]===undefined?{audio:true,video:true}:arguments[1],p=arguments.length<=2||arguments[2]===undefined?5:arguments[2],q=arguments.length<=3||arguments[3]===undefined?{audio:1e3,video:1e3}:arguments[3];return new(c("Promise"))(function(r,s){__p&&__p();var t=function t(u){__p&&__p();l.getUserMedia(n).then(function(v){return c("RTCMediaStreamValidator").validate(v,n,o,q).then(function(v){return r({stream:v})})["catch"](function(w){if(w.message===j||w.message===k)r({stream:v,err:w});else{l.stopMediaStream(v);throw w}})},s)["catch"](function(v){if(u>0)t(u-1);else s(v)})};t(p)})},initLocalStream:function m(n){return l.getUserMedia({audio:c("RTCUserMediaConstraints").audio(),video:c("RTCUserMediaConstraints").video(n?i.HD_VIDEO:i.NO_VIDEO)})},initLocalScreenStream:function m(){var n=arguments.length<=0||arguments[0]===undefined?"screen":arguments[0];return l.getUserMedia({audio:false,video:babelHelpers["extends"]({},c("RTCConfig").CollaborationCallQuality.screen_v2||c("RTCConfig").CollaborationCallQuality.screen,{mediaSource:n})})},isFullScreen:function m(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},requestFullScreen:function m(){var n=arguments.length<=0||arguments[0]===undefined?document.documentElement:arguments[0];if(typeof n.requestFullscreen==="function")n.requestFullscreen();else if(typeof n.msRequestFullscreen==="function")n.msRequestFullscreen();else if(typeof n.mozRequestFullScreen==="function")n.mozRequestFullScreen();else if(typeof n.webkitRequestFullscreen==="function")n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},exitFullScreen:function m(){if(typeof document.exitFullscreen==="function")document.exitFullscreen();else if(typeof document.msExitFullscreen==="function")document.msExitFullscreen();else if(typeof document.mozCancelFullScreen==="function")document.mozCancelFullScreen();else if(typeof document.webkitExitFullscreen==="function")document.webkitExitFullscreen()},toggleFullScreen:function m(){if(l.isFullScreen())l.exitFullScreen();else l.requestFullScreen()},endCallReasonFromHangupReason:function m(n){return c("RTCEndCallReason").fromHangupReason(n).getReasonID()},endCallReasonFromDismissRequest:function m(n){return c("RTCEndCallReason").fromDismissRequest(n).getReasonID()},endCallReasonFromResponseStatusCode:function m(n){return c("RTCEndCallReason").fromResponseStatusCode(n).getReasonID()},stopMediaStream:function m(n){__p&&__p();if(!n.active&&"active"in n)return;for(var o=n.getTracks(),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;if(s.readyState!=="ended")s.stop()}},transferAudioTracks:function m(n,o){__p&&__p();for(var p=o.getAudioTracks(),q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var s;if(q){if(r>=p.length)break;s=p[r++]}else{r=p.next();if(r.done)break;s=r.value}var t=s;n.addTrack(t);o.removeTrack(t)}},payloadParticipantsToRTCUsers:function m(n){return n.map(function(o){var p=o.big_image_src||o.image_src;o.fbid||h(0);return new(c("RTCUser"))({FBID:o.fbid,profileUrl:new(c("URI"))(o.href),profilePictureUrl:p,isMessengerUser:!!o.is_messenger_user,isPartiesUser:!!o.is_parties_user,userName:o.name,userShortName:o.short_name,vanity:o.vanity||""})})},getStreamVideoResolution:function m(n){__p&&__p();return new(c("Promise"))(function(o,p){__p&&__p();var q=document.createElement("video");c("FBRTCUtils").attachMediaStream(q,n);var r=function r(){q.removeEventListener("loadedmetadata",s);q.removeEventListener("error",t);c("FBRTCUtils").attachMediaStream(q,null)},s=function s(){o({height:q.videoHeight,width:q.videoWidth});r()},t=function t(){p(q.error);r()};q.addEventListener("loadedmetadata",s);q.addEventListener("error",t)})},isScreenSharingSupported:function m(){return c("UserAgent").isBrowser("Chrome")}};f.exports=l}),null);
__d("WorkplaceChatHelper",[],(function a(b,c,d,e,f,g){"use strict";var h={isWorkplaceChatDesktop:function i(){return window.workchat!=null},getScreenSharingSourceID:function i(){return window.workchat.getScreenSharingSourceID()},stopScreenSharing:function i(){return window.workchat.stopScreenSharing()}};f.exports=h}),null);
__d("RTCScreenSharing",["Promise","CollabRTCChromeScreenSharing","RTCUserMediaConstraints","RTCUtils","UserAgent","WorkplaceChatHelper"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="SCREEN_SHARING_NOT_SUPPORTED",i="UNEXPECTED_ERROR",j={SCREEN_SHARING_NOT_SUPPORTED:h,getUserMedia:function k(l){__p&&__p();if(c("UserAgent").isBrowser("Chrome"))return(c("WorkplaceChatHelper").isWorkplaceChatDesktop()?c("WorkplaceChatHelper").getScreenSharingSourceID():c("CollabRTCChromeScreenSharing").getSourceID()).then(function(m){return c("RTCUtils").getUserMedia(c("RTCUserMediaConstraints").chromeMediaSource(l,m))}).then(function(m){__p&&__p();for(var n=m.getTracks(),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;r.addEventListener("ended",function(s){return setTimeout(function(){if(!m.active)j.stop()})})}return m});return c("Promise").reject(new Error(h))},stop:function k(){if(c("UserAgent").isBrowser("Chrome"))return c("WorkplaceChatHelper").isWorkplaceChatDesktop()?c("WorkplaceChatHelper").stopScreenSharing():c("CollabRTCChromeScreenSharing").stop();return c("Promise").reject(new Error(i))}};f.exports=j}),null);
__d("AudioContextSingleton",[],(function a(b,c,d,e,f,g){var h=window.AudioContext||window.webkitAudioContext,i={get:function j(){if(!this._audioContext)this._audioContext=new h();return this._audioContext}};f.exports=i}),null);
__d("BanzaiScribe",["Banzai"],(function a(b,c,d,e,f,g){function h(j){return{log:function k(l,m,n){var o=[m];if(n!=null)o.push(n);c("Banzai").post("scribe:"+l,o,j)}}}var i=h({});i.create=h;f.exports=i}),null);