if (self.CavalryLogger) { CavalryLogger.start_js(["vx6KX"]); }

__d("Stars.react",["cx","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes,l=4,m=["emptyStar","onefourthStar","halfStar","threefourthsStar","fullStar"];i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){var o,p;"use strict";for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.getNumSubStars=function(t){return Math.round(t*l)},p}n.prototype.render=function(){"use strict";var o=this.getNumSubStars(this.props.count),p=Array.apply(null,{length:this.props.max}).map(function(r,s){return o-s*l}).map(function(r){return Math.max(0,Math.min(l,r))}).map(function(r,s){return c("React").createElement("i",{key:s,className:m[r]})}),q="uiStars"+(this.props.size==="large"?" largeStars":"");return c("React").createElement("div",{className:q,title:this.props.title},p)};n.propTypes={count:k.number.isRequired,max:k.number,size:k.oneOf(["small","large"]),title:k.string};n.defaultProps={max:5,size:"small"};f.exports=n}),null);
__d("P2PCreditCardForm.react",["CreditCardFormParam","FBPaymentsCreditCardForm_DEPRECATED.react","MessengerPaymentProductType","P2PAPIUtils","P2PAPI","React","getObjectValues"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={binError:"",previousBINNumber:"",validateBINRequestID:""},this.handleValidateBINNumberSuccess=function(){this.setState({binError:""})}.bind(this),this.handleValidateBINNumberError=function(q){var r=q.message;this.setState({binError:r})}.bind(this),this.validateBIN=function(q){__p&&__p();var r=void 0,s=void 0;q=q.replace(/ /g,"");r=q.substr(0,6);if(r!==this.state.previousBINNumber&&r.length>=6){s=c("P2PAPIUtils").genRequestID();this.setState({validateBINRequestID:s});c("P2PAPI").validateBINNumber({binNumber:r,requestID:s})}else if(r.length<6)this.setState({binError:"",validateBINRequestID:""});this.setState({previousBINNumber:r})}.bind(this),this.handleValidation=function(q,r){var s=r[c("CreditCardFormParam").CARD_NUMBER];if(!this.props.editMode&&this.props.productType===c("MessengerPaymentProductType").P2P&&s)this.validateBIN(s);this.props.onValidation(q,r)}.bind(this),m}k.prototype.componentWillReceiveProps=function(l){var m=l.asyncRequestState,n=m?m[this.state.validateBINRequestID]:null;if(n){this.setState({validateBINRequestID:""});if(n.error)this.handleValidateBINNumberError(n.error);else this.handleValidateBINNumberSuccess()}};k.prototype.render=function(){return c("React").createElement(c("FBPaymentsCreditCardForm_DEPRECATED.react"),babelHelpers["extends"]({},this.props,{autoTab:true,allowCredit:this.props.productType===c("MessengerPaymentProductType").MESSENGER_COMMERCE,binError:this.state.binError,onValidation:this.handleValidation,postalRegex:this.props.postalRegex}))};k.propTypes={asyncRequestState:j.object,onValidation:j.func.isRequired,postalRegex:j.string,productType:j.oneOf(c("getObjectValues")(c("MessengerPaymentProductType")))};k.defaultProps={asyncRequestState:{},productType:c("MessengerPaymentProductType").P2P};f.exports=k}),null);
__d("P2PAddCreditCardDialog.react",["cx","fbt","CreditCardFormParam","MessengerEnvironment","Link.react","MessengerPaymentProductType","Middot.react","P2PAPI","P2PAPIUtils","P2PPaymentConfig","P2PCreditCardStore","P2PCreditCardForm.react","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PLinkConstants","React","P2PButton.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","emptyFunction","getObjectValues"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="fbP2PAddCreditCardDialog_learnMoreSentenceID";j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={isValid:false,formData:{},loading:false,requestID:"",saveErrors:null,asyncRequestState:{}},this.onCreditCardStoreChange=function(){var t=c("P2PCreditCardStore").getAsyncRequestState(),u=t[this.state.requestID];this.setState({asyncRequestState:t});if(u){this.setState({requestID:""});if(u.error)this.handleOnSaveError(u.error);else this.handleOnSaveSuccess(u)}}.bind(this),this.onSaveClick=function(){var t,u=this.props.p2pPaymentConfig;if(!u){this.setState({loading:false,saveErrors:{general:{message:i._("Cannot identify country.")}}});return}var v=c("P2PAPIUtils").genRequestID();this.setState({loading:true,requestID:v,saveErrors:null,formData:babelHelpers["extends"]({},this.state.formData,(t={},t[c("CreditCardFormParam").COUNTRY]=u.countryCode,t))},function(){c("P2PAPI").addCreditCard(babelHelpers["extends"]({requestID:v,product_type:this.props.productType},this.state.formData))}.bind(this));this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_CARD_DETAILS)}.bind(this),this.handleValidation=function(t,u){this.setState({isValid:t,formData:u})}.bind(this),this.onToggle=function(t){if(!t){this.props.onCancel();this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_ADD_CARD)}}.bind(this),this.onCancelClicked=function(){this.onToggle(false)}.bind(this),p}n.prototype.componentDidMount=function(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_ADD_CARD);this.creditCardStoreSub=c("P2PCreditCardStore").addListener("change",this.onCreditCardStoreChange)};n.prototype.componentWillUnmount=function(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null}};n.prototype.log=function(o,p){c("P2PLogger").log(o,babelHelpers["extends"]({www_event_flow:this.props.eventFlow,object_id:this.props.loggingObjectID},this.props.loggingData,p))};n.prototype.handleOnSaveSuccess=function(o){this.props.onSuccess(o);this.log(c("P2PPaymentLoggerEvent").UI_ACTN_ADD_CARD_SUCCESS)};n.prototype.handleOnSaveError=function(o){this.setState({loading:false,saveErrors:o});this.log(c("P2PPaymentLoggerEvent").UI_ACTN_ADD_CARD_FAIL,{message:o&&o.general?o.general.message:""})};n.prototype.isSaveButtonDisabled=function(){return this.state.loading||!this.state.isValid};n.prototype.renderAddCardForm=function(){var o=this.props.p2pPaymentConfig;if(!o)return null;var p=void 0,q=this.props.title;if(this.props.showCancelButton)p=c("React").createElement(c("P2PButton.react"),{use:"default",size:"medium",label:this.props.cancelButtonText,disabled:this.state.loading,onClick:this.onCancelClicked});return c("React").createElement("div",null,c("React").createElement(c("P2PDialogTitle.react"),null,q),c("React").createElement(c("P2PDialogBody.react"),null,c("React").createElement(c("P2PText.react"),{type:"primary",className:"_3-96"},this.props.text),c("React").createElement(c("P2PCreditCardForm.react"),{asyncRequestState:this.state.asyncRequestState,compactMode:true,onValidation:this.handleValidation,postalRegex:o.postalRegex,productType:this.props.productType,saveErrors:this.state.saveErrors,showIcons:false,showLabels:true,showPlaceholderOnFocus:true,showSecondaryIcons:true,useGutters:true}),c("React").createElement(c("P2PText.react"),{className:"_3-8y",id:m,type:"secondary"},i._("Your payment info is stored securely."),c("React").createElement("div",null,c("React").createElement(c("Link.react"),{"aria-describedby":m,href:c("P2PLinkConstants").addDebitCardHelpURI,target:"_blank"},i._("Learn More")),c("React").createElement(c("Middot.react"),null),c("React").createElement(c("Link.react"),{"aria-describedby":m,href:c("P2PLinkConstants").paymentsTermsURI,target:"_blank"},i._("Terms"))))),c("React").createElement(c("P2PDialogFooter.react"),{leftContent:this.props.leftContent},p,c("React").createElement(c("P2PButton.react"),{use:"confirm",size:"medium",label:this.props.saveButtonText,disabled:this.isSaveButtonDisabled(),onClick:this.onSaveClick})))};n.prototype.render=function(){if(!this.props.p2pPaymentConfig)return null;return c("React").createElement(c("P2PDialog.react"),{behaviors:this.props.behaviors,layerHideOnBlur:false,ref:"dialog",onToggle:this.onToggle,repositionOnUpdate:true,shown:true,width:this.props.width},this.renderAddCardForm(),c("React").createElement(c("P2PLoadingMask.react"),{visible:this.state.loading}))};n.propTypes={cancelButtonText:l.string,eventFlow:l.string.isRequired,leftContent:l.object,loggingData:l.object,loggingObjectID:l.string,onCancel:l.func,onSuccess:l.func,p2pPaymentConfig:l.shape({currencyCode:l.string.isRequired,enabledActions:l.object.isRequired,enabledPaymentMethods:l.object.isRequired,maxTransferAmount:l.number.isRequired,title:l.string,use_payment_module_method_picker:l.bool,countryCode:l.string.isRequired,postalRegex:l.string.isRequired}).isRequired,productType:l.oneOf(c("getObjectValues")(c("MessengerPaymentProductType"))),saveButtonText:l.string,showCancelButton:l.bool,text:l.string,title:l.string};n.defaultProps={cancelButtonText:i._("Cancel"),loggingData:{},onCancel:c("emptyFunction"),onSuccess:c("emptyFunction"),p2pPaymentConfig:c("P2PPaymentConfig").config,productType:c("MessengerPaymentProductType").P2P,saveButtonText:i._("Save"),showCancelButton:true,text:i._("Please enter a Visa or MasterCard debit card. Credit cards can't be used."),title:i._("Add Debit Card"),width:c("MessengerEnvironment").messengerui?480:430};f.exports=n}),null);
__d("OzDev",["OzConfig","immutable","OzActions","OzHelpers","OzNotify","OzAPI","OzMount","OzStores","OzTwilio"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("immutable").Map;function i(m){c("OzConfig").updateConfig(c("immutable").fromJS(m))}function j(){for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];c("OzConfig").updateConfig(h().setIn(n,!c("OzConfig").getInStaticConfig(n)))}function k(){var k=arguments.length<=0||arguments[0]===undefined?true:arguments[0];c("OzConfig").updateConfig(h({devMode:k}))}document.addEventListener("keydown",function(m){__p&&__p();if(m.which===84&&m.ctrlKey)j("display-tasks");if(m.which===89&&m.ctrlKey)j("GK","timeline");if(m.which===82&&m.ctrlKey&&!m.shiftKey)j("GK","responsivenessV2");if(m.which===82&&m.ctrlKey&&m.shiftKey)j("GK","responsivenessExecTime");if(m.which===79&&m.ctrlKey){j("GK","openTableAPI");var n=c("OzConfig").getInStaticConfig(["GK","openTableAPI"]);c("OzNotify").info("openTableAPI set to "+n)}});function l(){var m=["selectAIPick"];m.map(function(n){c("OzActions")[n].listen(function(){for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return c("OzHelpers").debug("[Action]",n,p)})})}l();f.exports={api:c("OzAPI"),actions:c("OzActions"),config:c("OzConfig"),devMode:k,updateConfig:i,toggleConfig:j,h:c("OzHelpers"),mount:c("OzMount"),stores:c("OzStores"),twilio:c("OzTwilio"),notify:c("OzNotify")}}),null);