if (self.CavalryLogger) { CavalryLogger.start_js(["EHSIh"]); }

__d("ComposerCitySharer",["Arbiter","ArbiterMixin","AsyncRequest","CSS","DOM","Event","Parent","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j={};h=babelHelpers.inherits(k,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function k(l){"use strict";i.constructor.call(this);this.root=l}k.prototype.init=function(l,m,n,o,p){"use strict";__p&&__p();this.cityLink=l;this.closeButton=m;this.input=n;this.disableShareInput=o;this._options=p;this.cityName=c("DOM").find(this.cityLink,".cityName");this.data={};c("Event").listen(this.closeButton,"click",function(){this.clearCity();this.disableShareInput.value="true"}.bind(this));j[this.root]=this;this.inform("init",null,c("Arbiter").BEHAVIOR_PERSISTENT)};k.prototype.changeCity=function(l,m,n){"use strict";this.setCityId(l,m,n);this.toggleLocationSharing(l,m,n,false)};k.prototype.setCityId=function(l,m,n){"use strict";__p&&__p();if(m){this.data={city_name:l,city_page_id:m,city_id:n};this.input.value=m;var o=l.lastIndexOf(",");if(o!=-1)l=l.substring(0,o);var p=l;c("DOM").setContent(this.cityName,p);c("CSS").addClass(this.root,"ComposerCitySharerCitySelected");c("CSS").conditionShow(this.closeButton,!this._placeSelected);this.inform("change",this.data,c("Arbiter").BEHAVIOR_PERSISTENT)}};k.prototype.toggleLocationSharing=function(l,m,n,o){"use strict";if(m)new(c("AsyncRequest"))().setURI("/ajax/places/toggle_location_sharing").setData({city_id:n,city_page_id:m,city_name:l,is_default:o,session_id:this._options.session_id}).send()};k.prototype.setDefaultCity=function(l,m,n){"use strict";this._defaultCityData=[l,m,n]};k.prototype.useDefaultCity=function(){"use strict";if(this._defaultCityData){var l=this._defaultCityData[0],m=this._defaultCityData[1],n=this._defaultCityData[2];this.setCityId(l,m,n);this.toggleLocationSharing(l,m,n,true)}};k.prototype.addPlace=function(l){"use strict";if(l.city_id)this.changeCity(l.city_name,l.city_page_id,l.city_id);else this.clearCity();this._placeSelected=true;c("CSS").addClass(this.cityLink,"placeIconSelected");c("CSS").hide(this.closeButton)};k.prototype.clearPlace=function(l){"use strict";this._placeSelected=false;c("CSS").removeClass(this.cityLink,"placeIconSelected");c("CSS").conditionShow(this.closeButton,this.getValue())};k.prototype.clearCity=function(){"use strict";this.data={};this.input.value="";c("DOM").setContent(this.cityName,"");c("CSS").removeClass(this.root,"ComposerCitySharerCitySelected");c("CSS").hide(this.closeButton);this.inform("change",null,c("Arbiter").BEHAVIOR_PERSISTENT)};k.prototype.getIcon=function(){"use strict";return this.root};k.prototype.getValue=function(){"use strict";return this.input.value};k.getInstance=function(l){"use strict";var m=c("Parent").byClass(l,"ComposerCitySharer");return m&&j[m]};f.exports=k}),null);
__d("ContextualBlindSingleton",["ContextualBlind"],(function a(b,c,d,e,f,g){f.exports=new(c("ContextualBlind"))()}),null);
__d("EgoUnitClickHandler",["csx","CSS","DOM","Event","goURI"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={};i.stealHref=function(j){var k=c("DOM").find(j.parentNode,"a.ego_title");j.setAttribute("href",k.href)};i.register=function(j){__p&&__p();c("Event").listen(j,"click",function(k){var l=c("DOM").find(j,"a.ego_title");if(i.enabled&&l&&l.href)c("goURI")(l.href)});c("Event").listen(j,"mouseover",function(k){__p&&__p();var l=c("DOM").find(j,"a.ego_title"),m=c("DOM").find(j,"a._8o .img"),n=k.getTarget(),o;if(n.tagName==="A"||n.tagName==="a")o=n;else{var p=c("DOM").scry(n,"^a");if(p.length===1)o=p[0]}if(o&&o.href!=l.href&&(!m||o.href!=m.href)){c("CSS").removeClass(l,"always_underlined");i.enabled=false}else{c("CSS").addClass(l,"always_underlined");i.enabled=true}});c("Event").listen(j,"mouseout",function(k){var l=c("DOM").find(j,"a.ego_title");c("CSS").removeClass(l,"always_underlined");i.enabled=false})};f.exports=i}),null);
__d("ProfileIntroCardEditMediaFunnelLoggerEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SAVE:"save",INTRO_CARD_EDIT:"intro_card_edit",SINGLE_EDIT:"single_edit",SEE_DIALOG:"see_dialog",OPEN_PICKER:"open_picker",ADD_MEDIA:"add_media"})}),null);
__d("ProfileIntroCardEditMediaFunnelLogger",["Event","FunnelLogger","ProfileIntroCardEditMediaFunnelLoggerEvent"],(function a(b,c,d,e,f,g){__p&&__p();var h="WWW_PROFILE_INTRO_CARD_EDIT_MEDIA_FUNNEL";function i(p){c("Event").listen(p,"click",function(){c("FunnelLogger").endFunnel(h)})}function j(p){c("Event").listen(p,"click",function(){c("FunnelLogger").appendAction(h,c("ProfileIntroCardEditMediaFunnelLoggerEvent").SAVE);c("FunnelLogger").endFunnel(h)})}function k(p){c("Event").listen(p,"click",function(){c("FunnelLogger").startFunnel(h);c("FunnelLogger").appendAction(h,c("ProfileIntroCardEditMediaFunnelLoggerEvent").INTRO_CARD_EDIT)})}function l(p){c("Event").listen(p,"click",function(){c("FunnelLogger").startFunnel(h);c("FunnelLogger").appendAction(h,c("ProfileIntroCardEditMediaFunnelLoggerEvent").SINGLE_EDIT)})}function m(){c("FunnelLogger").appendAction(h,c("ProfileIntroCardEditMediaFunnelLoggerEvent").SEE_DIALOG)}function n(){c("FunnelLogger").appendAction(h,c("ProfileIntroCardEditMediaFunnelLoggerEvent").OPEN_PICKER)}function o(p){c("Event").listen(p,"click",function(){c("FunnelLogger").appendAction(h,c("ProfileIntroCardEditMediaFunnelLoggerEvent").ADD_MEDIA)})}f.exports={logCancel:i,logSave:j,logSeeDialog:m,logSingleEdit:l,logIntroCardEdit:k,logOpenPicker:n,logAddMedia:o}}),null);
__d("ProfileIntroCardNUX",["DOM","Event","tidyEvent"],(function a(b,c,d,e,f,g){function h(i,j){"use strict";c("tidyEvent")(c("Event").listen(j,"click",function(){return c("DOM").remove(i)}))}f.exports=h}),null);
__d("XProfileRefresherDialogImpressionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/profile/refresher/dialog_impression/",{})}),null);
__d("ProfileActionsUpdateInfoButton",["AsyncRequest","CSS","Event","XProfileRefresherDialogImpressionController","destroyOnUnload"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k){"use strict";__p&&__p();var l=void 0;this.$ProfileActionsUpdateInfoButton1=c("Event").listen(i,"click",function(){j.hide();c("CSS").hide(k);this.$ProfileActionsUpdateInfoButton2()}.bind(this));j.subscribe("cancel",function(){return this.$ProfileActionsUpdateInfoButton2()}.bind(this));c("destroyOnUnload")(function(){return this.$ProfileActionsUpdateInfoButton3()}.bind(this))}h.prototype.$ProfileActionsUpdateInfoButton3=function(){"use strict";this.$ProfileActionsUpdateInfoButton1&&this.$ProfileActionsUpdateInfoButton1.remove()};h.prototype.$ProfileActionsUpdateInfoButton2=function(){"use strict";new(c("AsyncRequest"))().setURI(c("XProfileRefresherDialogImpressionController").getURIBuilder().getURI()).send()};f.exports=h}),null);
__d("TourAutoPilot",["ContextualBlindSingleton","DOMScroll","Tour"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("Tour"));i=h&&h.prototype;j.prototype.registerStep=function(k,l){"use strict";k.subscribe("tour-dialog-show",this.handleShowDialog.bind(this,k,l));i.registerStep.call(this,k,l)};j.prototype.handleLeavePage=function(){"use strict";this.openDialog&&this.openDialog.destroy();this.hideContextualBlind();i.handleLeavePage.call(this)};j.prototype.handleShowDialog=function(k,l){"use strict";var m=k.getContext();this.showContextualBlind(m,true);c("DOMScroll").scrollTo(m,true,true,0)};j.prototype.handleTourStop=function(){"use strict";this.hideContextualBlind(true);i.handleTourStop.call(this)};j.prototype.showContextualBlind=function(k,l){"use strict";if(this.blindShowing)c("ContextualBlindSingleton").show(k,0,0,0,0,l,this.opacity);else c("ContextualBlindSingleton").fadeIn(k,0,0,0,0,l,this.opacity);this.blindShowing=true};j.prototype.hideContextualBlind=function(k){"use strict";if(k)c("ContextualBlindSingleton").fadeOut();else c("ContextualBlindSingleton").hide();this.blindShowing=false};function j(){"use strict";h.apply(this,arguments)}Object.assign(j.prototype,{blindShowing:false,opacity:null});g.TourAutoPilot=j}),null);
__d("ComposerTour",["Arbiter","AsyncRequest","ComposerCitySharer","CSS","DOM","Parent","Tour","URI","$","TourAutoPilot"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("TourAutoPilot").TourAutoPilot;h=babelHelpers.inherits(k,j);i=h&&h.prototype;k.prototype.handleShowDialog=function(l,m){"use strict";var n=c("Parent").byClass(c("$")("composerTourStart"),"uiComposer");if(m!="start"){i.handleShowDialog.call(this,l,m);this.showContextualBlind(n)}};k.prototype.showContextualBlind=function(l){"use strict";c("CSS").addClass(document.body,"composerTourInProgress");i.showContextualBlind.call(this,l)};k.prototype.hideContextualBlind=function(l){"use strict";i.hideContextualBlind.call(this,l);c("CSS").removeClass(document.body,"composerTourInProgress")};k.openComposer=function(){"use strict";var l=c("Parent").byClass(c("$")("composerTourStart"),"uiComposerAttachment"),m=c("Parent").byTag(l,"form");m.action=l.getAttribute("data-endpoint");m.xhpc.value=l.id;m.xhpc.click()};k.closeOnComposerReset=function(){"use strict";c("Arbiter").subscribe("composer/reset",function(){c("Tour").getInstance().setTourStop()})};k.sendLocationOption=function(l,m){"use strict";var n=new(c("URI"))(m).addQueryData({use_location:l});new(c("AsyncRequest"))(n.toString()).send()};k.addCity=function(){"use strict";var l=c("Parent").byClass(c("$")("composerTourLocation"),"uiComposer"),m=c("ComposerCitySharer").getInstance(c("DOM").scry(l,"span.ComposerCitySharer")[0]);m&&m.useDefaultCity()};k.clearCity=function(){"use strict";var l=c("Parent").byClass(c("$")("composerTourLocation"),"uiComposer"),m=c("ComposerCitySharer").getInstance(c("DOM").scry(l,"span.ComposerCitySharer")[0]);m&&m.clearCity()};k.hideStartDialog=function(){"use strict";var l=c("Tour").getInstance().steps.start;l&&l.hide()};k.enableAutoPilot=function(){"use strict";new k().init()};function k(){"use strict";h.apply(this,arguments)}f.exports=k}),null);