if (self.CavalryLogger) { CavalryLogger.start_js(["Yu7J\/"]); }

__d("XPagesMercuryIndicatorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/messaging/mercury/indicator/",{})}),null);
__d("PagesMercuryChatTabIndicatorHandler",["AsyncRequest","AvailableListConstants","ChatPrivacyActionController","ChatVisibility","FBIDCheck","MercuryIDs","PresencePrivacy","XPagesMercuryIndicatorController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.tryCreateHandler=function(i,j,k,l){var m=c("MercuryIDs").getUserIDFromThreadID(i);if(!m||c("FBIDCheck").isUser_deprecated(m))return null;return new h(m,j,k,l)};function h(i,j,k,l){__p&&__p();this.$PagesMercuryChatTabIndicatorHandler2=false;this.$PagesMercuryChatTabIndicatorHandler3=false;this.$PagesMercuryChatTabIndicatorHandler4=false;this.$PagesMercuryChatTabIndicatorHandler5=j;this.$PagesMercuryChatTabIndicatorHandler6=false;this.$PagesMercuryChatTabIndicatorHandler7=i;this.$PagesMercuryChatTabIndicatorHandler10=k;this.$PagesMercuryChatTabIndicatorHandler9=l;this.$PagesMercuryChatTabIndicatorHandler8=new(c("ChatPrivacyActionController"))(i,function(m){return this.$PagesMercuryChatTabIndicatorHandler11(m)}.bind(this))}h.prototype.__getEnableTimeSwitch=function(){return this.$PagesMercuryChatTabIndicatorHandler2};h.prototype.__getIsShown=function(){return this.$PagesMercuryChatTabIndicatorHandler4};h.prototype.__getPageOnlineStatus=function(){return this.$PagesMercuryChatTabIndicatorHandler5};h.prototype.__getShouldPreventFutureShown=function(){return this.$PagesMercuryChatTabIndicatorHandler6};h.prototype.__getTargetID=function(){return this.$PagesMercuryChatTabIndicatorHandler7};h.prototype.__getIsChecking=function(){return this.$PagesMercuryChatTabIndicatorHandler3};h.prototype.__getResponsivenessDescription=function(){return this.$PagesMercuryChatTabIndicatorHandler1};h.prototype.checkResponsiveness=function(){if(this.$PagesMercuryChatTabIndicatorHandler3)return;var i=c("XPagesMercuryIndicatorController").getURIBuilder().getURI();this.$PagesMercuryChatTabIndicatorHandler3=true;new(c("AsyncRequest"))().setURI(i).setMethod("POST").setData({page_id:this.$PagesMercuryChatTabIndicatorHandler7}).setHandler(function(j){this.$PagesMercuryChatTabIndicatorHandler3=false;var k=j.payload;if(k.responsiveness)this.$PagesMercuryChatTabIndicatorHandler12(k.responsiveness,k.enableTimeSwitch)}.bind(this)).send()};h.prototype.hideIndicator=function(){this.$PagesMercuryChatTabIndicatorHandler13(false)};h.prototype.hideIndicatorAndPreventFutureShow=function(){this.$PagesMercuryChatTabIndicatorHandler13(true)};h.prototype.$PagesMercuryChatTabIndicatorHandler13=function(i){this.$PagesMercuryChatTabIndicatorHandler6=this.$PagesMercuryChatTabIndicatorHandler6||i;if(this.$PagesMercuryChatTabIndicatorHandler4){this.$PagesMercuryChatTabIndicatorHandler4=false;this.$PagesMercuryChatTabIndicatorHandler9()}};h.prototype.showIndicator=function(){if(this.$PagesMercuryChatTabIndicatorHandler4||this.$PagesMercuryChatTabIndicatorHandler5!==c("AvailableListConstants").OFFLINE||!this.$PagesMercuryChatTabIndicatorHandler1||!c("ChatVisibility").isOnline()||!c("PresencePrivacy").allows(this.$PagesMercuryChatTabIndicatorHandler7)||this.$PagesMercuryChatTabIndicatorHandler6)return;this.$PagesMercuryChatTabIndicatorHandler4=true;this.$PagesMercuryChatTabIndicatorHandler10(this.$PagesMercuryChatTabIndicatorHandler1,this.$PagesMercuryChatTabIndicatorHandler7)};h.prototype.notifyPageOnlineStatusChanged=function(i){__p&&__p();if(this.$PagesMercuryChatTabIndicatorHandler5===i)return;this.$PagesMercuryChatTabIndicatorHandler5=i;if(!this.$PagesMercuryChatTabIndicatorHandler2)return;switch(i){case c("AvailableListConstants").ACTIVE:this.hideIndicator();break;default:this.showIndicator();break}};h.prototype.$PagesMercuryChatTabIndicatorHandler12=function(i,j){this.$PagesMercuryChatTabIndicatorHandler1=i;this.$PagesMercuryChatTabIndicatorHandler2=j;this.showIndicator()};h.prototype.$PagesMercuryChatTabIndicatorHandler11=function(i){switch(i){case c("ChatPrivacyActionController").OFFLINE:case c("ChatPrivacyActionController").BLOCKED:this.$PagesMercuryChatTabIndicatorHandler13(true);break}};f.exports=h}),null);