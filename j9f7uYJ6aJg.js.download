if (self.CavalryLogger) { CavalryLogger.start_js(["U3Kf6"]); }

__d("AddPaymentMethodController",["AdManagerFunding"],(function a(b,c,d,e,f,g){__p&&__p();var h=123097351040126,i={showAddPaymentMethodFlow:function j(k,l){var m=k.getAttribute("data-business-id"),n=k.getAttribute("data-url-user"),o=k.getAttribute("data-user-hash");n=n?n:null;o=o?o:null;if(m)c("AdManagerFunding").setBusinessID(m);c("AdManagerFunding").addCredential(k.getAttribute("data-placement"),h,k.getAttribute("data-ad-account-id"),null,null,null,null,n,o,null,l)},showAddPrepaidBalanceShortcutFlow:function j(k){var l={funding_id:k.getAttribute("data-payment-method-id"),altpay_method_name:k.getAttribute("data-altpay-method-name"),prepay_shortcut_flow:true};i.showAddPaymentMethodFlow(k,l)}};f.exports=i}),null);
__d("MessengerPlatformVerticalListItemAttachment.react",["cx","invariant","BrowserExtensionsDialog","CurrentUser","Link.react","MercuryFallbackShareAttachment.react","MercuryIDs","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MessengerPlatformCallToAction.react","React","URI","cssURL","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.attachment&&this.props.attachment.target;if(!n)return c("React").createElement(c("MercuryFallbackShareAttachment.react"),this.props);var o=this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT,p=this.props.index===0,q=this.$MessengerPlatformVerticalListItemAttachment1();return c("React").createElement("div",{className:(q!==null?"_389q":"")+(!p?" _389r":"")},q,c("React").createElement("div",{className:"_5l-m _389t _389u"+(o?" _389v":"")},this.$MessengerPlatformVerticalListItemAttachment2(),this.$MessengerPlatformVerticalListItemAttachment3()))};m.prototype.$MessengerPlatformVerticalListItemAttachment1=function(){__p&&__p();var n,o=this,p=this.props.attachment&&this.props.attachment.target;if(!p||!p.thumb_url)return null;var q={backgroundImage:c("cssURL")(p.thumb_url)},r=this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT,s=c("React").createElement("div",{className:"_389w"+(r?" _389x":""),style:q}),t=s;if(p.item_url){var u,v=(u=p)!=null?(u=u.call_to_actions)!=null?(u=u[0])!=null?(u=u.webview_metadata)!=null?u.messenger_extensions:u:u:u:u;if(v){var w;(function(){var x=(w=p)!=null?(w=w.call_to_actions)!=null?(w=w[0])!=null?w.action_link:w:w:w;x||i(0);t=c("React").createElement(c("Link.react"),{onClick:function(){this.$MessengerPlatformVerticalListItemAttachment4(x)}.bind(o)},s)})()}else t=c("React").createElement(c("Link.react"),{href:p.item_url,target:"_blank"},s)}return c("React").createElement("div",{className:"_389q _389y"+(r?" _389z":""),key:"image"},t)};m.prototype.$MessengerPlatformVerticalListItemAttachment5=function(){var n=this.props.attachment&&this.props.attachment.target&&this.props.attachment.target.thumb_url;return!!n};m.prototype.$MessengerPlatformVerticalListItemAttachment6=function(){var n=this.props.attachment&&this.props.attachment.target&&this.props.attachment.target.call_to_actions;return!!n&&n.length>0};m.prototype.$MessengerPlatformVerticalListItemAttachment2=function(){__p&&__p();var n=this.props.attachment&&this.props.attachment.target;if(!n)return null;var o=this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT,p=this.$MessengerPlatformVerticalListItemAttachment6(),q=null;if(!p||!o)q=this.$MessengerPlatformVerticalListItemAttachment7();var r=c("React").createElement("div",{className:"_389-"},c("React").createElement("div",{className:"_3cng _38a0"+(o?" _38a1":"")},n.name),this.$MessengerPlatformVerticalListItemAttachment8(),q);if(n.item_url)return c("React").createElement(c("Link.react"),{href:n.item_url,target:"_blank"},r);return r};m.prototype.$MessengerPlatformVerticalListItemAttachment8=function(){var n=this.props.attachment&&this.props.attachment.target,o=this.$MessengerPlatformVerticalListItemAttachment5(),p=n&&n.metalines;if(!p)return null;var q=this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT;p=Object.keys(p).filter(function(r){return p&&p[r]}).map(function(r,s){var t=p&&p[r];return c("React").createElement("div",{className:"_3cnl _38a6"+(q?" _38a9":"")+(q&&!o?" _38aa":""),key:r},t)});return p};m.prototype.$MessengerPlatformVerticalListItemAttachment7=function(){__p&&__p();var n=this.props.attachment&&this.props.attachment.target,o=n&&n.item_url,p=this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT,q=this.$MessengerPlatformVerticalListItemAttachment5();if(!this.props.isSponsored&&o){var r=document.createElement("a");r.href=o;var s=r.hostname;if(n&&n.source)s=n.source;return c("React").createElement("div",{className:"_3cnn _38ab"+(p?" _38a9":"")+(p&&!q?" _38aa":"")},s)}else return null};m.prototype.$MessengerPlatformVerticalListItemAttachment3=function(){var n=this.props.attachment&&this.props.attachment.target,o=n&&n.call_to_actions,p=this.$MessengerPlatformVerticalListItemAttachment5();if(!o||!o.length)return null;var q=this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT,r=this.props.location!==c("MercuryShareAttachmentRenderLocations").MESSENGER;o=o.filter(function(s){return s.action_link}).map(function(s,t){var u="_38ac"+(q?" _38ae":"")+(r?" _38aj":"");return c("React").createElement("div",{key:t},c("React").createElement(c("MessengerPlatformCallToAction.react"),{callToAction:s,index:t,classNames:u,isSponsored:this.props.isSponsored,location:this.props.location,messageID:this.props.messageID,mnMessageType:this.props.mnMessageType,pageID:this.props.pageID,retailItem:n,threadID:this.props.threadID}))}.bind(this));return c("React").createElement("div",{className:"_38ak"+(q?" _38al":"")+(q&&!p?" _38aa":"")},o)};m.prototype.$MessengerPlatformVerticalListItemAttachment4=function(n){c("BrowserExtensionsDialog").show(new(c("URI"))(n),c("MercuryIDs").getThreadFBIDFromThreadID(this.props.pageID),c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),c("CurrentUser").getID())};function m(){j.apply(this,arguments)}m.propTypes={attachment:c("MercuryShareAttachmentReactShape"),isSponsored:l.bool,isSubattachment:l.bool,location:l.oneOf(c("MercuryShareAttachmentRenderLocations").getValues()),messageID:l.string,mnMessageType:l.string,pageID:l.string,threadID:l.string,index:l.number};f.exports=m}),null);