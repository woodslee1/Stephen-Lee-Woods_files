if (self.CavalryLogger) { CavalryLogger.start_js(["hJQ2M"]); }

__d("MercuryAttachmentConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({SIDE_LENGTH:9});f.exports=h}),null);
__d("MercuryAttachmentError.react",["fbt","XUINotice.react","XUIText.react","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("XUINotice.react"),{use:"warn"},c("React").createElement(c("XUIText.react"),{size:"meta1"},h._("This attachment could not be loaded.")))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MercuryAttachmentFile.react",["ix","cx","fbt","Image.react","LeftRight.react","Link.react","MercuryAttachment","React","URI","isLinkshimURI","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes;k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;n.prototype.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad()};n.prototype.$MercuryAttachmentFile1=function(){if(c("isLinkshimURI")(new(c("URI"))(this.props.url)))return this.props.url;else return{url:(this.props.url||"").toString(),shimhash:this.props.shimhash}};n.prototype.$MercuryAttachmentFile2=function(){if(this.props.open_url)return c("React").createElement("div",{className:"_59gs"},c("React").createElement(c("Link.react"),{target:"_blank",href:this.props.open_url},j._("open"))," ","\xb7"," ",c("React").createElement(c("Link.react"),{href:this.$MercuryAttachmentFile1(),s:this.props.isSafeToSkipShim?"1":""},j._("download")));return c("React").createElement("div",null)};n.prototype.render=function(){var o=c("joinClasses")(c("MercuryAttachment").getAttachIconClass(this.props.type),"_59go _59gq");if(this.props.url)return c("React").createElement(c("LeftRight.react"),{className:o},c("React").createElement(c("Link.react"),{href:this.$MercuryAttachmentFile1(),s:this.props.isSafeToSkipShim?"1":""},c("React").createElement(c("LeftRight.react"),null,c("React").createElement(c("Image.react"),{src:h("86988")}),c("React").createElement("span",{className:"_59gp"},this.props.name))),this.$MercuryAttachmentFile2());return c("React").createElement(c("LeftRight.react"),{className:o},c("React").createElement(c("Image.react"),{src:h("86988")}),c("React").createElement("span",{className:"_59gp"},this.props.name))};function n(){k.apply(this,arguments)}n.propTypes={isSafeToSkipShim:m.bool,name:m.string.isRequired,onAttachmentLoad:m.func,open_url:m.string,rel:m.string,shimhash:m.string,type:m.string.isRequired,url:m.string};f.exports=n}),null);
__d("MercuryAttachmentMalicious.react",["fbt","XUINotice.react","XUIText.react","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("XUINotice.react"),{use:"warn"},c("React").createElement(c("XUIText.react"),{size:"meta1"},h._("This attachment has been marked as malicious.")))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("ChatImageArrowDirection",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({BOTH:null,LEFT:null,RIGHT:null});f.exports=h}),null);
__d("ChatImageWithArrow.react",["cx","ChatImageArrowDirection","CssBackgroundImage.react","Link.react","MercuryAttachmentConstants","React","XUISpinner.react","cssURL","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=30,m=15;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$ChatImageWithArrow3=function(){return Math.max(this.props.width,m)}.bind(this),this.$ChatImageWithArrow6=function(){return Math.max(this.props.height,l)}.bind(this),this.$ChatImageWithArrow7=function(t,u,v,w){if(u===c("ChatImageArrowDirection").LEFT)return"translate("+v+"px, "+w+"px)rotate(45deg)";else return"translate("+(t-v)+"px, "+w+"px)rotate(45deg)"},this.$ChatImageWithArrow8=function(t,u,v,w){if(u===c("ChatImageArrowDirection").LEFT)return"rotate(-45deg)translate(-"+(this.$ChatImageWithArrow1+v)+"px,-"+w+"px)";else return"rotate(-45deg)translate(-"+(t-v)+"px, -"+w+"px)"}.bind(this),p}n.prototype.render=function(){this.$ChatImageWithArrow1=Math.floor(this.props.sideLength/Math.sqrt(2));this.$ChatImageWithArrow2=Math.ceil(this.$ChatImageWithArrow3()+this.$ChatImageWithArrow1);if(this.props.isLoading)return this.$ChatImageWithArrow4();var o=c("joinClasses")("_4yp6"+(this.props.round?" _3lk2":""),this.props.rootClassName);return this.$ChatImageWithArrow5(c("React").createElement("div",{className:o},c("React").createElement("div",{className:"_52kr"+(this.props.round?" _3_om":""),style:{width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6()}},c("React").createElement(c("CssBackgroundImage.react"),{className:"_4yp9"+(this.props.isSpherical?" _3603":""),imageURI:this.props.source,backgroundPosition:"center",style:{width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6(),borderRadius:"inherit"}},this.props.isSpherical?c("React").createElement("div",{className:"_64ks"}):null))))};n.prototype.$ChatImageWithArrow5=function(o){if(this.props.onClick)return c("React").createElement(c("Link.react"),{onClick:this.props.onClick},o);return o};n.prototype.$ChatImageWithArrow4=function(){__p&&__p();var o={width:this.props.sideLength,height:this.props.sideLength};if(this.props.source)o.backgroundImage=c("cssURL")(this.props.source);var p={width:this.props.sideLength,height:this.props.sideLength};if(this.props.source)p.opacity=0;var q={width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6()};if(this.props.source){q.backgroundImage=c("cssURL")(this.props.source);q.backgroundSize="cover"}return c("React").createElement("div",{className:"_4yp6"},c("React").createElement("div",{className:"_4ypb _3_om",style:q},c("React").createElement(c("XUISpinner.react"),{size:"small"})))};n.propTypes={arrowDirection:k.oneOf(Object.keys(c("ChatImageArrowDirection"))),onClick:k.func,height:k.number.isRequired,isLoading:k.bool,isSpherical:k.bool,round:k.bool,rootClassName:k.string,sideLength:k.number,source:k.string,width:k.number.isRequired};n.defaultProps={sideLength:c("MercuryAttachmentConstants").SIDE_LENGTH,isLoading:false,isSpherical:false,round:false};f.exports=n}),null);
__d("MercuryAttachmentPhoto.react",["ChatImageArrowDirection","ChatImageWithArrow.react","MercuryAttachmentViewer","MercuryIDs","MercuryMessageInfo","MessagesViewerSetID","React","SpotlightMercurySharedMediaViewer.react","SphericalPhotoUtils","URI","getPageIDFromThreadID"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings,k=c("React").PropTypes,l=160;h=babelHelpers.inherits(m,c("React").Component);i=h&&h.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.state={newSharedPhotosView:false},this.$MercuryAttachmentPhoto1=function(s){var t=this.props.image,u=true;if(!this.props.hasAttribution&&this.props.count)u=this.props.count===1;var v=this.props.message,w=v.thread_fbid?v.thread_fbid:c("MercuryIDs").getThreadFBIDFromThreadID(v.thread_id),x=new(c("URI"))("/ajax/messaging/attachments/sharedphotos.php").setQueryData({thread_id:w,image_id:t.metadata.fbid}),y=c("MessagesViewerSetID").MESSAGES_VIEW_ALL_IN_THREAD;c("MercuryAttachmentViewer").bootstrapWithConfig({dimensions:t.metadata.dimensions,disablePaging:u,endpoint:x,fbid:t.metadata.fbid,setID:y,src:t.preview_url},null)}.bind(this),this.$MercuryAttachmentPhoto2=function(){var s=this.props.image;if(s&&s.metadata)this.setState({newSharedPhotosView:s.metadata.fbid})}.bind(this),this.$MercuryAttachmentPhoto3=function(){this.setState({newSharedPhotosView:null})}.bind(this),o}m.prototype.componentDidMount=function(){c("MercuryAttachmentViewer").preload();this.props.onAttachmentLoad&&this.props.onAttachmentLoad(this.props.height)};m.prototype.$MercuryAttachmentPhoto4=function(){var n=this.props.message.thread_fbid||this.props.message.thread_id&&c("MercuryIDs").getThreadFBIDFromThreadID(this.props.message.thread_id);return c("React").createElement(c("SpotlightMercurySharedMediaViewer.react"),{onClosePhotoView:this.$MercuryAttachmentPhoto3,photoID:String(this.state.newSharedPhotosView),rootClassName:"",threadID:n,disableForward:false,enableShareToFB:true})};m.prototype.render=function(){var n=c("MercuryMessageInfo").isInbound(this.props.message),o=!!c("getPageIDFromThreadID")(this.props.message.thread_id),p=!this.props.hasAttribution&&!o?this.$MercuryAttachmentPhoto2:this.$MercuryAttachmentPhoto1,q=this.state.newSharedPhotosView?this.$MercuryAttachmentPhoto4():null,r=this.props.photoEncodings?this.props.photoEncodings.length!==0:false,s=this.props.image.preview_url;if(r){var t=j(this.props.photoEncodings),u=t.smallThumbnail;s=u||this.props.image.preview_url}return c("React").createElement("div",{onFocus:this.$MercuryAttachmentPhoto5},q,c("React").createElement(c("ChatImageWithArrow.react"),{arrowDirection:n?c("ChatImageArrowDirection").LEFT:c("ChatImageArrowDirection").RIGHT,source:s,height:r?l:this.props.height,width:r?l:this.props.width,onClick:p,round:!!this.props.round,isLoading:!!this.props.image.preview_uploading,isSpherical:r}))};m.prototype.$MercuryAttachmentPhoto5=function(event){event.stopPropagation()};m.propTypes={hasAttribution:k.bool,height:k.number,image:k.object.isRequired,photoEncodings:k.array,message:k.object.isRequired,onAttachmentLoad:k.func,round:k.bool,width:k.number};f.exports=m}),null);
__d("ChatGridImage.react",["cx","CssBackgroundImage.react","Link.react","React","emptyFunction","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$ChatGridImage1=function(){var r,s=this.props.onClick||c("emptyFunction"),t=(r=this.props)!=null?(r=r.metadata)!=null?r.fbid:r:r;if(t)s(t);else s()}.bind(this),n}l.prototype.render=function(){if(this.props.isLoading||!this.props.source)return c("React").createElement("div",{className:"_4ypb",style:{width:this.props.size,height:this.props.size}});var m=this.props.source||"";return c("React").createElement(c("Link.react"),{onClick:this.$ChatGridImage1},c("React").createElement(c("CssBackgroundImage.react"),{imageURI:m,className:"_332l"+(!!this.props.isSpherical?" _3603":""),backgroundPosition:"center",style:{width:this.props.size,height:this.props.size}},this.props.isSpherical?c("React").createElement("div",{className:"_64ks"}):null))};l.propTypes={isLoading:k.bool,metadata:k.object,onClick:k.func,size:k.number.isRequired,source:k.string};f.exports=l}),null);
__d("MercuryAttachmentPhotoGrid.react",["cx","ChatGridImage.react","Grid.react","MercuryAttachmentType","MercuryAttachmentViewer","MercuryIDs","MessagesViewerSetID","React","SpotlightMercurySharedMediaViewer.react","SphericalPhotoUtils","URI","getPageIDFromThreadID"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("Grid.react").GridItem,l=c("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings,m=c("React").PropTypes;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={newSharedPhotosView:null},this.$MercuryAttachmentPhotoGrid1=function(t,u){var v=this.props.count,w=this.props.message,x=w.thread_fbid?w.thread_fbid:c("MercuryIDs").getThreadFBIDFromThreadID(w.thread_id),y=new(c("URI"))("/ajax/messaging/attachments/sharedphotos.php").setQueryData({thread_id:x,image_id:t.metadata&&t.metadata.fbid}),z=c("MessagesViewerSetID").MESSAGES_VIEW_ALL_IN_THREAD;return function(A){c("MercuryAttachmentViewer").bootstrapWithConfig({dimensions:t.metadata.dimensions,disablePaging:u||v===1,endpoint:y,fbid:t.metadata.fbid,setID:z,src:t.preview_url},null)}}.bind(this),this.$MercuryAttachmentPhotoGrid2=function(t){if(t)this.setState({newSharedPhotosView:t})}.bind(this),this.$MercuryAttachmentPhotoGrid3=function(){this.setState({newSharedPhotosView:null})}.bind(this),p}n.prototype.componentDidMount=function(){c("MercuryAttachmentViewer").preload()};n.prototype.$MercuryAttachmentPhotoGrid4=function(){var o=this.props.message.thread_fbid||this.props.message.thread_id&&c("MercuryIDs").getThreadFBIDFromThreadID(this.props.message.thread_id);return c("React").createElement(c("SpotlightMercurySharedMediaViewer.react"),{onClosePhotoView:this.$MercuryAttachmentPhotoGrid3,photoID:String(this.state.newSharedPhotosView),rootClassName:"",threadID:o,disableForward:false})};n.prototype.render=function(){__p&&__p();var o=this.props.images,p=o.length,q=p==2||p==4?2:3,r=Math.floor(this.props.size/q),s=[],t=o.some(function(C){return C.attach_type===c("MercuryAttachmentType").ANIMATED_IMAGE}),u=this.state.newSharedPhotosView?this.$MercuryAttachmentPhotoGrid4():null,v=!!c("getPageIDFromThreadID")(this.props.message.thread_id);for(var w=0;w<o.length;w++){var x=!v?this.$MercuryAttachmentPhotoGrid2:this.$MercuryAttachmentPhotoGrid1(o[w],t),y=o[w].photo_encodings?o[w].photo_encodings.length!==0:false,z=o[w].preview_url;if(y){var A=l(o[w].photo_encodings),B=A.smallThumbnail;z=B||z}s.push(c("React").createElement(k,{key:w},c("React").createElement(c("ChatGridImage.react"),{isLoading:!!o[w].preview_uploading,onClick:x,metadata:o[w].metadata,size:r,source:z,isSpherical:y})))}return c("React").createElement("div",null,u,c("React").createElement(c("Grid.react"),{cols:q,className:"_5b2w",spacing:"_5b2x",alignh:"right"},s))};n.propTypes={images:m.arrayOf(m.object).isRequired,size:m.number.isRequired,message:m.object.isRequired};f.exports=n}),null);
__d("ChatAttachmentAttribution.react",["cx","ImmutableObject","MercuryAttachmentAttribution.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad()};l.prototype.render=function(){return c("React").createElement(c("MercuryAttachmentAttribution.react"),{attachment:this.props.attachment,className:"_1ekr _4i_6"})};function l(){i.apply(this,arguments)}l.propTypes={attachment:k.instanceOf(c("ImmutableObject")),onAttachmentLoad:k.func};f.exports=l}),null);
__d("MercuryAttachmentVideo.react",["cx","ix","ChatAttachmentAttribution.react","ChatImageWithArrow.react","ChatSpeakingSticker.react","CenteredContainer.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","Image.react","ImmutableObject","MercuryAttachment","MercuryAttachmentViewer","MessengerVideoPlayer.react","React","SpotlightMercurySharedMediaViewer.react","Vector","getPageIDFromThreadID","joinClasses"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={newSharedPhotosView:null},this.$MercuryAttachmentVideo1=function(){var s=this.props.duration,t=Math.floor(s/60),u=s%60;if(u<10)return t+":0"+u;return t+":"+u}.bind(this),this.openViewer=function(){var s=this.props,t=s.pageID,u=s.videoID,v=s.videoSize,w=s.videoURI;v=new(c("Vector"))(v.width,v.height);c("MercuryAttachmentViewer").renderVideo({pageID:t,videoID:u,videoSize:v,videoURI:w})}.bind(this),this.$MercuryAttachmentVideo2=function(){if(this.props.videoID)this.setState({newSharedPhotosView:this.props.videoID})}.bind(this),this.$MercuryAttachmentVideo3=function(){this.setState({newSharedPhotosView:null})}.bind(this),this.$MercuryAttachmentVideo5=function(){if(this.props.isChat)return c("React").createElement("div",null,c("React").createElement(c("ChatImageWithArrow.react"),{height:this.props.thumbSize.height,key:"previewImage",round:true,source:this.props.thumbnail,width:this.props.thumbSize.width}),c("React").createElement(c("ChatAttachmentAttribution.react"),{attachment:this.props.attachment,key:"chatAttribution"}));else return c("React").createElement(c("Image.react"),{height:this.props.thumbSize.height,width:this.props.thumbSize.width,src:this.props.thumbnail})}.bind(this),this.$MercuryAttachmentVideo6=function(){if(this.props.isChat)return{};return this.props.thumbSize}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";this.props.onAttachmentLoad&&this.props.onAttachmentLoad();c("MercuryAttachmentViewer").preload()};m.prototype.$MercuryAttachmentVideo4=function(){"use strict";return c("React").createElement(c("SpotlightMercurySharedMediaViewer.react"),{onClosePhotoView:this.$MercuryAttachmentVideo3,photoID:this.state.newSharedPhotosView,rootClassName:"",threadID:this.props.threadFBID,disableForward:false})};m.prototype.$MercuryAttachmentVideo7=function(n,o){"use strict";if(!n.legacy_attachment_id)return null;return c("React").createElement(c("MessengerVideoPlayer.react"),{attachment:this.props.attachment,videoData:n,isInThread:true,isVisible:this.props.isVisible,onClick:o,className:c("joinClasses")(this.props.className,"_n4o _3_om _1wno")})};m.prototype.$MercuryAttachmentVideo8=function(n){"use strict";var o=this.props.thumbSize,p={x:o.width,y:o.height};return{legacy_attachment_id:this.props.videoID,original_dimensions:p,start_muted:true,no_fullscreen:true,hide_controls_on_finish:true,url:this.props.videoURI}};m.prototype.render=function(){"use strict";if(this.props.attachment.metadata&&this.props.attachment.metadata.render_as_sticker&&this.props.isChat)return c("React").createElement(c("ChatSpeakingSticker.react"),{videoURI:this.props.videoURI,videoSize:this.props.videoSize});var n=!!c("getPageIDFromThreadID")(this.props.threadID),o=!n?this.$MercuryAttachmentVideo2:this.openViewer,p=this.state.newSharedPhotosView&&this.props.threadFBID?this.$MercuryAttachmentVideo4():null,q=c("MercuryAttachment").hasAttribution(this.props.attachment),r="clearfix _zow _59go"+(q?" _4yjw":"")+(this.props.isChat?" _3ds5":""),s=this.$MercuryAttachmentVideo8(this.props.attachment),t=this.$MercuryAttachmentVideo7(s,o),u=t?t:c("React").createElement(c("FBOverlayContainer.react"),{className:r,key:"overlayContainer",onClick:o,style:this.$MercuryAttachmentVideo6()},c("React").createElement(c("FBOverlayBase.react"),null,this.$MercuryAttachmentVideo5()),c("React").createElement(c("FBOverlayElement.react"),null,c("React").createElement("div",{className:(!this.props.isChat?"_zox":"")+(q?" _jt3":"")},c("React").createElement("span",{className:"_zoz"},this.$MercuryAttachmentVideo1()))),c("React").createElement(c("FBOverlayElement.react"),null,c("React").createElement(c("CenteredContainer.react"),{className:q?"_jt3":"",vertical:true},c("React").createElement(c("Image.react"),{src:i("27983")}))));if(this.props.isChat)return c("React").createElement("div",null,p,u);return c("React").createElement("div",null,p,u,c("React").createElement(c("ChatAttachmentAttribution.react"),{attachment:this.props.attachment,key:"inboxAttribution"}))};m.propTypes={attachment:l.instanceOf(c("ImmutableObject")),duration:l.number.isRequired,isChat:l.bool,isVisible:l.bool,threadID:l.string,threadFBID:l.string,name:l.string.isRequired,onAttachmentLoad:l.func,pageID:l.number,thumbSize:l.shape({height:l.number,width:l.number}).isRequired,thumbnail:l.string.isRequired,videoSize:l.shape({height:l.number,width:l.number}).isRequired,videoID:l.string.isRequired,videoURI:l.string.isRequired};f.exports=m}),null);
__d("MessengerAttachmentImageBlockUtils",["isFacebookURI","isLinkshimURI"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){return k.getPath().indexOf("/moments_app")===0}function i(k,l){return k<=300&&l<=300}function j(k,l,m){if(i(k,l))return true;return c("isFacebookURI")(m)&&!c("isLinkshimURI")(m)&&!h(m)}f.exports={isIcon:j}}),null);
__d("MessengerAttachmentImageBlock.react",["cx","React","StoryAttachmentStyle","URI","cssURL","gkx","joinClasses","MessengerAttachmentImageBlockUtils"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:c("joinClasses")(this.props.className,this.$MessengerAttachmentImageBlock1())},this.$MessengerAttachmentImageBlock2(),c("React").createElement("div",{className:"_5swm"},this.props.children))};l.prototype.$MessengerAttachmentImageBlock2=function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return null;var m=this.$MessengerAttachmentImageBlock3(),n=m.height,o=m.width,p=n>o,q=new(c("URI"))(this.props.attachment.uri),r=c("MessengerAttachmentImageBlockUtils").isIcon(n,o,q),s=n&&o?n/o*100:100,t=p||r?.2:1,u=p||r?s:52,v={backgroundImage:c("cssURL")(this.props.attachment.media.image),minHeight:"0px",paddingBottom:p&&s>150?"136px":u*t+"%"};if(this.props.attachment.description&&this.props.attachment.source)v.minHeight="112px";return c("React").createElement("div",{className:"_3xn1",style:v})};l.prototype.$MessengerAttachmentImageBlock1=function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return"_3xn3 _5swn";var m=this.$MessengerAttachmentImageBlock3(),n=m.height,o=m.width,p=n>o,q=new(c("URI"))(this.props.attachment.uri),r=c("MessengerAttachmentImageBlockUtils").isIcon(n,o,q);return"_3xn3"+(r&&!p?" _3xn5":"")+(p?" _3xn6":"")+(o>=n&&!r?" _3xn7":"")+(c("gkx")("AT5jVqghs9R-Nalfuant-OpQGexKpV-Lvk0zsjcgyNeCAPkQFy-F7Ku4x6WSSnQxEXUiMEmPIqbnxuBACYn4sSsR")&&this.$MessengerAttachmentImageBlock4()?" _2e9e":"")};l.prototype.$MessengerAttachmentImageBlock4=function(){var m=this.props.attachment.style_list;return Array.isArray(m)&&m[0]==c("StoryAttachmentStyle").LIGHTWEIGHT_ACTION};l.prototype.$MessengerAttachmentImageBlock5=function(){var m=this.props.attachment.properties;if(!m||!m.height||!m.width)return null;return{height:m.height,width:m.width}};l.prototype.$MessengerAttachmentImageBlock3=function(){var m=this.$MessengerAttachmentImageBlock5()||this.props.attachment.media.image_size||{},n=m.height,o=m.width;if(n&&o){n=parseInt(n,10);o=parseInt(o,10);return{height:n,width:o}}return{height:0,width:0}};function l(){i.apply(this,arguments)}l.propTypes={attachment:k.object.isRequired};f.exports=l}),null);
__d("MercuryAttachmentRenderer",["cx","MercuryAttachmentAudioClip.react","ChatAttachmentAttribution.react","EmojiSticker.react","ImmutableObject","MercuryAttachment","MercuryAttachmentFile.react","MercuryAttachmentPhoto.react","MercuryAttachmentPhotoGrid.react","MercuryAttachmentVideo.react","MercuryConfig","MercuryIDs","MercuryShareAttachment.react","MercuryShareAttachmentRenderLocations","MessagingGiftWrapChecker","MessengerFromViewerUtils","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","MessengerWebDriverTestIDs","React","Sticker.react","StickerAssetType","StickerConstants","StoryAttachmentStyle","BootloadedComponent.react","JSResource","QE2Logger","idx","XStickerAssetController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=12,j={renderFile:function k(l,m,n){return c("React").createElement(c("MercuryAttachmentFile.react"),{isSafeToSkipShim:l.url_skipshim,name:l.name,onAttachmentLoad:n,open_url:m?null:l.open_url,rel:l.rel,shimhash:l.url_shimhash,type:l.icon_type,url:l.url})},renderAudioClip:function k(l,m,n,o,p){var q=l.metadata.duration/1e3,r=c("MercuryShareAttachmentRenderLocations").CHAT,s=100,t=m?160:400,u=100;if(q>=5)u=(1-Math.pow(10,(q-5)/-30))*(t-s)+s;return[c("React").createElement(c("MercuryAttachmentAudioClip.react"),{customColor:n,duration:l.metadata.duration/1e3,isChat:m,isFromViewer:c("MessengerFromViewerUtils").isFromViewer(o),location:r,key:"audioClip",onAttachmentLoad:p,rootClassName:c("MercuryAttachment").hasAttribution(l)?"_4yjw":"",showHelp:false,src:l.url,width:u}),c("React").createElement(c("ChatAttachmentAttribution.react"),{attachment:new(c("ImmutableObject"))(l),key:"audioAttribution",onAttachmentLoad:p})]},renderVideo:function k(l,m,n,o,p){var q=m?l.metadata.chat_size:l.metadata.inbox_size,r=m?l.metadata.chat_preview:l.metadata.inbox_preview;if(!q||!r)return null;var s=n&&(n.thread_fbid||n.thread_id&&c("MercuryIDs").getThreadFBIDFromThreadID(n.thread_id));return c("React").createElement("div",null,c("React").createElement(c("MercuryAttachmentVideo.react"),{attachment:new(c("ImmutableObject"))(l),duration:l.metadata.duration,isChat:m,isVisible:p,threadID:n&&n.thread_id,threadFBID:s,name:l.name,onAttachmentLoad:o,pageID:l.metadata.pageid,thumbSize:q,thumbnail:r,videoSize:l.metadata.dimensions,videoID:l.metadata.fbid,videoURI:l.url}))},constructStickerComponent:function k(l,m,n,o,p,q){__p&&__p();var r=o?"chatScrolled/":"messengerScrolled/";r+=l.thread_id;if(!m){m=c("MessengerHotLikeUtils").getMetadataForHotLike(l.sticker_id);if(!m){var s={},t={height:c("StickerConstants").THREAD_SIZE,width:c("StickerConstants").THREAD_SIZE},u=t.height,v=t.width;s.height=u;s.width=v;s.stickerID=l.sticker_id;s.spriteURI="";s.spriteURI2x="";s.paddedSpriteURI="";s.paddedSpriteURI2x="";m=s}}var w=null;if(m.stickerID)w=m.stickerID.toString();else if(l.sticker_id)w=l.sticker_id.toString();var x=null;if(m.packID)x=m.packID.toString();var y=c("XStickerAssetController").getURIBuilder().setInt("sticker_id",w),z=null,A=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){A=m.paddedSpriteURI2x;z=m.spriteURI2x}else{A=m.paddedSpriteURI;z=m.spriteURI}var B=!!c("MessengerHotLikeUtils").getMetadataForHotLike(w)&&c("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(l);return c("React").createElement(c("Sticker.react"),{accessibilityLabel:m.accessibilityLabel,animationTrigger:"hover",className:B?"_3m7x":"",customColor:q,frameCount:m.frameCount||1,frameRate:m.frameRate||83,framesPerCol:m.framesPerCol||1,framesPerRow:m.framesPerRow||1,onAttachmentLoad:p,onStickerClick:n,packID:x,paddedSpriteURI:A,sourceHeight:m.height,sourceURI:y.setEnum("image_type",c("StickerAssetType").IMAGE).getURI().toString(),sourceWidth:m.width,spriteURI:z,stickerID:w,subscribedThreadID:r,testID:c("MessengerWebDriverTestIDs").STICKER})},constructEmojiLikeAttachment:function k(l,m,n){var o=c("MessengerSupportedEmojiUtils").getNewEmojiData(m.body,l.size),p=o?o.emoji:undefined;if(!o)return null;return c("React").createElement(c("EmojiSticker.react"),{className:"_2poz _ui9",key:"sticker:"+m.message_id,emoji:m.body,emojiImage:p,sourceURI:"",onAttachmentLoad:n})},renderPhotoAttachments:function k(l,m,n,o){__p&&__p();var p=l.length;if(!p)return null;var q=m&&m.thread_fbid;if(m&&!q)q=c("MercuryIDs").isLocalThread(m.thread_id)?null:c("MercuryIDs").getThreadFBIDFromThreadID(m.thread_id);if(p===1){var r=l[0],s=c("MercuryAttachment").resizeContain({width:n-i,height:n},{width:r.preview_width,height:r.preview_height});return c("React").createElement("div",{className:"_55pk _59go"+(c("MercuryAttachment").hasAttribution(r)?" _4yjw":"")},c("React").createElement(c("MercuryAttachmentPhoto.react"),{image:r,width:s.width,hasAttribution:c("MercuryAttachment").hasAttribution(r),height:s.height,photoEncodings:r.photo_encodings,message:m,onAttachmentLoad:o,round:true}),c("React").createElement(c("ChatAttachmentAttribution.react"),{attachment:new(c("ImmutableObject"))(l[0])}))}return c("React").createElement("div",{className:"_55pk"},c("React").createElement(c("MercuryAttachmentPhotoGrid.react"),{images:l,size:n-i,message:m}))},sortAttachmentsStablyByType:function k(l){__p&&__p();var m=[c("MercuryAttachment").isEmojiLikeAttachment,c("MercuryAttachment").isPhotoAttachment,c("MercuryAttachment").isShareAttachment,c("MercuryAttachment").isFileAttachment,c("MercuryAttachment").isErrorAttachment];m.push(function(o){return true});var n=m.map(function(o){return[]});l.forEach(function(o){for(var p=0;p<m.length;p++)if(m[p](o)){n[p].push(o);break}});return Array.prototype.concat.apply([],n)},constructStoryBasedShareAttachment:function k(l,m,n,o,p,q){var r,s,t=c("MercuryShareAttachmentRenderLocations").CHAT,u=m.share&&m.share.style_list&&m.share.style_list[0]===c("StoryAttachmentStyle").CULTURAL_MOMENT_HOLIDAY_CARD,v={maxWidth:o},w=null;if(l&&l.platform_xmd)w=JSON.parse(l.platform_xmd);var x=(r=m)!=null?(r=r.share)!=null?(r=r.messenger_ctas)!=null?(r=r[0])!=null?r.page_id:r:r:r:r,y=(s=m)!=null?(s=s.share)!=null?(s=s.target)!=null?(s=s.items)!=null?(s=s[0])!=null?(s=s.call_to_actions)!=null?(s=s[0])!=null?s.page_id:s:s:s:s:s:s:s,z=x||y,A=z?c("MercuryIDs").getParticipantIDFromUserID(z):l.author,B=c("MessengerFromViewerUtils").isFromViewer(l),C=B?"_fy8":"_fy9";c("QE2Logger").logExposureForUser("messenger_growth_www_share_flow");return c("MercuryConfig").MNFWD&&c("MercuryAttachment").isShareAttachment(m)&&m.share&&m.share.share_id&&(!m.share.target||!m.share.target.lwa_type)?c("React").createElement("div",null,c("React").createElement("div",{className:C},c("React").createElement(c("BootloadedComponent.react"),{key:"forwardimages:"+m.id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("ChatPhotoForwardButton.react").__setRef("MercuryAttachmentRenderer"),attachmentIDs:[m.share.share_id],attachmentTypes:[m.attach_type],isFromViewer:B})),c("React").createElement("div",{className:"_3_om"+(n&&!u?" _3cpq":""),style:v},c("React").createElement(c("MercuryShareAttachment.react"),{attachment:m.share,isSponsored:l.is_sponsored,isVisible:q,location:t,maxWidth:o,messageID:l.message_id,mnMessageType:w&&w.template_type,onComponentLoaded:p,pageID:A,threadID:l.thread_id}))):c("React").createElement("div",{className:"_3_om"+(n&&!u?" _3cpq":""),style:v},c("React").createElement(c("MercuryShareAttachment.react"),{attachment:m.share,isSponsored:l.is_sponsored,isVisible:q,location:t,maxWidth:o,messageID:l.message_id,mnMessageType:w&&w.template_type,onComponentLoaded:p,pageID:A,threadID:l.thread_id}))}};f.exports=j}),null);
__d("MercuryAttachments.react",["cx","MercuryAttachmentRenderer","ImmutableObject","MercuryAttachment","MercuryAttachmentMalicious.react","MercuryAttachmentError.react","MessagingFlowerBorder.react","MessagingGiftWrap.react","MessengerHotLikePreview.react","MessengerWebDriverTestIDs","MNCommerceMessageType","React","SubscriptionsHandler","emptyFunction","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MercuryAttachments1=function(r){this.props.onAttachmentLoad&&this.props.onAttachmentLoad(r)}.bind(this),this.$MercuryAttachments2=null,n}l.prototype.componentDidMount=function(){this.$MercuryAttachments2=new(c("SubscriptionsHandler"))()};l.prototype.componentWillUnmount=function(){this.$MercuryAttachments2&&this.$MercuryAttachments2.release()};l.prototype.$MercuryAttachments3=function(m){__p&&__p();if(c("MercuryAttachment").isStickerAttachment(m))return c("MercuryAttachmentRenderer").constructStickerComponent(this.props.message,this.props.attachments[0].metadata,this.props.onStickerClick,this.props.isChat,this.$MercuryAttachments1,this.props.customColor);else if(c("MercuryAttachment").isEmojiLikeAttachment(m)){var n=c("MercuryAttachmentRenderer").constructEmojiLikeAttachment(m,this.props.message,this.$MercuryAttachments1);return n?n:c("React").createElement(c("MercuryAttachmentError.react"),null)}else if(c("MercuryAttachment").isVoiceAttachment(m))return c("MercuryAttachmentRenderer").renderAudioClip(this.props.attachments[0],this.props.isChat,this.props.customColor,this.props.message,this.$MercuryAttachments1);else if(c("MercuryAttachment").isVideoAttachment(m))return c("MercuryAttachmentRenderer").renderVideo(m,this.props.isChat,this.props.message,this.$MercuryAttachments1,this.props.isVisible);else if(c("MercuryAttachment").isShareAttachment(m))return c("MercuryAttachmentRenderer").constructStoryBasedShareAttachment(this.props.message,m,this.props.isChat,this.props.maxWidth,this.$MercuryAttachments1,this.props.isVisible);else if(c("MercuryAttachment").isFileAttachment(m))return c("MercuryAttachmentRenderer").renderFile(m,this.props.isChat,this.$MercuryAttachments1);else if(c("MercuryAttachment").isErrorAttachment(m))return c("React").createElement(c("MercuryAttachmentError.react"),null);return c("React").createElement(c("MercuryAttachmentMalicious.react"),null)};l.prototype.render=function(){__p&&__p();if(this.props.message.is_like_preview)return c("React").createElement(c("MessengerHotLikePreview.react"),{isChat:this.props.isChat,key:"hlp:"+this.props.message.like_preview_since,since:this.props.message.like_preview_since,customLike:this.props.message.customLike,customColor:this.props.customColor});if(this.props.attachments.length===0)return c("React").createElement("div",this.props);if(this.props.message.commerce_message_type===c("MNCommerceMessageType").RIDE_INTENT)return c("React").createElement("div",this.props);var m=c("MercuryAttachmentRenderer").renderPhotoAttachments(this.props.attachments.filter(c("MercuryAttachment").isPhotoAttachment),this.props.message,this.props.maxWidth,this.$MercuryAttachments1),n=c("MercuryAttachmentRenderer").sortAttachmentsStablyByType(this.props.attachments.filter(function(p){return!c("MercuryAttachment").isPhotoAttachment(p)})).map(function(p,q){return c("React").createElement("span",{key:q},this.$MercuryAttachments3(p))}.bind(this)),o=this.props.hasFlowerBorder?c("joinClasses")("_337n",this.props.className):this.props.className;return c("React").createElement("div",babelHelpers["extends"]({},this.props,{className:o,"data-testid":c("MessengerWebDriverTestIDs").ATTACHMENT_ROOT}),m,n,this.props.afterDecorators,this.props.renderProgressBar&&this.props.renderProgressBar())};l.propTypes={afterDecorators:k.arrayOf(k.element),attachments:k.array.isRequired,customColor:k.string,customLike:k.object,maxWidth:k.number.isRequired,message:k.instanceOf(c("ImmutableObject")).isRequired,isChat:k.bool,isVisible:k.bool,onAttachmentLoad:k.func,onStickerClick:k.func,onUnwrap:k.func};l.defaultProps={isChat:false,onAttachmentLoad:c("emptyFunction"),onStickerClick:c("emptyFunction")};f.exports=l}),null);
__d("MercuryShareImage.react",["cx","ChatImageArrowDirection","ChatImageWithArrow.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:"_4hsl"},c("React").createElement(c("ChatImageWithArrow.react"),{arrowDirection:c("ChatImageArrowDirection").BOTH,height:this.props.height,round:!!this.props.round,source:this.props.source,width:this.props.width}))};function l(){i.apply(this,arguments)}l.propTypes={height:k.number.isRequired,round:k.bool,source:k.string.isRequired,width:k.number.isRequired};f.exports=l}),null);
__d("MercuryFallbackShareAttachmentTextBlock.react",["cx","LineClamp.react","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){if(!this.props||!this.props.attachment)return c("React").createElement("div",{className:"__6j"});if(c("MercuryShareAttachmentRenderLocations").MESSENGER===this.props.location)return c("React").createElement("div",{className:"__6j"},this.renderMessengerTitle(),this.renderMessengerDescription(),this.renderMessengerSource());return c("React").createElement("div",{className:"__6j"},this.renderTitle(),this.renderDescription(),this.renderSource(),this.props.extraComponent)};l.prototype.renderMessengerTitle=function(){if(!this.props.attachment.title)return null;return c("React").createElement("div",{className:"__6k"},c("React").createElement(c("LineClamp.react"),{customEllipsis:" ",lines:2,lineHeight:18},this.props.attachment.title))};l.prototype.renderMessengerDescription=function(){if(!this.props.attachment.description)return null;return c("React").createElement("div",{className:"__6l"},c("React").createElement(c("LineClamp.react"),{customEllipsis:" ",lines:2,lineHeight:16},this.props.attachment.description))};l.prototype.renderMessengerSource=function(){if(!this.props.attachment.source)return null;return c("React").createElement("div",{className:"__6m"},this.props.attachment.source)};l.prototype.renderTitle=function(){if(!this.props.attachment.title)return null;return c("React").createElement("div",{className:"__6k"+(!this.props.attachment.uri&&!this.props.attachment.description||this.props.attachment.target!=null&&this.props.attachment.target.lwa_type!=null&&this.props.attachment.target.lwa_state==="INITIATED"?" _2xsq":"")+(!!this.props.extraComponent?" _1dw9":"")},this.props.attachment.title)};l.prototype.renderDescription=function(){if(!this.props.attachment.description)return null;return c("React").createElement("div",{className:"__6l"},this.props.attachment.description)};l.prototype.renderSource=function(){if(!this.props.attachment.source)return null;return c("React").createElement("div",{className:"__6m"},this.props.attachment.source)};function l(){i.apply(this,arguments)}l.propTypes={attachment:c("MercuryShareAttachmentReactShape"),extraComponent:k.object,location:k.oneOf(c("MercuryShareAttachmentRenderLocations").getValues())};f.exports=l}),null);
__d("MercuryFallbackShareAttachmentContent.react",["cx","Image.react","ImageBlock.react","MercuryFallbackShareAttachmentTextBlock.react","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","MercuryShareImage.react","MessengerAttachmentImageBlock.react","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=72;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.renderTextBlock=function(){return c("React").createElement(c("MercuryFallbackShareAttachmentTextBlock.react"),this.props)};m.prototype.renderChatImage=function(n){return c("React").createElement(c("ImageBlock.react"),{className:n,spacing:"medium"},c("React").createElement(c("MercuryShareImage.react"),{height:l,source:this.props.attachment.media.image,width:l}),c("React").createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",height:l}},this.renderTextBlock()))};m.prototype.renderMessengerImage=function(n){return c("React").createElement(c("MessengerAttachmentImageBlock.react"),{className:n,attachment:this.props.attachment},this.renderTextBlock(),this.props.children)};m.prototype.renderDefaultImage=function(n){return c("React").createElement(c("ImageBlock.react"),{className:c("joinClasses")(this.props.className,n)},c("React").createElement(c("Image.react"),{className:"__6n",src:this.props.attachment.media.image,width:l}),this.renderTextBlock(),this.props.children)};m.prototype.getCSSClasses=function(){var n=this.props.attachment,o=this.props.location;return(c("MercuryShareAttachmentRenderLocations").CHAT===o?"_49or":"")+(c("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW===o?" _324d":"")+(c("MercuryShareAttachmentRenderLocations").CHAT!==o?" _tih":"")+(!(n&&n.media.image)?" _49ou":"")+" _310t"};m.prototype.render=function(){var n=this.props.attachment,o=this.props.location,p=this.getCSSClasses();if(n.media&&n.media.image){if(c("MercuryShareAttachmentRenderLocations").CHAT===o||c("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW===o)return this.renderChatImage(p);else if(c("MercuryShareAttachmentRenderLocations").MESSENGER===o)return this.renderMessengerImage(p);return this.renderDefaultImage(p)}return c("React").createElement("div",{className:c("joinClasses")(this.props.className,p)},this.renderTextBlock(),this.props.children)};function m(){i.apply(this,arguments)}m.propType={attachment:c("MercuryShareAttachmentReactShape"),location:k.oneOf(c("MercuryShareAttachmentRenderLocations").getValues())};f.exports=m}),null);
__d("SaveMessageUtils",["immutable","StoryAttachmentStyle"],(function a(b,c,d,e,f,g){var h=c("immutable").Set.of(c("StoryAttachmentStyle").FALLBACK,c("StoryAttachmentStyle").SHARE,c("StoryAttachmentStyle").EVENT,c("StoryAttachmentStyle").ATTACHED_STORY,c("StoryAttachmentStyle").MUSIC_AGGREGATION,c("StoryAttachmentStyle").AVATAR),i={isSavableMessageAttachment:function j(k){for(var l=0;l<k.length;l++)if(!h.has(k[l]))return false;return true}};f.exports=i}),null);
__d("XMessengerDotComSavedForLaterNuxSeenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/save/savemessagenux/",{})}),null);
__d("MercuryFallbackShareAttachment.react",["cx","fbt","AsyncRequest","CollectionsDisplaySurface","CollectionCurationMechanisms","Link.react","MercuryFallbackShareAttachmentContent.react","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","MessengerAdsWebTypedLogger","MessengerDotComSaveModule","MNAdsLoggerEventEnum","React","ReactFragment","SaveMessageUtils","XMessengerDotComSavedForLaterNuxSeenController","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="focus",n="click",o="scroll",p=1e4,q=3e4;j=babelHelpers.inherits(r,c("React").Component);k=j&&j.prototype;function r(){k.constructor.call(this);this.state={showNux:false,nuxDisabled:false}}r.prototype.renderLink=function(s){if(c("MercuryShareAttachmentRenderLocations").isPreview(this.props.location)||!this.props.attachment.uri)return s;return c("React").createElement(c("Link.react"),{className:"_5rw4",href:this.props.attachment.uri,onClick:this.$MercuryFallbackShareAttachment1.bind(this),target:"_blank"},s,this.renderLayers())};r.prototype.render=function(){return this.renderLink(c("React").createElement(c("MercuryFallbackShareAttachmentContent.react"),babelHelpers["extends"]({ref:"mercury_fallback_share_attachment"},this.props)))};r.prototype.$MercuryFallbackShareAttachment1=function(event){__p&&__p();if(this.props.isSponsored){var s=this.props.attachment&&this.props.attachment.subattachments;if(!s)return;for(var t=s,u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var w;if(u){if(v>=t.length)break;w=t[v++]}else{v=t.next();if(v.done)break;w=v.value}var x=w;new(c("MessengerAdsWebTypedLogger"))().setEvent(c("MNAdsLoggerEventEnum").LINK_CLICK).setIsSponsored(this.props.isSponsored).setItemID(x&&x.id).setMessageID(this.props.messageID).setPageID(this.props.pageID).log()}}if(this.state.nuxDisabled||!this.$MercuryFallbackShareAttachment2())return;this.$MercuryFallbackShareAttachment3();this.interactionTime=0;this.cancelMinConsumeTimeout=setTimeout(function(){if(!this.$MercuryFallbackShareAttachment4())this.setState({showNux:true,nuxDisabled:true})}.bind(this),p);this.cancelMaxConsumeTimeout=setTimeout(function(){if(!this.$MercuryFallbackShareAttachment4()){this.setState({showNux:false,nuxDisabled:false});this.clearTimeouts()}}.bind(this),q);var y=Date.now();this.cancelWindowInteractionTimeout=setTimeout(function(){this.$MercuryFallbackShareAttachment5(function(){if(!this.interactionTime)this.interactionTime=Date.now()-y}.bind(this))}.bind(this),0)};r.prototype.clearTimeouts=function(){__p&&__p();if(this.cancelWindowInteractionTimeout){clearTimeout(this.cancelWindowInteractionTimeout);this.cancelWindowInteractionTimeout=null}if(this.cancelMaxConsumeTimeout){clearTimeout(this.cancelMaxConsumeTimeout);this.cancelMaxConsumeTimeout=null}if(this.cancelMinConsumeTimeout){clearTimeout(this.cancelMinConsumeTimeout);this.cancelMinConsumeTimeout=null}};r.prototype.onNUXCloseButtonClick=function(){this.setState({showNux:false});this.$MercuryFallbackShareAttachment6();this.$MercuryFallbackShareAttachment7();this.clearTimeouts()};r.prototype.renderLayers=function(){return this.$MercuryFallbackShareAttachment2()?c("ReactFragment").create(c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.mercury_fallback_share_attachment}.bind(this),shown:this.state.showNux,onCloseButtonClick:this.onNUXCloseButtonClick.bind(this),position:"below",width:"custom",customwidth:300},i._("You can now save links and videos to Facebook by right clicking on a message."))):null};r.prototype.$MercuryFallbackShareAttachment3=function(){if(!this.$MercuryFallbackShareAttachment8){this.$MercuryFallbackShareAttachment9=[];this.$MercuryFallbackShareAttachment8=[Event.listen(window,"click",this.$MercuryFallbackShareAttachment10.bind(this,n)),Event.listen(window,"focus",this.$MercuryFallbackShareAttachment10.bind(this,m)),Event.listen(window,"scroll",this.$MercuryFallbackShareAttachment10.bind(this,o))]}};r.prototype.$MercuryFallbackShareAttachment10=function(s){this.$MercuryFallbackShareAttachment9.forEach(function(t){t.call(this,s)},this)};r.prototype.$MercuryFallbackShareAttachment5=function(s){this.$MercuryFallbackShareAttachment9.push(s)};r.prototype.$MercuryFallbackShareAttachment4=function(){return this.interactionTime&&this.interactionTime>0};r.prototype.$MercuryFallbackShareAttachment7=function(){if(this.$MercuryFallbackShareAttachment8){while(this.$MercuryFallbackShareAttachment8.length)this.$MercuryFallbackShareAttachment8.pop().remove();this.$MercuryFallbackShareAttachment8=null;this.$MercuryFallbackShareAttachment9=null}};r.prototype.$MercuryFallbackShareAttachment2=function(){return c("MessengerDotComSaveModule").eligible_for_nux&&this.$MercuryFallbackShareAttachment11()};r.prototype.$MercuryFallbackShareAttachment11=function(){var s=this.props.attachment;if(!s)return false;var t=s.style_list;return c("SaveMessageUtils").isSavableMessageAttachment(t)};r.prototype.$MercuryFallbackShareAttachment6=function(){new(c("AsyncRequest"))().setURI(c("XMessengerDotComSavedForLaterNuxSeenController").getURIBuilder().getURI()).setData({action:"impression",surface:c("CollectionsDisplaySurface").MESSENGER_DOT_COM_MESSAGE,mechanism:c("CollectionCurationMechanisms").SAVE_MESSAGE_NUX,object_id:this.props.message_id,collection_id:98}).send()};r.propTypes={attachment:c("MercuryShareAttachmentReactShape"),isSponsored:l.bool,location:l.oneOf(c("MercuryShareAttachmentRenderLocations").getValues()),messageID:l.string,pageID:l.string};f.exports=r}),null);