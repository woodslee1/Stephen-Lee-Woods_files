if (self.CavalryLogger) { CavalryLogger.start_js(["c7808"]); }

__d("PrivacyBaseFilterConst",[],(function a(b,c,d,e,f,g){f.exports={FRIEND_LIST:129,FRIENDS_PLUS_GAMER_FRIENDS:128,FRIENDS_MINUS_ACQUAINTANCES:127,FACEBOOK_EMPLOYEES:112,CUSTOM:111,EVERYONE:80,EVERYONE_MINOR_DEPRECATED:75,NETWORKS_FRIENDS_OF_FRIENDS:60,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,MUTUAL_FRIENDS_DEPRECATED:35,SELF:10,NOBODY:0}}),null);
__d("OldPrivacySelectorTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:OldPrivacySelectorLoggerConfig",this.$OldPrivacySelectorTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:OldPrivacySelectorLoggerConfig",this.$OldPrivacySelectorTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$OldPrivacySelectorTypedLogger1={};return this};h.prototype.updateData=function(j){this.$OldPrivacySelectorTypedLogger1=babelHelpers["extends"]({},this.$OldPrivacySelectorTypedLogger1,j);return this};h.prototype.setAdamaRenderLocation=function(j){this.$OldPrivacySelectorTypedLogger1.adama_render_location=j;return this};h.prototype.setEvent=function(j){this.$OldPrivacySelectorTypedLogger1.event=j;return this};h.prototype.setFbid=function(j){this.$OldPrivacySelectorTypedLogger1.fbid=j;return this};h.prototype.setVC=function(j){this.$OldPrivacySelectorTypedLogger1.vc=j;return this};var i={adama_render_location:true,event:true,fbid:true,vc:true};f.exports=h}),null);
__d("AudienceSelectorTags",[],(function a(b,c,d,e,f,g){var h={},i={hasTags:function j(k){return Object.prototype.hasOwnProperty.call(h,k)},setHasTags:function j(k){if(k)h[k]=true}};f.exports=i}),null);
__d("DynamicIconSelector",["Button","CSS","DOM","SelectorDeprecated"],(function a(b,c,d,e,f,g){__p&&__p();var h={swapIcon:function i(j){var k=c("SelectorDeprecated").getSelectedOptions(j)[0],l=k&&c("DOM").scry(k,".itemIcon")[0],m=c("SelectorDeprecated").getSelectorButton(j);if(l)c("Button").setIcon(m,l.cloneNode(true));else{var n=c("DOM").scry(m,".img")[0];n&&c("DOM").remove(n)}c("CSS").conditionClass(m,"uiSelectorChevronOnly",!l)}};c("SelectorDeprecated").subscribe("change",function(i,j){var k=j.selector;if(c("CSS").hasClass(k,"dynamicIconSelector"))h.swapIcon(k)});f.exports=h}),null);
__d("PrivacySelectorOption",["csx","fbt","Arbiter","AudienceSelectorTags","CSS","CurrentUser","DOM","DynamicIconSelector","Parent","PrivacyBaseFilterConst","PrivacyConst","SelectorDeprecated","intlList"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k,l){__p&&__p();if(!k)throw new Error("there's no DOM option. Config data: ",l);this._elem=k;this._selector=c("Parent").byClass(this._elem,"audienceSelector");if(!this._selector)return;this._priv_base_val=l.priv_base_val;this._audienceCount="";this._hasRestricted=l.has_restricted||false;this._isCustom=l.is_custom||false;this._includedAudience=l.included||"";this._excludedAudience=l.excluded||{};this._excludedTaggees={};this._tagExpansionBehavior=l.tag_expansion_behavior||c("PrivacyConst").TagExpansion.NONE;this._plusLabel=c("DOM").scry(k,".plusLabel")[0];this._audienceCountLabel=c("DOM").scry(k,".audienceCountLabel")[0];this._taggedIDs=[];this._tags=[];this._recalculateTooltipAndLabel();this._updateOptionCountLabel();this._updateSelector();c("Arbiter").subscribe("Composer/changedtags",function(m,n){__p&&__p();var o=c("CSS").hasClass(this._selector,"composerAudienceSelector");if(!this._getChangedData()||!o)return;this._tags=[];this._taggedIDs=[];for(var p=0;p<n.withTags.length;p++){var q=n.withTags[p].info;if(q.uid!=c("CurrentUser").getID()){this._tags.push(q.text);this._taggedIDs.push(q.uid)}}for(var r in n.mention)if(n.mention[r].type=="user"&&n.mention[r].uid!=c("CurrentUser").getID()){this._tags.push(n.mention[r].text);this._taggedIDs.push(n.mention[r].uid)}var s=c("DOM").scry(document.body,"._5l7q")[0];s&&!!this._taggedIDs.length&&c("CSS").hide(s);this._updateOptionCountLabel();var t=this._recalculateTooltipAndLabel();if(t&&c("SelectorDeprecated").isOptionSelected(this._elem)){this._updateSelector();c("Arbiter").inform("SelectedPrivacyOption/changed",this._getChangedData())}}.bind(this));c("SelectorDeprecated").listen(this._selector,"change",this._updateSelector.bind(this))}Object.assign(j.prototype,{updateOption:function k(l,m,n,o,p){this._priv_base_val=l;this._includedAudience=m;this._excludedAudience=n;this._tagExpansionBehavior=o;this._audienceCount=p;this._recalculateTooltipAndLabel();this._updateOptionCountLabel();return{label:this._label,tooltip:this._tooltip}},_recalculateTooltipAndLabel:function k(){var l=this._label;this._label=this._getNewSelectorLabel();var m=this._tooltip;this._tooltip=this._getNewTooltip();return m!=this._tooltip||l!=this._label},_getNewTooltip:function k(){if(this._isCustom)return this._recalcCustomTooltip();switch(this._priv_base_val){case c("PrivacyBaseFilterConst").ALL_FRIENDS:return this._recalcFriendsTooltip();case c("PrivacyBaseFilterConst").FRIENDS_MINUS_ACQUAINTANCES:return this._recalcFriendsMinusTooltip();case c("PrivacyBaseFilterConst").SELF:var l=this._getTagExpansionText();return l?l:this._getIncludedAudience();default:return this._recalcCustomTooltip()}},_getNewSelectorLabel:function k(){var l=this._elem.getAttribute("data-label").replace(/\(.*\)/,"");if(this._showAudienceCount()){var m=" ("+this._audienceCount+")";l+=m}if(this._isTagExpanded())l+=" (+)";return l},_updateOptionCountLabel:function k(){if(this._audienceCountLabel){if(this._showAudienceCount()){var l=" ("+this._audienceCount+")";c("DOM").setContent(this._audienceCountLabel,l)}c("CSS").conditionShow(this._audienceCountLabel,this._showAudienceCount())}this._plusLabel&&c("CSS").conditionShow(this._plusLabel,this._isTagExpanded())},_getChangedData:function k(){return{tags:this._taggedIDs,privacy:this._priv_base_val}},_showAudienceCount:function k(){return this._audienceCountLabel&&this._audienceCount&&this._audienceCount.length>0},_isTagExpanded:function k(){var l=this._getTagExpansionBehavior(),m=!!this._taggedIDs.length||this._alreadyHasTags();return m&&l!=c("PrivacyConst").TagExpansion.NONE},_alreadyHasTags:function k(){var l=c("DOM").scry(this._selector,"*[data-oid]")[0];l=l&&l.getAttribute("data-oid");return l&&c("AudienceSelectorTags").hasTags(l)},_updateSelector:function k(){if(!this._isSharedAlbum()&&c("SelectorDeprecated").isOptionSelected(this._elem)){var l=c("CSS").hasClass(this._selector,"composerAudienceSelector");l&&c("SelectorDeprecated").setButtonLabel(this._selector,this._label);c("SelectorDeprecated").setButtonTooltip(this._selector,this._tooltip);c("DynamicIconSelector").swapIcon(this._selector);return false}return true},_isSharedAlbum:function k(){var l=c("DOM").scry(this._selector,"*[data-shared-album]")[0];return l&&l.getAttribute("data-shared-album")},_getTagExpansionBehavior:function k(){if(this._tagExpansionBehavior)return this._tagExpansionBehavior;var l=this._priv_base_val===c("PrivacyConst").FriendsValue.SELF,m=this._priv_base_val===c("PrivacyConst").FriendsValue.EVERYONE;if(l&&this._isSharedAlbum()||m)return c("PrivacyConst").TagExpansion.NONE;else if(this._priv_base_val<c("PrivacyConst").FriendsValue.ALL_FRIENDS)return c("PrivacyConst").TagExpansion.TAGGEES;return c("PrivacyConst").TagExpansion.FRIENDS_OF_TAGGEES},_getTagExpansionText:function k(){var l=this._getTagExpansionBehavior();if(!!this._taggedIDs.length||this._alreadyHasTags()){if(l==c("PrivacyConst").TagExpansion.FRIENDS_OF_TAGGEES)return i._("friends of anyone tagged");else if(l==c("PrivacyConst").TagExpansion.TAGGEES)return i._("Anyone tagged");return""}return""},_getIncludedAudience:function k(){if(this._includedAudience)return this._includedAudience;var l=this._priv_base_val===c("PrivacyConst").FriendsValue.SELF;if(l&&!this._isSharedAlbum())return i._("Only Me");return this._elem.getAttribute("data-label")},_getCombinedSentence:function k(l,m){if(!m)return l;return i._("{list of people who can see this}; Except: {list of people who cannot see this}",[i.param("list of people who can see this",l),i.param("list of people who cannot see this",m)])},_recalcFriendsTooltip:function k(){__p&&__p();var l=this._tags.length;if(l>2)return this._hasRestricted?i._("Your friends and friends of anyone tagged; Except: Restricted"):i._("Your friends and friends of anyone tagged");else if(l==2)if(this._hasRestricted)return i._("Your friends, {user}'s friends and {user2}'s friends; Except: Restricted",[i.param("user",this._tags[0]),i.param("user2",this._tags[1])]);else return i._("Your friends, {user}'s friends and {user2}'s friends",[i.param("user",this._tags[0]),i.param("user2",this._tags[1])]);else if(l==1)if(this._hasRestricted)return i._("Your friends and {user}'s friends; Except: Restricted",[i.param("user",this._tags[0])]);else return i._("Your friends and {user}'s friends",[i.param("user",this._tags[0])]);else return this._hasRestricted?i._("Your friends; Except: Restricted"):i._("Your friends")},_recalcFriendsMinusTooltip:function k(){__p&&__p();var l=this._tags.length;if(l>0||this._alreadyHasTags()){var m=i._("friends of anyone tagged"),n=i._("{people who can see this}, {list of more people who can see this}",[i.param("people who can see this",i._("Your friends")),i.param("list of more people who can see this",m)]),o=i._("Acquaintances");if(this._hasRestricted)o=i._("{Name of Acquaintances friend list}, {restricted}",[i.param("Name of Acquaintances friend list",o),i.param("restricted",i._("Restricted"))]);return this._getCombinedSentence(n,o)}else{if(this._hasRestricted)return i._("Friends; Except: Acquaintances, Restricted");return i._("Friends except Acquaintances")}},_recalcCustomTooltip:function k(){__p&&__p();var l=this._getIncludedAudience(),m=this._getTagExpansionText();if(m)l=i._("{list of people who can see this}, {list of additional people who can see this}",[i.param("list of people who can see this",l),i.param("list of additional people who can see this",m)]);for(var n=0;n<this._taggedIDs.length;n++){var o=this._taggedIDs[n];if(o in this._excludedAudience){delete this._excludedAudience[o];this._excludedTaggees[o]=this._tags[n];break}}for(var p in this._excludedTaggees)if(Object.prototype.hasOwnProperty.call(this._excludedTaggees,p))if(this._taggedIDs.indexOf(p)===-1){this._excludedAudience[p]=this._excludedTaggees[p];delete this._excludedTaggees[p];break}var q=[];for(var r in this._excludedAudience)if(Object.prototype.hasOwnProperty.call(this._excludedAudience,r))q.push(this._excludedAudience[r]);return this._getCombinedSentence(l,c("intlList")(q))}});f.exports=j}),null);
__d("CustomPrivacyOptionController",["Arbiter","AsyncDialog","AsyncRequest","DOM","Event","Form","Parent","PrivacyConst","PrivacySelectorOption","SelectorDeprecated","XPrivacyCustomDialogController"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){__p&&__p();if(!i)return;setTimeout(function(){__p&&__p();this._selector=c("Parent").byClass(i,"audienceSelector");if(!this._selector)return;this.initCustomState(i,j.option_id,j.id);var k={priv_base_val:j.base_audience_value,audience_count:j.audience_count,is_custom:true,included:j.included_audience,excluded:j.excluded_audience,tag_expansion_behavior:j.tag_expansion_behavior};this._optionJSInstance=new(c("PrivacySelectorOption"))(i,k);c("Event").listen(i,"click",function(event){this.openCustomDialog(event,j.option_id,j.explain_tags,j.autosave,j.limit_community,j.limit_facebook,j.limit_fof,j.limit_tagexpand,j.source)}.bind(this));c("SelectorDeprecated").listen(this._selector,"select",function(l){if(l.option._id!=this._id)this.clearCustomState()}.bind(this))}.bind(this),0)}Object.assign(h,{_instances:{},update:function i(j,k,l,m,n,o,p,q,r){var s=h._instances[j];s._update(k,l)._updateOption(l,n,o,p,q,r);c("Arbiter").inform("Form/change",{node:s._container})},getData:function i(j){var k=h._instances[j];return k&&k._privacyData},setPrivacyData:function i(j,k,l){h._instances[j]._update(k,l)}});Object.assign(h.prototype,{_updateOption:function i(j,k,l,m,n,o){var p=c("SelectorDeprecated").getOption(this._selector,j)||c("SelectorDeprecated").getOption(this._selector,c("PrivacyConst").BaseValue.CUSTOM+""),q=this._optionJSInstance.updateOption(k,l,m,n,o);c("Arbiter").inform("CustomPrivacyOptionController/update",{selector:this._selector,option:p,tooltip:q.tooltip,label:q.label});return this},_update:function i(j,k){var l=k==c("PrivacyConst").BaseValue.CUSTOM||!c("SelectorDeprecated").getOption(this._selector,k),m=this._selector.getAttribute("data-name");this.updateCustomState(j,l,m);return this},initCustomState:function i(j,k,l){h._instances[k]=this;this._container=c("DOM").find(j,".customPrivacyInputs");this._id=l;this._privacyData={};var m=c("Form").serialize(this._container);if(m.audience)this._privacyData=m.audience[l];return j},openCustomDialog:function i(event,j,k,l,m,n,o,p,q){var r=c("XPrivacyCustomDialogController").getURIBuilder().setString("option_id",j).setString("id",this._id).setString("privacy_data",JSON.stringify(this._privacyData)).setBool("explain_tags",k).setBool("autosave",l).setBool("limit_community",m).setBool("limit_facebook",n).setBool("limit_fof",o).setBool("limit_tagexpand",p).setBool("is_new_privacy_selector",false).setString("source",q).getURI(),s=new(c("AsyncRequest"))(r);s.setRelativeTo(event.getTarget());c("AsyncDialog").send(s,function(t){t.subscribe("cancel",function(){c("Arbiter").inform("CustomPrivacyOptionController/cancel",{selector:this._selector})}.bind(this))}.bind(this))},updateCustomState:function i(j,k,l){this.clearCustomState();this._privacyData=babelHelpers["extends"]({},j);if(k)if(l){l=l.slice(0,-"[value]".length);var m={};m[l]=j;c("Form").createHiddenInputs(m,this._container,{},true)}},clearCustomState:function i(){this._privacyData={};c("DOM").empty(this._container)}});f.exports=h}),null);
__d("OldPrivacySelectorEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({RENDER_SELECTOR:"render_selector",OPEN_MENU:"open_menu",CLOSE_MENU:"close_menu",SELECT_EVERYONE:"select_everyone",SELECT_FRIENDS_OF_FRIENDS:"select_friends_of_friends",SELECT_FRIENDS:"select_friends",SELECT_FRIENDS_EXCEPT_ACQUIANTANCES:"select_friends_except_acquaintances",SELECT_ONLY_ME:"select_only_me",SELECT_CUSTOM:"select_custom",CUSTOM_SAVE:"custom_save",CUSTOM_CANCEL:"custom_cancel",SELECT_FB_ONLY:"select_fb_only",SELECT_FRIENDLIST:"select_friendlist",SELECT_OTHER:"select_other",SELECT_SEE_ALL_LISTS:"select_see_all_lists",SELECT_RETURN:"select_return"})}),null);
__d("AudienceSelector",["Arbiter","AsyncRequest","AudienceSelectorTags","CSS","CustomPrivacyOptionController","DOM","DOMQuery","DynamicIconSelector","OldPrivacySelectorEvent","OldPrivacySelectorTypedLogger","PrivacyConst","SelectorDeprecated"],(function a(b,c,d,e,f,g){__p&&__p();var h={};c("SelectorDeprecated").subscribe("select",function(m,n){__p&&__p();if(!c("CSS").hasClass(n.selector,"audienceSelector"))return;var o=c("SelectorDeprecated").getOptionValue(n.option);n.value=o;c("Arbiter").inform("AudienceSelector/changed",n);if(o==c("PrivacyConst").BaseValue.CUSTOM&&!c("CSS").hasClass(n.option,"noDialog")){c("SelectorDeprecated").toggle(n.selector);return false}c("Arbiter").inform("AudienceSelector/changedNonCustomDialogButton",n);if(c("CSS").hasClass(n.selector,"dataTooltip")){var p=c("DOM").find(n.option,".itemAnchor").getAttribute("data-tooltip");c("SelectorDeprecated").setButtonTooltip(n.selector,p||null)}if(!c("CSS").hasClass(n.option,"specialOption"))return;var q=c("DOM").find(n.option,"a").getAttribute("data-type");if(c("CSS").hasClass(n.option,"moreOption")){c("CSS").addClass(n.selector,q);c("CSS").addClass(n.selector,"showSecondaryOptions");return false}else if(c("CSS").hasClass(n.option,"returnOption")){c("CSS").removeClass(n.selector,"showSecondaryOptions");c("CSS").removeClass(n.selector,"friendList");return false}});var i=function i(m,event){var n=j(m,"data-fbid-for-logging"),o=j(m,"data-adama-render-location");new(c("OldPrivacySelectorTypedLogger"))().setEvent(event).setFbid(n).setAdamaRenderLocation(o).log()},j=function j(m,n){var o=m.getAttribute(n);if(o)return o;var p=c("DOMQuery").scry(m,".uiSelectorButton")[0];return p?p.getAttribute(n):null};function k(m){var n=document.documentElement,o=m.getBoundingClientRect();return o.top>=0&&o.bottom<=(window.innerHeight||n.clientHeight)&&o.left>=0&&o.right<=(window.innerWidth||n.clientWidth)}c("SelectorDeprecated").subscribe(["open","close"],function(event,m){if(!c("CSS").hasClass(m.selector,"audienceSelector"))return;var n=c("DOMQuery").scry(m.selector,".uiSelectorMenuWrapper");if(n.length>0){var o=n[0];c("CSS").conditionClass(o,"audienceSelectorUpwards",!k(o))}var p=event==="open"?c("OldPrivacySelectorEvent").OPEN_MENU:c("OldPrivacySelectorEvent").CLOSE_MENU;i(m.selector,p)});var l={keepSynchronized:function m(n,o){h[n]||(h[n]={});h[n][o.id]=o},setHasTags:function m(n){c("AudienceSelectorTags").setHasTags(n)},getComposerInstance:function m(){var n=h["PrivacyLiteNav/audience"];if(n){var o;for(var p in n){o=n[p];return o}}return null},forceAndKeepSynchronized:function m(n,o){l.keepSynchronized(n,o);c("Arbiter").inform("AudienceSelector/update",{option:c("SelectorDeprecated").getSelectedOptions(o)[0],selector:o})},get:function m(n){if(c("CSS").hasClass(n,"audienceSelector"))return n;var o=c("DOM").scry(n,"div.audienceSelector");if(o.length!=1)return;return o[0]},setAudience:function m(n,o){var p=l.get(n);c("SelectorDeprecated").loadMenu(p,function(q){c("SelectorDeprecated").setSelected(p,o.toString());c("DynamicIconSelector").swapIcon(p);var r=c("SelectorDeprecated").getSelectedOptions(p),s=r[0]&&c("DOM").find(r[0],"a");if(s&&s.getAttribute("ajaxify"))c("AsyncRequest").bootstrap(s.getAttribute("ajaxify"),s,true);c("Arbiter").inform("AudienceSelector/changed",{option:r[0],selector:p})})}};c("Arbiter").subscribe("CustomPrivacyOptionController/update",function(m,n){__p&&__p();if(!c("CSS").hasClass(n.selector,"audienceSelector"))return;c("SelectorDeprecated").setSelected(n.selector,c("SelectorDeprecated").getOptionValue(n.option));c("DynamicIconSelector").swapIcon(n.selector);var o=c("CSS").hasClass(n.selector,"composerAudienceSelector");if(o)c("SelectorDeprecated").setButtonLabel(n.selector,n.label);c("SelectorDeprecated").setButtonTooltip(n.selector,n.tooltip);i(n.selector,c("OldPrivacySelectorEvent").CUSTOM_SAVE);c("Arbiter").inform("AudienceSelector/update",n)});c("Arbiter").subscribe("CustomPrivacyOptionController/cancel",function(m,n){if(!c("CSS").hasClass(n.selector,"audienceSelector"))return;i(n.selector,c("OldPrivacySelectorEvent").CUSTOM_CANCEL)});c("Arbiter").subscribe(["AudienceSelector/changed","AudienceSelector/update"],function(event,m){__p&&__p();var n=c("SelectorDeprecated").getOptionValue(m.option),o=null;if(n==c("PrivacyConst").BaseValue.EVERYONE)o=c("OldPrivacySelectorEvent").SELECT_EVERYONE;else if(n==c("PrivacyConst").BaseValue.FRIENDS_OF_FRIENDS)o=c("OldPrivacySelectorEvent").SELECT_FRIENDS_OF_FRIENDS;else if(n==c("PrivacyConst").BaseValue.ALL_FRIENDS)o=c("OldPrivacySelectorEvent").SELECT_FRIENDS;else if(n==c("PrivacyConst").BaseValue.FRIENDS_MINUS_ACQUAINTANCES)o=c("OldPrivacySelectorEvent").SELECT_FRIENDS_EXCEPT_ACQUIANTANCES;else if(n==c("PrivacyConst").BaseValue.SELF)o=c("OldPrivacySelectorEvent").SELECT_ONLY_ME;else if(n==c("PrivacyConst").BaseValue.CUSTOM){if(event==="AudienceSelector/changed")o=c("OldPrivacySelectorEvent").SELECT_CUSTOM}else if(n==c("PrivacyConst").BaseValue.FACEBOOK_EMPLOYEES)o=c("OldPrivacySelectorEvent").SELECT_FB_ONLY;else if(c("CSS").hasClass(m.option,"friendListOption"))o=c("OldPrivacySelectorEvent").SELECT_FRIENDLIST;else if(c("CSS").hasClass(m.option,"moreOption"))o=c("OldPrivacySelectorEvent").SELECT_SEE_ALL_LISTS;else if(c("CSS").hasClass(m.option,"returnOption"))o=c("OldPrivacySelectorEvent").SELECT_RETURN;else o=c("OldPrivacySelectorEvent").SELECT_OTHER;if(o!=null)i(m.selector,o);var p={};if(n==c("PrivacyConst").BaseValue.CUSTOM){if(event=="AudienceSelector/changed")return;p=c("CustomPrivacyOptionController").getData(m.option.id);if(!p)return}for(var q in h){var r=h[q];if(r[m.selector.id]){c("Arbiter").inform("AudienceSelector/syncNonSelectorIcon",{category:q});for(var s in r){var t=r[s];if(!t||m.selector===t)continue;if(c("SelectorDeprecated").getValue(t)!==n){c("SelectorDeprecated").setSelected(t,n);c("DynamicIconSelector").swapIcon(t)}if(n==c("PrivacyConst").BaseValue.CUSTOM){var u=c("SelectorDeprecated").getOption(t,c("PrivacyConst").BaseValue.CUSTOM+"");if(u){c("CustomPrivacyOptionController").setPrivacyData(u.id,p,n);c("SelectorDeprecated").setButtonTooltip(t,m.tooltip)}}}}}});f.exports=l}),null);
__d("XStickyComposerChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/privacy/sticky_composer/change/",{privacyx:{type:"String"},logging_source:{type:"String"}})}),null);
__d("PrivacySelector",["csx","Promise","regeneratorRuntime","Arbiter","ArbiterMixin","AsyncRequest","AudienceSelector","CSS","DOM","PrivacyConst","DataStore","PrivacySelectorNewDispatcher","Run","SelectorDeprecated","SubscriptionsHandler","XStickyComposerChangeController","mixin"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("mixin")(c("ArbiterMixin")));j=i&&i.prototype;function k(l){"use strict";__p&&__p();j.constructor.call(this);if(l instanceof HTMLElement)this.$PrivacySelector3=l;else this.$PrivacySelector1=l;this.$PrivacySelector7=null;this.$PrivacySelector6=new(c("SubscriptionsHandler"))();this.$PrivacySelector5=new(c("SubscriptionsHandler"))();if(this.$PrivacySelector1!=null)this.$PrivacySelector8();else this.$PrivacySelector9();c("Run").onLeave(this.cleanup.bind(this))}k.prototype.select=function(l,m,n){"use strict";__p&&__p();if(l==null||m==null)throw new Error("PrivacySelector.select: you must pass in privacyParam and privacyBase");if(this.$PrivacySelector1!=null){var o=this.$PrivacySelector1;n&&this.$PrivacySelector6.addSubscriptions(o.subscribeOnce("changed",function(p,q){n&&n("changed",{post_param:q.post_param})}));o.selectOption(l)}else{n&&this.$PrivacySelector5.addSubscriptions(c("Arbiter").subscribe("AudienceSelector/changed",function(p,q){if(this.$PrivacySelector10(q.selector)){var r=c("SelectorDeprecated").getOptionValue(q.option);n&&n("changed",{privacy_base:r})}}.bind(this)));c("AudienceSelector").setAudience(this.$PrivacySelector3,m)}};k.prototype.expandFull=function(l){"use strict";if(this.$PrivacySelector1!=null)this.$PrivacySelector1.openSelectorExpanded(l);else this.expand(l)};k.prototype.expandFullAndShowFlyout=function(l){"use strict";this.expandFull(this.showFlyoutOnMenu.bind(this,l))};k.prototype.expand=function(l){"use strict";__p&&__p();if(this.$PrivacySelector1!=null)this.$PrivacySelector1.openSelector(l);else{var m=c("SelectorDeprecated").getSelectorMenu(this.$PrivacySelector3);if(!m)c("SelectorDeprecated").loadMenu(this.$PrivacySelector3,function(){l&&l()});else this.$PrivacySelector5.addSubscriptions(c("SelectorDeprecated").listen(this.$PrivacySelector3,"open",function(){l&&l();this.$PrivacySelector10(this.$PrivacySelector3)}.bind(this)));c("SelectorDeprecated").toggle(this.$PrivacySelector3,l)}};k.prototype.showFlyoutOnMenu=function(l){"use strict";__p&&__p();this.$PrivacySelector2&&this.$PrivacySelector2.hide();this.$PrivacySelector2=l;var m=void 0;if(this.$PrivacySelector1!=null){m=this.$PrivacySelector1.getMenuElement();l.setOffsetY(85)}else{m=c("DOM").scry(this.$PrivacySelector3,"div.uiSelectorMenuWrapper")[0];l.setOffsetY(13)}l.setContext(m);l.show()};k.prototype.setOnClose=function(l){"use strict";this.$PrivacySelector7=l};k.prototype.cleanup=function(){"use strict";this.$PrivacySelector6.release();this.$PrivacySelector6=new(c("SubscriptionsHandler"))();this.$PrivacySelector5.release();this.$PrivacySelector5=new(c("SubscriptionsHandler"))();this.$PrivacySelector2&&this.$PrivacySelector2.hide();this.$PrivacySelector2=null;this.$PrivacySelector7=null};k.prototype.disable=function(){"use strict";if(this.$PrivacySelector1!=null)this.$PrivacySelector1.disable();else c("SelectorDeprecated").setEnabled(this.$PrivacySelector3,false)};k.prototype.enable=function(){"use strict";if(this.$PrivacySelector1!=null)this.$PrivacySelector1.enable();else c("SelectorDeprecated").setEnabled(this.$PrivacySelector3,true)};k.get=function(l){"use strict";if(!l)return null;var m=k.getAdamaSelectorInstance(l);if(m)return new k(m);return new k(l)};k.genAndThen=function(l,m){"use strict";__p&&__p();var n=k.getViableIDsForSelectorFetch(l);if(!n.length)return;var o=k.$PrivacySelector12(n),p=o.then(function(q){var r=q[0],s=q[1];m(r);return[r,s]});p.done(function(q){var r=q[0],s=q[1];k.$PrivacySelector11[s]=p})};k.getViableIDsForSelectorFetch=function(l){"use strict";var m=[];if(l.id)m.push(l.id);var n=k.getDOMFromStory(l);if(n&&n.id)m.push(n.id);return m};k.$PrivacySelector12=function(l){"use strict";__p&&__p();for(var m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p,r=k.$PrivacySelector11[q];if(r!=null)return r}return new(c("Promise"))(function s(t){__p&&__p();var u;return c("regeneratorRuntime").async(function v(w){__p&&__p();while(1)switch(w.prev=w.next){case 0:u=null;case 1:if(u=k.$PrivacySelector13(l)){w.next=6;break}w.next=4;return c("regeneratorRuntime").awrap(new(c("Promise"))(function(t){return setTimeout(t,500)}));case 4:w.next=1;break;case 6:t(u);case 7:case"end":return w.stop()}},null,this)})};k.$PrivacySelector13=function(l){"use strict";__p&&__p();for(var m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p,r=c("DataStore").get(q,"selector");if(r)return[r,q]}return null};k.getAdamaSelectorInstance=function(l){"use strict";return k.$PrivacySelector14(l)||k.$PrivacySelector14(k.getDOMFromStory(l))};k.$PrivacySelector14=function(l){"use strict";var m=l&&l.id;if(!m)return null;return c("DataStore").get(m,"selector")};k.getDOMFromStory=function(l){"use strict";if(!l)return null;var m=c("DOM").scry(l,"._43_1")[0];if(m)return m;return c("AudienceSelector").get(l)};k.getIconFromSelectorDOM=function(l){"use strict";return c("DOM").scry(l,"i.img")[0]};k.setComposerPrivacy=function(l,m,n){"use strict";var o=c("XStickyComposerChangeController").getURIBuilder().setString("privacyx",l).setString("logging_source",n);new(c("AsyncRequest"))(o.getURI()).send();c("PrivacySelectorNewDispatcher").handleUpdateFromSelector({selector_type:c("PrivacyConst").PrivacyField.CURRENT_COMPOSER,post_param:l,unique_value:"_updateStickyComposerPrivacy"});var p=c("AudienceSelector").getComposerInstance(m);if(p)c("AudienceSelector").setAudience(p,m)};k.isFakeOrUneditableSelector=function(l){"use strict";return c("CSS").matchesSelector(l,"._2qwi")||c("CSS").matchesSelector(l,"._29ee")||c("CSS").matchesSelector(l,"._jl")||c("DOM").scry(l,"._2qwi")[0]||c("DOM").scry(l,"._29ee")[0]||c("DOM").scry(l,"._jl")[0]};k.prototype.$PrivacySelector8=function(){"use strict";var l=this.$PrivacySelector1;if(!l)return;this.$PrivacySelector6.addSubscriptions(l.subscribe("changed",function(m,n){return this.inform("changed",{post_param:n.post_param})}.bind(this)),l.subscribe("selectorFinished",function(){return this.$PrivacySelector7&&this.$PrivacySelector7()}.bind(this)))};k.prototype.$PrivacySelector9=function(){"use strict";__p&&__p();this.$PrivacySelector6.addSubscriptions(c("Arbiter").subscribe("AudienceSelector/update",function(l,m){if(this.$PrivacySelector3!==m.selector)return;var n=c("SelectorDeprecated").getOptionValue(m.option);this.inform("changed",{privacy_base:n})}.bind(this)),c("Arbiter").subscribe("AudienceSelector/changed",function(l,m){if(this.$PrivacySelector3!==m.selector)return;if(c("CSS").hasClass(m.option,"moreOption")||c("CSS").hasClass(m.option,"returnOption"))return;if(m.value!=c("PrivacyConst").BaseValue.CUSTOM)this.inform("changed",{privacy_base:m.value});else if(m.value==c("PrivacyConst").BaseValue.CUSTOM)this.$PrivacySelector4=true}.bind(this)),c("SelectorDeprecated").listen(this.$PrivacySelector3,"close",function(){if(this.$PrivacySelector4){this.$PrivacySelector4=false;return}this.$PrivacySelector7&&this.$PrivacySelector7()}.bind(this)),c("Arbiter").subscribe("CustomPrivacyOptionController/cancel",function(l,m){if(this.$PrivacySelector3!==m.selector)return;this.$PrivacySelector7&&this.$PrivacySelector7()}.bind(this)))};k.prototype.$PrivacySelector10=function(l){"use strict";if(l!=this.$PrivacySelector3)return false;this.$PrivacySelector5.release();this.$PrivacySelector5=new(c("SubscriptionsHandler"))();return true};k.$PrivacySelector11={};f.exports=k}),null);
__d("ReactComposerAudienceSelectorFunnelLogginConstants",[],(function a(b,c,d,e,f,g){"use strict";f.exports={FUNNEL_LOGGING_NAME:"CASUAL_GROUP_PICKER_FUNNEL",SEE_NEXT_BUTTON:"SEE_NEXT_BUTTON",TAP_NEXT_BUTTON:"TAP_NEXT_BUTTON",INITIAL_GROUPS_LOAD:"INITIAL_GROUPS_LOAD",SELECTED_POST_OPTION:"SELECTED_POST_OPTION",TAP_PRIVACY_OPTION:"TAP_PRIVACY_OPTION",BACK_FROM_PRIVACY_SELECTOR:"BACK_FROM_PRIVACY_SELECTOR",TAP_CREATE_GROUP_OPTION:"TAP_CREATE_GROUP_OPTION",TAP_CANCEL_IN_CREATE_GROUP:"TAP_CANCEL_IN_CREATE_GROUP",BACK_FROM_CREATE_GROUP:"BACK_FROM_CREATE_GROUP",LOAD_MORE_GROUPS_BUTTON:"LOAD_MORE_GROUPS_BUTTON",SELECTED_GROUP:"SELECTED_GROUP",SEE_MORE_BUTTON:"SEE_MORE_BUTTON",SEE_SHARESHEET_SELECTOR:"SEE_SHARESHEET_SELECTOR",SELECT_PRIVACY_OPTION:"SELECT_PRIVACY_OPTION",TAP_POST_BUTTON:"TAP_POST_BUTTON",TAP_POST_BUTTON_ERROR:"TAP_POST_BUTTON_ERROR",TAP_POST_BUTTON_SUCCESS:"TAP_POST_BUTTON_SUCCESS",TAP_CONFIRM_CREATE_GROUP_BUTTON:"TAP_CONFIRM_CREATE_GROUP_BUTTON",TAP_CREATE_GROUP_AND_POST_BUTTON:"TAP_CREATE_GROUP_AND_POST_BUTTON",TAP_SNAP_GROUP:"TAP_SNAP_GROUP",TAP_SHARESHEET_SELECTOR:"TAP_SHARESHEET_SELECTOR",TAP_CREATE_GROUP_AND_POST_BUTTON_ERROR:"TAP_CREATE_GROUP_AND_POST_BUTTON_ERROR",PROFILE_ENTRY_POINT:"PROFILE_ENTRY_POINT",TAP_CREATE_GROUP_FROM_PROFILE:"TAP_CREATE_GROUP_FROM_PROFILE",TAP_CREATE_GROUP_FROM_PROFILE_SUCCESS:"TAP_CREATE_GROUP_FROM_PROFILE_SUCCESS",TAP_CREATE_GROUP_FROM_PROFILE_FAILURE:"TAP_CREATE_GROUP_FROM_PROFILE_FAILURE",TAP_CANCEL_IN_PROFILE_CREATE_GROUP:"TAP_CANCEL_IN_PROFILE_CREATE_GROUP"}}),null);
__d("ReactComposerAudienceActions",["ReactComposerAudienceActionTypes","ReactComposerDispatcher","ReactComposerAudienceStore"],(function a(b,c,d,e,f,g){__p&&__p();c("ReactComposerAudienceStore");var h={setAudience:function i(j,k,l,m){c("ReactComposerDispatcher").dispatch({composerID:j,type:c("ReactComposerAudienceActionTypes").SET_AUDIENCE,audience:k,legacyAudience:l,sourceLoggingName:m})},setAudienceWithoutLogging:function i(j,k,l){c("ReactComposerDispatcher").dispatch({composerID:j,type:c("ReactComposerAudienceActionTypes").SET_AUDIENCE,audience:k,legacyAudience:l,suppressWaterfallLogging:true})},setAudienceElement:function i(j,k){c("ReactComposerDispatcher").dispatch({composerID:j,type:c("ReactComposerAudienceActionTypes").SET_AUDIENCE_ELEMENT,audienceElement:k})},setAudienceInstance:function i(j,k){c("ReactComposerDispatcher").dispatch({composerID:j,type:c("ReactComposerAudienceActionTypes").SET_AUDIENCE_INSTANCE,audienceInstance:k})},setPrivacyxNullDangerous:function i(j,k){c("ReactComposerDispatcher").dispatch({composerID:j,type:c("ReactComposerAudienceActionTypes").SET_PRIVACYX_NULL_DANGEROUS,privacyxNullDangerous:k})},setCollectionID:function i(j,k,l,m){c("ReactComposerDispatcher").dispatch({composerID:j,sourceLoggingName:k,type:c("ReactComposerAudienceActionTypes").SET_COLLECTION,collectionID:l,privacyLabel:m})},setCollectionIDWithoutLogging:function i(j,k){c("ReactComposerDispatcher").dispatch({composerID:j,suppressWaterfallLogging:true,type:c("ReactComposerAudienceActionTypes").SET_COLLECTION,collectionID:k})}};f.exports=h}),null);
__d("ReactComposerAudienceSelector.react",["cx","DOM","PrivacySelector","React","ReactDOM","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=1.5,l=20,m=500;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(){var o,p;"use strict";for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$ReactComposerAudienceSelector1=l,this.$ReactComposerAudienceSelector2=null,this.$ReactComposerAudienceSelector3=null,this.state={loading:true},this.$ReactComposerAudienceSelector8=function(t,u){if(!this.$ReactComposerAudienceSelector4)this.props.onChange(u)}.bind(this),p}n.prototype.componentDidMount=function(){"use strict";this.$ReactComposerAudienceSelector4=false;this.$ReactComposerAudienceSelector5()};n.prototype.componentWillUnmount=function(){"use strict";this.$ReactComposerAudienceSelector4=true;this.$ReactComposerAudienceSelector2&&clearTimeout(this.$ReactComposerAudienceSelector2);this.$ReactComposerAudienceSelector3&&clearTimeout(this.$ReactComposerAudienceSelector3)};n.prototype.componentDidUpdate=function(o,p){"use strict";if(this.props.audienceXHP!==o.audienceXHP)this.$ReactComposerAudienceSelector5()};n.prototype.render=function(){"use strict";return c("React").createElement("div",{ref:"audienceSelector",className:c("joinClasses")("_5dd8"+(this.state.loading?" _2hio":""),this.props.className)})};n.prototype.$ReactComposerAudienceSelector5=function(){"use strict";if(this.props.viewerIsTarget)this.$ReactComposerAudienceSelector6();if(this.refs&&this.refs.audienceSelector)c("DOM").setContent(c("ReactDOM").findDOMNode(this.refs.audienceSelector),this.props.audienceXHP);else this.$ReactComposerAudienceSelector7()};n.prototype.$ReactComposerAudienceSelector7=function(){"use strict";this.$ReactComposerAudienceSelector3=setTimeout(function(){if(this.refs&&this.refs.audienceSelector)c("DOM").setContent(c("ReactDOM").findDOMNode(this.refs.audienceSelector),this.props.audienceXHP);else this.$ReactComposerAudienceSelector7()}.bind(this),100)};n.prototype.$ReactComposerAudienceSelector6=function(){"use strict";__p&&__p();this.$ReactComposerAudienceSelector2=setTimeout(function(){var o=c("PrivacySelector").getAdamaSelectorInstance(this.props.audienceXHP);if(o){o.subscribe("changed",this.$ReactComposerAudienceSelector8);this.setState({loading:false})}else{this.$ReactComposerAudienceSelector1=Math.min(this.$ReactComposerAudienceSelector1*k,m);this.$ReactComposerAudienceSelector6()}}.bind(this),this.$ReactComposerAudienceSelector1)};f.exports=n}),null);
__d("XReactComposerCollectionSelectorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/react_composer/collections/selector/",{spaces_aware:{type:"Bool",defaultValue:false}})}),null);
__d("ReactComposerCollectionsStore",["AsyncRequest","LoadObject","ReactComposerActionStore","ReactComposerCollectionsActionTypes","XReactComposerCollectionSelectorController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ReactComposerActionStore"));i=h&&h.prototype;function j(){__p&&__p();var k=void 0;i.constructor.call(this,function(){return{collectionsLoadObject:null,isSelectorVisible:false}},function(l){__p&&__p();switch(l.type){case c("ReactComposerCollectionsActionTypes").SHOW_COLLECTION_SELECTOR:k&&k.$ReactComposerCollectionsStore1(l);break;case c("ReactComposerCollectionsActionTypes").HIDE_COLLECTION_SELECTOR:k&&k.$ReactComposerCollectionsStore2(l);break;case c("ReactComposerCollectionsActionTypes").SHOW_CREATION_LAYER:k&&k.$ReactComposerCollectionsStore3(l);break;case c("ReactComposerCollectionsActionTypes").HIDE_CREATION_LAYER:k&&k.$ReactComposerCollectionsStore4(l);break;case c("ReactComposerCollectionsActionTypes").SHOW_SHARING_SPACE_CREATION_LAYER:k&&k.$ReactComposerCollectionsStore5(l);break;case c("ReactComposerCollectionsActionTypes").HIDE_SHARING_SPACE_CREATION_LAYER:k&&k.$ReactComposerCollectionsStore6(l);break}});k=this}j.prototype.loadCollections=function(k){var l=this.getComposerData(k);l.collectionsLoadObject=c("LoadObject").loading();var m=c("XReactComposerCollectionSelectorController").getURIBuilder().setBool("spaces_aware",true).getURI();new(c("AsyncRequest"))().setURI(m).setMethod("GET").setReadOnly(true).setHandler(function(n){var l=this.getComposerData(k),o={albums:n.payload.albums};if(n.payload.sharing_spaces)o.sharingSpaces=n.payload.sharing_spaces;l.collectionsLoadObject=l.collectionsLoadObject.setValue(o).done();this.emitChange(k)}.bind(this)).send()};j.prototype.addNewAlbum=function(k,l){this.$ReactComposerCollectionsStore7("albums",k,l)};j.prototype.addNewSharingSpace=function(k,l){this.$ReactComposerCollectionsStore7("sharingSpaces",k,l)};j.prototype.$ReactComposerCollectionsStore7=function(k,l,m){__p&&__p();var n=this.getCollections(l);if(!n||!n.isDone())return;var o=n.getValue();if(o==null)return;var p=o[k];if(!p)p=[];p.unshift(m);this.emitChange(l)};j.prototype.getCollections=function(k){var l=this.getComposerData(k);return l.collectionsLoadObject};j.prototype.getCollectionByID=function(k,l){var m=this.getComposerData(k),n=m.collectionsLoadObject;if(!n||!n.isDone())return null;var o=n.getValue();return o.albums&&o.albums.find(function(p){return p.id===l})||o.sharingSpaces&&o.sharingSpaces.find(function(p){return p.id===l})};j.prototype.isSelectorVisible=function(k){var l=this.getComposerData(k);return l.isSelectorVisible};j.prototype.$ReactComposerCollectionsStore1=function(k){var l=this.validateAction(k,"composerID"),m=this.getComposerData(l);if(!m.collectionsLoadObject)this.loadCollections(l);m.isSelectorVisible=true;this.emitChange(l)};j.prototype.$ReactComposerCollectionsStore2=function(k){var l=this.validateAction(k,"composerID"),m=this.getComposerData(l);m.isSelectorVisible=false;this.emitChange(l)};j.prototype.isCreationLayerVisible=function(k){var l=this.getComposerData(k);return l.isCreationLayerVisible};j.prototype.$ReactComposerCollectionsStore3=function(k){var l=this.validateAction(k,"composerID"),m=this.getComposerData(l);m.isCreationLayerVisible=true;this.emitChange(l)};j.prototype.$ReactComposerCollectionsStore4=function(k){var l=this.validateAction(k,"composerID"),m=this.getComposerData(l);m.isCreationLayerVisible=false;this.emitChange(l)};j.prototype.isSharingSpaceCreationLayerVisible=function(k){var l=this.getComposerData(k);return l.isSharingSpaceCreationLayerVisible};j.prototype.$ReactComposerCollectionsStore5=function(k){var l=this.validateAction(k,"composerID"),m=this.getComposerData(l);m.isSharingSpaceCreationLayerVisible=true;this.emitChange(l)};j.prototype.$ReactComposerCollectionsStore6=function(k){var l=this.validateAction(k,"composerID"),m=this.getComposerData(l);m.isSharingSpaceCreationLayerVisible=false;this.emitChange(l)};f.exports=new j()}),null);
__d("ReactComposerAudienceSelectorContainer.react",["csx","cx","invariant","fbt","ReactComposerAudienceActions","ReactComposerAudienceSelector.react","ReactComposerAudienceStore","ReactComposerEvents","ReactComposerLoggingName","ReactComposerStatusStore","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerPrefillStore","ReactComposerCollectionsStore","Arbiter","CSS","DOM","BackgroundImage.react","FluxContainer","FunnelLogger","PrivacySelector","React","ReactComposerContextTypes","TooltipData","XUIPopoverButton.react","ReactComposerAudienceSelectorFunnelLogginConstants"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l,m,n=c("ReactComposerAudienceSelectorFunnelLogginConstants").FUNNEL_LOGGING_NAME,o=c("ReactComposerAudienceSelectorFunnelLogginConstants").TAP_PRIVACY_OPTION;l=babelHelpers.inherits(p,c("React").PureComponent);m=l&&l.prototype;function p(q,r){"use strict";__p&&__p();m.constructor.call(this,q);this.$ReactComposerAudienceSelectorContainer1=null;this.$ReactComposerAudienceSelectorContainer3=function(s){if(this.props.className)c("FunnelLogger").appendAction(n,o,s.privacy_base);c("ReactComposerAudienceActions").setAudience(this.context.composerID,s.post_param,s.privacy_base,c("ReactComposerLoggingName").AUDIENCE_SELECTOR);if(this.props.onAudienceChanged)this.props.onAudienceChanged()}.bind(this);this.$ReactComposerAudienceSelectorContainer2=function(){var s=c("ReactComposerPrefillStore").getField(this.context.composerID,"albumData");if(s&&s.albumID){c("ReactComposerCollectionsStore").loadCollections(this.context.composerID);c("ReactComposerAudienceActions").setCollectionIDWithoutLogging(this.context.composerID,s.albumID)}}.bind(this);this.beforeCalculateInitialState(r.composerID,q,r)}p.prototype.beforeCalculateInitialState=function(q,r,s){"use strict";__p&&__p();var t=r.audienceXHP,u=void 0,v=c("PrivacySelector").getAdamaSelectorInstance(t);c("ReactComposerAudienceActions").setAudienceElement(q,r.audienceXHP);c("ReactComposerAudienceActions").setAudienceInstance(q,v);if(!t||!r.viewerIsTarget)return;if(v)u=v.getPostParam();var w=void 0;if(!v)w=c("DOM").scry(t,'select option[selected="1"]').pop();if(!v&&!w){var x=c("DOM").scry(t,'input[name="privacyx"]')[0];if(x)u=x.value}!!(u||w)||c("PrivacySelector").isFakeOrUneditableSelector(t)||s.actorID||j(0);c("ReactComposerAudienceActions").setAudienceWithoutLogging(q,u,w?w.value:null)};p.getStores=function(){"use strict";return[c("ReactComposerAudienceStore"),c("ReactComposerStatusStore"),c("ReactComposerTaggerStore"),c("ReactComposerCollectionsStore")]};p.calculateState=function(q,r,s){"use strict";__p&&__p();var t=s.composerID;if(!r.ignoreCollectionAudience){var u=c("ReactComposerAudienceStore").getCollectionID(t);if(u){var v=c("ReactComposerCollectionsStore").getCollectionByID(t,u)||c("ReactComposerPrefillStore").getField(t,"albumData");if(v)return{collectionPrivacyIcon:v.privacyIcon,collectionPrivacyLabel:v.privacyLabel,collectionOwnerName:v.ownerName}}}var w=c("ReactComposerStatusStore").getMentions(t),x=c("ReactComposerTaggerStore").getTaggerData(t,c("ReactComposerTaggerType").PEOPLE)||[],y=x.map(function(A){return{info:{type:A.getType(),uid:A.getUniqueID(),text:A.getTitle()}}}),z=c("CSS").matchesSelector(r.audienceXHP,"._43_1")?r.audienceXHP:c("DOM").scry(r.audienceXHP,"._43_1")[0];if(z!=null)c("PrivacySelector").genAndThen(z,function(A){A.informTagsChanged({withTags:y,mention:w})});return{collectionPrivacyIcon:null,collectionPrivacyLabel:null,collectionOwnerName:null}};p.prototype.componentWillMount=function(){"use strict";this.$ReactComposerAudienceSelectorContainer2();this.$ReactComposerAudienceSelectorContainer1=c("Arbiter").subscribe(c("ReactComposerEvents").SET_PREFILL_DATA+this.context.composerID,this.$ReactComposerAudienceSelectorContainer2)};p.prototype.componentWillUnmount=function(){"use strict";this.$ReactComposerAudienceSelectorContainer1&&this.$ReactComposerAudienceSelectorContainer1.unsubscribe();this.$ReactComposerAudienceSelectorContainer1=null};p.prototype.render=function(){"use strict";if(this.state.collectionPrivacyIcon&&this.state.collectionPrivacyLabel){var q=this.state.collectionOwnerName?k._("{albumOwnerName} controls who can see what's posted in this album",[k.param("albumOwnerName",this.state.collectionOwnerName)]):null,r=c("React").createElement(c("XUIPopoverButton.react"),babelHelpers["extends"]({className:"_5dd8",disabled:true,image:c("React").createElement(c("BackgroundImage.react"),{backgroundPosition:"100% 50%",className:"_3byx",height:12,src:this.state.collectionPrivacyIcon,width:12}),label:this.state.collectionPrivacyLabel},c("TooltipData").propsFor(q)));return r}else return c("React").createElement(c("ReactComposerAudienceSelector.react"),babelHelpers["extends"]({},this.props,{onChange:this.$ReactComposerAudienceSelectorContainer3}))};p.contextTypes=c("ReactComposerContextTypes");f.exports=c("FluxContainer").create(p,{withContext:true,withProps:true})}),null);